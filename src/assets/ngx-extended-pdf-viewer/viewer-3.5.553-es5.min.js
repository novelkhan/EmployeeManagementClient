window.ngxZone.runOutsideAngular(() => {
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
!function webpackUniversalModuleDefinition(t,r){"object"==typeof exports&&"object"==typeof module?globalThis["pdfjs-dist/build/pdf"]=module.exports=r():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],r):"object"==typeof exports?globalThis["pdfjs-dist/build/pdf"]=exports["pdfjs-dist/build/pdf"]=r():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=r()}(globalThis,(()=>(()=>{var __webpack_modules__=[,(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.RenderingIntentFlag=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.MAX_IMAGE_SIZE_TO_CACHE=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.BASELINE_FACTOR=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0;r.assert=function assert(t,r){t||unreachable(r)};r.bytesToString=function bytesToString(t){"object"===_typeof(t)&&null!==t&&void 0!==t.length||unreachable("Invalid argument for bytesToString");var r=t.length,i=8192;if(r<i)return String.fromCharCode.apply(null,t);for(var a=[],o=0;o<r;o+=i){var l=Math.min(o+i,r),c=t.subarray(o,l);a.push(String.fromCharCode.apply(null,c))}return a.join("")};r.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),r=!1;Object.defineProperty(t,"settled",{get:function get(){return r}});t.promise=new Promise((function(i,a){t.resolve=function(t){r=!0;i(t)};t.reject=function(t){r=!0;a(t)}}));return t};r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){var a=t.match(/\./g);a&&a.length>=2&&(t="http://".concat(t))}if(i.tryConvertEncoding)try{t=stringToUTF8String(t)}catch(t){}}var o=r?new URL(t,r):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return!0;default:return!1}}(o))return o}catch(t){}return null};r.getModificationDate=function getModificationDate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")};r.getVerbosityLevel=function getVerbosityLevel(){return o};r.info=function info(t){o>=a.INFOS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log("Info: ".concat(t)):Window&&globalThis.ngxConsole?globalThis.ngxConsole.log("Info: ".concat(t)):console.log("Info: ".concat(t)))};r.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength};r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;for(var i=0,a=t.length;i<a;i++)if(t[i]!==r[i])return!1;return!0};r.objectFromMap=function objectFromMap(t){var r,i=Object.create(null),a=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}(t);try{for(a.s();!(r=a.n()).done;){var o=(u=r.value,d=2,function _arrayWithHoles(t){if(Array.isArray(t))return t}(u)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(u,d)||_unsupportedIterableToArray(u,d)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],c=o[1];i[l]=c}}catch(t){a.e(t)}finally{a.f()}var u,d;return i};r.objectSize=function objectSize(t){return Object.keys(t).length};r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(o=t)};r.shadow=shadow;r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};r.stringToBytes=stringToBytes;r.stringToPDFString=function stringToPDFString(t){if(t[0]>="ï"){var r;"þ"===t[0]&&"ÿ"===t[1]?r="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?r="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(r="utf-8");if(r)try{var i=new TextDecoder(r,{fatal:!0}),a=stringToBytes(t);return i.decode(a)}catch(t){warn('stringToPDFString: "'.concat(t,'".'))}}for(var o=[],l=0,c=t.length;l<c;l++){var u=w[t.charCodeAt(l)];o.push(u?String.fromCharCode(u):t.charAt(l))}return o.join("")};r.stringToUTF8String=stringToUTF8String;r.unreachable=unreachable;r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))};r.warn=warn;function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=!0;i(2)}r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.MAX_IMAGE_SIZE_TO_CACHE=1e7;r.LINE_FACTOR=1.35;r.LINE_DESCENT_FACTOR=.35;r.BASELINE_FACTOR=.25925925925925924;r.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationEditorPrefix="pdfjs_internal_editor_";r.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};r.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.PageActionEventType={O:"PageOpen",C:"PageClose"};var a={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=a;r.CMapCompressionType={NONE:0,BINARY:1};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var o=a.WARNINGS;function warn(t){o>=a.WARNINGS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log("Warning: ".concat(t)):Window&&globalThis.ngxConsole?globalThis.ngxConsole.log("Warning: ".concat(t)):console.log("Warning: ".concat(t)))}function unreachable(t){throw new Error(t)}function shadow(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.defineProperty(t,r,{value:i,enumerable:!a,configurable:!0,writable:!1});return i}var l=function BaseExceptionClosure(){function BaseException(t,r){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=t;this.name=r}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();r.BaseException=l;var c=function(t){_inherits(PasswordException,t);var r=_createSuper(PasswordException);function PasswordException(t,i){var a;_classCallCheck(this,PasswordException);(a=r.call(this,t,"PasswordException")).code=i;return a}return _createClass(PasswordException)}(l);r.PasswordException=c;var u=function(t){_inherits(UnknownErrorException,t);var r=_createSuper(UnknownErrorException);function UnknownErrorException(t,i){var a;_classCallCheck(this,UnknownErrorException);(a=r.call(this,t,"UnknownErrorException")).details=i;return a}return _createClass(UnknownErrorException)}(l);r.UnknownErrorException=u;var d=function(t){_inherits(InvalidPDFException,t);var r=_createSuper(InvalidPDFException);function InvalidPDFException(t){_classCallCheck(this,InvalidPDFException);return r.call(this,t,"InvalidPDFException")}return _createClass(InvalidPDFException)}(l);r.InvalidPDFException=d;var h=function(t){_inherits(MissingPDFException,t);var r=_createSuper(MissingPDFException);function MissingPDFException(t){_classCallCheck(this,MissingPDFException);return r.call(this,t,"MissingPDFException")}return _createClass(MissingPDFException)}(l);r.MissingPDFException=h;var p=function(t){_inherits(UnexpectedResponseException,t);var r=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,i){var a;_classCallCheck(this,UnexpectedResponseException);(a=r.call(this,t,"UnexpectedResponseException")).status=i;return a}return _createClass(UnexpectedResponseException)}(l);r.UnexpectedResponseException=p;var v=function(t){_inherits(FormatError,t);var r=_createSuper(FormatError);function FormatError(t){_classCallCheck(this,FormatError);return r.call(this,t,"FormatError")}return _createClass(FormatError)}(l);r.FormatError=v;var y=function(t){_inherits(AbortException,t);var r=_createSuper(AbortException);function AbortException(t){_classCallCheck(this,AbortException);return r.call(this,t,"AbortException")}return _createClass(AbortException)}(l);r.AbortException=y;function stringToBytes(t){"string"!=typeof t&&unreachable("Invalid argument for stringToBytes");for(var r=t.length,i=new Uint8Array(r),a=0;a<r;++a)i[a]=255&t.charCodeAt(a);return i}var g=function(){function FeatureTest(){_classCallCheck(this,FeatureTest)}_createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",function isLittleEndian(){var t=new Uint8Array(4);t[0]=1;return 1===new Uint32Array(t.buffer,0,1)[0]}())}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}},{key:"platform",get:function get(){return"undefined"==typeof navigator?shadow(this,"platform",{isWin:!1,isMac:!1}):shadow(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}]);return FeatureTest}();r.FeatureTest=g;var m=_toConsumableArray(Array(256).keys()).map((function(t){return t.toString(16).padStart(2,"0")})),b=function(){function Util(){_classCallCheck(this,Util)}_createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(t,r,i){return"#".concat(m[t]).concat(m[r]).concat(m[i])}},{key:"scaleMinMax",value:function scaleMinMax(t,r){var i;if(t[0]){if(t[0]<0){i=r[0];r[0]=r[1];r[1]=i}r[0]*=t[0];r[1]*=t[0];if(t[3]<0){i=r[2];r[2]=r[3];r[3]=i}r[2]*=t[3];r[3]*=t[3]}else{i=r[0];r[0]=r[2];r[2]=i;i=r[1];r[1]=r[3];r[3]=i;if(t[1]<0){i=r[2];r[2]=r[3];r[3]=i}r[2]*=t[1];r[3]*=t[1];if(t[2]<0){i=r[0];r[0]=r[1];r[1]=i}r[0]*=t[2];r[1]*=t[2]}r[0]+=t[4];r[1]+=t[4];r[2]+=t[5];r[3]+=t[5]}},{key:"transform",value:function transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,r){var i=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/i,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/i]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,r){var i=Util.applyTransform(t,r),a=Util.applyTransform(t.slice(2,4),r),o=Util.applyTransform([t[0],t[3]],r),l=Util.applyTransform([t[2],t[1]],r);return[Math.min(i[0],a[0],o[0],l[0]),Math.min(i[1],a[1],o[1],l[1]),Math.max(i[0],a[0],o[0],l[0]),Math.max(i[1],a[1],o[1],l[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var r=[t[0],t[2],t[1],t[3]],i=t[0]*r[0]+t[1]*r[2],a=t[0]*r[1]+t[1]*r[3],o=t[2]*r[0]+t[3]*r[2],l=t[2]*r[1]+t[3]*r[3],c=(i+l)/2,u=Math.sqrt(Math.pow(i+l,2)-4*(i*l-o*a))/2,d=c+u||1,h=c-u||1;return[Math.sqrt(d),Math.sqrt(h)]}},{key:"normalizeRect",value:function normalizeRect(t){var r=t.slice(0);if(t[0]>t[2]){r[0]=t[2];r[2]=t[0]}if(t[1]>t[3]){r[1]=t[3];r[3]=t[1]}return r}},{key:"intersect",value:function intersect(t,r){var i=Math.max(Math.min(t[0],t[2]),Math.min(r[0],r[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(r[0],r[2]));if(i>a)return null;var o=Math.max(Math.min(t[1],t[3]),Math.min(r[1],r[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(r[1],r[3]));return o>l?null:[i,o,a,l]}},{key:"bezierBoundingBox",value:function bezierBoundingBox(t,r,i,a,o,l,c,u){for(var d,h,p,v,y,g,m,b,w=[],P=[[],[]],S=0;S<2;++S){if(0===S){h=6*t-12*i+6*o;d=-3*t+9*i-9*o+3*c;p=3*i-3*t}else{h=6*r-12*a+6*l;d=-3*r+9*a-9*l+3*u;p=3*a-3*r}if(Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;0<(v=-p/h)&&v<1&&w.push(v)}else{m=h*h-4*p*d;b=Math.sqrt(m);if(!(m<0)){0<(y=(-h+b)/(2*d))&&y<1&&w.push(y);0<(g=(-h-b)/(2*d))&&g<1&&w.push(g)}}}for(var k,x=w.length,A=x;x--;){k=1-(v=w[x]);P[0][x]=k*k*k*t+3*k*k*v*i+3*k*v*v*o+v*v*v*c;P[1][x]=k*k*k*r+3*k*k*v*a+3*k*v*v*l+v*v*v*u}P[0][A]=t;P[1][A]=r;P[0][A+1]=c;P[1][A+1]=u;P[0].length=P[1].length=A+2;return[Math.min.apply(Math,_toConsumableArray(P[0])),Math.min.apply(Math,_toConsumableArray(P[1])),Math.max.apply(Math,_toConsumableArray(P[0])),Math.max.apply(Math,_toConsumableArray(P[1]))]}}]);return Util}();r.Util=b;var w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(t){return decodeURIComponent(escape(t))}},(t,r,i)=>{"use strict";!function checkDOMMatrix(){globalThis.DOMMatrix}();!function checkPath2D(){globalThis.Path2D}();!function checkReadableStream(){globalThis.ReadableStream}();!function checkArrayAt(){Array.prototype.at||i(3)}();!function checkTypedArrayAt(){Uint8Array.prototype.at||i(77)}();!function checkStructuredClone(){globalThis.structuredClone||i(89)}()},(t,r,i)=>{i(4);var a=i(76);t.exports=a("Array","at")},(t,r,i)=>{"use strict";var a=i(5),o=i(42),l=i(66),c=i(64),u=i(71);a({target:"Array",proto:!0},{at:function at(t){var r=o(this),i=l(r),a=c(t),u=a>=0?a:i+a;return u<0||u>=i?void 0:r[u]}});u("at")},(t,r,i)=>{var a=i(6),o=i(7).f,l=i(46),c=i(50),u=i(40),d=i(58),h=i(70);t.exports=function(t,r){var i,p,v,y,g,m=t.target,b=t.global,w=t.stat;if(i=b?a:w?a[m]||u(m,{}):(a[m]||{}).prototype)for(p in r){y=r[p];v=t.dontCallGetSet?(g=o(i,p))&&g.value:i[p];if(!h(b?p:m+(w?".":"#")+p,t.forced)&&void 0!==v){if(typeof y==typeof v)continue;d(y,v)}(t.sham||v&&v.sham)&&l(y,"sham",!0);c(i,p,y,t)}}},t=>{var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(t,r,i)=>{var a=i(8),o=i(10),l=i(12),c=i(13),u=i(14),d=i(20),h=i(41),p=i(44),v=Object.getOwnPropertyDescriptor;r.f=a?v:function getOwnPropertyDescriptor(t,r){t=u(t);r=d(r);if(p)try{return v(t,r)}catch(t){}if(h(t,r))return c(!o(l.f,t,r),t[r])}},(t,r,i)=>{var a=i(9);t.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},(t,r,i)=>{var a=i(11),o=Function.prototype.call;t.exports=a?o.bind(o):function(){return o.apply(o,arguments)}},(t,r,i)=>{var a=i(9);t.exports=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},(t,r)=>{"use strict";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!i.call({1:2},1);r.f=o?function propertyIsEnumerable(t){var r=a(this,t);return!!r&&r.enumerable}:i},t=>{t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},(t,r,i)=>{var a=i(15),o=i(18);t.exports=function(t){return a(o(t))}},(t,r,i)=>{var a=i(16),o=i(9),l=i(17),c=Object,u=a("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==l(t)?u(t,""):c(t)}:c},(t,r,i)=>{var a=i(11),o=Function.prototype,l=o.call,c=a&&o.bind.bind(l,l);t.exports=a?c:function(t){return function(){return l.apply(t,arguments)}}},(t,r,i)=>{var a=i(16),o=a({}.toString),l=a("".slice);t.exports=function(t){return l(o(t),8,-1)}},(t,r,i)=>{var a=i(19),o=TypeError;t.exports=function(t){if(a(t))throw o("Can't call method on "+t);return t}},t=>{t.exports=function(t){return null==t}},(t,r,i)=>{var a=i(21),o=i(25);t.exports=function(t){var r=a(t,"string");return o(r)?r:r+""}},(t,r,i)=>{var a=i(10),o=i(22),l=i(25),c=i(32),u=i(35),d=i(36),h=TypeError,p=d("toPrimitive");t.exports=function(t,r){if(!o(t)||l(t))return t;var i,d=c(t,p);if(d){void 0===r&&(r="default");i=a(d,t,r);if(!o(i)||l(i))return i;throw h("Can't convert object to primitive value")}void 0===r&&(r="number");return u(t,r)}},(t,r,i)=>{var a=i(23),o=i(24),l=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:a(t)||t===l}:function(t){return"object"==typeof t?null!==t:a(t)}},(t,r,i)=>{var a=i(24),o=a.all;t.exports=a.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},t=>{var r="object"==typeof document&&document.all,i=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:i}},(t,r,i)=>{var a=i(26),o=i(23),l=i(27),c=i(28),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var r=a("Symbol");return o(r)&&l(r.prototype,u(t))}},(t,r,i)=>{var a=i(6),o=i(23);t.exports=function(t,r){return arguments.length<2?(i=a[t],o(i)?i:void 0):a[t]&&a[t][r];var i}},(t,r,i)=>{var a=i(16);t.exports=a({}.isPrototypeOf)},(t,r,i)=>{var a=i(29);t.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,r,i)=>{var a=i(30),o=i(9);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&a&&a<41}))},(t,r,i)=>{var a,o,l=i(6),c=i(31),u=l.process,d=l.Deno,h=u&&u.versions||d&&d.version,p=h&&h.v8;p&&(o=(a=p.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1]));!o&&c&&(!(a=c.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=c.match(/Chrome\/(\d+)/))&&(o=+a[1]);t.exports=o},t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},(t,r,i)=>{var a=i(33),o=i(19);t.exports=function(t,r){var i=t[r];return o(i)?void 0:a(i)}},(t,r,i)=>{var a=i(23),o=i(34),l=TypeError;t.exports=function(t){if(a(t))return t;throw l(o(t)+" is not a function")}},t=>{var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},(t,r,i)=>{var a=i(10),o=i(23),l=i(22),c=TypeError;t.exports=function(t,r){var i,u;if("string"===r&&o(i=t.toString)&&!l(u=a(i,t)))return u;if(o(i=t.valueOf)&&!l(u=a(i,t)))return u;if("string"!==r&&o(i=t.toString)&&!l(u=a(i,t)))return u;throw c("Can't convert object to primitive value")}},(t,r,i)=>{var a=i(6),o=i(37),l=i(41),c=i(43),u=i(29),d=i(28),h=a.Symbol,p=o("wks"),v=d?h.for||h:h&&h.withoutSetter||c;t.exports=function(t){l(p,t)||(p[t]=u&&l(h,t)?h[t]:v("Symbol."+t));return p[t]}},(t,r,i)=>{var a=i(38),o=i(39);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.30.0",mode:a?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.0/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=!1},(t,r,i)=>{var a=i(6),o=i(40),l="__core-js_shared__",c=a[l]||o(l,{});t.exports=c},(t,r,i)=>{var a=i(6),o=Object.defineProperty;t.exports=function(t,r){try{o(a,t,{value:r,configurable:!0,writable:!0})}catch(i){a[t]=r}return r}},(t,r,i)=>{var a=i(16),o=i(42),l=a({}.hasOwnProperty);t.exports=Object.hasOwn||function hasOwn(t,r){return l(o(t),r)}},(t,r,i)=>{var a=i(18),o=Object;t.exports=function(t){return o(a(t))}},(t,r,i)=>{var a=i(16),o=0,l=Math.random(),c=a(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+l,36)}},(t,r,i)=>{var a=i(8),o=i(9),l=i(45);t.exports=!a&&!o((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},(t,r,i)=>{var a=i(6),o=i(22),l=a.document,c=o(l)&&o(l.createElement);t.exports=function(t){return c?l.createElement(t):{}}},(t,r,i)=>{var a=i(8),o=i(47),l=i(13);t.exports=a?function(t,r,i){return o.f(t,r,l(1,i))}:function(t,r,i){t[r]=i;return t}},(t,r,i)=>{var a=i(8),o=i(44),l=i(48),c=i(49),u=i(20),d=TypeError,h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,v="enumerable",y="configurable",g="writable";r.f=a?l?function defineProperty(t,r,i){c(t);r=u(r);c(i);if("function"==typeof t&&"prototype"===r&&"value"in i&&g in i&&!i[g]){var a=p(t,r);if(a&&a[g]){t[r]=i.value;i={configurable:y in i?i[y]:a[y],enumerable:v in i?i[v]:a[v],writable:!1}}}return h(t,r,i)}:h:function defineProperty(t,r,i){c(t);r=u(r);c(i);if(o)try{return h(t,r,i)}catch(t){}if("get"in i||"set"in i)throw d("Accessors not supported");"value"in i&&(t[r]=i.value);return t}},(t,r,i)=>{var a=i(8),o=i(9);t.exports=a&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(t,r,i)=>{var a=i(22),o=String,l=TypeError;t.exports=function(t){if(a(t))return t;throw l(o(t)+" is not an object")}},(t,r,i)=>{var a=i(23),o=i(47),l=i(51),c=i(40);t.exports=function(t,r,i,u){u||(u={});var d=u.enumerable,h=void 0!==u.name?u.name:r;a(i)&&l(i,h,u);if(u.global)d?t[r]=i:c(r,i);else{try{u.unsafe?t[r]&&(d=!0):delete t[r]}catch(t){}d?t[r]=i:o.f(t,r,{value:i,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return t}},(t,r,i)=>{var a=i(16),o=i(9),l=i(23),c=i(41),u=i(8),d=i(52).CONFIGURABLE,h=i(53),p=i(54),v=p.enforce,y=p.get,g=String,m=Object.defineProperty,b=a("".slice),w=a("".replace),P=a([].join),S=u&&!o((function(){return 8!==m((function(){}),"length",{value:8}).length})),k=String(String).split("String"),x=t.exports=function(t,r,i){"Symbol("===b(g(r),0,7)&&(r="["+w(g(r),/^Symbol\(([^)]*)\)/,"$1")+"]");i&&i.getter&&(r="get "+r);i&&i.setter&&(r="set "+r);(!c(t,"name")||d&&t.name!==r)&&(u?m(t,"name",{value:r,configurable:!0}):t.name=r);S&&i&&c(i,"arity")&&t.length!==i.arity&&m(t,"length",{value:i.arity});try{i&&c(i,"constructor")&&i.constructor?u&&m(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=v(t);c(a,"source")||(a.source=P(k,"string"==typeof r?r:""));return t};Function.prototype.toString=x((function toString(){return l(this)&&y(this).source||h(this)}),"toString")},(t,r,i)=>{var a=i(8),o=i(41),l=Function.prototype,c=a&&Object.getOwnPropertyDescriptor,u=o(l,"name"),d=u&&"something"===function something(){}.name,h=u&&(!a||a&&c(l,"name").configurable);t.exports={EXISTS:u,PROPER:d,CONFIGURABLE:h}},(t,r,i)=>{var a=i(16),o=i(23),l=i(39),c=a(Function.toString);o(l.inspectSource)||(l.inspectSource=function(t){return c(t)});t.exports=l.inspectSource},(t,r,i)=>{var a,o,l,c=i(55),u=i(6),d=i(22),h=i(46),p=i(41),v=i(39),y=i(56),g=i(57),m="Object already initialized",b=u.TypeError,w=u.WeakMap;if(c||v.state){var P=v.state||(v.state=new w);P.get=P.get;P.has=P.has;P.set=P.set;a=function(t,r){if(P.has(t))throw b(m);r.facade=t;P.set(t,r);return r};o=function(t){return P.get(t)||{}};l=function(t){return P.has(t)}}else{var S=y("state");g[S]=!0;a=function(t,r){if(p(t,S))throw b(m);r.facade=t;h(t,S,r);return r};o=function(t){return p(t,S)?t[S]:{}};l=function(t){return p(t,S)}}t.exports={set:a,get:o,has:l,enforce:function(t){return l(t)?o(t):a(t,{})},getterFor:function(t){return function(r){var i;if(!d(r)||(i=o(r)).type!==t)throw b("Incompatible receiver, "+t+" required");return i}}}},(t,r,i)=>{var a=i(6),o=i(23),l=a.WeakMap;t.exports=o(l)&&/native code/.test(String(l))},(t,r,i)=>{var a=i(37),o=i(43),l=a("keys");t.exports=function(t){return l[t]||(l[t]=o(t))}},t=>{t.exports={}},(t,r,i)=>{var a=i(41),o=i(59),l=i(7),c=i(47);t.exports=function(t,r,i){for(var u=o(r),d=c.f,h=l.f,p=0;p<u.length;p++){var v=u[p];a(t,v)||i&&a(i,v)||d(t,v,h(r,v))}}},(t,r,i)=>{var a=i(26),o=i(16),l=i(60),c=i(69),u=i(49),d=o([].concat);t.exports=a("Reflect","ownKeys")||function ownKeys(t){var r=l.f(u(t)),i=c.f;return i?d(r,i(t)):r}},(t,r,i)=>{var a=i(61),o=i(68).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return a(t,o)}},(t,r,i)=>{var a=i(16),o=i(41),l=i(14),c=i(62).indexOf,u=i(57),d=a([].push);t.exports=function(t,r){var i,a=l(t),h=0,p=[];for(i in a)!o(u,i)&&o(a,i)&&d(p,i);for(;r.length>h;)o(a,i=r[h++])&&(~c(p,i)||d(p,i));return p}},(t,r,i)=>{var a=i(14),o=i(63),l=i(66),createMethod=function(t){return function(r,i,c){var u,d=a(r),h=l(d),p=o(c,h);if(t&&i!=i){for(;h>p;)if((u=d[p++])!=u)return!0}else for(;h>p;p++)if((t||p in d)&&d[p]===i)return t||p||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(t,r,i)=>{var a=i(64),o=Math.max,l=Math.min;t.exports=function(t,r){var i=a(t);return i<0?o(i+r,0):l(i,r)}},(t,r,i)=>{var a=i(65);t.exports=function(t){var r=+t;return r!=r||0===r?0:a(r)}},t=>{var r=Math.ceil,i=Math.floor;t.exports=Math.trunc||function trunc(t){var a=+t;return(a>0?i:r)(a)}},(t,r,i)=>{var a=i(67);t.exports=function(t){return a(t.length)}},(t,r,i)=>{var a=i(64),o=Math.min;t.exports=function(t){return t>0?o(a(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,r)=>{r.f=Object.getOwnPropertySymbols},(t,r,i)=>{var a=i(9),o=i(23),l=/#|\.prototype\./,isForced=function(t,r){var i=u[c(t)];return i==h||i!=d&&(o(r)?a(r):!!r)},c=isForced.normalize=function(t){return String(t).replace(l,".").toLowerCase()},u=isForced.data={},d=isForced.NATIVE="N",h=isForced.POLYFILL="P";t.exports=isForced},(t,r,i)=>{var a=i(36),o=i(72),l=i(47).f,c=a("unscopables"),u=Array.prototype;null==u[c]&&l(u,c,{configurable:!0,value:o(null)});t.exports=function(t){u[c][t]=!0}},(t,r,i)=>{var a,o=i(49),l=i(73),c=i(68),u=i(57),d=i(75),h=i(45),p=i(56),v="prototype",y="script",g=p("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<"+y+">"+t+"</"+y+">"},NullProtoObjectViaActiveX=function(t){t.write(scriptTag(""));t.close();var r=t.parentWindow.Object;t=null;return r},NullProtoObject=function(){try{a=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject="undefined"!=typeof document?document.domain&&a?NullProtoObjectViaActiveX(a):function(){var t,r=h("iframe"),i="java"+y+":";r.style.display="none";d.appendChild(r);r.src=String(i);(t=r.contentWindow.document).open();t.write(scriptTag("document.F=Object"));t.close();return t.F}():NullProtoObjectViaActiveX(a);for(var t=c.length;t--;)delete NullProtoObject[v][c[t]];return NullProtoObject()};u[g]=!0;t.exports=Object.create||function create(t,r){var i;if(null!==t){EmptyConstructor[v]=o(t);i=new EmptyConstructor;EmptyConstructor[v]=null;i[g]=t}else i=NullProtoObject();return void 0===r?i:l.f(i,r)}},(t,r,i)=>{var a=i(8),o=i(48),l=i(47),c=i(49),u=i(14),d=i(74);r.f=a&&!o?Object.defineProperties:function defineProperties(t,r){c(t);for(var i,a=u(r),o=d(r),h=o.length,p=0;h>p;)l.f(t,i=o[p++],a[i]);return t}},(t,r,i)=>{var a=i(61),o=i(68);t.exports=Object.keys||function keys(t){return a(t,o)}},(t,r,i)=>{var a=i(26);t.exports=a("document","documentElement")},(t,r,i)=>{var a=i(6),o=i(16);t.exports=function(t,r){return o(a[t].prototype[r])}},(t,r,i)=>{i(78)},(t,r,i)=>{"use strict";var a=i(79),o=i(66),l=i(64),c=a.aTypedArray;(0,a.exportTypedArrayMethod)("at",(function at(t){var r=c(this),i=o(r),a=l(t),u=a>=0?a:i+a;return u<0||u>=i?void 0:r[u]}))},(t,r,i)=>{"use strict";var a,o,l,c=i(80),u=i(8),d=i(6),h=i(23),p=i(22),v=i(41),y=i(81),g=i(34),m=i(46),b=i(50),w=i(83),P=i(27),S=i(84),k=i(86),x=i(36),A=i(43),E=i(54),T=E.enforce,C=E.get,I=d.Int8Array,O=I&&I.prototype,M=d.Uint8ClampedArray,L=M&&M.prototype,R=I&&S(I),D=O&&S(O),G=Object.prototype,j=d.TypeError,N=x("toStringTag"),B=A("TYPED_ARRAY_TAG"),V="TypedArrayConstructor",W=c&&!!k&&"Opera"!==y(d.opera),H=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},z={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor=function(t){var r=S(t);if(p(r)){var i=C(r);return i&&v(i,V)?i[V]:getTypedArrayConstructor(r)}},isTypedArray=function(t){if(!p(t))return!1;var r=y(t);return v(U,r)||v(z,r)};for(a in U)(l=(o=d[a])&&o.prototype)?T(l)[V]=o:W=!1;for(a in z)(l=(o=d[a])&&o.prototype)&&(T(l)[V]=o);if(!W||!h(R)||R===Function.prototype){R=function TypedArray(){throw j("Incorrect invocation")};if(W)for(a in U)d[a]&&k(d[a],R)}if(!W||!D||D===G){D=R.prototype;if(W)for(a in U)d[a]&&k(d[a].prototype,D)}W&&S(L)!==D&&k(L,D);if(u&&!v(D,N)){H=!0;w(D,N,{configurable:!0,get:function(){return p(this)?this[B]:void 0}});for(a in U)d[a]&&m(d[a],B,a)}t.exports={NATIVE_ARRAY_BUFFER_VIEWS:W,TYPED_ARRAY_TAG:H&&B,aTypedArray:function(t){if(isTypedArray(t))return t;throw j("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h(t)&&(!k||P(R,t)))return t;throw j(g(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,i,a){if(u){if(i)for(var o in U){var l=d[o];if(l&&v(l.prototype,t))try{delete l.prototype[t]}catch(i){try{l.prototype[t]=r}catch(t){}}}D[t]&&!i||b(D,t,i?r:W&&O[t]||r,a)}},exportTypedArrayStaticMethod:function(t,r,i){var a,o;if(u){if(k){if(i)for(a in U)if((o=d[a])&&v(o,t))try{delete o[t]}catch(t){}if(R[t]&&!i)return;try{return b(R,t,i?r:W&&R[t]||r)}catch(t){}}for(a in U)!(o=d[a])||o[t]&&!i||b(o,t,r)}},getTypedArrayConstructor:getTypedArrayConstructor,isView:function isView(t){if(!p(t))return!1;var r=y(t);return"DataView"===r||v(U,r)||v(z,r)},isTypedArray:isTypedArray,TypedArray:R,TypedArrayPrototype:D}},t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(t,r,i)=>{var a=i(82),o=i(23),l=i(17),c=i(36)("toStringTag"),u=Object,d="Arguments"==l(function(){return arguments}());t.exports=a?l:function(t){var r,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,r){try{return t[r]}catch(t){}}(r=u(t),c))?i:d?l(r):"Object"==(a=l(r))&&o(r.callee)?"Arguments":a}},(t,r,i)=>{var a={};a[i(36)("toStringTag")]="z";t.exports="[object z]"===String(a)},(t,r,i)=>{var a=i(51),o=i(47);t.exports=function(t,r,i){i.get&&a(i.get,r,{getter:!0});i.set&&a(i.set,r,{setter:!0});return o.f(t,r,i)}},(t,r,i)=>{var a=i(41),o=i(23),l=i(42),c=i(56),u=i(85),d=c("IE_PROTO"),h=Object,p=h.prototype;t.exports=u?h.getPrototypeOf:function(t){var r=l(t);if(a(r,d))return r[d];var i=r.constructor;return o(i)&&r instanceof i?i.prototype:r instanceof h?p:null}},(t,r,i)=>{var a=i(9);t.exports=!a((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(t,r,i)=>{var a=i(87),o=i(49),l=i(88);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,i={};try{(t=a(Object.prototype,"__proto__","set"))(i,[]);r=i instanceof Array}catch(t){}return function setPrototypeOf(i,a){o(i);l(a);r?t(i,a):i.__proto__=a;return i}}():void 0)},(t,r,i)=>{var a=i(16),o=i(33);t.exports=function(t,r,i){try{return a(o(Object.getOwnPropertyDescriptor(t,r)[i]))}catch(t){}}},(t,r,i)=>{var a=i(23),o=String,l=TypeError;t.exports=function(t){if("object"==typeof t||a(t))return t;throw l("Can't set "+o(t)+" as a prototype")}},(t,r,i)=>{i(90);i(97);i(99);i(122);i(124);var a=i(136);t.exports=a.structuredClone},(t,r,i)=>{"use strict";var a=i(14),o=i(71),l=i(91),c=i(54),u=i(47).f,d=i(92),h=i(96),p=i(38),v=i(8),y="Array Iterator",g=c.set,m=c.getterFor(y);t.exports=d(Array,"Array",(function(t,r){g(this,{type:y,target:a(t),index:0,kind:r})}),(function(){var t=m(this),r=t.target,i=t.kind,a=t.index++;if(!r||a>=r.length){t.target=void 0;return h(void 0,!0)}return h("keys"==i?a:"values"==i?r[a]:[a,r[a]],!1)}),"values");var b=l.Arguments=l.Array;o("keys");o("values");o("entries");if(!p&&v&&"values"!==b.name)try{u(b,"name",{value:"values"})}catch(t){}},t=>{t.exports={}},(t,r,i)=>{"use strict";var a=i(5),o=i(10),l=i(38),c=i(52),u=i(23),d=i(93),h=i(84),p=i(86),v=i(95),y=i(46),g=i(50),m=i(36),b=i(91),w=i(94),P=c.PROPER,S=c.CONFIGURABLE,k=w.IteratorPrototype,x=w.BUGGY_SAFARI_ITERATORS,A=m("iterator"),E="keys",T="values",C="entries",returnThis=function(){return this};t.exports=function(t,r,i,c,m,w,I){d(i,r,c);var O,M,L,getIterationMethod=function(t){if(t===m&&N)return N;if(!x&&t in G)return G[t];switch(t){case E:return function keys(){return new i(this,t)};case T:return function values(){return new i(this,t)};case C:return function entries(){return new i(this,t)}}return function(){return new i(this)}},R=r+" Iterator",D=!1,G=t.prototype,j=G[A]||G["@@iterator"]||m&&G[m],N=!x&&j||getIterationMethod(m),B="Array"==r&&G.entries||j;if(B&&(O=h(B.call(new t)))!==Object.prototype&&O.next){l||h(O)===k||(p?p(O,k):u(O[A])||g(O,A,returnThis));v(O,R,!0,!0);l&&(b[R]=returnThis)}if(P&&m==T&&j&&j.name!==T)if(!l&&S)y(G,"name",T);else{D=!0;N=function values(){return o(j,this)}}if(m){M={values:getIterationMethod(T),keys:w?N:getIterationMethod(E),entries:getIterationMethod(C)};if(I)for(L in M)(x||D||!(L in G))&&g(G,L,M[L]);else a({target:r,proto:!0,forced:x||D},M)}l&&!I||G[A]===N||g(G,A,N,{name:m});b[r]=N;return M}},(t,r,i)=>{"use strict";var a=i(94).IteratorPrototype,o=i(72),l=i(13),c=i(95),u=i(91),returnThis=function(){return this};t.exports=function(t,r,i,d){var h=r+" Iterator";t.prototype=o(a,{next:l(+!d,i)});c(t,h,!1,!0);u[h]=returnThis;return t}},(t,r,i)=>{"use strict";var a,o,l,c=i(9),u=i(23),d=i(22),h=i(72),p=i(84),v=i(50),y=i(36),g=i(38),m=y("iterator"),b=!1;[].keys&&("next"in(l=[].keys())?(o=p(p(l)))!==Object.prototype&&(a=o):b=!0);!d(a)||c((function(){var t={};return a[m].call(t)!==t}))?a={}:g&&(a=h(a));u(a[m])||v(a,m,(function(){return this}));t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:b}},(t,r,i)=>{var a=i(47).f,o=i(41),l=i(36)("toStringTag");t.exports=function(t,r,i){t&&!i&&(t=t.prototype);t&&!o(t,l)&&a(t,l,{configurable:!0,value:r})}},t=>{t.exports=function(t,r){return{value:t,done:r}}},(t,r,i)=>{var a=i(82),o=i(50),l=i(98);a||o(Object.prototype,"toString",l,{unsafe:!0})},(t,r,i)=>{"use strict";var a=i(82),o=i(81);t.exports=a?{}.toString:function toString(){return"[object "+o(this)+"]"}},(t,r,i)=>{i(100)},(t,r,i)=>{"use strict";i(101)("Map",(function(t){return function Map(){return t(this,arguments.length?arguments[0]:void 0)}}),i(119))},(t,r,i)=>{"use strict";var a=i(5),o=i(6),l=i(16),c=i(70),u=i(50),d=i(102),h=i(109),p=i(116),v=i(23),y=i(19),g=i(22),m=i(9),b=i(117),w=i(95),P=i(118);t.exports=function(t,r,i){var S=-1!==t.indexOf("Map"),k=-1!==t.indexOf("Weak"),x=S?"set":"add",A=o[t],E=A&&A.prototype,T=A,C={},fixMethod=function(t){var r=l(E[t]);u(E,t,"add"==t?function add(t){r(this,0===t?0:t);return this}:"delete"==t?function(t){return!(k&&!g(t))&&r(this,0===t?0:t)}:"get"==t?function get(t){return k&&!g(t)?void 0:r(this,0===t?0:t)}:"has"==t?function has(t){return!(k&&!g(t))&&r(this,0===t?0:t)}:function set(t,i){r(this,0===t?0:t,i);return this})};if(c(t,!v(A)||!(k||E.forEach&&!m((function(){(new A).entries().next()}))))){T=i.getConstructor(r,t,S,x);d.enable()}else if(c(t,!0)){var I=new T,O=I[x](k?{}:-0,1)!=I,M=m((function(){I.has(1)})),L=b((function(t){new A(t)})),R=!k&&m((function(){for(var t=new A,r=5;r--;)t[x](r,r);return!t.has(-0)}));if(!L){(T=r((function(t,r){p(t,E);var i=P(new A,t,T);y(r)||h(r,i[x],{that:i,AS_ENTRIES:S});return i}))).prototype=E;E.constructor=T}if(M||R){fixMethod("delete");fixMethod("has");S&&fixMethod("get")}(R||O)&&fixMethod(x);k&&E.clear&&delete E.clear}C[t]=T;a({global:!0,constructor:!0,forced:T!=A},C);w(T,t);k||i.setStrong(T,t,S);return T}},(t,r,i)=>{var a=i(5),o=i(16),l=i(57),c=i(22),u=i(41),d=i(47).f,h=i(60),p=i(103),v=i(106),y=i(43),g=i(108),m=!1,b=y("meta"),w=0,setMetadata=function(t){d(t,b,{value:{objectID:"O"+w++,weakData:{}}})},P=t.exports={enable:function(){P.enable=function(){};m=!0;var t=h.f,r=o([].splice),i={};i[b]=1;if(t(i).length){h.f=function(i){for(var a=t(i),o=0,l=a.length;o<l;o++)if(a[o]===b){r(a,o,1);break}return a};a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f})}},fastKey:function(t,r){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,b)){if(!v(t))return"F";if(!r)return"E";setMetadata(t)}return t[b].objectID},getWeakData:function(t,r){if(!u(t,b)){if(!v(t))return!0;if(!r)return!1;setMetadata(t)}return t[b].weakData},onFreeze:function(t){g&&m&&v(t)&&!u(t,b)&&setMetadata(t);return t}};l[b]=!0},(t,r,i)=>{var a=i(17),o=i(14),l=i(60).f,c=i(104),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function getOwnPropertyNames(t){return u&&"Window"==a(t)?function(t){try{return l(t)}catch(t){return c(u)}}(t):l(o(t))}},(t,r,i)=>{var a=i(63),o=i(66),l=i(105),c=Array,u=Math.max;t.exports=function(t,r,i){for(var d=o(t),h=a(r,d),p=a(void 0===i?d:i,d),v=c(u(p-h,0)),y=0;h<p;h++,y++)l(v,y,t[h]);v.length=y;return v}},(t,r,i)=>{"use strict";var a=i(20),o=i(47),l=i(13);t.exports=function(t,r,i){var c=a(r);c in t?o.f(t,c,l(0,i)):t[c]=i}},(t,r,i)=>{var a=i(9),o=i(22),l=i(17),c=i(107),u=Object.isExtensible,d=a((function(){u(1)}));t.exports=d||c?function isExtensible(t){return!!o(t)&&((!c||"ArrayBuffer"!=l(t))&&(!u||u(t)))}:u},(t,r,i)=>{var a=i(9);t.exports=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},(t,r,i)=>{var a=i(9);t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},(t,r,i)=>{var a=i(110),o=i(10),l=i(49),c=i(34),u=i(112),d=i(66),h=i(27),p=i(113),v=i(114),y=i(115),g=TypeError,Result=function(t,r){this.stopped=t;this.result=r},m=Result.prototype;t.exports=function(t,r,i){var b,w,P,S,k,x,A,E=i&&i.that,T=!(!i||!i.AS_ENTRIES),C=!(!i||!i.IS_RECORD),I=!(!i||!i.IS_ITERATOR),O=!(!i||!i.INTERRUPTED),M=a(r,E),stop=function(t){b&&y(b,"normal",t);return new Result(!0,t)},callFn=function(t){if(T){l(t);return O?M(t[0],t[1],stop):M(t[0],t[1])}return O?M(t,stop):M(t)};if(C)b=t.iterator;else if(I)b=t;else{if(!(w=v(t)))throw g(c(t)+" is not iterable");if(u(w)){for(P=0,S=d(t);S>P;P++)if((k=callFn(t[P]))&&h(m,k))return k;return new Result(!1)}b=p(t,w)}x=C?t.next:b.next;for(;!(A=o(x,b)).done;){try{k=callFn(A.value)}catch(t){y(b,"throw",t)}if("object"==typeof k&&k&&h(m,k))return k}return new Result(!1)}},(t,r,i)=>{var a=i(111),o=i(33),l=i(11),c=a(a.bind);t.exports=function(t,r){o(t);return void 0===r?t:l?c(t,r):function(){return t.apply(r,arguments)}}},(t,r,i)=>{var a=i(17),o=i(16);t.exports=function(t){if("Function"===a(t))return o(t)}},(t,r,i)=>{var a=i(36),o=i(91),l=a("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[l]===t)}},(t,r,i)=>{var a=i(10),o=i(33),l=i(49),c=i(34),u=i(114),d=TypeError;t.exports=function(t,r){var i=arguments.length<2?u(t):r;if(o(i))return l(a(i,t));throw d(c(t)+" is not iterable")}},(t,r,i)=>{var a=i(81),o=i(32),l=i(19),c=i(91),u=i(36)("iterator");t.exports=function(t){if(!l(t))return o(t,u)||o(t,"@@iterator")||c[a(t)]}},(t,r,i)=>{var a=i(10),o=i(49),l=i(32);t.exports=function(t,r,i){var c,u;o(t);try{if(!(c=l(t,"return"))){if("throw"===r)throw i;return i}c=a(c,t)}catch(t){u=!0;c=t}if("throw"===r)throw i;if(u)throw c;o(c);return i}},(t,r,i)=>{var a=i(27),o=TypeError;t.exports=function(t,r){if(a(r,t))return t;throw o("Incorrect invocation")}},(t,r,i)=>{var a=i(36)("iterator"),o=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){o=!0}};c[a]=function(){return this};Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!o)return!1;var i=!1;try{var l={};l[a]=function(){return{next:function(){return{done:i=!0}}}};t(l)}catch(t){}return i}},(t,r,i)=>{var a=i(23),o=i(22),l=i(86);t.exports=function(t,r,i){var c,u;l&&a(c=r.constructor)&&c!==i&&o(u=c.prototype)&&u!==i.prototype&&l(t,u);return t}},(t,r,i)=>{"use strict";var a=i(72),o=i(83),l=i(120),c=i(110),u=i(116),d=i(19),h=i(109),p=i(92),v=i(96),y=i(121),g=i(8),m=i(102).fastKey,b=i(54),w=b.set,P=b.getterFor;t.exports={getConstructor:function(t,r,i,p){var v=t((function(t,o){u(t,y);w(t,{type:r,index:a(null),first:void 0,last:void 0,size:0});g||(t.size=0);d(o)||h(o,t[p],{that:t,AS_ENTRIES:i})})),y=v.prototype,b=P(r),define=function(t,r,i){var a,o,l=b(t),c=getEntry(t,r);if(c)c.value=i;else{l.last=c={index:o=m(r,!0),key:r,value:i,previous:a=l.last,next:void 0,removed:!1};l.first||(l.first=c);a&&(a.next=c);g?l.size++:t.size++;"F"!==o&&(l.index[o]=c)}return t},getEntry=function(t,r){var i,a=b(t),o=m(r);if("F"!==o)return a.index[o];for(i=a.first;i;i=i.next)if(i.key==r)return i};l(y,{clear:function clear(){for(var t=b(this),r=t.index,i=t.first;i;){i.removed=!0;i.previous&&(i.previous=i.previous.next=void 0);delete r[i.index];i=i.next}t.first=t.last=void 0;g?t.size=0:this.size=0},delete:function(t){var r=this,i=b(r),a=getEntry(r,t);if(a){var o=a.next,l=a.previous;delete i.index[a.index];a.removed=!0;l&&(l.next=o);o&&(o.previous=l);i.first==a&&(i.first=o);i.last==a&&(i.last=l);g?i.size--:r.size--}return!!a},forEach:function forEach(t){for(var r,i=b(this),a=c(t,arguments.length>1?arguments[1]:void 0);r=r?r.next:i.first;){a(r.value,r.key,this);for(;r&&r.removed;)r=r.previous}},has:function has(t){return!!getEntry(this,t)}});l(y,i?{get:function get(t){var r=getEntry(this,t);return r&&r.value},set:function set(t,r){return define(this,0===t?0:t,r)}}:{add:function add(t){return define(this,t=0===t?0:t,t)}});g&&o(y,"size",{configurable:!0,get:function(){return b(this).size}});return v},setStrong:function(t,r,i){var a=r+" Iterator",o=P(r),l=P(a);p(t,r,(function(t,r){w(this,{type:a,target:t,state:o(t),kind:r,last:void 0})}),(function(){for(var t=l(this),r=t.kind,i=t.last;i&&i.removed;)i=i.previous;if(!t.target||!(t.last=i=i?i.next:t.state.first)){t.target=void 0;return v(void 0,!0)}return v("keys"==r?i.key:"values"==r?i.value:[i.key,i.value],!1)}),i?"entries":"values",!i,!0);y(r)}}},(t,r,i)=>{var a=i(50);t.exports=function(t,r,i){for(var o in r)a(t,o,r[o],i);return t}},(t,r,i)=>{"use strict";var a=i(26),o=i(83),l=i(36),c=i(8),u=l("species");t.exports=function(t){var r=a(t);c&&r&&!r[u]&&o(r,u,{configurable:!0,get:function(){return this}})}},(t,r,i)=>{i(123)},(t,r,i)=>{"use strict";i(101)("Set",(function(t){return function Set(){return t(this,arguments.length?arguments[0]:void 0)}}),i(119))},(t,r,i)=>{var a,o=i(38),l=i(5),c=i(6),u=i(26),d=i(16),h=i(9),p=i(43),v=i(23),y=i(125),g=i(19),m=i(22),b=i(25),w=i(109),P=i(49),S=i(81),k=i(41),x=i(105),A=i(46),E=i(66),T=i(126),C=i(127),I=i(129),O=i(130),M=i(131),L=i(132),R=c.Object,D=c.Array,G=c.Date,j=c.Error,N=c.EvalError,B=c.RangeError,V=c.ReferenceError,W=c.SyntaxError,H=c.TypeError,U=c.URIError,z=c.PerformanceMark,X=c.WebAssembly,K=X&&X.CompileError||j,Y=X&&X.LinkError||j,$=X&&X.RuntimeError||j,Q=u("DOMException"),Z=I.Map,J=I.has,ee=I.get,te=I.set,re=O.Set,ne=O.add,ie=u("Object","keys"),ae=d([].push),oe=d((!0).valueOf),se=d(1..valueOf),le=d("".valueOf),ce=d(G.prototype.getTime),ue=p("structuredClone"),de="DataCloneError",he="Transferring",checkBasicSemantic=function(t){return!h((function(){var r=new c.Set([7]),i=t(r),a=t(R(7));return i==r||!i.has(7)||"object"!=typeof a||7!=a}))&&t},checkErrorsCloning=function(t,r){return!h((function(){var i=new r,a=t({a:i,b:i});return!(a&&a.a===a.b&&a.a instanceof r&&a.a.stack===i.stack)}))},fe=c.structuredClone,pe=o||!checkErrorsCloning(fe,j)||!checkErrorsCloning(fe,Q)||!(a=fe,!h((function(){var t=a(new c.AggregateError([1],ue,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=ue||3!=t.cause}))),ve=!fe&&checkBasicSemantic((function(t){return new z(ue,{detail:t}).detail})),ye=checkBasicSemantic(fe)||ve,throwUncloneable=function(t){throw new Q("Uncloneable type: "+t,de)},throwUnpolyfillable=function(t,r){throw new Q((r||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",de)},structuredCloneInternal=function(t,r){b(t)&&throwUncloneable("Symbol");if(!m(t))return t;if(r){if(J(r,t))return ee(r,t)}else r=new Z;var i,a,o,l,d,h,p,y,g,w,P,T=S(t),I=!1;switch(T){case"Array":o=D(E(t));I=!0;break;case"Object":o={};I=!0;break;case"Map":o=new Z;I=!0;break;case"Set":o=new re;I=!0;break;case"RegExp":o=new RegExp(t.source,C(t));break;case"Error":switch(a=t.name){case"AggregateError":o=u("AggregateError")([]);break;case"EvalError":o=N();break;case"RangeError":o=B();break;case"ReferenceError":o=V();break;case"SyntaxError":o=W();break;case"TypeError":o=H();break;case"URIError":o=U();break;case"CompileError":o=K();break;case"LinkError":o=Y();break;case"RuntimeError":o=$();break;default:o=j()}I=!0;break;case"DOMException":o=new Q(t.message,t.name);I=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=c[T];m(i)||throwUnpolyfillable(T);o=new i(structuredCloneInternal(t.buffer,r),t.byteOffset,"DataView"===T?t.byteLength:t.length);break;case"DOMQuad":try{o=new DOMQuad(structuredCloneInternal(t.p1,r),structuredCloneInternal(t.p2,r),structuredCloneInternal(t.p3,r),structuredCloneInternal(t.p4,r))}catch(r){ye?o=ye(t):throwUnpolyfillable(T)}break;case"FileList":if(l=function(){var t;try{t=new c.DataTransfer}catch(r){try{t=new c.ClipboardEvent("").clipboardData}catch(t){}}return t&&t.items&&t.files?t:null}()){for(d=0,h=E(t);d<h;d++)l.items.add(structuredCloneInternal(t[d],r));o=l.files}else ye?o=ye(t):throwUnpolyfillable(T);break;case"ImageData":try{o=new ImageData(structuredCloneInternal(t.data,r),t.width,t.height,{colorSpace:t.colorSpace})}catch(r){ye?o=ye(t):throwUnpolyfillable(T)}break;default:if(ye)o=ye(t);else switch(T){case"BigInt":o=R(t.valueOf());break;case"Boolean":o=R(oe(t));break;case"Number":o=R(se(t));break;case"String":o=R(le(t));break;case"Date":o=new G(ce(t));break;case"ArrayBuffer":(i=c.DataView)||"function"==typeof t.slice||throwUnpolyfillable(T);try{if("function"!=typeof t.slice||t.resizable){h=t.byteLength;P="maxByteLength"in t?{maxByteLength:t.maxByteLength}:void 0;o=new ArrayBuffer(h,P);g=new i(t);w=new i(o);for(d=0;d<h;d++)w.setUint8(d,g.getUint8(d))}else o=t.slice(0)}catch(t){throw new Q("ArrayBuffer is detached",de)}break;case"SharedArrayBuffer":o=t;break;case"Blob":try{o=t.slice(0,t.size,t.type)}catch(t){throwUnpolyfillable(T)}break;case"DOMPoint":case"DOMPointReadOnly":i=c[T];try{o=i.fromPoint?i.fromPoint(t):new i(t.x,t.y,t.z,t.w)}catch(t){throwUnpolyfillable(T)}break;case"DOMRect":case"DOMRectReadOnly":i=c[T];try{o=i.fromRect?i.fromRect(t):new i(t.x,t.y,t.width,t.height)}catch(t){throwUnpolyfillable(T)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=c[T];try{o=i.fromMatrix?i.fromMatrix(t):new i(t)}catch(t){throwUnpolyfillable(T)}break;case"AudioData":case"VideoFrame":v(t.clone)||throwUnpolyfillable(T);try{o=t.clone()}catch(t){throwUncloneable(T)}break;case"File":try{o=new File([t],t.name,t)}catch(t){throwUnpolyfillable(T)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(T);default:throwUncloneable(T)}}te(r,t,o);if(I)switch(T){case"Array":case"Object":p=ie(t);for(d=0,h=E(p);d<h;d++){y=p[d];x(o,y,structuredCloneInternal(t[y],r))}break;case"Map":t.forEach((function(t,i){te(o,structuredCloneInternal(i,r),structuredCloneInternal(t,r))}));break;case"Set":t.forEach((function(t){ne(o,structuredCloneInternal(t,r))}));break;case"Error":A(o,"message",structuredCloneInternal(t.message,r));k(t,"cause")&&A(o,"cause",structuredCloneInternal(t.cause,r));"AggregateError"==a&&(o.errors=structuredCloneInternal(t.errors,r));case"DOMException":M&&A(o,"stack",structuredCloneInternal(t.stack,r))}return o};l({global:!0,enumerable:!0,sham:!L,forced:pe},{structuredClone:function structuredClone(t){var r,i=T(arguments.length,1)>1&&!g(arguments[1])?P(arguments[1]):void 0,a=i?i.transfer:void 0;void 0!==a&&function(t,r){if(!m(t))throw H("Transfer option cannot be converted to a sequence");var i=[];w(t,(function(t){ae(i,P(t))}));var a,o,l,u,d,h,p=0,g=E(i);if(L){u=fe(i,{transfer:i});for(;p<g;)te(r,i[p],u[p++])}else for(;p<g;){a=i[p++];if(J(r,a))throw new Q("Duplicate transferable",de);switch(o=S(a)){case"ImageBitmap":l=c.OffscreenCanvas;y(l)||throwUnpolyfillable(o,he);try{(h=new l(a.width,a.height)).getContext("bitmaprenderer").transferFromImageBitmap(a);d=h.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":v(a.clone)&&v(a.close)||throwUnpolyfillable(o,he);try{d=a.clone();a.close()}catch(t){}break;case"ArrayBuffer":v(a.transfer)||throwUnpolyfillable(o,he);d=a.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(o,he)}if(void 0===d)throw new Q("This object cannot be transferred: "+o,de);te(r,a,d)}}(a,r=new Z);return structuredCloneInternal(t,r)}})},(t,r,i)=>{var a=i(16),o=i(9),l=i(23),c=i(81),u=i(26),d=i(53),noop=function(){},h=[],p=u("Reflect","construct"),v=/^\s*(?:class|function)\b/,y=a(v.exec),g=!v.exec(noop),m=function isConstructor(t){if(!l(t))return!1;try{p(noop,h,t);return!0}catch(t){return!1}},b=function isConstructor(t){if(!l(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!y(v,d(t))}catch(t){return!0}};b.sham=!0;t.exports=!p||o((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?b:m},t=>{var r=TypeError;t.exports=function(t,i){if(t<i)throw r("Not enough arguments");return t}},(t,r,i)=>{var a=i(10),o=i(41),l=i(27),c=i(128),u=RegExp.prototype;t.exports=function(t){var r=t.flags;return void 0!==r||"flags"in u||o(t,"flags")||!l(u,t)?r:a(c,t)}},(t,r,i)=>{"use strict";var a=i(49);t.exports=function(){var t=a(this),r="";t.hasIndices&&(r+="d");t.global&&(r+="g");t.ignoreCase&&(r+="i");t.multiline&&(r+="m");t.dotAll&&(r+="s");t.unicode&&(r+="u");t.unicodeSets&&(r+="v");t.sticky&&(r+="y");return r}},(t,r,i)=>{var a=i(16),o=Map.prototype;t.exports={Map:Map,set:a(o.set),get:a(o.get),has:a(o.has),remove:a(o.delete),proto:o}},(t,r,i)=>{var a=i(16),o=Set.prototype;t.exports={Set:Set,add:a(o.add),has:a(o.has),remove:a(o.delete),proto:o}},(t,r,i)=>{var a=i(9),o=i(13);t.exports=!a((function(){var t=Error("a");if(!("stack"in t))return!0;Object.defineProperty(t,"stack",o(1,7));return 7!==t.stack}))},(t,r,i)=>{var a=i(6),o=i(9),l=i(30),c=i(133),u=i(134),d=i(135),h=a.structuredClone;t.exports=!!h&&!o((function(){if(u&&l>92||d&&l>94||c&&l>97)return!1;var t=new ArrayBuffer(8),r=h(t,{transfer:[t]});return 0!=t.byteLength||8!=r.byteLength}))},(t,r,i)=>{var a=i(134),o=i(135);t.exports=!a&&!o&&"object"==typeof window&&"object"==typeof document},t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(t,r,i)=>{var a=i(17);t.exports="undefined"!=typeof process&&"process"==a(process)},(t,r,i)=>{var a=i(6);t.exports=a},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(138),_display_utils=__w_pdfjs_require__(141),_font_loader=__w_pdfjs_require__(144),_canvas=__w_pdfjs_require__(146),_worker_options=__w_pdfjs_require__(149),_is_node=__w_pdfjs_require__(145),_message_handler=__w_pdfjs_require__(150),_metadata=__w_pdfjs_require__(151),_optional_content_config=__w_pdfjs_require__(152),_transport_stream=__w_pdfjs_require__(153),_xfa_text=__w_pdfjs_require__(154);function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return _classApplyDescriptorGet(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldSet(t,r,i){_classApplyDescriptorSet(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var r=_toPrimitive(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _classStaticPrivateFieldSpecSet(t,r,i,a){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"set");_classApplyDescriptorSet(t,i,a);return a}function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}function _classStaticPrivateFieldSpecGet(t,r,i){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"get");return _classApplyDescriptorGet(t,i)}function _classCheckPrivateStaticFieldDescriptor(t,r){if(void 0===t)throw new TypeError("attempted to "+r+" private static field before its declaration")}function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(t,r){return r.get?r.get.call(t):r.value}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,ServiceWorkerOptions={showUnverifiedSignatures:!1};window.ServiceWorkerOptions=ServiceWorkerOptions;var DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){var _require=__w_pdfjs_require__(155),NodeCanvasFactory=_require.NodeCanvasFactory,NodeCMapReaderFactory=_require.NodeCMapReaderFactory,NodeFilterFactory=_require.NodeFilterFactory,NodeStandardFontDataFactory=_require.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory;exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}if(_is_node.isNodeJS){var _require2=__w_pdfjs_require__(156),PDFNodeStream=_require2.PDFNodeStream;createPDFNetworkStream=function createPDFNetworkStream(t){return new PDFNodeStream(t)}}else{var _require3=__w_pdfjs_require__(159),PDFNetworkStream=_require3.PDFNetworkStream,_require4=__w_pdfjs_require__(160),PDFFetchStream=_require4.PDFFetchStream;createPDFNetworkStream=function createPDFNetworkStream(t){return(0,_display_utils.isValidFetchUrl)(t.url)?new PDFFetchStream(t):new PDFNetworkStream(t)}}function getDocument(t){var r,i;"string"==typeof t||t instanceof URL?t={url:t}:(0,_util.isArrayBuffer)(t)&&(t={data:t});if("object"!==_typeof(t))throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");var a=new PDFDocumentLoadingTask,o=a.docId,l=t.url?getUrlProp(t.url,t.baseHref):null,c=t.data?getDataProp(t.data):null,u=t.httpHeaders||null,d=!0===t.withCredentials,h=null!==(r=t.password)&&void 0!==r?r:null,p=t.range instanceof PDFDataRangeTransport?t.range:null,v=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,y=t.worker instanceof PDFWorker?t.worker:null,g=t.verbosity,m="string"!=typeof t.docBaseUrl||(0,_display_utils.isDataScheme)(t.docBaseUrl)?null:t.docBaseUrl,b="function"==typeof t.cMapUrl?t.cMapUrl():"string"==typeof t.cMapUrl?t.cMapUrl:null,w=!1!==t.cMapPacked,P=t.CMapReaderFactory||DefaultCMapReaderFactory,S="function"==typeof t.standardFontDataUrl?t.standardFontDataUrl():"string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,k=t.StandardFontDataFactory||DefaultStandardFontDataFactory,x=!0!==t.stopAtErrors,A=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,E=!1!==t.isEvalSupported,T="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!_is_node.isNodeJS,C=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,I="boolean"==typeof t.disableFontFace?t.disableFontFace:_is_node.isNodeJS,O=!0===t.fontExtraProperties,M=!0===t.enableXfa,L=t.ownerDocument||globalThis.document,R=!0===t.disableRange,D=!0===t.disableStream,G=!0===t.disableAutoFetch,j=!0===t.pdfBug,N=p?p.length:null!==(i=t.length)&&void 0!==i?i:NaN,B="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!_is_node.isNodeJS&&!I,V="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:P===_display_utils.DOMCMapReaderFactory&&k===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(S,document.baseURI),W=t.canvasFactory||new DefaultCanvasFactory({ownerDocument:L}),H=t.filterFactory||new DefaultFilterFactory({docId:o,ownerDocument:L});(0,_util.setVerbosityLevel)(g);var U={canvasFactory:W,filterFactory:H};if(!V){U.cMapReaderFactory=new P({baseUrl:b,isCompressed:w});U.standardFontDataFactory=new k({baseUrl:S})}if(!y){var z={verbosity:g,port:_worker_options.GlobalWorkerOptions.workerPort};y=z.port?PDFWorker.fromPort(z):new PDFWorker(z);a._worker=y}var X={docId:o,apiVersion:"3.5.553",data:c,password:h,disableAutoFetch:G,rangeChunkSize:v,length:N,docBaseUrl:m,enableXfa:M,evaluatorOptions:{maxImageSize:A,disableFontFace:I,ignoreErrors:x,isEvalSupported:E,isOffscreenCanvasSupported:T,canvasMaxAreaInBytes:C,fontExtraProperties:O,useSystemFonts:B,cMapUrl:V?b:null,standardFontDataUrl:V?S:null}},K={ignoreErrors:x,isEvalSupported:E,disableFontFace:I,fontExtraProperties:O,enableXfa:M,ownerDocument:L,disableAutoFetch:G,pdfBug:j,styleElement:null};y.promise.then((function(){if(a.destroyed)throw new Error("Loading aborted");var t=_fetchDocument(y,X),r=new Promise((function(t){var r;p?r=new _transport_stream.PDFDataTransportStream({length:N,initialData:p.initialData,progressiveDone:p.progressiveDone,contentDispositionFilename:p.contentDispositionFilename,disableRange:R,disableStream:D},p):c||(r=createPDFNetworkStream({url:l,length:N,httpHeaders:u,withCredentials:d,rangeChunkSize:v,disableRange:R,disableStream:D}));t(r)}));return Promise.all([t,r]).then((function(t){var r=_slicedToArray(t,2),i=r[0],l=r[1];if(a.destroyed)throw new Error("Loading aborted");var c=new _message_handler.MessageHandler(o,i,y.port),u=new WorkerTransport(c,a,l,K,U);a._transport=u;c.send("showUnverifiedSignatures",window.ServiceWorkerOptions.showUnverifiedSignatures);c.send("Ready",null)}))})).catch(a._capability.reject);return a}function _fetchDocument(t,r){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(t,r){var i;return _regeneratorRuntime().wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:if(!t.destroyed){a.next=2;break}throw new Error("Worker was destroyed");case 2:a.next=4;return t.messageHandler.sendWithPromise("GetDocRequest",r,r.data?[r.data.buffer]:null);case 4:i=a.sent;if(!t.destroyed){a.next=7;break}throw new Error("Worker was destroyed");case 7:return a.abrupt("return",i);case 8:case"end":return a.stop()}}),_callee6)})))).apply(this,arguments)}function getUrlProp(t,r){if(t instanceof URL)return t.href;try{return r?new URL(t,window.location.origin+r).href:new URL(t,window.location).href}catch(r){if(_is_node.isNodeJS&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(t){if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&t instanceof Buffer){(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`.");return new Uint8Array(t)}if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return(0,_util.stringToBytes)(t);if("object"===_typeof(t)&&!isNaN(null==t?void 0:t.length)||(0,_util.isArrayBuffer)(t))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}var PDFDocumentLoadingTask=function(){function PDFDocumentLoadingTask(){var t,r;_classCallCheck(this,PDFDocumentLoadingTask);this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d".concat((_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(t=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),r=t++,t)),r));this.destroyed=!1;this.onPassword=null;this.onProgress=null}_createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"destroy",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:this.destroyed=!0;r.next=3;return null===(t=this._transport)||void 0===t?void 0:t.destroy();case 3:this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}case 5:case"end":return r.stop()}}),_callee,this)}))),function destroy(){return t.apply(this,arguments)})}]);var t;return PDFDocumentLoadingTask}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0},PDFDataRangeTransport=function(){function PDFDataRangeTransport(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataRangeTransport);this.length=t;this.initialData=r;this.progressiveDone=i;this.contentDispositionFilename=a;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}_createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function addProgressListener(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function onDataRange(t,r){var i,a=_createForOfIteratorHelper(this._rangeListeners);try{for(a.s();!(i=a.n()).done;){(0,i.value)(t,r)}}catch(t){a.e(t)}finally{a.f()}}},{key:"onDataProgress",value:function onDataProgress(t,r){var i=this;this._readyCapability.promise.then((function(){var a,o=_createForOfIteratorHelper(i._progressListeners);try{for(o.s();!(a=o.n()).done;){(0,a.value)(t,r)}}catch(t){o.e(t)}finally{o.f()}}))}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(t){var r=this;this._readyCapability.promise.then((function(){var i,a=_createForOfIteratorHelper(r._progressiveReadListeners);try{for(a.s();!(i=a.n()).done;){(0,i.value)(t)}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var t=this;this._readyCapability.promise.then((function(){var r,i=_createForOfIteratorHelper(t._progressiveDoneListeners);try{for(i.s();!(r=i.n()).done;){(0,r.value)()}}catch(t){i.e(t)}finally{i.f()}}))}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function requestDataRange(t,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function abort(){}}]);return PDFDataRangeTransport}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function PDFDocumentProxy(t,r){_classCallCheck(this,PDFDocumentProxy);this._pdfInfo=t;this._transport=r}_createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return this._transport.annotationStorage}},{key:"filterFactory",get:function get(){return this._transport.filterFactory}},{key:"numPages",get:function get(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function get(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function get(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"allXfaHtml",get:function get(){return this._transport._htmlForXfa}},{key:"getPage",value:function getPage(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function getPageIndex(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations()}},{key:"getDestination",value:function getDestination(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions()}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo()}},{key:"getData",value:function getData(){return this._transport.getData()}},{key:"saveDocument",value:function saveDocument(){return this._transport.saveDocument()}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function get(){return this._transport.loadingParams}},{key:"loadingTask",get:function get(){return this._transport.loadingTask}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}]);return PDFDocumentProxy}();exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_tryCleanup=new WeakSet,_abortDelayedCleanup=new WeakSet,PDFPageProxy=function(){function PDFPageProxy(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,PDFPageProxy);_classPrivateMethodInitSpec(this,_abortDelayedCleanup);_classPrivateMethodInitSpec(this,_tryCleanup);_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,{writable:!0,value:null});_classPrivateFieldInitSpec(this,_pendingCleanup,{writable:!0,value:!1});this._pageIndex=t;this._pageInfo=r;this._transport=i;this._stats=a?new _display_utils.StatTimer:null;this._pdfBug=a;this.commonObjs=i.commonObjs;this.objs=new PDFObjects;this._maybeCleanupAfterRender=!1;this._intentStates=new Map;this.destroyed=!1}_createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1}},{key:"rotate",get:function get(){return this._pageInfo.rotate}},{key:"ref",get:function get(){return this._pageInfo.ref}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit}},{key:"view",get:function get(){return this._pageInfo.view}},{key:"getViewport",value:function getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,i=t.rotation,a=void 0===i?this.rotate:i,o=t.offsetX,l=void 0===o?0:o,c=t.offsetY,u=void 0===c?0:c,d=t.dontFlip,h=void 0!==d&&d;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:a,offsetX:l,offsetY:u,dontFlip:h})}},{key:"getAnnotations",value:function getAnnotations(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,r=void 0===t?"display":t,i=this._transport.getRenderingIntent(r);return this._transport.getAnnotations(this._pageIndex,i.renderingIntent)}},{key:"getJSActions",value:function getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}},{key:"isPureXfa",get:function get(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"getXfa",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t;return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null);case 1:case"end":return r.stop()}}),_callee2,this)}))),function getXfa(){return t.apply(this,arguments)})},{key:"render",value:function render(t){var r,i,a,o=this,l=t.canvasContext,c=t.viewport,u=t.intent,d=void 0===u?"display":u,h=t.annotationMode,p=void 0===h?_util.AnnotationMode.ENABLE:h,v=t.transform,y=void 0===v?null:v,g=t.background,m=void 0===g?null:g,b=t.optionalContentConfigPromise,w=void 0===b?null:b,P=t.annotationCanvasMap,S=void 0===P?null:P,k=t.pageColors,x=void 0===k?null:k,A=t.printAnnotationStorage,E=void 0===A?null:A;if(null!==(r=arguments[0])&&void 0!==r&&r.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");null===(i=this._stats)||void 0===i||i.time("Overall");var T=this._transport.getRenderingIntent(d,p,E);_classPrivateFieldSet(this,_pendingCleanup,!1);_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);w||(w=this._transport.getOptionalContentConfig());var C=this._intentStates.get(T.cacheKey);if(!C){C=Object.create(null);this._intentStates.set(T.cacheKey,C)}if(C.streamReaderCancelTimeout){clearTimeout(C.streamReaderCancelTimeout);C.streamReaderCancelTimeout=null}var I=!!(T.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!C.displayReadyCapability){var O;C.displayReadyCapability=(0,_util.createPromiseCapability)();C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};null===(O=this._stats)||void 0===O||O.time("Page Request");this._pumpOperatorList(T)}var M=function complete(t){var r,i;C.renderTasks.delete(L);(o._maybeCleanupAfterRender||I)&&_classPrivateFieldSet(o,_pendingCleanup,!0);_classPrivateMethodGet(o,_tryCleanup,_tryCleanup2).call(o,!I);if(t){L.capability.reject(t);o._abortOperatorList({intentState:C,reason:t instanceof Error?t:new Error(t)})}else L.capability.resolve();null===(r=o._stats)||void 0===r||r.timeEnd("Rendering");null===(i=o._stats)||void 0===i||i.timeEnd("Overall")},L=new InternalRenderTask({callback:M,params:{canvasContext:l,viewport:c,transform:y,background:m},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:S,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!I,pdfBug:this._pdfBug,pageColors:x});((a=C).renderTasks||(a.renderTasks=new Set)).add(L);var R=L.task;Promise.all([C.displayReadyCapability.promise,w]).then((function(t){var r,i=_slicedToArray(t,2),a=i[0],l=i[1];if(_classPrivateFieldGet(o,_pendingCleanup))M();else{null===(r=o._stats)||void 0===r||r.time("Rendering");L.initializeGraphics({transparency:a,optionalContentConfig:l});L.operatorListChanged()}})).catch(M);return R}},{key:"getOperatorList",value:function getOperatorList(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.intent,i=void 0===r?"display":r,a=t.annotationMode,o=void 0===a?_util.AnnotationMode.ENABLE:a,l=t.printAnnotationStorage,c=void 0===l?null:l;var u,d=this._transport.getRenderingIntent(i,o,c,!0),h=this._intentStates.get(d.cacheKey);if(!h){h=Object.create(null);this._intentStates.set(d.cacheKey,h)}if(!h.opListReadCapability){var p,v;(u=Object.create(null)).operatorListChanged=function operatorListChanged(){if(h.operatorList.lastChunk){h.opListReadCapability.resolve(h.operatorList);h.renderTasks.delete(u)}};h.opListReadCapability=(0,_util.createPromiseCapability)();((p=h).renderTasks||(p.renderTasks=new Set)).add(u);h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};null===(v=this._stats)||void 0===v||v.time("Page Request");this._pumpOperatorList(d)}return h.opListReadCapability.promise}},{key:"streamTextContent",value:function streamTextContent(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMarkedContent,r=void 0!==t&&t;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===r},{highWaterMark:100,size:function size(t){return t.items.length}})}},{key:"getTextContent",value:function getTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(t){return _xfa_text.XfaText.textContent(t)}));var r=this.streamTextContent(t);return new Promise((function(t,i){var a=r.getReader(),o={items:[],styles:Object.create(null)};!function pump(){a.read().then((function(r){var i,a=r.value;if(r.done)t(o);else{Object.assign(o.styles,a.styles);(i=o.items).push.apply(i,_toConsumableArray(a.items));pump()}}),i)}()}))}},{key:"getStructTree",value:function getStructTree(){return this._transport.getStructTree(this._pageIndex)}},{key:"_destroy",value:function _destroy(){this.destroyed=!0;var t,r=[],i=_createForOfIteratorHelper(this._intentStates.values());try{for(i.s();!(t=i.n()).done;){var a=t.value;this._abortOperatorList({intentState:a,reason:new Error("Page was destroyed."),force:!0});if(!a.opListReadCapability){var o,l=_createForOfIteratorHelper(a.renderTasks);try{for(l.s();!(o=l.n()).done;){var c=o.value;r.push(c.completed);c.cancel()}}catch(t){l.e(t)}finally{l.f()}}}}catch(t){i.e(t)}finally{i.f()}this.objs.clear();_classPrivateFieldSet(this,_pendingCleanup,!1);_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);return Promise.all(r)}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classPrivateFieldSet(this,_pendingCleanup,!0);var r=_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!1);t&&r&&this._stats&&(this._stats=new _display_utils.StatTimer);return r}},{key:"_startRenderPage",value:function _startRenderPage(t,r){var i,a,o=this._intentStates.get(r);if(o){null===(i=this._stats)||void 0===i||i.timeEnd("Page Request");null===(a=o.displayReadyCapability)||void 0===a||a.resolve(t)}}},{key:"_renderPageChunk",value:function _renderPageChunk(t,r){for(var i=0,a=t.length;i<a;i++){r.operatorList.fnArray.push(t.fnArray[i]);r.operatorList.argsArray.push(t.argsArray[i])}r.operatorList.lastChunk=t.lastChunk;r.operatorList.separateAnnots=t.separateAnnots;var o,l=_createForOfIteratorHelper(r.renderTasks);try{for(l.s();!(o=l.n()).done;){o.value.operatorListChanged()}}catch(t){l.e(t)}finally{l.f()}t.lastChunk&&_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!0)}},{key:"_pumpOperatorList",value:function _pumpOperatorList(t){var r=this,i=t.renderingIntent,a=t.cacheKey,o=t.annotationStorageMap,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:i,cacheKey:a,annotationStorage:o}).getReader(),c=this._intentStates.get(a);c.streamReader=l;!function pump(){l.read().then((function(t){var i=t.value;if(t.done)c.streamReader=null;else if(!r._transport.destroyed){r._renderPageChunk(i,c);pump()}}),(function(t){c.streamReader=null;if(!r._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;var i,a=_createForOfIteratorHelper(c.renderTasks);try{for(a.s();!(i=a.n()).done;){i.value.operatorListChanged()}}catch(t){a.e(t)}finally{a.f()}_classPrivateMethodGet(r,_tryCleanup,_tryCleanup2).call(r,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(t);else{if(!c.opListReadCapability)throw t;c.opListReadCapability.reject(t)}}}))}()}},{key:"_abortOperatorList",value:function _abortOperatorList(t){var r=this,i=t.intentState,a=t.reason,o=t.force,l=void 0!==o&&o;if(i.streamReader){if(i.streamReaderCancelTimeout){clearTimeout(i.streamReaderCancelTimeout);i.streamReaderCancelTimeout=null}if(!l){if(i.renderTasks.size>0)return;if(a instanceof _display_utils.RenderingCancelledException){var c=RENDERING_CANCELLED_TIMEOUT;a.extraDelay>0&&a.extraDelay<1e3&&(c+=a.extraDelay);i.streamReaderCancelTimeout=setTimeout((function(){i.streamReaderCancelTimeout=null;r._abortOperatorList({intentState:i,reason:a,force:!0})}),c);return}}i.streamReader.cancel(new _util.AbortException(a.message)).catch((function(){}));i.streamReader=null;if(!this._transport.destroyed){var u,d=_createForOfIteratorHelper(this._intentStates);try{for(d.s();!(u=d.n()).done;){var h=_slicedToArray(u.value,2),p=h[0];if(h[1]===i){this._intentStates.delete(p);break}}}catch(t){d.e(t)}finally{d.f()}this.cleanup()}}}},{key:"stats",get:function get(){return this._stats}}]);var t;return PDFPageProxy}();exports.PDFPageProxy=PDFPageProxy;function _tryCleanup2(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);if(!_classPrivateFieldGet(this,_pendingCleanup))return!1;if(r){_classPrivateFieldSet(this,_delayedCleanupTimeout,setTimeout((function(){_classPrivateFieldSet(t,_delayedCleanupTimeout,null);_classPrivateMethodGet(t,_tryCleanup,_tryCleanup2).call(t,!1)}),DELAYED_CLEANUP_TIMEOUT));return!1}var i,a=_createForOfIteratorHelper(this._intentStates.values());try{for(a.s();!(i=a.n()).done;){var o=i.value,l=o.renderTasks,c=o.operatorList;if(l.size>0||!c.lastChunk)return!1}}catch(t){a.e(t)}finally{a.f()}this._intentStates.clear();this.objs.clear();_classPrivateFieldSet(this,_pendingCleanup,!1);return!0}function _abortDelayedCleanup2(){if(_classPrivateFieldGet(this,_delayedCleanupTimeout)){clearTimeout(_classPrivateFieldGet(this,_delayedCleanupTimeout));_classPrivateFieldSet(this,_delayedCleanupTimeout,null)}}var _listeners=new WeakMap,_deferred=new WeakMap,LoopbackPort=function(){function LoopbackPort(){_classCallCheck(this,LoopbackPort);_classPrivateFieldInitSpec(this,_listeners,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,_deferred,{writable:!0,value:Promise.resolve()})}_createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(t,r){var i=this,a={data:structuredClone(t,r?{transfer:r}:null)};_classPrivateFieldGet(this,_deferred).then((function(){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(i,_listeners));try{for(r.s();!(t=r.n()).done;){t.value.call(i,a)}}catch(t){r.e(t)}finally{r.f()}}))}},{key:"addEventListener",value:function addEventListener(t,r){_classPrivateFieldGet(this,_listeners).add(r)}},{key:"removeEventListener",value:function removeEventListener(t,r){_classPrivateFieldGet(this,_listeners).delete(r)}},{key:"terminate",value:function terminate(){_classPrivateFieldGet(this,_listeners).clear()}}]);return LoopbackPort}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;if(_is_node.isNodeJS&&"function"==typeof require){PDFWorkerUtil.isWorkerDisabled=!0;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if("object"===("undefined"==typeof document?"undefined":_typeof(document))){var _document,_document$currentScri,pdfjsFilePath=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,r){var i;try{if(!(i=new URL(t)).origin||"null"===i.origin)return!1}catch(t){return!1}var a=new URL(r,i);return i.origin===a.origin};PDFWorkerUtil.createCDNWrapper=function(t){var r='importScripts("'.concat(t,'");');return URL.createObjectURL(new Blob([r]))};var _generateTrustedURL=new WeakSet,PDFWorker=function(){function PDFWorker(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,i=void 0===r?null:r,a=t.port,o=void 0===a?null:a,l=t.verbosity,c=void 0===l?(0,_util.getVerbosityLevel)():l;_classCallCheck(this,PDFWorker);_classPrivateMethodInitSpec(this,_generateTrustedURL);if(o&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(o))throw new Error("Cannot use more than one PDFWorker per port.");this.name=i;this.destroyed=!1;this.verbosity=c;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(o){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(o,this);this._initializeFromPort(o)}else this._initialize()}_createClass(PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise}},{key:"port",get:function get(){return this._port}},{key:"messageHandler",get:function get(){return this._messageHandler}},{key:"_initializeFromPort",value:function _initializeFromPort(t){this._port=t;this._messageHandler=new _message_handler.MessageHandler("main","worker",t);this._messageHandler.on("ready",(function(){}));this._readyCapability.resolve();this._messageHandler.send("configure",{verbosity:this.verbosity})}},{key:"_initialize",value:function _initialize(){var t=this;if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var r=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));var i=new Worker(_classPrivateMethodGet(this,_generateTrustedURL,_generateTrustedURL2).call(this,r)),a=new _message_handler.MessageHandler("main","worker",i),o=function terminateEarly(){i.removeEventListener("error",l);a.destroy();i.terminate();t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},l=function onWorkerError(){t._webWorker||o()};i.addEventListener("error",l);a.on("test",(function(r){i.removeEventListener("error",l);if(t.destroyed)o();else if(r){t._messageHandler=a;t._port=i;t._webWorker=i;t._readyCapability.resolve();a.send("configure",{verbosity:t.verbosity})}else{t._setupFakeWorker();a.destroy();i.terminate()}}));a.on("ready",(function(r){i.removeEventListener("error",l);if(t.destroyed)o();else try{c()}catch(r){t._setupFakeWorker()}}));var c=function sendTest(){var t=new Uint8Array;a.send("test",t,[t.buffer])};c();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var t=this;if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=!0}PDFWorker._setupFakeWorkerGlobal.then((function(r){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var i=new LoopbackPort;t._port=i;var a="fake".concat(PDFWorkerUtil.fakeWorkerId++),o=new _message_handler.MessageHandler(a+"_worker",a,i);r.setup(o,i);var l=new _message_handler.MessageHandler(a,a+"_worker",i);t._messageHandler=l;t._readyCapability.resolve();l.send("configure",{verbosity:t.verbosity})}})).catch((function(r){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(r.message,'".')))}))}},{key:"destroy",value:function destroy(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}}],[{key:"fromPort",value:function fromPort(t){if(null==t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(t.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(t.port):new PDFWorker(t)}},{key:"workerSrc",get:function get(){if(_worker_options.GlobalWorkerOptions.workerSrc)return"Function"===_worker_options.GlobalWorkerOptions.workerSrc.constructor.name?_worker_options.GlobalWorkerOptions.workerSrc():_worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.');return PDFWorkerUtil.fallbackWorkerSrc}throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function get(){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(t){return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this10=this,loader=function(){var _ref15=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:mainWorkerMessageHandler=_this10._mainThreadWorkerMessageHandler;if(!mainWorkerMessageHandler){_context3.next=3;break}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof require){_context3.next=6;break}worker=eval("require")(_this10.workerSrc);return _context3.abrupt("return",worker.WorkerMessageHandler);case 6:_context3.next=8;return(0,_display_utils.loadScript)(_this10.workerSrc);case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop()}}),_callee3)})));return function loader(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]);return PDFWorker}();exports.PDFWorker=PDFWorker;function _generateTrustedURL2(t){if(window.trustedTypes){return window.trustedTypes.createPolicy("foo",{createScriptURL:function createScriptURL(t){return t}}).createScriptURL(t)}return t}var _workerPorts={writable:!0,value:new WeakMap},_methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_cacheSimpleMethod=new WeakSet,WorkerTransport=function(){function WorkerTransport(t,r,i,a,o){_classCallCheck(this,WorkerTransport);_classPrivateMethodInitSpec(this,_cacheSimpleMethod);_classPrivateFieldInitSpec(this,_methodPromises,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map});this.messageHandler=t;this.loadingTask=r;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement});this._params=a;this.canvasFactory=o.canvasFactory;this.filterFactory=o.filterFactory;this.cMapReaderFactory=o.cMapReaderFactory;this.standardFontDataFactory=o.standardFontDataFactory;this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=i;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}_createClass(WorkerTransport,[{key:"annotationStorage",get:function get(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"getRenderingIntent",value:function getRenderingIntent(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=_util.RenderingIntentFlag.DISPLAY,l=null;switch(t){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(r){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:l=((o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(r))}a&&(o+=_util.RenderingIntentFlag.OPLIST);return{renderingIntent:o,cacheKey:"".concat(o,"_").concat(_annotation_storage.AnnotationStorage.getHash(l)),annotationStorageMap:l}}},{key:"destroy",value:function destroy(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r,i=[],a=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(o._destroy())}}catch(t){a.e(t)}finally{a.f()}_classPrivateFieldGet(this,_pageCache).clear();_classPrivateFieldGet(this,_pagePromises).clear();this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var l=this.messageHandler.sendWithPromise("Terminate",null);i.push(l);Promise.all(i).then((function(){t.commonObjs.clear();t.fontLoader.clear();_classPrivateFieldGet(t,_methodPromises).clear();t.filterFactory.destroy();t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));if(t.messageHandler){t.messageHandler.destroy();t.messageHandler=null}t.destroyCapability.resolve()}),this.destroyCapability.reject);return this.destroyCapability.promise}},{key:"setupMessageHandler",value:function setupMessageHandler(){var t=this,r=this.messageHandler,i=this.loadingTask;r.on("GetReader",(function(r,i){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available.");t._fullReader=t._networkStream.getFullReader();t._fullReader.onProgress=function(r){t._lastProgress={loaded:r.loaded,total:r.total}};i.onPull=function(){t._fullReader.read().then((function(t){var r=t.value;if(t.done)i.close();else{(0,_util.assert)(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer.");i.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){i.error(t)}))};i.onCancel=function(r){t._fullReader.cancel(r);i.ready.catch((function(r){if(!t.destroyed)throw r}))}}));r.on("ReaderHeadersReady",(function(r){var a=(0,_util.createPromiseCapability)(),o=t._fullReader;o.headersReady.then((function(){if(!o.isStreamingSupported||!o.isRangeSupported){if(t._lastProgress){var r;null===(r=i.onProgress)||void 0===r||r.call(i,t._lastProgress)}o.onProgress=function(t){var r;null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:t.loaded,total:t.total})}}a.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})}),a.reject);return a.promise}));r.on("GetRangeReader",(function(r,i){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var a=t._networkStream.getRangeReader(r.begin,r.end);if(a){i.onPull=function(){a.read().then((function(t){var r=t.value;if(t.done)i.close();else{(0,_util.assert)(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer.");i.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){i.error(t)}))};i.onCancel=function(r){a.cancel(r);i.ready.catch((function(r){if(!t.destroyed)throw r}))}}else i.close()}));r.on("GetDoc",(function(r){var a=r.pdfInfo;t._numPages=a.numPages;t._htmlForXfa=a.htmlForXfa;delete a.htmlForXfa;i._capability.resolve(new PDFDocumentProxy(a,t))}));r.on("DocException",(function(t){var r;switch(t.name){case"PasswordException":r=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":r=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}i._capability.reject(r)}));r.on("PasswordRequest",(function(r){t._passwordCapability=(0,_util.createPromiseCapability)();if(i.onPassword){try{i.onPassword((function updatePassword(r){r instanceof Error?t._passwordCapability.reject(r):t._passwordCapability.resolve({password:r})}),r.code)}catch(r){t._passwordCapability.reject(r)}}else t._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return t._passwordCapability.promise}));r.on("DataLoaded",(function(r){var a;null===(a=i.onProgress)||void 0===a||a.call(i,{loaded:r.length,total:r.length});t.downloadInfoCapability.resolve(r)}));r.on("StartRenderPage",(function(r){if(!t.destroyed){_classPrivateFieldGet(t,_pageCache).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}}));r.on("commonobj",(function(i){var a,o=_slicedToArray(i,3),l=o[0],c=o[1],u=o[2];if(!t.destroyed&&!t.commonObjs.has(l))switch(c){case"Font":var d=t._params;if("error"in u){var h=u.error;(0,_util.warn)("Error during font loading: ".concat(h));t.commonObjs.resolve(l,h);break}var p=d.pdfBug&&null!==(a=globalThis.FontInspector)&&void 0!==a&&a.enabled?function(t,r){return globalThis.FontInspector.fontAdded(t,r)}:null,v=new _font_loader.FontFaceObject(u,{isEvalSupported:d.isEvalSupported,disableFontFace:d.disableFontFace,ignoreErrors:d.ignoreErrors,inspectFont:p});t.fontLoader.bind(v).catch((function(t){return r.sendWithPromise("FontFallback",{id:l})})).finally((function(){!d.fontExtraProperties&&v.data&&(v.data=null);t.commonObjs.resolve(l,v)}));break;case"FontPath":case"Image":case"Pattern":t.commonObjs.resolve(l,u);break;default:throw new Error("Got unknown common object type ".concat(c))}}));r.on("obj",(function(r){var i=_slicedToArray(r,4),a=i[0],o=i[1],l=i[2],c=i[3];if(!t.destroyed){var u=_classPrivateFieldGet(t,_pageCache).get(o);if(!u.objs.has(a))switch(l){case"Image":u.objs.resolve(a,c);if(c){var d;if(c.bitmap){d=c.width*c.height*4}else{var h;d=(null===(h=c.data)||void 0===h?void 0:h.length)||0}d>_util.MAX_IMAGE_SIZE_TO_CACHE&&(u._maybeCleanupAfterRender=!0)}break;case"Pattern":u.objs.resolve(a,c);break;default:throw new Error("Got unknown object type ".concat(l))}}}));r.on("DocProgress",(function(r){var a;t.destroyed||null===(a=i.onProgress)||void 0===a||a.call(i,{loaded:r.loaded,total:r.total})}));r.on("FetchBuiltInCMap",(function(r){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.cMapReaderFactory?t.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}));r.on("FetchStandardFontData",(function(r){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.standardFontDataFactory?t.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"saveDocument",value:function saveDocument(){var t,r,i=this;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(t=null===(r=this._fullReader)||void 0===r?void 0:r.filename)&&void 0!==t?t:null}).finally((function(){i.annotationStorage.resetModified()}))}},{key:"getPage",value:function getPage(t){var r=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var i=t-1,a=_classPrivateFieldGet(this,_pagePromises).get(i);if(a)return a;var o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then((function(t){if(r.destroyed)throw new Error("Transport destroyed");var a=new PDFPageProxy(i,t,r,r._params.pdfBug);_classPrivateFieldGet(r,_pageCache).set(i,a);return a}));_classPrivateFieldGet(this,_pagePromises).set(i,o);return o}},{key:"getPageIndex",value:function getPageIndex(t){return"object"!==_typeof(t)||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}},{key:"getAnnotations",value:function getAnnotations(t,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:r})}},{key:"getFieldObjects",value:function getFieldObjects(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"GetFieldObjects")}},{key:"hasJSActions",value:function hasJSActions(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"HasJSActions")}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(t){return new _optional_content_config.OptionalContentConfig(t)}))}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function getMetadata(){var t=this,r="GetMetadata",i=_classPrivateFieldGet(this,_methodPromises).get(r);if(i)return i;var a=this.messageHandler.sendWithPromise(r,null).then((function(r){var i,a,o,l;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:null!==(i=null===(a=t._fullReader)||void 0===a?void 0:a.filename)&&void 0!==i?i:null,contentLength:null!==(o=null===(l=t._fullReader)||void 0===l?void 0:l.contentLength)&&void 0!==o?o:null}}));_classPrivateFieldGet(this,_methodPromises).set(r,a);return a}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var t,r,i,a,o=arguments;return _regeneratorRuntime().wrap((function _callee4$(l){for(;;)switch(l.prev=l.next){case 0:t=o.length>0&&void 0!==o[0]&&o[0];if(!this.destroyed){l.next=3;break}return l.abrupt("return");case 3:l.next=5;return this.messageHandler.sendWithPromise("Cleanup",null);case 5:r=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());l.prev=6;r.s();case 8:if((i=r.n()).done){l.next=15;break}if((a=i.value).cleanup()){l.next=13;break}throw new Error("startCleanup: Page ".concat(a.pageNumber," is currently rendering."));case 13:l.next=8;break;case 15:l.next=20;break;case 17:l.prev=17;l.t0=l.catch(6);r.e(l.t0);case 20:l.prev=20;r.f();return l.finish(20);case 23:this.commonObjs.clear();t||this.fontLoader.clear();_classPrivateFieldGet(this,_methodPromises).clear();this.filterFactory.destroy(!0);case 27:case"end":return l.stop()}}),_callee4,this,[[6,17,20,23]])}))),function startCleanup(){return t.apply(this,arguments)})},{key:"loadingParams",get:function get(){var t=this._params,r=t.disableAutoFetch,i=t.enableXfa;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r,enableXfa:i})}}]);var t;return WorkerTransport}();function _cacheSimpleMethod2(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=_classPrivateFieldGet(this,_methodPromises).get(t);if(i)return i;var a=this.messageHandler.sendWithPromise(t,r);_classPrivateFieldGet(this,_methodPromises).set(t,a);return a}var _objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){function PDFObjects(){_classCallCheck(this,PDFObjects);_classPrivateMethodInitSpec(this,_ensureObj);_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}_createClass(PDFObjects,[{key:"get",value:function get(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r){var i=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);i.capability.promise.then((function(){return r(i.data)}));return null}var a=_classPrivateFieldGet(this,_objs)[t];if(null==a||!a.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return a.data}},{key:"has",value:function has(t){var r=_classPrivateFieldGet(this,_objs)[t];return(null==r?void 0:r.capability.settled)||!1}},{key:"resolve",value:function resolve(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);i.data=r;i.capability.resolve()}},{key:"clear",value:function clear(){for(var t in _classPrivateFieldGet(this,_objs)){var r,i=_classPrivateFieldGet(this,_objs)[t].data;null==i||null===(r=i.bitmap)||void 0===r||r.close()}_classPrivateFieldSet(this,_objs,Object.create(null))}}]);return PDFObjects}();function _ensureObj2(t){var r=_classPrivateFieldGet(this,_objs)[t];return r||(_classPrivateFieldGet(this,_objs)[t]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap,RenderTask=function(){function RenderTask(t){_classCallCheck(this,RenderTask);_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null});_classPrivateFieldSet(this,_internalRenderTask,t);this.onContinue=null}_createClass(RenderTask,[{key:"promise",get:function get(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}},{key:"cancel",value:function cancel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classPrivateFieldGet(this,_internalRenderTask).cancel(null,t)}},{key:"separateAnnots",get:function get(){var t=_classPrivateFieldGet(this,_internalRenderTask).operatorList.separateAnnots;if(!t)return!1;var r=_classPrivateFieldGet(this,_internalRenderTask).annotationCanvasMap;return t.form||t.canvas&&(null==r?void 0:r.size)>0}}]);return RenderTask}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function InternalRenderTask(t){var r=t.callback,i=t.params,a=t.objs,o=t.commonObjs,l=t.annotationCanvasMap,c=t.operatorList,u=t.pageIndex,d=t.canvasFactory,h=t.filterFactory,p=t.useRequestAnimationFrame,v=void 0!==p&&p,y=t.pdfBug,g=void 0!==y&&y,m=t.pageColors,b=void 0===m?null:m;_classCallCheck(this,InternalRenderTask);this.callback=r;this.params=i;this.objs=a;this.commonObjs=o;this.annotationCanvasMap=l;this.operatorListIdx=null;this.operatorList=c;this._pageIndex=u;this.canvasFactory=d;this.filterFactory=h;this._pdfBug=g;this.pageColors=b;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===v&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=i.canvasContext.canvas}_createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function initializeGraphics(t){var r,i,a=t.transparency,o=void 0!==a&&a,l=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}if(this._pdfBug&&null!==(r=globalThis.StepperManager)&&void 0!==r&&r.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}var c=this.params,u=c.canvasContext,d=c.viewport,h=c.transform,p=c.background;this.gfx=new _canvas.CanvasGraphics(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:l},this.annotationCanvasMap);this.gfx.beginDrawing({transform:h,viewport:d,transparency:o,background:p});this.operatorListIdx=0;this.graphicsReady=!0;null===(i=this.graphicsReadyCallback)||void 0===i||i.call(this)}}},{key:"cancel",value:function cancel(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1;this.cancelled=!0;null===(t=this.gfx)||void 0===t||t.endDrawing(this.pageColors);this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback(r||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas",i))}},{key:"operatorListChanged",value:function operatorListChanged(){var t;if(this.graphicsReady){null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList);this.running||this._continue()}else this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function _continue(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function _scheduleNext(){var t=this;window.ngxZone.runOutsideAngular((function(){t._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t._cancelBound)})):Promise.resolve().then(t._nextBound).catch(t._cancelBound)}))}},{key:"_next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){return _regeneratorRuntime().wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing(this.pageColors);this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback()}}case 4:case"end":return t.stop()}}),_callee5,this)}))),function _next(){return t.apply(this,arguments)})}]);var t;return InternalRenderTask}(),_canvasInUse={writable:!0,value:new WeakSet},version="3.5.553";exports.version=version;var build="31d818330";exports.build=build},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var a=i(1),o=i(139),l=i(143);function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var c=new WeakMap,u=new WeakMap,d=new WeakSet,h=function(){function AnnotationStorage(){_classCallCheck(this,AnnotationStorage);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,d);_classPrivateFieldInitSpec(this,c,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,u,{writable:!0,value:new Map});this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null}_createClass(AnnotationStorage,[{key:"getValue",value:function getValue(t,r){var i=_classPrivateFieldGet(this,u).get(t);return void 0===i?r:Object.assign(r,i)}},{key:"getRawValue",value:function getRawValue(t){return _classPrivateFieldGet(this,u).get(t)}},{key:"remove",value:function remove(t){_classPrivateFieldGet(this,u).delete(t);0===_classPrivateFieldGet(this,u).size&&this.resetModified();if("function"==typeof this.onAnnotationEditor){var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,u).values());try{for(i.s();!(r=i.n()).done;){if(r.value instanceof o.AnnotationEditor)return}}catch(t){i.e(t)}finally{i.f()}this.onAnnotationEditor(null)}}},{key:"setValue",value:function setValue(t,r){var i=_classPrivateFieldGet(this,u).get(t),a=!1;if(void 0!==i)for(var l=0,c=Object.entries(r);l<c.length;l++){var h=_slicedToArray(c[l],2),p=h[0],v=h[1];if(i[p]!==v){a=!0;i[p]=v}}else{a=!0;_classPrivateFieldGet(this,u).set(t,r)}a&&function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}(this,d,_setModified2).call(this);r instanceof o.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(r.constructor._type)}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,u).has(t)}},{key:"getAll",value:function getAll(){return _classPrivateFieldGet(this,u).size>0?(0,a.objectFromMap)(_classPrivateFieldGet(this,u)):null}},{key:"setAll",value:function setAll(t){for(var r=0,i=Object.entries(t);r<i.length;r++){var a=_slicedToArray(i[r],2),o=a[0],l=a[1];this.setValue(o,l)}}},{key:"size",get:function get(){return _classPrivateFieldGet(this,u).size}},{key:"resetModified",value:function resetModified(){if(_classPrivateFieldGet(this,c)){_classPrivateFieldSet(this,c,!1);"function"==typeof this.onResetModified&&this.onResetModified()}}},{key:"print",get:function get(){return new v(this)}},{key:"serializable",get:function get(){if(0===_classPrivateFieldGet(this,u).size)return null;var t,r=new Map,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,u));try{for(i.s();!(t=i.n()).done;){var a=_slicedToArray(t.value,2),l=a[0],c=a[1],d=c instanceof o.AnnotationEditor?c.serialize():c;d&&r.set(l,d)}}catch(t){i.e(t)}finally{i.f()}return r}}],[{key:"getHash",value:function getHash(t){if(!t)return"";var r,i=new l.MurmurHash3_64,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o=_slicedToArray(r.value,2),c=o[0],u=o[1];i.update("".concat(c,":").concat(JSON.stringify(u)))}}catch(t){a.e(t)}finally{a.f()}return i.hexdigest()}}]);return AnnotationStorage}();r.AnnotationStorage=h;function _setModified2(){if(!_classPrivateFieldGet(this,c)){_classPrivateFieldSet(this,c,!0);"function"==typeof this.onSetModified&&this.onSetModified()}}var p=new WeakMap,v=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PrintAnnotationStorage,t);var r=_createSuper(PrintAnnotationStorage);function PrintAnnotationStorage(t){var i;_classCallCheck(this,PrintAnnotationStorage);_classPrivateFieldInitSpec(_assertThisInitialized(i=r.call(this)),p,{writable:!0,value:null});_classPrivateFieldSet(_assertThisInitialized(i),p,structuredClone(t.serializable));return i}_createClass(PrintAnnotationStorage,[{key:"print",get:function get(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function get(){return _classPrivateFieldGet(this,p)}}]);return PrintAnnotationStorage}(h);r.PrintAnnotationStorage=v},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditor=void 0;var a=i(140),o=i(1);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=function(){function AnnotationEditor(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditor);_classPrivateFieldInitSpec(this,l,{writable:!0,value:this.focusin.bind(this)});_classPrivateFieldInitSpec(this,c,{writable:!0,value:this.focusout.bind(this)});_classPrivateFieldInitSpec(this,u,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:!1});_defineProperty(this,"_uiManager",null);_classPrivateFieldInitSpec(this,p,{writable:!0,value:AnnotationEditor._zIndex++});this.constructor===AnnotationEditor&&(0,o.unreachable)("Cannot initialize AnnotationEditor.");this.parent=t.parent;this.id=t.id;this.width=this.height=null;this.pageIndex=t.parent.pageIndex;this.name=t.name;this.div=null;this._uiManager=t.uiManager;var r=this.parent.viewport,i=r.rotation,a=r.rawDims,v=a.pageWidth,y=a.pageHeight,g=a.pageX,m=a.pageY;this.rotation=i;this.pageDimensions=[v,y];this.pageTranslation=[g,m];var b=_slicedToArray(this.parentDimensions,2),w=b[0],P=b[1];this.x=t.x/w;this.y=t.y/P;this.isAttachedToDOM=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditor,[{key:"addCommands",value:function addCommands(t){this._uiManager.addCommands(t)}},{key:"currentLayer",get:function get(){return this._uiManager.currentLayer}},{key:"setInBackground",value:function setInBackground(){this.div.style.zIndex=0}},{key:"setInForeground",value:function setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,p)}},{key:"setParent",value:function setParent(t){if(null!==t){this.pageIndex=t.pageIndex;this.pageDimensions=t.pageDimensions}this.parent=t}},{key:"focusin",value:function focusin(t){_classPrivateFieldGet(this,u)?_classPrivateFieldSet(this,u,!1):this.parent.setSelected(this)}},{key:"focusout",value:function focusout(t){var r;if(this.isAttachedToDOM){var i=t.relatedTarget;if(null==i||!i.closest("#".concat(this.id))){t.preventDefault();null!==(r=this.parent)&&void 0!==r&&r.isMultipleSelection||this.commitOrRemove()}}}},{key:"commitOrRemove",value:function commitOrRemove(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function commit(){this.addToAnnotationStorage()}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}},{key:"dragstart",value:function dragstart(t){var r=this.parent.div.getBoundingClientRect();this.startX=t.clientX-r.x;this.startY=t.clientY-r.y;t.dataTransfer.setData("text/plain",this.id);t.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function setAt(t,r,i,a){var o=_slicedToArray(this.parentDimensions,2),l=o[0],c=o[1],u=_slicedToArray(this.screenToPageTranslation(i,a),2);i=u[0];a=u[1];this.x=(t+i)/l;this.y=(r+a)/c;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function translate(t,r){var i=_slicedToArray(this.parentDimensions,2),a=i[0],o=i[1],l=_slicedToArray(this.screenToPageTranslation(t,r),2);t=l[0];r=l[1];this.x+=t/a;this.y+=r/o;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function screenToPageTranslation(t,r){switch(this.parentRotation){case 90:return[r,-t];case 180:return[-t,-r];case 270:return[-r,t];default:return[t,r]}}},{key:"parentScale",get:function get(){return this._uiManager.viewParameters.realScale}},{key:"parentRotation",get:function get(){return this._uiManager.viewParameters.rotation}},{key:"parentDimensions",get:function get(){var t=this._uiManager.viewParameters.realScale,r=_slicedToArray(this.pageDimensions,2);return[r[0]*t,r[1]*t]}},{key:"setDims",value:function setDims(t,r){var i=_slicedToArray(this.parentDimensions,2),a=i[0],o=i[1];this.div.style.width="".concat(100*t/a,"%");this.div.style.height="".concat(100*r/o,"%")}},{key:"fixDims",value:function fixDims(){var t=this.div.style,r=t.height,i=t.width,a=i.endsWith("%"),o=r.endsWith("%");if(!a||!o){var l=_slicedToArray(this.parentDimensions,2),c=l[0],u=l[1];a||(t.width="".concat(100*parseFloat(i)/c,"%"));o||(t.height="".concat(100*parseFloat(r)/u,"%"))}}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[0,0]}},{key:"render",value:function render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",_classPrivateFieldGet(this,l));this.div.addEventListener("focusout",_classPrivateFieldGet(this,c));var t=_slicedToArray(this.getInitialTranslation(),2),r=t[0],i=t[1];this.translate(r,i);(0,a.bindEvents)(this,this.div,["dragstart","pointerdown"]);return this.div}},{key:"pointerdown",value:function pointerdown(t){var r=o.FeatureTest.platform.isMac;if(0!==t.button||t.ctrlKey&&r)t.preventDefault();else{t.ctrlKey&&!r||t.shiftKey||t.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this);_classPrivateFieldSet(this,u,!0)}}},{key:"getRect",value:function getRect(t,r){var i=this.parentScale,a=_slicedToArray(this.pageDimensions,2),o=a[0],l=a[1],c=_slicedToArray(this.pageTranslation,2),u=c[0],d=c[1],h=t/i,p=r/i,v=this.x*o,y=this.y*l,g=this.width*o,m=this.height*l;switch(this.rotation){case 0:return[v+h+u,l-y-p-m+d,v+h+g+u,l-y-p+d];case 90:return[v+p+u,l-y+h+d,v+p+m+u,l-y+h+g+d];case 180:return[v-h-g+u,l-y+p+d,v-h+u,l-y+p+m+d];case 270:return[v-p-m+u,l-y-h-g+d,v-p+u,l-y-h+d];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function getRectInCurrentCoords(t,r){var i=_slicedToArray(t,4),a=i[0],o=i[1],l=i[2],c=i[3],u=l-a,d=c-o;switch(this.rotation){case 0:return[a,r-c,u,d];case 90:return[a,r-o,d,u];case 180:return[l,r-o,u,d];case 270:return[l,r-c,d,u];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function onceAdded(){}},{key:"isEmpty",value:function isEmpty(){return!1}},{key:"enableEditMode",value:function enableEditMode(){_classPrivateFieldSet(this,h,!0)}},{key:"disableEditMode",value:function disableEditMode(){_classPrivateFieldSet(this,h,!1)}},{key:"isInEditMode",value:function isInEditMode(){return _classPrivateFieldGet(this,h)}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return!1}},{key:"needsToBeRebuilt",value:function needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function rebuild(){var t;null===(t=this.div)||void 0===t||t.addEventListener("focusin",_classPrivateFieldGet(this,l))}},{key:"serialize",value:function serialize(){(0,o.unreachable)("An editor must be serializable")}},{key:"remove",value:function remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,l));this.div.removeEventListener("focusout",_classPrivateFieldGet(this,c));this.isEmpty()||this.commit();this.parent.remove(this)}},{key:"select",value:function select(){var t;null===(t=this.div)||void 0===t||t.classList.add("selectedEditor")}},{key:"unselect",value:function unselect(){var t;null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor")}},{key:"updateParams",value:function updateParams(t,r){}},{key:"disableEditing",value:function disableEditing(){}},{key:"enableEditing",value:function enableEditing(){}},{key:"propertiesToUpdate",get:function get(){return{}}},{key:"contentDiv",get:function get(){return this.div}},{key:"isEditing",get:function get(){return _classPrivateFieldGet(this,d)},set:function set(t){_classPrivateFieldSet(this,d,t);if(t){this.parent.setSelected(this);this.parent.setActiveEditor(this)}else this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function get(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function deserialize(t,r,i){var a=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:i});a.rotation=t.rotation;var o=_slicedToArray(a.pageDimensions,2),l=o[0],c=o[1],u=_slicedToArray(a.getRectInCurrentCoords(t.rect,c),4),d=u[0],h=u[1],p=u[2],v=u[3];a.x=d/l;a.y=h/c;a.width=p/l;a.height=v/c;return a}}]);return AnnotationEditor}();r.AnnotationEditor=v;_defineProperty(v,"_colorManager",new a.ColorManager);_defineProperty(v,"_zIndex",1)},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0;r.bindEvents=function bindEvents(t,r,i){var a,o=_createForOfIteratorHelper(i);try{for(o.s();!(a=o.n()).done;){var l=a.value;r.addEventListener(l,t[l].bind(t))}}catch(t){o.e(t)}finally{o.f()}};r.opacityToHex=function opacityToHex(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var a=i(1),o=i(141);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var l=new WeakMap,c=function(){function IdManager(){_classCallCheck(this,IdManager);_classPrivateFieldInitSpec(this,l,{writable:!0,value:0})}_createClass(IdManager,[{key:"getId",value:function getId(){var t,r;return"".concat(a.AnnotationEditorPrefix).concat((_classPrivateFieldSet(this,l,(t=_classPrivateFieldGet(this,l),r=t++,t)),r))}}]);return IdManager}(),u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=function(){function CommandManager(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;_classCallCheck(this,CommandManager);_classPrivateFieldInitSpec(this,u,{writable:!0,value:[]});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,p,{writable:!0,value:-1});_classPrivateFieldSet(this,h,t)}_createClass(CommandManager,[{key:"add",value:function add(t){var r=t.cmd,i=t.undo,a=t.mustExec,o=t.type,l=void 0===o?NaN:o,c=t.overwriteIfSameType,v=void 0!==c&&c,y=t.keepUndo,g=void 0!==y&&y;a&&r();if(!_classPrivateFieldGet(this,d)){var m={cmd:r,undo:i,type:l};if(-1!==_classPrivateFieldGet(this,p))if(v&&_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].type===l){g&&(m.undo=_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].undo);_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)]=m}else{var b=_classPrivateFieldGet(this,p)+1;if(b===_classPrivateFieldGet(this,h))_classPrivateFieldGet(this,u).splice(0,1);else{_classPrivateFieldSet(this,p,b);b<_classPrivateFieldGet(this,u).length&&_classPrivateFieldGet(this,u).splice(b)}_classPrivateFieldGet(this,u).push(m)}else{_classPrivateFieldGet(this,u).length>0&&(_classPrivateFieldGet(this,u).length=0);_classPrivateFieldSet(this,p,0);_classPrivateFieldGet(this,u).push(m)}}}},{key:"undo",value:function undo(){if(-1!==_classPrivateFieldGet(this,p)){_classPrivateFieldSet(this,d,!0);_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].undo();_classPrivateFieldSet(this,d,!1);_classPrivateFieldSet(this,p,_classPrivateFieldGet(this,p)-1)}}},{key:"redo",value:function redo(){if(_classPrivateFieldGet(this,p)<_classPrivateFieldGet(this,u).length-1){_classPrivateFieldSet(this,p,_classPrivateFieldGet(this,p)+1);_classPrivateFieldSet(this,d,!0);_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].cmd();_classPrivateFieldSet(this,d,!1)}}},{key:"hasSomethingToUndo",value:function hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,p)}},{key:"hasSomethingToRedo",value:function hasSomethingToRedo(){return _classPrivateFieldGet(this,p)<_classPrivateFieldGet(this,u).length-1}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(this,u,null)}},{key:"reset",value:function reset(){_classPrivateFieldSet(this,u,[]);_classPrivateFieldSet(this,p,-1);_classPrivateFieldSet(this,d,!1)}}]);return CommandManager}();r.CommandManager=v;var y=new WeakSet,g=function(){function KeyboardManager(t){_classCallCheck(this,KeyboardManager);_classPrivateMethodInitSpec(this,y);this.buffer=[];this.callbacks=new Map;this.allKeys=new Set;var r,i=a.FeatureTest.platform.isMac,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var l,c=_slicedToArray(r.value,2),u=c[0],d=c[1],h=_createForOfIteratorHelper(u);try{for(h.s();!(l=h.n()).done;){var p=l.value,v=p.startsWith("mac+");if(i&&v){this.callbacks.set(p.slice(4),d);this.allKeys.add(p.split("+").at(-1))}else if(!i&&!v){this.callbacks.set(p,d);this.allKeys.add(p.split("+").at(-1))}}}catch(t){h.e(t)}finally{h.f()}}}catch(t){o.e(t)}finally{o.f()}}_createClass(KeyboardManager,[{key:"exec",value:function exec(t,r){if(this.allKeys.has(r.key)){var i=this.callbacks.get(_classPrivateMethodGet(this,y,_serialize2).call(this,r));if(i){i.bind(t)();r.stopPropagation();r.preventDefault()}}}}]);return KeyboardManager}();r.KeyboardManager=g;function _serialize2(t){t.altKey&&this.buffer.push("alt");t.ctrlKey&&this.buffer.push("ctrl");t.metaKey&&this.buffer.push("meta");t.shiftKey&&this.buffer.push("shift");this.buffer.push(t.key);var r=this.buffer.join("+");this.buffer.length=0;return r}var m=function(){function ColorManager(){_classCallCheck(this,ColorManager)}_createClass(ColorManager,[{key:"_colors",get:function get(){var t=new Map([["CanvasText",null],["Canvas",null]]);(0,o.getColorValues)(t);return(0,a.shadow)(this,"_colors",t)}},{key:"convert",value:function convert(t){var r=(0,o.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return r;var i,a=_createForOfIteratorHelper(this._colors);try{for(a.s();!(i=a.n()).done;){var l=_slicedToArray(i.value,2),c=l[0];if(l[1].every((function(t,i){return t===r[i]})))return ColorManager._colorsMapping.get(c)}}catch(t){a.e(t)}finally{a.f()}return r}},{key:"getHexCode",value:function getHexCode(t){var r=this._colors.get(t);return r?a.Util.makeHexColor.apply(a.Util,_toConsumableArray(r)):t}}]);return ColorManager}();r.ColorManager=m;_defineProperty(m,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var b=new WeakMap,w=new WeakMap,P=new WeakMap,S=new WeakMap,k=new WeakMap,x=new WeakMap,A=new WeakMap,E=new WeakMap,T=new WeakMap,C=new WeakMap,I=new WeakMap,O=new WeakMap,M=new WeakMap,L=new WeakMap,R=new WeakMap,D=new WeakMap,G=new WeakMap,j=new WeakMap,N=new WeakMap,B=new WeakMap,V=new WeakMap,W=new WeakMap,H=new WeakMap,U=new WeakSet,z=new WeakSet,X=new WeakSet,K=new WeakSet,Y=new WeakSet,$=new WeakSet,Q=new WeakSet,Z=new WeakSet,J=new WeakSet,ee=new WeakSet,te=new WeakSet,re=function(){function AnnotationEditorUIManager(t,r,i){_classCallCheck(this,AnnotationEditorUIManager);_classPrivateMethodInitSpec(this,te);_classPrivateMethodInitSpec(this,ee);_classPrivateMethodInitSpec(this,J);_classPrivateMethodInitSpec(this,Z);_classPrivateMethodInitSpec(this,Q);_classPrivateMethodInitSpec(this,$);_classPrivateMethodInitSpec(this,Y);_classPrivateMethodInitSpec(this,K);_classPrivateMethodInitSpec(this,X);_classPrivateMethodInitSpec(this,z);_classPrivateMethodInitSpec(this,U);_classPrivateFieldInitSpec(this,b,{writable:!0,value:null});_classPrivateFieldInitSpec(this,w,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,P,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,S,{writable:!0,value:null});_classPrivateFieldInitSpec(this,k,{writable:!0,value:new v});_classPrivateFieldInitSpec(this,x,{writable:!0,value:0});_classPrivateFieldInitSpec(this,A,{writable:!0,value:null});_classPrivateFieldInitSpec(this,E,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,T,{writable:!0,value:null});_classPrivateFieldInitSpec(this,C,{writable:!0,value:new c});_classPrivateFieldInitSpec(this,I,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,O,{writable:!0,value:a.AnnotationEditorType.NONE});_classPrivateFieldInitSpec(this,M,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,L,{writable:!0,value:this.copy.bind(this)});_classPrivateFieldInitSpec(this,R,{writable:!0,value:this.cut.bind(this)});_classPrivateFieldInitSpec(this,D,{writable:!0,value:this.paste.bind(this)});_classPrivateFieldInitSpec(this,G,{writable:!0,value:this.keydown.bind(this)});_classPrivateFieldInitSpec(this,j,{writable:!0,value:this.onEditingAction.bind(this)});_classPrivateFieldInitSpec(this,N,{writable:!0,value:this.onPageChanging.bind(this)});_classPrivateFieldInitSpec(this,B,{writable:!0,value:this.onScaleChanging.bind(this)});_classPrivateFieldInitSpec(this,V,{writable:!0,value:this.onRotationChanging.bind(this)});_classPrivateFieldInitSpec(this,W,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}});_classPrivateFieldInitSpec(this,H,{writable:!0,value:null});_classPrivateFieldSet(this,H,t);_classPrivateFieldSet(this,T,r);_classPrivateFieldGet(this,T)._on("editingaction",_classPrivateFieldGet(this,j));_classPrivateFieldGet(this,T)._on("pagechanging",_classPrivateFieldGet(this,N));_classPrivateFieldGet(this,T)._on("scalechanging",_classPrivateFieldGet(this,B));_classPrivateFieldGet(this,T)._on("rotationchanging",_classPrivateFieldGet(this,V));_classPrivateFieldSet(this,S,i);this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}_createClass(AnnotationEditorUIManager,[{key:"destroy",value:function destroy(){_classPrivateMethodGet(this,z,_removeKeyboardManager2).call(this);_classPrivateFieldGet(this,T)._off("editingaction",_classPrivateFieldGet(this,j));_classPrivateFieldGet(this,T)._off("pagechanging",_classPrivateFieldGet(this,N));_classPrivateFieldGet(this,T)._off("scalechanging",_classPrivateFieldGet(this,B));_classPrivateFieldGet(this,T)._off("rotationchanging",_classPrivateFieldGet(this,V));var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(r.s();!(t=r.n()).done;){t.value.destroy()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,P).clear();_classPrivateFieldGet(this,w).clear();_classPrivateFieldGet(this,E).clear();_classPrivateFieldSet(this,b,null);_classPrivateFieldGet(this,M).clear();_classPrivateFieldGet(this,k).destroy()}},{key:"onPageChanging",value:function onPageChanging(t){var r=t.pageNumber;_classPrivateFieldSet(this,x,r-1)}},{key:"focusMainContainer",value:function focusMainContainer(){_classPrivateFieldGet(this,H).focus()}},{key:"addShouldRescale",value:function addShouldRescale(t){_classPrivateFieldGet(this,E).add(t)}},{key:"removeShouldRescale",value:function removeShouldRescale(t){_classPrivateFieldGet(this,E).delete(t)}},{key:"onScaleChanging",value:function onScaleChanging(t){var r=t.scale;this.commitOrRemove();this.viewParameters.realScale=r*o.PixelsPerInch.PDF_TO_CSS_UNITS;var i,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,E));try{for(a.s();!(i=a.n()).done;){i.value.onScaleChanging()}}catch(t){a.e(t)}finally{a.f()}}},{key:"onRotationChanging",value:function onRotationChanging(t){var r=t.pagesRotation;this.commitOrRemove();this.viewParameters.rotation=r}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(t){t.isEmpty()||!_classPrivateFieldGet(this,S)||_classPrivateFieldGet(this,S).has(t.id)||_classPrivateFieldGet(this,S).setValue(t.id,t)}},{key:"copy",value:function copy(t){t.preventDefault();_classPrivateFieldGet(this,b)&&_classPrivateFieldGet(this,b).commitOrRemove();if(this.hasSelection){var r,i=[],a=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(a.s();!(r=a.n()).done;){var o=r.value;o.isEmpty()||i.push(o.serialize())}}catch(t){a.e(t)}finally{a.f()}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}}},{key:"cut",value:function cut(t){this.copy(t);this.delete()}},{key:"paste",value:function paste(t){t.preventDefault();var r=t.clipboardData.getData("application/pdfjs");this.addSerializedEditor(r)}},{key:"addSerializedEditor",value:function addSerializedEditor(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){try{"string"==typeof t&&(t=JSON.parse(t))}catch(t){(0,a.warn)('paste: "'.concat(t.message,'".'));return}if(Array.isArray(t)){var o=_classPrivateFieldGet(this,O);i&&o===a.AnnotationEditorType.NONE&&this.updateMode(a.AnnotationEditorType.FREETEXT);this.unselectAll();var l=_classPrivateFieldGet(this,P).get(_classPrivateFieldGet(this,x));try{var c,u=[],d=_createForOfIteratorHelper(t);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=l.deserialize(h);if(!p)return;u.push(p)}}catch(t){d.e(t)}finally{d.f()}this.addCommands({cmd:function cmd(){for(var t=0,i=u;t<i.length;t++){var a=i[t];_classPrivateMethodGet(r,J,_addEditorToLayer2).call(r,a)}_classPrivateMethodGet(r,te,_selectEditors2).call(r,u)},undo:function undo(){for(var t=0,r=u;t<r.length;t++){r[t].remove()}},mustExec:!0})}catch(t){(0,a.warn)('paste: "'.concat(t.message,'".'))}i&&o!==_classPrivateFieldGet(this,O)&&this.updateMode(o)}}}},{key:"keydown",value:function keydown(t){var r;null!==(r=this.getActive())&&void 0!==r&&r.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,t)}},{key:"onEditingAction",value:function onEditingAction(t){["undo","redo","delete","selectAll"].includes(t.name)&&this[t.name]()}},{key:"setEditingState",value:function setEditingState(t){if(t){_classPrivateMethodGet(this,U,_addKeyboardManager2).call(this);_classPrivateMethodGet(this,X,_addCopyPasteListeners2).call(this);_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet(this,O)!==a.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,ee,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,k).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,k).hasSomethingToRedo(),hasSelectedEditor:!1})}else{_classPrivateMethodGet(this,z,_removeKeyboardManager2).call(this);_classPrivateMethodGet(this,K,_removeCopyPasteListeners2).call(this);_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{isEditing:!1})}}},{key:"registerEditorTypes",value:function registerEditorTypes(t){if(!_classPrivateFieldGet(this,A)){_classPrivateFieldSet(this,A,t);var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,A));try{for(i.s();!(r=i.n()).done;){var a=r.value;_classPrivateMethodGet(this,$,_dispatchUpdateUI2).call(this,a.defaultPropertiesToUpdate)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"getId",value:function getId(){return _classPrivateFieldGet(this,C).getId()}},{key:"currentLayer",get:function get(){return _classPrivateFieldGet(this,P).get(_classPrivateFieldGet(this,x))}},{key:"currentPageIndex",get:function get(){return _classPrivateFieldGet(this,x)}},{key:"addLayer",value:function addLayer(t){_classPrivateFieldGet(this,P).set(t.pageIndex,t);_classPrivateFieldGet(this,I)?t.enable():t.disable()}},{key:"removeLayer",value:function removeLayer(t){_classPrivateFieldGet(this,P).delete(t.pageIndex)}},{key:"updateMode",value:function updateMode(t){_classPrivateFieldSet(this,O,t);if(t===a.AnnotationEditorType.NONE){this.setEditingState(!1);_classPrivateMethodGet(this,Z,_disableAll2).call(this)}else{this.setEditingState(!0);_classPrivateMethodGet(this,Q,_enableAll2).call(this);var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(i.s();!(r=i.n()).done;){r.value.updateMode(t)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"updateToolbar",value:function updateToolbar(t){t!==_classPrivateFieldGet(this,O)&&_classPrivateFieldGet(this,T).dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function updateParams(t,r){if(_classPrivateFieldGet(this,A)){var i,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(a.s();!(i=a.n()).done;){i.value.updateParams(t,r)}}catch(t){a.e(t)}finally{a.f()}var o,l=_createForOfIteratorHelper(_classPrivateFieldGet(this,A));try{for(l.s();!(o=l.n()).done;){o.value.updateDefaultParams(t,r)}}catch(t){l.e(t)}finally{l.f()}}}},{key:"getEditors",value:function getEditors(t){var r,i=[],a=_createForOfIteratorHelper(_classPrivateFieldGet(this,w).values());try{for(a.s();!(r=a.n()).done;){var o=r.value;o.pageIndex===t&&i.push(o)}}catch(t){a.e(t)}finally{a.f()}return i}},{key:"getEditor",value:function getEditor(t){return _classPrivateFieldGet(this,w).get(t)}},{key:"addEditor",value:function addEditor(t){_classPrivateFieldGet(this,w).set(t.id,t)}},{key:"removeEditor",value:function removeEditor(t){var r;_classPrivateFieldGet(this,w).delete(t.id);this.unselect(t);null===(r=_classPrivateFieldGet(this,S))||void 0===r||r.remove(t.id)}},{key:"setActiveEditor",value:function setActiveEditor(t){if(_classPrivateFieldGet(this,b)!==t){_classPrivateFieldSet(this,b,t);t&&_classPrivateMethodGet(this,$,_dispatchUpdateUI2).call(this,t.propertiesToUpdate)}}},{key:"toggleSelected",value:function toggleSelected(t){if(_classPrivateFieldGet(this,M).has(t)){_classPrivateFieldGet(this,M).delete(t);t.unselect();_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}else{_classPrivateFieldGet(this,M).add(t);t.select();_classPrivateMethodGet(this,$,_dispatchUpdateUI2).call(this,t.propertiesToUpdate);_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}}},{key:"setSelected",value:function setSelected(t){var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(i.s();!(r=i.n()).done;){var a=r.value;a!==t&&a.unselect()}}catch(t){i.e(t)}finally{i.f()}_classPrivateFieldGet(this,M).clear();_classPrivateFieldGet(this,M).add(t);t.select();_classPrivateMethodGet(this,$,_dispatchUpdateUI2).call(this,t.propertiesToUpdate);_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function isSelected(t){return _classPrivateFieldGet(this,M).has(t)}},{key:"unselect",value:function unselect(t){t.unselect();_classPrivateFieldGet(this,M).delete(t);_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function get(){return 0!==_classPrivateFieldGet(this,M).size}},{key:"undo",value:function undo(){_classPrivateFieldGet(this,k).undo();_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,k).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,ee,_isEmpty2).call(this)})}},{key:"redo",value:function redo(){_classPrivateFieldGet(this,k).redo();_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,k).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,ee,_isEmpty2).call(this)})}},{key:"addCommands",value:function addCommands(t){_classPrivateFieldGet(this,k).add(t);_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,ee,_isEmpty2).call(this)})}},{key:"delete",value:function _delete(){var t=this;this.commitOrRemove();if(this.hasSelection){var r=_toConsumableArray(_classPrivateFieldGet(this,M));this.addCommands({cmd:function cmd(){var t,i=_createForOfIteratorHelper(r);try{for(i.s();!(t=i.n()).done;){t.value.remove()}}catch(t){i.e(t)}finally{i.f()}},undo:function undo(){var i,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;_classPrivateMethodGet(t,J,_addEditorToLayer2).call(t,o)}}catch(t){a.e(t)}finally{a.f()}},mustExec:!0})}}},{key:"commitOrRemove",value:function commitOrRemove(){var t;null===(t=_classPrivateFieldGet(this,b))||void 0===t||t.commitOrRemove()}},{key:"selectAll",value:function selectAll(){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(r.s();!(t=r.n()).done;){t.value.commit()}}catch(t){r.e(t)}finally{r.f()}_classPrivateMethodGet(this,te,_selectEditors2).call(this,_classPrivateFieldGet(this,w).values())}},{key:"unselectAll",value:function unselectAll(){if(_classPrivateFieldGet(this,b))_classPrivateFieldGet(this,b).commitOrRemove();else if(0!==_classPrivateFieldGet(this,M).size){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(r.s();!(t=r.n()).done;){t.value.unselect()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,M).clear();_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function isActive(t){return _classPrivateFieldGet(this,b)===t}},{key:"getActive",value:function getActive(){return _classPrivateFieldGet(this,b)}},{key:"getMode",value:function getMode(){return _classPrivateFieldGet(this,O)}},{key:"removeEditors",value:function removeEditors(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0},r=!1;_classPrivateFieldGet(this,w).forEach((function(i){if(t(i.serialize())){i.remove();r=!0}}));if(r){_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!1,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,ee,_isEmpty2).call(this)});_classPrivateFieldGet(this,k).reset()}}}]);return AnnotationEditorUIManager}();r.AnnotationEditorUIManager=re;function _addKeyboardManager2(){_classPrivateFieldGet(this,H).addEventListener("keydown",_classPrivateFieldGet(this,G))}function _removeKeyboardManager2(){_classPrivateFieldGet(this,H).removeEventListener("keydown",_classPrivateFieldGet(this,G))}function _addCopyPasteListeners2(){document.addEventListener("copy",_classPrivateFieldGet(this,L));document.addEventListener("cut",_classPrivateFieldGet(this,R));document.addEventListener("paste",_classPrivateFieldGet(this,D))}function _removeCopyPasteListeners2(){document.removeEventListener("copy",_classPrivateFieldGet(this,L));document.removeEventListener("cut",_classPrivateFieldGet(this,R));document.removeEventListener("paste",_classPrivateFieldGet(this,D))}function _dispatchUpdateStates2(t){var r=this;Object.entries(t).some((function(t){var i=_slicedToArray(t,2),a=i[0],o=i[1];return _classPrivateFieldGet(r,W)[a]!==o}))&&_classPrivateFieldGet(this,T).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,W),t)})}function _dispatchUpdateUI2(t){_classPrivateFieldGet(this,T).dispatch("annotationeditorparamschanged",{source:this,details:t})}function _enableAll2(){if(!_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!0);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(r.s();!(t=r.n()).done;){t.value.enable()}}catch(t){r.e(t)}finally{r.f()}}}function _disableAll2(){this.unselectAll();if(_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!1);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(r.s();!(t=r.n()).done;){t.value.disable()}}catch(t){r.e(t)}finally{r.f()}}}function _addEditorToLayer2(t){var r=_classPrivateFieldGet(this,P).get(t.pageIndex);r?r.addOrRebuild(t):this.addEditor(t)}function _isEmpty2(){if(0===_classPrivateFieldGet(this,w).size)return!0;if(1===_classPrivateFieldGet(this,w).size){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,w).values());try{for(r.s();!(t=r.n()).done;){return t.value.isEmpty()}}catch(t){r.e(t)}finally{r.f()}}return!1}function _selectEditors2(t){_classPrivateFieldGet(this,M).clear();var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!a.isEmpty()){_classPrivateFieldGet(this,M).add(a);a.select()}}}catch(t){i.e(t)}finally{i.f()}_classPrivateMethodGet(this,Y,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}_defineProperty(re,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],re.prototype.selectAll],[["ctrl+z","mac+meta+z"],re.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],re.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],re.prototype.delete],[["Escape","mac+Escape"],re.prototype.unselectAll]]))},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMFilterFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=r.AnnotationPrefix=void 0;r.deprecated=function deprecated(t){globalThis.ngxConsole.log("Deprecated API usage: "+t)};r.getColorValues=function getColorValues(t){var r=document.createElement("span");r.style.visibility="hidden";document.body.append(r);var i,a=_createForOfIteratorHelper(t.keys());try{for(a.s();!(i=a.n()).done;){var o=i.value;r.style.color=o;var l=window.getComputedStyle(r).color;t.set(o,getRGB(l))}}catch(t){a.e(t)}finally{a.f()}r.remove()};r.getCurrentTransform=function getCurrentTransform(t){var r=t.getTransform(),i=r.a,a=r.b,o=r.c,l=r.d,c=r.e,u=r.f;return[i,a,o,l,c,u]};r.getCurrentTransformInverse=function getCurrentTransformInverse(t){var r=t.getTransform().invertSelf(),i=r.a,a=r.b,o=r.c,l=r.d,c=r.e,u=r.f;return[i,a,o,l,c,u]};r.getFilenameFromUrl=function getFilenameFromUrl(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){var r=t.split(/[#?]/,1);t=_slicedToArray(r,1)[0]}return t.substring(t.lastIndexOf("/")+1)};r.getPdfFilenameFromUrl=function getPdfFilenameFromUrl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if(window.PDFViewerApplication.appConfig.filenameForDownload)return window.PDFViewerApplication.appConfig.filenameForDownload;if("string"!=typeof t)return r;if(isDataScheme(t)){(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');return r}var i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),l=i.exec(a[1])||i.exec(a[2])||i.exec(a[3]);if(l&&(l=l[0]).includes("%"))try{l=i.exec(decodeURIComponent(l))[0]}catch(t){}return l||r};r.getRGB=getRGB;r.getXfaPageViewport=function getXfaPageViewport(t,r){var i=r.scale,a=void 0===i?1:i,o=r.rotation,l=void 0===o?0:o,c=t.attributes.style,u=c.width,d=c.height,h=[0,0,parseInt(u),parseInt(d)];return new T({viewBox:h,scale:a,rotation:l})};r.isDataScheme=isDataScheme;r.isPdfFile=function isPdfFile(t){return"string"==typeof t&&/\.pdf$/i.test(t)};r.isValidFetchUrl=isValidFetchUrl;r.loadScript=function loadScript(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(i,a){var o=document.createElement("script"),l=t;"Function"===t.constructor.name&&(l=t());var c=function generateTrustedURL(t){if(window.trustedTypes){return window.trustedTypes.createPolicy("foo",{createScriptURL:function createScriptURL(t){return t}}).createScriptURL(t)}return t}(l);o.src=c;o.onload=function(t){r&&o.remove();i(t)};o.onerror=function(t){globalThis.ngxConsole.log(t);a(new Error("Cannot load script at: ".concat(o.src)))};(document.head||document.documentElement).append(o)}))};r.setLayerDimensions=function setLayerDimensions(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(r instanceof T){var o=r.rawDims,l=o.pageWidth,c=o.pageHeight,u=t.style,d="calc(var(--scale-factor) * ".concat(l,"px)"),h="calc(var(--scale-factor) * ".concat(c,"px)");if(i&&r.rotation%180!=0){u.width=h;u.height=d}else{u.width=d;u.height=h}}a&&t.setAttribute("data-main-rotation",r.rotation)};var a=i(142),o=i(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}var l="http://www.w3.org/2000/svg";r.AnnotationPrefix="pdfjs_internal_id_";var c=_createClass((function PixelsPerInch(){_classCallCheck(this,PixelsPerInch)}));r.PixelsPerInch=c;_defineProperty(c,"CSS",96);_defineProperty(c,"PDF",72);_defineProperty(c,"PDF_TO_CSS_UNITS",c.CSS/c.PDF);var u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,P=new WeakSet,S=function(t){_inherits(DOMFilterFactory,t);var r=_createSuper(DOMFilterFactory);function DOMFilterFactory(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.docId,o=i.ownerDocument,l=void 0===o?globalThis.document:o;_classCallCheck(this,DOMFilterFactory);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(_assertThisInitialized(t=r.call(this)),P);_classPrivateFieldInitSpec(_assertThisInitialized(t),w,{get:_get_defs,set:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),b,{get:_get_cache,set:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),u,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),d,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),h,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),p,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),v,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),y,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),g,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(t),m,{writable:!0,value:0});_classPrivateFieldSet(_assertThisInitialized(t),h,a);_classPrivateFieldSet(_assertThisInitialized(t),p,l);return t}_createClass(DOMFilterFactory,[{key:"addFilter",value:function addFilter(t){var r,i;if(!t)return"none";var a,o,c,u,d=_classPrivateFieldGet(this,b).get(t);if(d)return d;if(1===t.length){for(var v=t[0],y=new Array(256),g=0;g<256;g++)y[g]=v[g]/255;u=a=o=c=y.join(",")}else{for(var S=_slicedToArray(t,3),k=S[0],x=S[1],A=S[2],E=new Array(256),T=new Array(256),C=new Array(256),I=0;I<256;I++){E[I]=k[I]/255;T[I]=x[I]/255;C[I]=A[I]/255}a=E.join(",");o=T.join(",");c=C.join(",");u="".concat(a).concat(o).concat(c)}if(d=_classPrivateFieldGet(this,b).get(u)){_classPrivateFieldGet(this,b).set(t,d);return d}var O="g_".concat(_classPrivateFieldGet(this,h),"_transfer_map_").concat((_classPrivateFieldSet(this,m,(r=_classPrivateFieldGet(this,m),i=r++,r)),i)),M="url(#".concat(O,")");_classPrivateFieldGet(this,b).set(t,M);_classPrivateFieldGet(this,b).set(u,M);var L=_classPrivateFieldGet(this,p).createElementNS(l,"filter",l);L.setAttribute("id",O);L.setAttribute("color-interpolation-filters","sRGB");var R=_classPrivateFieldGet(this,p).createElementNS(l,"feComponentTransfer");L.append(R);_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,R,"feFuncR",a);_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,R,"feFuncG",o);_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,R,"feFuncB",c);_classPrivateFieldGet(this,w).append(L);return M}},{key:"addHCMFilter",value:function addHCMFilter(t,r){var i,a="".concat(t,"-").concat(r);if(_classPrivateFieldGet(this,y)===a)return _classPrivateFieldGet(this,g);_classPrivateFieldSet(this,y,a);_classPrivateFieldSet(this,g,"none");null===(i=_classPrivateFieldGet(this,v))||void 0===i||i.remove();if(!t||!r)return _classPrivateFieldGet(this,g);_classPrivateFieldGet(this,w).style.color=t;var c=getRGB(t=getComputedStyle(_classPrivateFieldGet(this,w)).getPropertyValue("color"));t=o.Util.makeHexColor.apply(o.Util,_toConsumableArray(c));_classPrivateFieldGet(this,w).style.color=r;var u=getRGB(r=getComputedStyle(_classPrivateFieldGet(this,w)).getPropertyValue("color"));r=o.Util.makeHexColor.apply(o.Util,_toConsumableArray(u));_classPrivateFieldGet(this,w).style.color="";if("#000000"===t&&"#ffffff"===r||t===r)return _classPrivateFieldGet(this,g);for(var d=new Array(256),m=0;m<=255;m++){var b=m/255;d[m]=b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4)}var S=d.join(","),k="g_".concat(_classPrivateFieldGet(this,h),"_hcm_filter"),x=_classPrivateFieldSet(this,v,_classPrivateFieldGet(this,p).createElementNS(l,"filter",l));x.setAttribute("id",k);x.setAttribute("color-interpolation-filters","sRGB");var A=_classPrivateFieldGet(this,p).createElementNS(l,"feComponentTransfer");x.append(A);_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,A,"feFuncR",S);_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,A,"feFuncG",S);_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,A,"feFuncB",S);var E=_classPrivateFieldGet(this,p).createElementNS(l,"feColorMatrix");E.setAttribute("type","matrix");E.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0");x.append(E);A=_classPrivateFieldGet(this,p).createElementNS(l,"feComponentTransfer");x.append(A);var T=function getSteps(t,r){for(var i=c[t]/255,a=u[t]/255,o=new Array(r+1),l=0;l<=r;l++)o[l]=i+l/r*(a-i);return o.join(",")};_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,A,"feFuncR",T(0,5));_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,A,"feFuncG",T(1,5));_classPrivateMethodGet(this,P,_appendFeFunc2).call(this,A,"feFuncB",T(2,5));_classPrivateFieldGet(this,w).append(x);_classPrivateFieldSet(this,g,"url(#".concat(k,")"));return _classPrivateFieldGet(this,g)}},{key:"destroy",value:function destroy(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])||!_classPrivateFieldGet(this,g)){if(_classPrivateFieldGet(this,d)){_classPrivateFieldGet(this,d).parentNode.parentNode.remove();_classPrivateFieldSet(this,d,null)}if(_classPrivateFieldGet(this,u)){_classPrivateFieldGet(this,u).clear();_classPrivateFieldSet(this,u,null)}_classPrivateFieldSet(this,m,0)}}}]);return DOMFilterFactory}(a.BaseFilterFactory);r.DOMFilterFactory=S;function _get_cache(){return _classPrivateFieldGet(this,u)||_classPrivateFieldSet(this,u,new Map)}function _get_defs(){if(!_classPrivateFieldGet(this,d)){var t=_classPrivateFieldGet(this,p).createElement("div"),r=t.style;r.visibility="hidden";r.contain="strict";r.width=r.height=0;r.position="absolute";r.top=r.left=0;r.zIndex=-1;var i=_classPrivateFieldGet(this,p).createElementNS(l,"svg");i.setAttribute("width",0);i.setAttribute("height",0);_classPrivateFieldSet(this,d,_classPrivateFieldGet(this,p).createElementNS(l,"defs"));t.append(i);i.append(_classPrivateFieldGet(this,d));_classPrivateFieldGet(this,p).body.append(t)}return _classPrivateFieldGet(this,d)}function _appendFeFunc2(t,r,i){var a=_classPrivateFieldGet(this,p).createElementNS(l,r);a.setAttribute("type","discrete");a.setAttribute("tableValues",i);t.append(a)}var k=function(t){_inherits(DOMCanvasFactory,t);var r=_createSuper(DOMCanvasFactory);function DOMCanvasFactory(){var t,i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ownerDocument,a=void 0===i?globalThis.document:i;_classCallCheck(this,DOMCanvasFactory);(t=r.call(this))._document=a;return t}_createClass(DOMCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,r){var i=this._document.createElement("canvas");i.width=t;i.height=r;return i}}]);return DOMCanvasFactory}(a.BaseCanvasFactory);r.DOMCanvasFactory=k;function fetchData(t){return _fetchData.apply(this,arguments)}function _fetchData(){_fetchData=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,a=arguments;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r=a.length>1&&void 0!==a[1]&&a[1];if(!isValidFetchUrl(t,document.baseURI)){l.next=21;break}l.next=4;return fetch(t);case 4:if((i=l.sent).ok){l.next=7;break}throw new Error(i.statusText);case 7:if(!r){l.next=15;break}l.t1=Uint8Array;l.next=11;return i.arrayBuffer();case 11:l.t2=l.sent;l.t0=new l.t1(l.t2);l.next=20;break;case 15:l.t3=o.stringToBytes;l.next=18;return i.text();case 18:l.t4=l.sent;l.t0=(0,l.t3)(l.t4);case 20:return l.abrupt("return",l.t0);case 21:return l.abrupt("return",new Promise((function(i,a){var l=new XMLHttpRequest;l.open("GET",t,!0);r&&(l.responseType="arraybuffer");l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE){if(200===l.status||0===l.status){var t;r&&l.response?t=new Uint8Array(l.response):!r&&l.responseText&&(t=(0,o.stringToBytes)(l.responseText));if(t){i(t);return}}a(new Error(l.statusText))}};l.send(null)})));case 22:case"end":return l.stop()}}),_callee)})));return _fetchData.apply(this,arguments)}var x=function(t){_inherits(DOMCMapReaderFactory,t);var r=_createSuper(DOMCMapReaderFactory);function DOMCMapReaderFactory(){_classCallCheck(this,DOMCMapReaderFactory);return r.apply(this,arguments)}_createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){return fetchData(t,this.isCompressed).then((function(t){return{cMapData:t,compressionType:r}}))}}]);return DOMCMapReaderFactory}(a.BaseCMapReaderFactory);r.DOMCMapReaderFactory=x;var A=function(t){_inherits(DOMStandardFontDataFactory,t);var r=_createSuper(DOMStandardFontDataFactory);function DOMStandardFontDataFactory(){_classCallCheck(this,DOMStandardFontDataFactory);return r.apply(this,arguments)}_createClass(DOMStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return fetchData(t,!0)}}]);return DOMStandardFontDataFactory}(a.BaseStandardFontDataFactory);r.DOMStandardFontDataFactory=A;var E=function(t){_inherits(DOMSVGFactory,t);var r=_createSuper(DOMSVGFactory);function DOMSVGFactory(){_classCallCheck(this,DOMSVGFactory);return r.apply(this,arguments)}_createClass(DOMSVGFactory,[{key:"_createSVG",value:function _createSVG(t){return document.createElementNS(l,t)}}]);return DOMSVGFactory}(a.BaseSVGFactory);r.DOMSVGFactory=E;var T=function(){function PageViewport(t){var r=t.viewBox,i=t.scale,a=t.rotation,o=t.offsetX,l=void 0===o?0:o,c=t.offsetY,u=void 0===c?0:c,d=t.dontFlip,h=void 0!==d&&d;_classCallCheck(this,PageViewport);this.viewBox=r;this.scale=i;this.rotation=a;this.offsetX=l;this.offsetY=u;var p,v,y,g,m,b,w,P,S=(r[2]+r[0])/2,k=(r[3]+r[1])/2;(a%=360)<0&&(a+=360);switch(a){case 180:p=-1;v=0;y=0;g=1;break;case 90:p=0;v=1;y=1;g=0;break;case 270:p=0;v=-1;y=-1;g=0;break;case 0:p=1;v=0;y=0;g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}if(h){y=-y;g=-g}if(0===p){m=Math.abs(k-r[1])*i+l;b=Math.abs(S-r[0])*i+u;w=(r[3]-r[1])*i;P=(r[2]-r[0])*i}else{m=Math.abs(S-r[0])*i+l;b=Math.abs(k-r[1])*i+u;w=(r[2]-r[0])*i;P=(r[3]-r[1])*i}this.transform=[p*i,v*i,y*i,g*i,m-p*i*S-y*i*k,b-v*i*S-g*i*k];this.width=w;this.height=P}_createClass(PageViewport,[{key:"rawDims",get:function get(){var t=this.viewBox;return(0,o.shadow)(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}},{key:"clone",value:function clone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,i=void 0===r?this.scale:r,a=t.rotation,o=void 0===a?this.rotation:a,l=t.offsetX,c=void 0===l?this.offsetX:l,u=t.offsetY,d=void 0===u?this.offsetY:u,h=t.dontFlip,p=void 0!==h&&h;return new PageViewport({viewBox:this.viewBox.slice(),scale:i,rotation:o,offsetX:c,offsetY:d,dontFlip:p})}},{key:"convertToViewportPoint",value:function convertToViewportPoint(t,r){return o.Util.applyTransform([t,r],this.transform)}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(t){var r=o.Util.applyTransform([t[0],t[1]],this.transform),i=o.Util.applyTransform([t[2],t[3]],this.transform);return[r[0],r[1],i[0],i[1]]}},{key:"convertToPdfPoint",value:function convertToPdfPoint(t,r){return o.Util.applyInverseTransform([t,r],this.transform)}}]);return PageViewport}();r.PageViewport=T;var C=function(t){_inherits(RenderingCancelledException,t);var r=_createSuper(RenderingCancelledException);function RenderingCancelledException(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,RenderingCancelledException);(a=r.call(this,t,"RenderingCancelledException")).type=i;a.extraDelay=o;return a}return _createClass(RenderingCancelledException)}(o.BaseException);r.RenderingCancelledException=C;function isDataScheme(t){for(var r=t.length,i=0;i<r&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}var I,O=function(){function StatTimer(){_classCallCheck(this,StatTimer);_defineProperty(this,"started",Object.create(null));_defineProperty(this,"times",[])}_createClass(StatTimer,[{key:"time",value:function time(t){t in this.started&&(0,o.warn)("Timer is already running for ".concat(t));this.started[t]=Date.now()}},{key:"timeEnd",value:function timeEnd(t){t in this.started||(0,o.warn)("Timer has not been started for ".concat(t));this.times.push({name:t,start:this.started[t],end:Date.now()});delete this.started[t]}},{key:"toString",value:function toString(){var t,r=[],i=0,a=_createForOfIteratorHelper(this.times);try{for(a.s();!(t=a.n()).done;){var o=t.value.name;i=Math.max(o.length,i)}}catch(t){a.e(t)}finally{a.f()}var l,c=_createForOfIteratorHelper(this.times);try{for(c.s();!(l=c.n()).done;){var u=l.value,d=u.name,h=u.start,p=u.end;r.push("".concat(d.padEnd(i)," ").concat(p-h,"ms\n"))}}catch(t){c.e(t)}finally{c.f()}return r.join("")}}]);return StatTimer}();r.StatTimer=O;function isValidFetchUrl(t,r){try{var i=(r?new URL(t,r):new URL(t)).protocol;return"http:"===i||"https:"===i||"capacitor:"===i}catch(t){return!1}}var M=function(){function PDFDateString(){_classCallCheck(this,PDFDateString)}_createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(t){if(!t||"string"!=typeof t)return null;I||(I=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var r=I.exec(t);if(!r)return null;var i=parseInt(r[1],10),a=parseInt(r[2],10);a=a>=1&&a<=12?a-1:0;var o=parseInt(r[3],10);o=o>=1&&o<=31?o:1;var l=parseInt(r[4],10);l=l>=0&&l<=23?l:0;var c=parseInt(r[5],10);c=c>=0&&c<=59?c:0;var u=parseInt(r[6],10);u=u>=0&&u<=59?u:0;var d=r[7]||"Z",h=parseInt(r[8],10);h=h>=0&&h<=23?h:0;var p=parseInt(r[9],10)||0;p=p>=0&&p<=59?p:0;if("-"===d){l+=h;c+=p}else if("+"===d){l-=h;c-=p}return new Date(Date.UTC(i,a,o,l,c,u))}}]);return PDFDateString}();r.PDFDateString=M;function getRGB(t){if(t.startsWith("#")){var r=parseInt(t.slice(1),16);return[(16711680&r)>>16,(65280&r)>>8,255&r]}if(t.startsWith("rgb("))return t.slice(4,-1).split(",").map((function(t){return parseInt(t)}));if(t.startsWith("rgba("))return t.slice(5,-1).split(",").map((function(t){return parseInt(t)})).slice(0,3);(0,o.warn)('Not a valid color format: "'.concat(t,'"'));return[0,0,0]}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseFilterFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var a=i(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var o=function(){function BaseFilterFactory(){_classCallCheck(this,BaseFilterFactory);this.constructor===BaseFilterFactory&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}_createClass(BaseFilterFactory,[{key:"addFilter",value:function addFilter(t){return"none"}},{key:"addHCMFilter",value:function addHCMFilter(t,r){return"none"}},{key:"destroy",value:function destroy(){}}]);return BaseFilterFactory}();r.BaseFilterFactory=o;var l=function(){function BaseCanvasFactory(){_classCallCheck(this,BaseCanvasFactory);this.constructor===BaseCanvasFactory&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}_createClass(BaseCanvasFactory,[{key:"create",value:function create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");var i=this._createCanvas(t,r),a=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0,o=i.getContext("2d",a);return{canvas:i,context:o}}},{key:"reset",value:function reset(t,r,i){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=r;t.canvas.height=i}},{key:"destroy",value:function destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0;t.canvas.height=0;t.canvas=null;t.context=null}},{key:"_createCanvas",value:function _createCanvas(t,r){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}]);return BaseCanvasFactory}();r.BaseCanvasFactory=l;var c=function(){function BaseCMapReaderFactory(t){var r=t.baseUrl,i=void 0===r?null:r,o=t.isCompressed,l=void 0===o||o;_classCallCheck(this,BaseCMapReaderFactory);this.constructor===BaseCMapReaderFactory&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory.");this.baseUrl=i;this.isCompressed=l}_createClass(BaseCMapReaderFactory,[{key:"fetch",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,i,o,l=this;return _regeneratorRuntime().wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:r=t.name;if(this.baseUrl){c.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(r){c.next=5;break}throw new Error("CMap name must be specified.");case 5:i=this.baseUrl+r+(this.isCompressed?".bcmap":"");o=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return c.abrupt("return",this._fetchData(i,o).catch((function(t){throw new Error("Unable to load ".concat(l.isCompressed?"binary ":"","CMap at: ").concat(i))})));case 8:case"end":return c.stop()}}),_callee,this)}))),function fetch(r){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t,r){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]);var t;return BaseCMapReaderFactory}();r.BaseCMapReaderFactory=c;var u=function(){function BaseStandardFontDataFactory(t){var r=t.baseUrl,i=void 0===r?null:r;_classCallCheck(this,BaseStandardFontDataFactory);this.constructor===BaseStandardFontDataFactory&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory.");this.baseUrl=i}_createClass(BaseStandardFontDataFactory,[{key:"fetch",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i;return _regeneratorRuntime().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:r=t.filename;if(this.baseUrl){a.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(r){a.next=5;break}throw new Error("Font filename must be specified.");case 5:i="".concat(this.baseUrl).concat(r);return a.abrupt("return",this._fetchData(i).catch((function(t){throw new Error("Unable to load font data at: ".concat(i))})));case 7:case"end":return a.stop()}}),_callee2,this)}))),function fetch(r){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]);var t;return BaseStandardFontDataFactory}();r.BaseStandardFontDataFactory=u;var d=function(){function BaseSVGFactory(){_classCallCheck(this,BaseSVGFactory);this.constructor===BaseSVGFactory&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}_createClass(BaseSVGFactory,[{key:"create",value:function create(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||r<=0)throw new Error("Invalid SVG dimensions");var a=this._createSVG("svg:svg");a.setAttribute("version","1.1");if(!i){a.setAttribute("width","".concat(t,"px"));a.setAttribute("height","".concat(r,"px"))}a.setAttribute("preserveAspectRatio","none");a.setAttribute("viewBox","0 0 ".concat(t," ").concat(r));return a}},{key:"createElement",value:function createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function _createSVG(t){(0,a.unreachable)("Abstract method `_createSVG` called.")}}]);return BaseSVGFactory}();r.BaseSVGFactory=d},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MurmurHash3_64=void 0;var a=i(1);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var o=3285377520,l=4294901760,c=65535,u=function(){function MurmurHash3_64(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MurmurHash3_64);this.h1=t?4294967295&t:o;this.h2=t?4294967295&t:o}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(MurmurHash3_64,[{key:"update",value:function update(t){var r,i;if("string"==typeof t){r=new Uint8Array(2*t.length);i=0;for(var o=0,u=t.length;o<u;o++){var d=t.charCodeAt(o);if(d<=255)r[i++]=d;else{r[i++]=d>>>8;r[i++]=255&d}}}else{if(!(0,a.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");i=(r=t.slice()).byteLength}for(var h=i>>2,p=i-4*h,v=new Uint32Array(r.buffer,0,h),y=0,g=0,m=this.h1,b=this.h2,w=3432918353,P=461845907,S=11601,k=13715,x=0;x<h;x++)1&x?m=5*(m=(m^=y=(y=(y=(y=v[x])*w&l|y*S&c)<<15|y>>>17)*P&l|y*k&c)<<13|m>>>19)+3864292196:b=5*(b=(b^=g=(g=(g=(g=v[x])*w&l|g*S&c)<<15|g>>>17)*P&l|g*k&c)<<13|b>>>19)+3864292196;y=0;switch(p){case 3:y^=r[4*h+2]<<16;case 2:y^=r[4*h+1]<<8;case 1:y=(y=(y=(y^=r[4*h])*w&l|y*S&c)<<15|y>>>17)*P&l|y*k&c;1&h?m^=y:b^=y}this.h1=m;this.h2=b}},{key:"hexdigest",value:function hexdigest(){var t=this.h1,r=this.h2;t=3981806797*(t^=r>>>1)&l|36045*t&c;t=444984403*(t^=(r=4283543511*r&l|(2950163797*(r<<16|t>>>16)&l)>>>16)>>>1)&l|60499*t&c;return((t^=(r=3301882366*r&l|(3120437893*(r<<16|t>>>16)&l)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}]);return MurmurHash3_64}();r.MurmurHash3_64=u},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.FontLoader=r.FontFaceObject=void 0;var a=i(1),o=i(145);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var l=function(){function FontLoader(t){var r=t.ownerDocument,i=void 0===r?globalThis.document:r;t.styleElement;_classCallCheck(this,FontLoader);this._document=i;this.nativeFontFaces=[];this.styleElement=null;this.loadingRequests=[];this.loadTestFontId=0}_createClass(FontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(t){this.nativeFontFaces.push(t);this._document.fonts.add(t)}},{key:"insertRule",value:function insertRule(t){if(!this.styleElement){this.styleElement=this._document.createElement("style");this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement)}var r=this.styleElement.sheet;r.insertRule(t,r.cssRules.length)}},{key:"clear",value:function clear(){var t,r=_createForOfIteratorHelper(this.nativeFontFaces);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._document.fonts.delete(i)}}catch(t){r.e(t)}finally{r.f()}this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}},{key:"bind",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,o=this;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(!t.attached&&!t.missingFile){l.next=2;break}return l.abrupt("return");case 2:t.attached=!0;if(!this.isFontLoadingAPISupported){l.next=18;break}if(!(r=t.createNativeFontFace())){l.next=17;break}this.addNativeFontFace(r);l.prev=7;l.next=10;return r.loaded;case 10:l.next=17;break;case 12:l.prev=12;l.t0=l.catch(7);(0,a.warn)("Failed to load font '".concat(r.family,"': '").concat(l.t0,"'."));t.disableFontFace=!0;throw l.t0;case 17:return l.abrupt("return");case 18:if(!(i=t.createFontFaceRule())){l.next=25;break}this.insertRule(i);if(!this.isSyncFontLoadingSupported){l.next=23;break}return l.abrupt("return");case 23:l.next=25;return new Promise((function(r){var i=o._queueLoadingCallback(r);o._prepareFontLoadEvent(t,i)}));case 25:case"end":return l.stop()}}),_callee,this,[[7,12]])}))),function bind(r){return t.apply(this,arguments)})},{key:"isFontLoadingAPISupported",get:function get(){var t,r=!(null===(t=this._document)||void 0===t||!t.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",r)}},{key:"isSyncFontLoadingSupported",get:function get(){var t=!1;(o.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0);return(0,a.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){var r=this.loadingRequests,i={done:!1,complete:function completeRequest(){(0,a.assert)(!i.done,"completeRequest() cannot be called twice.");i.done=!0;for(;r.length>0&&r[0].done;){var t=r.shift();setTimeout(t.callback,0)}},callback:t};r.push(i);return i}},{key:"_loadTestFont",get:function get(){var t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",t)}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r){function int32(t,r){return t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|255&t.charCodeAt(r+3)}function spliceString(t,r,i,a){return t.substring(0,r)+a+t.substring(r+i)}var i,o,l=this._document.createElement("canvas");l.width=1;l.height=1;var c=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0,u=l.getContext("2d",c),d=0;var h="lt".concat(Date.now()).concat(this.loadTestFontId++),p=this._loadTestFont,v=1482184792,y=int32(p=spliceString(p,976,h.length,h),16);for(i=0,o=h.length-3;i<o;i+=4)y=y-v+int32(h,i)|0;i<h.length&&(y=y-v+int32(h+"XXX",i)|0);p=spliceString(p,16,4,(0,a.string32)(y));var g="url(data:font/opentype;base64,".concat(btoa(p),");"),m='@font-face {font-family:"'.concat(h,'";src:').concat(g,"}");this.insertRule(m);var b=this._document.createElement("div");b.style.visibility="hidden";b.style.width=b.style.height="10px";b.style.position="absolute";b.style.top=b.style.left="0px";for(var w=0,P=[t.loadedName,h];w<P.length;w++){var S=P[w],k=this._document.createElement("span");k.textContent="Hi";k.style.fontFamily=S;b.append(k)}this._document.body.append(b);!function isFontReady(t,r){if(++d>30){(0,a.warn)("Load test font never loaded.");r()}else{u.font="30px "+t;u.fillText(".",0,20);u.getImageData(0,0,1,1).data[3]>0?r():setTimeout(isFontReady.bind(null,t,r))}}(h,(function(){b.remove();r.complete()}))}}]);var t;return FontLoader}();r.FontLoader=l;var c=function(){function FontFaceObject(t,r){var i=r.isEvalSupported,a=void 0===i||i,o=r.disableFontFace,l=void 0!==o&&o,c=r.ignoreErrors,u=void 0!==c&&c,d=r.inspectFont,h=void 0===d?null:d;_classCallCheck(this,FontFaceObject);this.compiledGlyphs=Object.create(null);for(var p in t)this[p]=t[p];this.isEvalSupported=!1!==a;this.disableFontFace=!0===l;this.ignoreErrors=!0===u;this._inspectFont=h}_createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){var t,r;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg"));r=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}else r=new FontFace(this.loadedName,this.data,{});null===(t=this._inspectFont)||void 0===t||t.call(this,this);return r}},{key:"createFontFaceRule",value:function createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;var r,i=(0,a.bytesToString)(this.data),o="url(data:".concat(this.mimetype,";base64,").concat(btoa(i),");");if(this.cssFontInfo){var l="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(l+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;"));r='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(l,"src:").concat(o,"}")}else r='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(o,"}");null===(t=this._inspectFont)||void 0===t||t.call(this,this,o);return r}},{key:"getPathGenerator",value:function getPathGenerator(t,r){if(void 0!==this.compiledGlyphs[r])return this.compiledGlyphs[r];var i;try{i=t.get(this.loadedName+"_path_"+r)}catch(t){if(!this.ignoreErrors)throw t;(0,a.warn)('getPathGenerator - ignoring character: "'.concat(t,'".'));return this.compiledGlyphs[r]=function(t,r){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){var o,l=[],c=_createForOfIteratorHelper(i);try{for(c.s();!(o=c.n()).done;){var u=o.value,d=void 0!==u.args?u.args.join(","):"";l.push("c.",u.cmd,"(",d,");\n")}}catch(t){c.e(t)}finally{c.f()}return this.compiledGlyphs[r]=new Function("c","size",l.join(""))}return this.compiledGlyphs[r]=function(t,r){var a,o=_createForOfIteratorHelper(i);try{for(o.s();!(a=o.n()).done;){var l=a.value;"scale"===l.cmd&&(l.args=[r,-r]);t[l.cmd].apply(t,l.args)}}catch(t){o.e(t)}finally{o.f()}}}}]);return FontFaceObject}();r.FontFaceObject=c},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.isNodeJS=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var i=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);r.isNodeJS=i},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.CanvasGraphics=void 0;var a=i(1),o=i(141),l=i(147),c=i(148),u=i(145);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var d=4096,h=16;var p=function(){function CachedCanvases(t){_classCallCheck(this,CachedCanvases);this.canvasFactory=t;this.cache=Object.create(null)}_createClass(CachedCanvases,[{key:"getCanvas",value:function getCanvas(t,r,i){var a;if(void 0!==this.cache[t]){a=this.cache[t];this.canvasFactory.reset(a,r,i)}else{a=this.canvasFactory.create(r,i);this.cache[t]=a}return a}},{key:"delete",value:function _delete(t){delete this.cache[t]}},{key:"clear",value:function clear(){for(var t in this.cache){var r=this.cache[t];this.canvasFactory.destroy(r);delete this.cache[t]}}}]);return CachedCanvases}();function drawImageAtIntegerCoords(t,r,i,a,l,c,u,d,h,p){var v=_slicedToArray((0,o.getCurrentTransform)(t),6),y=v[0],g=v[1],m=v[2],b=v[3],w=v[4],P=v[5];if(0===g&&0===m){var S=u*y+w,k=Math.round(S),x=d*b+P,A=Math.round(x),E=(u+h)*y+w,T=Math.abs(Math.round(E)-k)||1,C=(d+p)*b+P,I=Math.abs(Math.round(C)-A)||1;t.setTransform(Math.sign(y),0,0,Math.sign(b),k,A);t.drawImage(r,i,a,l,c,0,0,T,I);t.setTransform(y,g,m,b,w,P);return[T,I]}if(0===y&&0===b){var O=d*m+w,M=Math.round(O),L=u*g+P,R=Math.round(L),D=(d+p)*m+w,G=Math.abs(Math.round(D)-M)||1,j=(u+h)*g+P,N=Math.abs(Math.round(j)-R)||1;t.setTransform(0,Math.sign(g),Math.sign(m),0,M,R);t.drawImage(r,i,a,l,c,0,0,N,G);t.setTransform(y,g,m,b,w,P);return[N,G]}t.drawImage(r,i,a,l,c,u,d,h,p);return[Math.hypot(y,g)*h,Math.hypot(m,b)*p]}var v=function(){function CanvasExtraState(t,r){_classCallCheck(this,CanvasExtraState);this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=a.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=a.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=a.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=!1;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps="none";this.startNewPathAndClipBox([0,0,t,r])}_createClass(CanvasExtraState,[{key:"clone",value:function clone(){var clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t;this.y=r}},{key:"updatePathMinMax",value:function updatePathMinMax(t,r,i){var o=_slicedToArray(a.Util.applyTransform([r,i],t),2);r=o[0];i=o[1];this.minX=Math.min(this.minX,r);this.minY=Math.min(this.minY,i);this.maxX=Math.max(this.maxX,r);this.maxY=Math.max(this.maxY,i)}},{key:"updateRectMinMax",value:function updateRectMinMax(t,r){var i=a.Util.applyTransform(r,t),o=a.Util.applyTransform(r.slice(2),t);this.minX=Math.min(this.minX,i[0],o[0]);this.minY=Math.min(this.minY,i[1],o[1]);this.maxX=Math.max(this.maxX,i[0],o[0]);this.maxY=Math.max(this.maxY,i[1],o[1])}},{key:"updateScalingPathMinMax",value:function updateScalingPathMinMax(t,r){a.Util.scaleMinMax(t,r);this.minX=Math.min(this.minX,r[0]);this.maxX=Math.max(this.maxX,r[1]);this.minY=Math.min(this.minY,r[2]);this.maxY=Math.max(this.maxY,r[3])}},{key:"updateCurvePathMinMax",value:function updateCurvePathMinMax(t,r,i,o,l,c,u,d,h,p){var v=a.Util.bezierBoundingBox(r,i,o,l,c,u,d,h);if(p){p[0]=Math.min(p[0],v[0],v[2]);p[1]=Math.max(p[1],v[0],v[2]);p[2]=Math.min(p[2],v[1],v[3]);p[3]=Math.max(p[3],v[1],v[3])}else this.updateRectMinMax(t,v)}},{key:"getPathBoundingBox",value:function getPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.PathType.FILL,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.minX,this.minY,this.maxX,this.maxY];if(t===l.PathType.STROKE){r||(0,a.unreachable)("Stroke bounding box must include transform.");var o=a.Util.singularValueDecompose2dScale(r),c=o[0]*this.lineWidth/2,u=o[1]*this.lineWidth/2;i[0]-=c;i[1]-=u;i[2]+=c;i[3]+=u}return i}},{key:"updateClipFromPath",value:function updateClipFromPath(){var t=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function isEmptyClip(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function startNewPathAndClipBox(t){this.clipBox=t;this.minX=1/0;this.minY=1/0;this.maxX=0;this.maxY=0}},{key:"getClippedPathBoundingBox",value:function getClippedPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.PathType.FILL,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.Util.intersect(this.clipBox,this.getPathBoundingBox(t,r))}}]);return CanvasExtraState}();function putBinaryImageData(t,r){if("undefined"!=typeof ImageData&&r instanceof ImageData)t.putImageData(r,0,0);else{var i,o,l,c,u,d=r.height,p=r.width,v=d%h,y=(d-v)/h,g=0===v?y:y+1,m=t.createImageData(p,h),b=0,w=r.data,P=m.data;if(r.kind===a.ImageKind.GRAYSCALE_1BPP){var S=w.byteLength,k=new Uint32Array(P.buffer,0,P.byteLength>>2),x=k.length,A=p+7>>3,E=4294967295,T=a.FeatureTest.isLittleEndian?4278190080:255;for(o=0;o<g;o++){c=o<y?h:v;i=0;for(l=0;l<c;l++){for(var C=S-b,I=0,O=C>A?p:8*C-7,M=-8&O,L=0,R=0;I<M;I+=8){R=w[b++];k[i++]=128&R?E:T;k[i++]=64&R?E:T;k[i++]=32&R?E:T;k[i++]=16&R?E:T;k[i++]=8&R?E:T;k[i++]=4&R?E:T;k[i++]=2&R?E:T;k[i++]=1&R?E:T}for(;I<O;I++){if(0===L){R=w[b++];L=128}k[i++]=R&L?E:T;L>>=1}}for(;i<x;)k[i++]=0;t.putImageData(m,0,o*h)}}else if(r.kind===a.ImageKind.RGBA_32BPP){l=0;u=p*h*4;for(o=0;o<y;o++){P.set(w.subarray(b,b+u));b+=u;t.putImageData(m,0,l);l+=h}if(o<g){u=p*v*4;P.set(w.subarray(b,b+u));t.putImageData(m,0,l)}}else{if(r.kind!==a.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(r.kind));u=p*(c=h);for(o=0;o<g;o++){o>=y&&(u=p*(c=v));i=0;for(l=u;l--;){P[i++]=w[b++];P[i++]=w[b++];P[i++]=w[b++];P[i++]=255}t.putImageData(m,0,o*h)}}}}function putBinaryImageMask(t,r){if(r.bitmap)t.drawImage(r.bitmap,0,0);else for(var i=r.height,a=r.width,o=i%h,l=(i-o)/h,u=0===o?l:l+1,d=t.createImageData(a,h),p=0,v=r.data,y=d.data,g=0;g<u;g++){var m=g<l?h:o;p=(0,c.convertBlackAndWhiteToRGBA)({src:v,srcPos:p,dest:y,width:a,height:m,nonBlackColor:0}).srcPos;t.putImageData(d,0,g*h)}}function copyCtxState(t,r){for(var i=0,a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];i<a.length;i++){var o=a[i];void 0!==t[o]&&(r[o]=t[o])}if(void 0!==t.setLineDash){r.setLineDash(t.getLineDash());r.lineDashOffset=t.lineDashOffset}}function resetCtxToDefault(t){t.strokeStyle=t.fillStyle="#000000";t.fillRule="nonzero";t.globalAlpha=1;t.lineWidth=1;t.lineCap="butt";t.lineJoin="miter";t.miterLimit=10;t.globalCompositeOperation="source-over";t.font="10px sans-serif";if(void 0!==t.setLineDash){t.setLineDash([]);t.lineDashOffset=0}u.isNodeJS||(t.filter="none")}function composeSMaskBackdrop(t,r,i,a){for(var o=t.length,l=3;l<o;l+=4){var c=t[l];if(0===c){t[l-3]=r;t[l-2]=i;t[l-1]=a}else if(c<255){var u=255-c;t[l-3]=t[l-3]*c+r*u>>8;t[l-2]=t[l-2]*c+i*u>>8;t[l-1]=t[l-1]*c+a*u>>8}}}function composeSMaskAlpha(t,r,i){for(var a=t.length,o=3;o<a;o+=4){var l=i?i[t[o]]:t[o];r[o]=r[o]*l*.00392156862745098|0}}function composeSMaskLuminosity(t,r,i){for(var a=t.length,o=3;o<a;o+=4){var l=77*t[o-3]+152*t[o-2]+28*t[o-1];r[o]=i?r[o]*i[l>>8]>>8:r[o]*l>>16}}function composeSMask(t,r,i,a){var o=a[0],l=a[1],c=a[2]-o,u=a[3]-l;if(0!==c&&0!==u){!function genericComposeSMask(t,r,i,a,o,l,c,u,d,h,p){var v,y=!!l,g=y?l[0]:0,m=y?l[1]:0,b=y?l[2]:0;v="Luminosity"===o?composeSMaskLuminosity:composeSMaskAlpha;for(var w=Math.min(a,Math.ceil(1048576/i)),P=0;P<a;P+=w){var S=Math.min(w,a-P),k=t.getImageData(u-h,P+(d-p),i,S),x=r.getImageData(u,P+d,i,S);y&&composeSMaskBackdrop(k.data,g,m,b);v(k.data,x.data,c);r.putImageData(x,u,P+d)}}(r.context,i,c,u,r.subtype,r.backdrop,r.transferMap,o,l,r.offsetX,r.offsetY);t.save();t.globalAlpha=1;t.globalCompositeOperation="source-over";t.setTransform(1,0,0,1,0,0);t.drawImage(i.canvas,0,0);t.restore()}}function getImageSmoothingEnabled(t,r){var i=a.Util.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]);i[1]=Math.fround(i[1]);var l=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==r?r:i[0]<=l||i[1]<=l}var y=["butt","round","square"],g=["miter","round","bevel"],m={},b={},w=new WeakSet,P=function(){function CanvasGraphics(t,r,i,a,o,l,c){var u=l.optionalContentConfig,d=l.markedContentStack,h=void 0===d?null:d;_classCallCheck(this,CanvasGraphics);_classPrivateMethodInitSpec(this,w);this.ctx=t;this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.res=null;this.xobjs=null;this.commonObjs=r;this.objs=i;this.canvasFactory=a;this.filterFactory=o;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=!0;this.markedContentStack=h||[];this.optionalContentConfig=u;this.cachedCanvases=new p(this.canvasFactory);this.cachedPatterns=new Map;this.annotationCanvasMap=c;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map}_createClass(CanvasGraphics,[{key:"getObject",value:function getObject(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):r}},{key:"beginDrawing",value:function beginDrawing(t){var r,i=t.transform,a=t.viewport,l=t.transparency,c=void 0!==l&&l,u=t.background,d=void 0===u?null:u,h=this.ctx.canvas.width,p=this.ctx.canvas.height,v=this.ctx.fillStyle;this.ctx.fillStyle=d||"#ffffff";this.ctx.fillRect(0,0,h,p);this.ctx.fillStyle=v;if(c){var y,g=this.cachedCanvases.getCanvas("transparent",h,p);this.compositeCtx=this.ctx;this.transparentCanvas=g.canvas;this.ctx=g.context;this.ctx.save();(y=this.ctx).transform.apply(y,_toConsumableArray((0,o.getCurrentTransform)(this.compositeCtx)))}this.ctx.save();resetCtxToDefault(this.ctx);if(i){var m;(m=this.ctx).transform.apply(m,_toConsumableArray(i));this.outputScaleX=i[0];this.outputScaleY=i[0]}(r=this.ctx).transform.apply(r,_toConsumableArray(a.transform));this.viewportScale=a.scale;this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}},{key:"executeOperatorList",value:function executeOperatorList(t,r,i,o){var l=t.argsArray,c=t.fnArray,u=r||0,d=l.length;if(d===u)return u;for(var h,p=d-u>10&&"function"==typeof i,v=p?Date.now()+15:0,y=0,g=this.commonObjs,m=this.objs;;){if(void 0!==o&&u===o.nextBreakPoint){o.breakIt(u,i);return u}if((h=c[u])!==a.OPS.dependency)this[h].apply(this,l[u]);else{var b,w=_createForOfIteratorHelper(l[u]);try{for(w.s();!(b=w.n()).done;){var P=b.value,S=P.startsWith("g_")?g:m;if(!S.has(P)){S.get(P,i);return u}}}catch(t){w.e(t)}finally{w.f()}}if(++u===d)return u;if(p&&++y>10){if(Date.now()>v){i();return u}y=0}}}},{key:"endDrawing",value:function endDrawing(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classPrivateMethodGet(this,w,_restoreInitialState2).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();var r,i=_createForOfIteratorHelper(this._cachedBitmapsMap.values());try{for(i.s();!(r=i.n()).done;){var a,o=r.value,l=_createForOfIteratorHelper(o.values());try{for(l.s();!(a=l.n()).done;){var c=a.value;"undefined"!=typeof HTMLCanvasElement&&c instanceof HTMLCanvasElement&&(c.width=c.height=0)}}catch(t){l.e(t)}finally{l.f()}o.clear()}}catch(t){i.e(t)}finally{i.f()}this._cachedBitmapsMap.clear();if(t){var u=this.filterFactory.addHCMFilter(t.foreground,t.background);if("none"!==u){var d=this.ctx.filter;this.ctx.filter=u;this.ctx.drawImage(this.ctx.canvas,0,0);this.ctx.filter=d}}}},{key:"_scaleImage",value:function _scaleImage(t,r){for(var i,a,o=t.width,l=t.height,c=Math.max(Math.hypot(r[0],r[1]),1),u=Math.max(Math.hypot(r[2],r[3]),1),d=o,h=l,p="prescale1";c>2&&d>1||u>2&&h>1;){var v=d,y=h;c>2&&d>1&&(c/=d/(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2)));u>2&&h>1&&(u/=h/(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2));(a=(i=this.cachedCanvases.getCanvas(p,v,y)).context).clearRect(0,0,v,y);a.drawImage(t,0,0,d,h,0,0,v,y);t=i.canvas;d=v;h=y;p="prescale1"===p?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:h}}},{key:"_createMaskCanvas",value:function _createMaskCanvas(t){var r,i,c,u,d=this.ctx,h=t.width,p=t.height,v=this.current.fillColor,y=this.current.patternFill,g=(0,o.getCurrentTransform)(d);if((t.bitmap||t.data)&&t.count>1){var m=t.bitmap||t.data.buffer;i=JSON.stringify(y?g:[g.slice(0,4),v]);if(!(r=this._cachedBitmapsMap.get(m))){r=new Map;this._cachedBitmapsMap.set(m,r)}var b=r.get(i);if(b&&!y){return{canvas:b,offsetX:Math.round(Math.min(g[0],g[2])+g[4]),offsetY:Math.round(Math.min(g[1],g[3])+g[5])}}c=b}c||putBinaryImageMask((u=this.cachedCanvases.getCanvas("maskCanvas",h,p)).context,t);var w=a.Util.transform(g,[1/h,0,0,-1/p,0,0]);w=a.Util.transform(w,[1,0,0,1,0,-p]);var P=a.Util.applyTransform([0,0],w),S=a.Util.applyTransform([h,p],w),k=a.Util.normalizeRect([P[0],P[1],S[0],S[1]]),x=Math.round(k[2]-k[0])||1,A=Math.round(k[3]-k[1])||1,E=this.cachedCanvases.getCanvas("fillCanvas",x,A),T=E.context,C=Math.min(P[0],S[0]),I=Math.min(P[1],S[1]);T.translate(-C,-I);T.transform.apply(T,_toConsumableArray(w));if(!c){c=(c=this._scaleImage(u.canvas,(0,o.getCurrentTransformInverse)(T))).img;r&&y&&r.set(i,c)}T.imageSmoothingEnabled=getImageSmoothingEnabled((0,o.getCurrentTransform)(T),t.interpolate);drawImageAtIntegerCoords(T,c,0,0,c.width,c.height,0,0,h,p);T.globalCompositeOperation="source-in";var O=a.Util.transform((0,o.getCurrentTransformInverse)(T),[1,0,0,1,-C,-I]);T.fillStyle=y?v.getPattern(d,this,O,l.PathType.FILL):v;T.fillRect(0,0,h,p);if(r&&!y){this.cachedCanvases.delete("fillCanvas");r.set(i,E.canvas)}return{canvas:E.canvas,offsetX:Math.round(C),offsetY:Math.round(I)}}},{key:"setLineWidth",value:function setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null);this.current.lineWidth=t;this.ctx.lineWidth=t}},{key:"setLineCap",value:function setLineCap(t){this.ctx.lineCap=y[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.ctx.lineJoin=g[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.ctx.miterLimit=t}},{key:"setDash",value:function setDash(t,r){var i=this.ctx;if(void 0!==i.setLineDash){i.setLineDash(t);i.lineDashOffset=r}}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=_slicedToArray(r.value,2),o=a[0],l=a[1];switch(o){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=l;break;case"ca":this.current.fillAlpha=l;this.ctx.globalAlpha=l;break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask=l?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}}catch(t){i.e(t)}finally{i.f()}}},{key:"inSMaskMode",get:function get(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function checkSMaskState(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,r);this.suspendedCtx=this.ctx;this.ctx=a.context;var l=this.ctx;l.setTransform.apply(l,_toConsumableArray((0,o.getCurrentTransform)(this.suspendedCtx)));copyCtxState(this.suspendedCtx,l);!function mirrorContextOperations(t,r){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save;t.__originalRestore=t.restore;t.__originalRotate=t.rotate;t.__originalScale=t.scale;t.__originalTranslate=t.translate;t.__originalTransform=t.transform;t.__originalSetTransform=t.setTransform;t.__originalResetTransform=t.resetTransform;t.__originalClip=t.clip;t.__originalMoveTo=t.moveTo;t.__originalLineTo=t.lineTo;t.__originalBezierCurveTo=t.bezierCurveTo;t.__originalRect=t.rect;t.__originalClosePath=t.closePath;t.__originalBeginPath=t.beginPath;t._removeMirroring=function(){t.save=t.__originalSave;t.restore=t.__originalRestore;t.rotate=t.__originalRotate;t.scale=t.__originalScale;t.translate=t.__originalTranslate;t.transform=t.__originalTransform;t.setTransform=t.__originalSetTransform;t.resetTransform=t.__originalResetTransform;t.clip=t.__originalClip;t.moveTo=t.__originalMoveTo;t.lineTo=t.__originalLineTo;t.bezierCurveTo=t.__originalBezierCurveTo;t.rect=t.__originalRect;t.closePath=t.__originalClosePath;t.beginPath=t.__originalBeginPath;delete t._removeMirroring};t.save=function ctxSave(){r.save();this.__originalSave()};t.restore=function ctxRestore(){r.restore();this.__originalRestore()};t.translate=function ctxTranslate(t,i){r.translate(t,i);this.__originalTranslate(t,i)};t.scale=function ctxScale(t,i){r.scale(t,i);this.__originalScale(t,i)};t.transform=function ctxTransform(t,i,a,o,l,c){r.transform(t,i,a,o,l,c);this.__originalTransform(t,i,a,o,l,c)};t.setTransform=function ctxSetTransform(t,i,a,o,l,c){r.setTransform(t,i,a,o,l,c);this.__originalSetTransform(t,i,a,o,l,c)};t.resetTransform=function ctxResetTransform(){r.resetTransform();this.__originalResetTransform()};t.rotate=function ctxRotate(t){r.rotate(t);this.__originalRotate(t)};t.clip=function ctxRotate(t){r.clip(t);this.__originalClip(t)};t.moveTo=function(t,i){r.moveTo(t,i);this.__originalMoveTo(t,i)};t.lineTo=function(t,i){r.lineTo(t,i);this.__originalLineTo(t,i)};t.bezierCurveTo=function(t,i,a,o,l,c){r.bezierCurveTo(t,i,a,o,l,c);this.__originalBezierCurveTo(t,i,a,o,l,c)};t.rect=function(t,i,a,o){r.rect(t,i,a,o);this.__originalRect(t,i,a,o)};t.closePath=function(){r.closePath();this.__originalClosePath()};t.beginPath=function(){r.beginPath();this.__originalBeginPath()}}(l,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null}},{key:"compose",value:function compose(t){if(this.current.activeSMask){if(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.ceil(t[2]);t[3]=Math.ceil(t[3])}else t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var r=this.current.activeSMask;composeSMask(this.suspendedCtx,r,this.ctx,t);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore()}}},{key:"save",value:function save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save()}else this.ctx.save();var t=this.current;this.stateStack.push(t);this.current=t.clone()}},{key:"restore",value:function restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode();if(0!==this.stateStack.length){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx)}else this.ctx.restore();this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}}},{key:"transform",value:function transform(t,r,i,a,o,l){this.ctx.transform(t,r,i,a,o,l);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function constructPath(t,r,i){for(var l,c,u=this.ctx,d=this.current,h=d.x,p=d.y,v=(0,o.getCurrentTransform)(u),y=0===v[0]&&0===v[3]||0===v[1]&&0===v[2],g=y?i.slice(0):null,m=0,b=0,w=t.length;m<w;m++)switch(0|t[m]){case a.OPS.rectangle:h=r[b++];p=r[b++];var P=r[b++],S=r[b++],k=h+P,x=p+S;u.moveTo(h,p);if(0===P||0===S)u.lineTo(k,x);else{u.lineTo(k,p);u.lineTo(k,x);u.lineTo(h,x)}y||d.updateRectMinMax(v,[h,p,k,x]);u.closePath();break;case a.OPS.moveTo:h=r[b++];p=r[b++];u.moveTo(h,p);y||d.updatePathMinMax(v,h,p);break;case a.OPS.lineTo:h=r[b++];p=r[b++];u.lineTo(h,p);y||d.updatePathMinMax(v,h,p);break;case a.OPS.curveTo:l=h;c=p;h=r[b+4];p=r[b+5];u.bezierCurveTo(r[b],r[b+1],r[b+2],r[b+3],h,p);d.updateCurvePathMinMax(v,l,c,r[b],r[b+1],r[b+2],r[b+3],h,p,g);b+=6;break;case a.OPS.curveTo2:l=h;c=p;u.bezierCurveTo(h,p,r[b],r[b+1],r[b+2],r[b+3]);d.updateCurvePathMinMax(v,l,c,h,p,r[b],r[b+1],r[b+2],r[b+3],g);h=r[b+2];p=r[b+3];b+=4;break;case a.OPS.curveTo3:l=h;c=p;h=r[b+2];p=r[b+3];u.bezierCurveTo(r[b],r[b+1],h,p,h,p);d.updateCurvePathMinMax(v,l,c,r[b],r[b+1],h,p,h,p,g);b+=4;break;case a.OPS.closePath:u.closePath()}y&&d.updateScalingPathMinMax(v,g);d.setCurrentPoint(h,p)}},{key:"closePath",value:function closePath(){this.ctx.closePath()}},{key:"stroke",value:function stroke(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this.ctx,i=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha;if(this.contentVisible)if("object"===_typeof(i)&&null!=i&&i.getPattern){r.save();r.strokeStyle=i.getPattern(r,this,(0,o.getCurrentTransformInverse)(r),l.PathType.STROKE);this.rescaleAndStroke(!1);r.restore()}else this.rescaleAndStroke(!0);t&&this.consumePath(this.current.getClippedPathBoundingBox());r.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"fill",value:function fill(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this.ctx,i=this.current.fillColor,a=!1;if(this.current.patternFill){r.save();r.fillStyle=i.getPattern(r,this,(0,o.getCurrentTransformInverse)(r),l.PathType.FILL);a=!0}var c=this.current.getClippedPathBoundingBox();if(this.contentVisible&&null!==c)if(this.pendingEOFill){r.fill("evenodd");this.pendingEOFill=!1}else r.fill();a&&r.restore();t&&this.consumePath(c)}},{key:"eoFill",value:function eoFill(){this.pendingEOFill=!0;this.fill()}},{key:"fillStroke",value:function fillStroke(){this.fill(!1);this.stroke(!1);this.consumePath()}},{key:"eoFillStroke",value:function eoFillStroke(){this.pendingEOFill=!0;this.fillStroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.pendingEOFill=!0;this.closePath();this.fillStroke()}},{key:"endPath",value:function endPath(){this.consumePath()}},{key:"clip",value:function clip(){this.pendingClip=m}},{key:"eoClip",value:function eoClip(){this.pendingClip=b}},{key:"beginText",value:function beginText(){this.current.textMatrix=a.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}},{key:"endText",value:function endText(){var t=this.pendingTextPaths,r=this.ctx;if(void 0!==t){r.save();r.beginPath();var i,a=_createForOfIteratorHelper(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.setTransform.apply(r,_toConsumableArray(o.transform));r.translate(o.x,o.y);o.addToPath(r,o.fontSize)}}catch(t){a.e(t)}finally{a.f()}r.restore();r.clip();r.beginPath();delete this.pendingTextPaths}else r.beginPath()}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setFont",value:function setFont(t,r){var i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error("Can't find font for ".concat(t));o.fontMatrix=i.fontMatrix||a.FONT_IDENTITY_MATRIX;0!==o.fontMatrix[0]&&0!==o.fontMatrix[3]||(0,a.warn)("Invalid font matrix for font "+t);if(r<0){r=-r;o.fontDirection=-1}else o.fontDirection=1;this.current.font=i;this.current.fontSize=r;if(!i.isType3Font){var l=i.loadedName||"sans-serif",c="normal";i.black?c="900":i.bold&&(c="bold");var u=i.italic?"italic":"normal",d='"'.concat(l,'", ').concat(i.fallbackName),h=r;r<16?h=16:r>100&&(h=100);this.current.fontSizeScale=r/h;this.ctx.font="".concat(u," ").concat(c," ").concat(h,"px ").concat(d)}}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"moveText",value:function moveText(t,r){this.current.x=this.current.lineX+=t;this.current.y=this.current.lineY+=r}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,i,a,o,l){this.current.textMatrix=[t,r,i,a,o,l];this.current.textMatrixScale=Math.hypot(t,r);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function paintChar(t,r,i,l){var c,u=this.ctx,d=this.current,h=d.font,p=d.textRenderingMode,v=d.fontSize/d.fontSizeScale,y=p&a.TextRenderingMode.FILL_STROKE_MASK,g=!!(p&a.TextRenderingMode.ADD_TO_PATH_FLAG),m=d.patternFill&&!h.missingFile;(h.disableFontFace||g||m)&&(c=h.getPathGenerator(this.commonObjs,t));if(h.disableFontFace||m){u.save();u.translate(r,i);u.beginPath();c(u,v);l&&u.setTransform.apply(u,_toConsumableArray(l));y!==a.TextRenderingMode.FILL&&y!==a.TextRenderingMode.FILL_STROKE||u.fill();y!==a.TextRenderingMode.STROKE&&y!==a.TextRenderingMode.FILL_STROKE||u.stroke();u.restore()}else{y!==a.TextRenderingMode.FILL&&y!==a.TextRenderingMode.FILL_STROKE||u.fillText(t,r,i);y!==a.TextRenderingMode.STROKE&&y!==a.TextRenderingMode.FILL_STROKE||u.strokeText(t,r,i)}if(g){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(u),x:r,y:i,fontSize:v,addToPath:c})}}},{key:"isFontSubpixelAAEnabled",get:function get(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1);t.fillText("I",0,10);for(var r=t.getImageData(0,0,10,10).data,i=!1,o=3;o<r.length;o+=4)if(r[o]>0&&r[o]<255){i=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",i)}},{key:"showText",value:function showText(t){var r=this.current,i=r.font;if(i.isType3Font)return this.showType3Text(t);var c=r.fontSize;if(0!==c){var u,d=this.ctx,h=r.fontSizeScale,p=r.charSpacing,v=r.wordSpacing,y=r.fontDirection,g=r.textHScale*y,m=t.length,b=i.vertical,w=b?1:-1,P=i.defaultVMetrics,S=c*r.fontMatrix[0],k=r.textRenderingMode===a.TextRenderingMode.FILL&&!i.disableFontFace&&!r.patternFill;d.save();d.transform.apply(d,_toConsumableArray(r.textMatrix));d.translate(r.x,r.y+r.textRise);y>0?d.scale(g,-1):d.scale(g,1);if(r.patternFill){d.save();var x=r.fillColor.getPattern(d,this,(0,o.getCurrentTransformInverse)(d),l.PathType.FILL);u=(0,o.getCurrentTransform)(d);d.restore();d.fillStyle=x}var A=r.lineWidth,E=r.textMatrixScale;if(0===E||0===A){var T=r.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;T!==a.TextRenderingMode.STROKE&&T!==a.TextRenderingMode.FILL_STROKE||(A=this.getSinglePixelWidth())}else A/=E;if(1!==h){d.scale(h,h);A/=h}d.lineWidth=A;if(i.isInvalidPDFjsFont){var C,I=[],O=0,M=_createForOfIteratorHelper(t);try{for(M.s();!(C=M.n()).done;){var L=C.value;I.push(L.unicode);O+=L.width}}catch(t){M.e(t)}finally{M.f()}d.fillText(I.join(""),0,0);r.x+=O*S*g;d.restore();this.compose()}else{var R,D=0;for(R=0;R<m;++R){var G=t[R];if("number"!=typeof G){var j=!1,N=(G.isSpace?v:0)+p,B=G.fontChar,V=G.accent,W=void 0,H=void 0,U=G.width;if(b){var z=G.vmetric||P,X=-(G.vmetric?z[1]:.5*U)*S,K=z[2]*S;U=z?-z[0]:U;W=X/h;H=(D+K)/h}else{W=D/h;H=0}if(i.remeasure&&U>0){var Y=1e3*d.measureText(B).width/c*h;if(U<Y&&this.isFontSubpixelAAEnabled){var $=U/Y;j=!0;d.save();d.scale($,1);W/=$}else U!==Y&&(W+=(U-Y)/2e3*c/h)}if(this.contentVisible&&(G.isInFont||i.missingFile))if(k&&!V)d.fillText(B,W,H);else{this.paintChar(B,W,H,u);if(V){var Q=W+c*V.offset.x/h,Z=H-c*V.offset.y/h;this.paintChar(V.fontChar,Q,Z,u)}}D+=b?U*S-N*y:U*S+N*y;j&&d.restore()}else D+=w*G*c/1e3}b?r.y-=D:r.x+=D*g;d.restore();this.compose()}}}},{key:"showType3Text",value:function showType3Text(t){var r,i,o,l,c=this.ctx,u=this.current,d=u.font,h=u.fontSize,p=u.fontDirection,v=d.vertical?1:-1,y=u.charSpacing,g=u.wordSpacing,m=u.textHScale*p,b=u.fontMatrix||a.FONT_IDENTITY_MATRIX,w=t.length;if(!(u.textRenderingMode===a.TextRenderingMode.INVISIBLE)&&0!==h){this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;c.save();c.transform.apply(c,_toConsumableArray(u.textMatrix));c.translate(u.x,u.y);c.scale(m,p);for(r=0;r<w;++r)if("number"!=typeof(i=t[r])){var P=(i.isSpace?g:0)+y,S=d.charProcOperatorList[i.operatorListId];if(S){if(this.contentVisible){this.processingType3=i;this.save();c.scale(h,h);c.transform.apply(c,_toConsumableArray(b));this.executeOperatorList(S);this.restore()}o=a.Util.applyTransform([i.width,0],b)[0]*h+P;c.translate(o,0);u.x+=o*m}else(0,a.warn)('Type3 character "'.concat(i.operatorListId,'" is not available.'))}else{l=v*i*h/1e3;this.ctx.translate(l,0);u.x+=l*m}c.restore();this.processingType3=null}}},{key:"setCharWidth",value:function setCharWidth(t,r){}},{key:"setCharWidthAndBounds",value:function setCharWidthAndBounds(t,r,i,a,o,l){this.ctx.rect(i,a,o-i,l-a);this.ctx.clip();this.endPath()}},{key:"getColorN_Pattern",value:function getColorN_Pattern(t){var r,i=this;if("TilingPattern"===t[0]){var a=t[1],c=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),u={createCanvasGraphics:function createCanvasGraphics(t){return new CanvasGraphics(t,i.commonObjs,i.objs,i.canvasFactory,i.filterFactory,{optionalContentConfig:i.optionalContentConfig,markedContentStack:i.markedContentStack})}};r=new l.TilingPattern(t,a,this.ctx,u,c)}else r=this._getPattern(t[1],t[2]);return r}},{key:"setStrokeColorN",value:function setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,i){var o=a.Util.makeHexColor(t,r,i);this.ctx.strokeStyle=o;this.current.strokeColor=o}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,i){var o=a.Util.makeHexColor(t,r,i);this.ctx.fillStyle=o;this.current.fillColor=o;this.current.patternFill=!1}},{key:"_getPattern",value:function _getPattern(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.cachedPatterns.has(t))r=this.cachedPatterns.get(t);else{r=(0,l.getShadingPattern)(this.getObject(t));this.cachedPatterns.set(t,r)}i&&(r.matrix=i);return r}},{key:"shadingFill",value:function shadingFill(t){if(this.contentVisible){var r=this.ctx;this.save();var i=this._getPattern(t);r.fillStyle=i.getPattern(r,this,(0,o.getCurrentTransformInverse)(r),l.PathType.SHADING);var c=(0,o.getCurrentTransformInverse)(r);if(c){var u=r.canvas,d=u.width,h=u.height,p=a.Util.applyTransform([0,0],c),v=a.Util.applyTransform([0,h],c),y=a.Util.applyTransform([d,0],c),g=a.Util.applyTransform([d,h],c),m=Math.min(p[0],v[0],y[0],g[0]),b=Math.min(p[1],v[1],y[1],g[1]),w=Math.max(p[0],v[0],y[0],g[0]),P=Math.max(p[1],v[1],y[1],g[1]);this.ctx.fillRect(m,b,w-m,P-b)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox());this.restore()}}},{key:"beginInlineImage",value:function beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function beginImageData(){(0,a.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){if(this.contentVisible){this.save();this.baseTransformStack.push(this.baseTransform);Array.isArray(t)&&6===t.length&&this.transform.apply(this,_toConsumableArray(t));this.baseTransform=(0,o.getCurrentTransform)(this.ctx);if(r){var i=r[2]-r[0],a=r[3]-r[1];this.ctx.rect(r[0],r[1],i,a);this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),r);this.clip();this.endPath()}}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){if(this.contentVisible){this.restore();this.baseTransform=this.baseTransformStack.pop()}}},{key:"beginGroup",value:function beginGroup(t){if(this.contentVisible){this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null}var r=this.ctx;t.isolated||(0,a.info)("TODO: Support non-isolated groups.");t.knockout&&(0,a.warn)("Knockout groups not supported.");var i=(0,o.getCurrentTransform)(r);t.matrix&&r.transform.apply(r,_toConsumableArray(t.matrix));if(!t.bbox)throw new Error("Bounding box is required.");var l=a.Util.getAxialAlignedBoundingBox(t.bbox,(0,o.getCurrentTransform)(r)),c=[0,0,r.canvas.width,r.canvas.height];l=a.Util.intersect(l,c)||[0,0,0,0];var u=Math.floor(l[0]),h=Math.floor(l[1]),p=Math.max(Math.ceil(l[2])-u,1),v=Math.max(Math.ceil(l[3])-h,1),y=1,g=1;if(p>d){y=p/d;p=d}if(v>d){g=v/d;v=d}this.current.startNewPathAndClipBox([0,0,p,v]);var m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);var b=this.cachedCanvases.getCanvas(m,p,v),w=b.context;w.scale(1/y,1/g);w.translate(-u,-h);w.transform.apply(w,_toConsumableArray(i));if(t.smask)this.smaskStack.push({canvas:b.canvas,context:w,offsetX:u,offsetY:h,scaleX:y,scaleY:g,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null});else{r.setTransform(1,0,0,1,0,0);r.translate(u,h);r.scale(y,g);r.save()}copyCtxState(r,w);this.ctx=w;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(r);this.groupLevel++}}},{key:"endGroup",value:function endGroup(t){if(this.contentVisible){this.groupLevel--;var r=this.ctx,i=this.groupStack.pop();this.ctx=i;this.ctx.imageSmoothingEnabled=!1;if(t.smask){this.tempSMask=this.smaskStack.pop();this.restore()}else{var l;this.ctx.restore();var c=(0,o.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();(l=this.ctx).setTransform.apply(l,_toConsumableArray(c));var u=a.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],c);this.ctx.drawImage(r.canvas,0,0);this.ctx.restore();this.compose(u)}}}},{key:"beginAnnotation",value:function beginAnnotation(t,r,i,l,c){_classPrivateMethodGet(this,w,_restoreInitialState2).call(this);resetCtxToDefault(this.ctx);this.ctx.save();this.save();if(this.baseTransform){var u;(u=this.ctx).setTransform.apply(u,_toConsumableArray(this.baseTransform))}if(Array.isArray(r)&&4===r.length){var d=r[2]-r[0],h=r[3]-r[1];if(c&&this.annotationCanvasMap){(i=i.slice())[4]-=r[0];i[5]-=r[1];(r=r.slice())[0]=r[1]=0;r[2]=d;r[3]=h;var p=_slicedToArray(a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),2),y=p[0],g=p[1],m=this.viewportScale,b=Math.ceil(d*this.outputScaleX*m),P=Math.ceil(h*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(b,P);var S=this.annotationCanvas,k=S.canvas,x=S.context;this.annotationCanvasMap.set(t,k);this.annotationCanvas.savedCtx=this.ctx;this.ctx=x;this.ctx.setTransform(y,0,0,-g,0,h*g);resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx);this.ctx.rect(r[0],r[1],d,h);this.ctx.clip();this.endPath()}}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height);this.transform.apply(this,_toConsumableArray(i));this.transform.apply(this,_toConsumableArray(l))}},{key:"endAnnotation",value:function endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){if(this.contentVisible){var r=t.count;(t=this.getObject(t.data,t)).count=r;var i=this.ctx,a=this.processingType3;if(a){void 0===a.compiled&&(a.compiled=function compileType3Glyph(t){var r=t.width,i=t.height;if(r>1e3||i>1e3)return null;var a,o,l,c,u=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=r+1,h=new Uint8Array(d*(i+1)),p=r+7&-8,v=new Uint8Array(p*i),y=0,g=_createForOfIteratorHelper(t.data);try{for(g.s();!(c=g.n()).done;)for(var m=c.value,b=128;b>0;){v[y++]=m&b?0:255;b>>=1}}catch(t){g.e(t)}finally{g.f()}var w=0;if(0!==v[y=0]){h[0]=1;++w}for(o=1;o<r;o++){if(v[y]!==v[y+1]){h[o]=v[y]?2:1;++w}y++}if(0!==v[y]){h[o]=2;++w}for(a=1;a<i;a++){l=a*d;if(v[(y=a*p)-p]!==v[y]){h[l]=v[y]?1:8;++w}var P=(v[y]?4:0)+(v[y-p]?8:0);for(o=1;o<r;o++){if(u[P=(P>>2)+(v[y+1]?4:0)+(v[y-p+1]?8:0)]){h[l+o]=u[P];++w}y++}if(v[y-p]!==v[y]){h[l+o]=v[y]?2:4;++w}if(w>1e3)return null}l=a*d;if(0!==v[y=p*(i-1)]){h[l]=8;++w}for(o=1;o<r;o++){if(v[y]!==v[y+1]){h[l+o]=v[y]?4:8;++w}y++}if(0!==v[y]){h[l+o]=4;++w}if(w>1e3)return null;var S=new Int32Array([0,d,-1,0,-d,0,0,0,1]),k=new Path2D;for(a=0;w&&a<=i;a++){for(var x=a*d,A=x+r;x<A&&!h[x];)x++;if(x!==A){k.moveTo(x%d,a);var E=x,T=h[x];do{var C=S[T];do{x+=C}while(!h[x]);var I=h[x];if(5!==I&&10!==I){T=I;h[x]=0}else{T=I&51*T>>4;h[x]&=T>>2|T<<2}k.lineTo(x%d,x/d|0);h[x]||--w}while(E!==x);--a}}v=null;h=null;return function drawOutline(t){t.save();t.scale(1/r,-1/i);t.translate(0,-i);t.fill(k);t.beginPath();t.restore()}}(t));if(a.compiled){a.compiled(i);return}}var o=this._createMaskCanvas(t),l=o.canvas;i.save();i.setTransform(1,0,0,1,0,0);i.drawImage(l,o.offsetX,o.offsetY);i.restore();this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function paintImageMaskXObjectRepeat(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var d=this.ctx;d.save();var h=(0,o.getCurrentTransform)(d);d.transform(r,i,l,c,0,0);var p=this._createMaskCanvas(t);d.setTransform(1,0,0,1,p.offsetX-h[4],p.offsetY-h[5]);for(var v=0,y=u.length;v<y;v+=2){var g=a.Util.transform(h,[r,i,l,c,u[v],u[v+1]]),m=_slicedToArray(a.Util.applyTransform([0,0],g),2),b=m[0],w=m[1];d.drawImage(p.canvas,b,w)}d.restore();this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function paintImageMaskXObjectGroup(t){if(this.contentVisible){var r,i=this.ctx,a=this.current.fillColor,c=this.current.patternFill,u=_createForOfIteratorHelper(t);try{for(u.s();!(r=u.n()).done;){var d=r.value,h=d.data,p=d.width,v=d.height,y=d.transform,g=this.cachedCanvases.getCanvas("maskCanvas",p,v),m=g.context;m.save();putBinaryImageMask(m,this.getObject(h,d));m.globalCompositeOperation="source-in";m.fillStyle=c?a.getPattern(m,this,(0,o.getCurrentTransformInverse)(i),l.PathType.FILL):a;m.fillRect(0,0,p,v);m.restore();i.save();i.transform.apply(i,_toConsumableArray(y));i.scale(1,-1);drawImageAtIntegerCoords(i,g.canvas,0,0,p,v,0,-1,1,1);i.restore()}}catch(t){u.e(t)}finally{u.f()}this.compose()}}},{key:"paintImageXObject",value:function paintImageXObject(t){if(this.contentVisible){var r=this.getObject(t);r?this.paintInlineImageXObject(r):(0,a.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function paintImageXObjectRepeat(t,r,i,o){if(this.contentVisible){var l=this.getObject(t);if(l){for(var c=l.width,u=l.height,d=[],h=0,p=o.length;h<p;h+=2)d.push({transform:[r,0,0,i,o[h],o[h+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(l,d)}else(0,a.warn)("Dependent image isn't ready yet")}}},{key:"applyTransferMapsToCanvas",value:function applyTransferMapsToCanvas(t){if("none"!==this.current.transferMaps){t.filter=this.current.transferMaps;t.drawImage(t.canvas,0,0);t.filter="none"}return t.canvas}},{key:"applyTransferMapsToBitmap",value:function applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;var r=t.bitmap,i=t.width,a=t.height,o=this.cachedCanvases.getCanvas("inlineImage",i,a),l=o.context;l.filter=this.current.transferMaps;l.drawImage(r,0,0);l.filter="none";return o.canvas}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t){if(this.contentVisible){var r,i=t.width,a=t.height,l=this.ctx;this.save();u.isNodeJS||(l.filter="none");l.scale(1/i,-1/a);if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)r=t;else{var c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;putBinaryImageData(c,t);r=this.applyTransferMapsToCanvas(c)}var d=this._scaleImage(r,(0,o.getCurrentTransformInverse)(l));l.imageSmoothingEnabled=getImageSmoothingEnabled((0,o.getCurrentTransform)(l),t.interpolate);drawImageAtIntegerCoords(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a);this.compose();this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function paintInlineImageXObjectGroup(t,r){if(this.contentVisible){var i,a=this.ctx;if(t.bitmap)i=t.bitmap;else{var o=t.width,l=t.height,c=this.cachedCanvases.getCanvas("inlineImage",o,l).context;putBinaryImageData(c,t);i=this.applyTransferMapsToCanvas(c)}var u,d=_createForOfIteratorHelper(r);try{for(d.s();!(u=d.n()).done;){var h=u.value;a.save();a.transform.apply(a,_toConsumableArray(h.transform));a.scale(1,-1);drawImageAtIntegerCoords(a,i,h.x,h.y,h.w,h.h,0,-1,1,1);a.restore()}}catch(t){d.e(t)}finally{d.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){if(this.contentVisible){this.ctx.fillRect(0,0,1,1);this.compose()}}},{key:"markPoint",value:function markPoint(t){}},{key:"markPointProps",value:function markPointProps(t,r){}},{key:"beginMarkedContent",value:function beginMarkedContent(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function beginMarkedContentProps(t,r){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0});this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function beginCompat(){}},{key:"endCompat",value:function endCompat(){}},{key:"consumePath",value:function consumePath(t){var r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath();this.pendingClip||this.compose(t);var i=this.ctx;if(this.pendingClip){r||(this.pendingClip===b?i.clip("evenodd"):i.clip());this.pendingClip=null}this.current.startNewPathAndClipBox(this.current.clipBox);i.beginPath()}},{key:"getSinglePixelWidth",value:function getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){var t=(0,o.getCurrentTransform)(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var r=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/r}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function getScaleForStroking(){if(!this._cachedScaleForStroking){var t,r,i=this.current.lineWidth,a=(0,o.getCurrentTransform)(this.ctx);if(0===a[1]&&0===a[2]){var l=Math.abs(a[0]),c=Math.abs(a[3]);if(0===i){t=1/l;r=1/c}else{var u=l*i,d=c*i;t=u<1?1/u:1;r=d<1?1/d:1}}else{var h=Math.abs(a[0]*a[3]-a[2]*a[1]),p=Math.hypot(a[0],a[1]),v=Math.hypot(a[2],a[3]);if(0===i){t=v/h;r=p/h}else{var y=i*h;t=v>y?v/y:1;r=p>y?p/y:1}}this._cachedScaleForStroking=[t,r]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function rescaleAndStroke(t){var r=this.ctx,i=this.current.lineWidth,a=_slicedToArray(this.getScaleForStroking(),2),l=a[0],c=a[1];r.lineWidth=i||1;if(1!==l||1!==c){var u,d,h;if(t){u=(0,o.getCurrentTransform)(r);d=r.getLineDash().slice();h=r.lineDashOffset}r.scale(l,c);var p=Math.max(l,c);r.setLineDash(r.getLineDash().map((function(t){return t/p})));r.lineDashOffset/=p;r.stroke();if(t){r.setTransform.apply(r,_toConsumableArray(u));r.setLineDash(d);r.lineDashOffset=h}}else r.stroke()}},{key:"isContentVisible",value:function isContentVisible(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}]);return CanvasGraphics}();r.CanvasGraphics=P;function _restoreInitialState2(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}}for(var S in a.OPS)void 0!==P.prototype[S]&&(P.prototype[a.OPS[S]]=P.prototype[S])},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TilingPattern=r.PathType=void 0;r.getShadingPattern=function getShadingPattern(t){switch(t[0]){case"RadialAxial":return new u(t);case"Mesh":return new d(t);case"Dummy":return new h}throw new Error("Unknown IR type: ".concat(t[0]))};var a=i(1),o=i(141);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=l;function applyBoundingBox(t,r){if(r){var i=r[2]-r[0],a=r[3]-r[1],o=new Path2D;o.rect(r[0],r[1],i,a);t.clip(o)}}var c=function(){function BaseShadingPattern(){_classCallCheck(this,BaseShadingPattern);this.constructor===BaseShadingPattern&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}_createClass(BaseShadingPattern,[{key:"getPattern",value:function getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}]);return BaseShadingPattern}(),u=function(t){_inherits(RadialAxialShadingPattern,t);var r=_createSuper(RadialAxialShadingPattern);function RadialAxialShadingPattern(t){var i;_classCallCheck(this,RadialAxialShadingPattern);(i=r.call(this))._type=t[1];i._bbox=t[2];i._colorStops=t[3];i._p0=t[4];i._p1=t[5];i._r0=t[6];i._r1=t[7];i.matrix=null;return i}_createClass(RadialAxialShadingPattern,[{key:"_createGradient",value:function _createGradient(t){var r;"axial"===this._type?r=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(r=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var i,a=_createForOfIteratorHelper(this._colorStops);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.addColorStop(o[0],o[1])}}catch(t){a.e(t)}finally{a.f()}return r}},{key:"getPattern",value:function getPattern(t,r,i,c){var u;if(c===l.STROKE||c===l.FILL){var d=r.current.getClippedPathBoundingBox(c,(0,o.getCurrentTransform)(t))||[0,0,0,0],h=Math.ceil(d[2]-d[0])||1,p=Math.ceil(d[3]-d[1])||1,v=r.cachedCanvases.getCanvas("pattern",h,p,!0),y=v.context;y.clearRect(0,0,y.canvas.width,y.canvas.height);y.beginPath();y.rect(0,0,y.canvas.width,y.canvas.height);y.translate(-d[0],-d[1]);i=a.Util.transform(i,[1,0,0,1,d[0],d[1]]);y.transform.apply(y,_toConsumableArray(r.baseTransform));this.matrix&&y.transform.apply(y,_toConsumableArray(this.matrix));applyBoundingBox(y,this._bbox);y.fillStyle=this._createGradient(y);y.fill();u=t.createPattern(v.canvas,"no-repeat");var g=new DOMMatrix(i);u.setTransform(g)}else{applyBoundingBox(t,this._bbox);u=this._createGradient(t)}return u}}]);return RadialAxialShadingPattern}(c);function drawTriangle(t,r,i,a,o,l,c,u){var d,h=r.coords,p=r.colors,v=t.data,y=4*t.width;if(h[i+1]>h[a+1]){d=i;i=a;a=d;d=l;l=c;c=d}if(h[a+1]>h[o+1]){d=a;a=o;o=d;d=c;c=u;u=d}if(h[i+1]>h[a+1]){d=i;i=a;a=d;d=l;l=c;c=d}var g=(h[i]+r.offsetX)*r.scaleX,m=(h[i+1]+r.offsetY)*r.scaleY,b=(h[a]+r.offsetX)*r.scaleX,w=(h[a+1]+r.offsetY)*r.scaleY,P=(h[o]+r.offsetX)*r.scaleX,S=(h[o+1]+r.offsetY)*r.scaleY;if(!(m>=S))for(var k,x,A,E,T,C,I,O,M=p[l],L=p[l+1],R=p[l+2],D=p[c],G=p[c+1],j=p[c+2],N=p[u],B=p[u+1],V=p[u+2],W=Math.round(m),H=Math.round(S),U=W;U<=H;U++){if(U<w){var z=void 0;k=g-(g-b)*(z=U<m?0:(m-U)/(m-w));x=M-(M-D)*z;A=L-(L-G)*z;E=R-(R-j)*z}else{var X=void 0;k=b-(b-P)*(X=U>S?1:w===S?0:(w-U)/(w-S));x=D-(D-N)*X;A=G-(G-B)*X;E=j-(j-V)*X}var K=void 0;T=g-(g-P)*(K=U<m?0:U>S?1:(m-U)/(m-S));C=M-(M-N)*K;I=L-(L-B)*K;O=R-(R-V)*K;for(var Y=Math.round(Math.min(k,T)),$=Math.round(Math.max(k,T)),Q=y*U+4*Y,Z=Y;Z<=$;Z++){(K=(k-Z)/(k-T))<0?K=0:K>1&&(K=1);v[Q++]=x-(x-C)*K|0;v[Q++]=A-(A-I)*K|0;v[Q++]=E-(E-O)*K|0;v[Q++]=255}}}function drawFigure(t,r,i){var a,o,l=r.coords,c=r.colors;switch(r.type){case"lattice":var u=r.verticesPerRow,d=Math.floor(l.length/u)-1,h=u-1;for(a=0;a<d;a++)for(var p=a*u,v=0;v<h;v++,p++){drawTriangle(t,i,l[p],l[p+1],l[p+u],c[p],c[p+1],c[p+u]);drawTriangle(t,i,l[p+u+1],l[p+1],l[p+u],c[p+u+1],c[p+1],c[p+u])}break;case"triangles":for(a=0,o=l.length;a<o;a+=3)drawTriangle(t,i,l[a],l[a+1],l[a+2],c[a],c[a+1],c[a+2]);break;default:throw new Error("illegal figure")}}var d=function(t){_inherits(MeshShadingPattern,t);var r=_createSuper(MeshShadingPattern);function MeshShadingPattern(t){var i;_classCallCheck(this,MeshShadingPattern);(i=r.call(this))._coords=t[2];i._colors=t[3];i._figures=t[4];i._bounds=t[5];i._bbox=t[7];i._background=t[8];i.matrix=null;return i}_createClass(MeshShadingPattern,[{key:"_createMeshCanvas",value:function _createMeshCanvas(t,r,i){var a=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-a,c=Math.ceil(this._bounds[3])-o,u=Math.min(Math.ceil(Math.abs(l*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*t[1]*1.1)),3e3),h=l/u,p=c/d,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/h,scaleY:1/p},y=u+4,g=d+4,m=i.getCanvas("mesh",y,g,!1),b=m.context,w=b.createImageData(u,d);if(r)for(var P=w.data,S=0,k=P.length;S<k;S+=4){P[S]=r[0];P[S+1]=r[1];P[S+2]=r[2];P[S+3]=255}var x,A=_createForOfIteratorHelper(this._figures);try{for(A.s();!(x=A.n()).done;){drawFigure(w,x.value,v)}}catch(t){A.e(t)}finally{A.f()}b.putImageData(w,2,2);return{canvas:m.canvas,offsetX:a-2*h,offsetY:o-2*p,scaleX:h,scaleY:p}}},{key:"getPattern",value:function getPattern(t,r,i,c){applyBoundingBox(t,this._bbox);var u;if(c===l.SHADING)u=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(t));else{u=a.Util.singularValueDecompose2dScale(r.baseTransform);if(this.matrix){var d=a.Util.singularValueDecompose2dScale(this.matrix);u=[u[0]*d[0],u[1]*d[1]]}}var h=this._createMeshCanvas(u,c===l.SHADING?null:this._background,r.cachedCanvases);if(c!==l.SHADING){t.setTransform.apply(t,_toConsumableArray(r.baseTransform));this.matrix&&t.transform.apply(t,_toConsumableArray(this.matrix))}t.translate(h.offsetX,h.offsetY);t.scale(h.scaleX,h.scaleY);return t.createPattern(h.canvas,"no-repeat")}}]);return MeshShadingPattern}(c),h=function(t){_inherits(DummyShadingPattern,t);var r=_createSuper(DummyShadingPattern);function DummyShadingPattern(){_classCallCheck(this,DummyShadingPattern);return r.apply(this,arguments)}_createClass(DummyShadingPattern,[{key:"getPattern",value:function getPattern(){return"hotpink"}}]);return DummyShadingPattern}(c);var p=1,v=2,y=function(){function TilingPattern(t,r,i,a,o){_classCallCheck(this,TilingPattern);this.operatorList=t[2];this.matrix=t[3]||[1,0,0,1,0,0];this.bbox=t[4];this.xstep=t[5];this.ystep=t[6];this.paintType=t[7];this.tilingType=t[8];this.color=r;this.ctx=i;this.canvasGraphicsFactory=a;this.baseTransform=o}_createClass(TilingPattern,[{key:"createPatternCanvas",value:function createPatternCanvas(t){var r=this.operatorList,i=this.bbox,l=this.xstep,c=this.ystep,u=this.paintType,d=this.tilingType,h=this.color,p=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+d);var v=i[0],y=i[1],g=i[2],m=i[3],b=a.Util.singularValueDecompose2dScale(this.matrix),w=a.Util.singularValueDecompose2dScale(this.baseTransform),P=[b[0]*w[0],b[1]*w[1]],S=this.getSizeAndScale(l,this.ctx.canvas.width,P[0]),k=this.getSizeAndScale(c,this.ctx.canvas.height,P[1]),x=t.cachedCanvases.getCanvas("pattern",S.size,k.size,!0),A=x.context,E=p.createCanvasGraphics(A);E.groupLevel=t.groupLevel;this.setFillAndStrokeStyleToContext(E,u,h);var T=v,C=y,I=g,O=m;if(v<0){T=0;I+=Math.abs(v)}if(y<0){C=0;O+=Math.abs(y)}A.translate(-S.scale*T,-k.scale*C);E.transform(S.scale,0,0,k.scale,0,0);A.save();this.clipBbox(E,T,C,I,O);E.baseTransform=(0,o.getCurrentTransform)(E.ctx);E.executeOperatorList(r);E.endDrawing();return{canvas:x.canvas,scaleX:S.scale,scaleY:k.scale,offsetX:T,offsetY:C}}},{key:"getSizeAndScale",value:function getSizeAndScale(t,r,i){t=Math.abs(t);var a=Math.max(TilingPattern.MAX_PATTERN_SIZE,r),o=Math.ceil(t*i);o>=a?o=a:i=o/t;return{scale:i,size:o}}},{key:"clipBbox",value:function clipBbox(t,r,i,a,l){var c=a-r,u=l-i;t.ctx.rect(r,i,c,u);t.current.updateRectMinMax((0,o.getCurrentTransform)(t.ctx),[r,i,a,l]);t.clip();t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function setFillAndStrokeStyleToContext(t,r,i){var o=t.ctx,l=t.current;switch(r){case p:var c=this.ctx;o.fillStyle=c.fillStyle;o.strokeStyle=c.strokeStyle;l.fillColor=c.fillStyle;l.strokeColor=c.strokeStyle;break;case v:var u=a.Util.makeHexColor(i[0],i[1],i[2]);o.fillStyle=u;o.strokeStyle=u;l.fillColor=u;l.strokeColor=u;break;default:throw new a.FormatError("Unsupported paint type: ".concat(r))}}},{key:"getPattern",value:function getPattern(t,r,i,o){var c=i;if(o!==l.SHADING){c=a.Util.transform(c,r.baseTransform);this.matrix&&(c=a.Util.transform(c,this.matrix))}var u=this.createPatternCanvas(r),d=new DOMMatrix(c);d=(d=d.translate(u.offsetX,u.offsetY)).scale(1/u.scaleX,1/u.scaleY);var h=t.createPattern(u.canvas,"repeat");h.setTransform(d);return h}}],[{key:"MAX_PATTERN_SIZE",get:function get(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]);return TilingPattern}();r.TilingPattern=y},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.convertBlackAndWhiteToRGBA=convertBlackAndWhiteToRGBA;r.convertToRGBA=function convertToRGBA(t){switch(t.kind){case a.ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(t);case a.ImageKind.RGB_24BPP:return function convertRGBToRGBA(t){var r=t.src,i=t.srcPos,o=void 0===i?0:i,l=t.dest,c=t.destPos,u=void 0===c?0:c,d=(t.width,t.height,0),h=r.length>>2,p=new Uint32Array(r.buffer,o,h);if(a.FeatureTest.isLittleEndian){for(;d<h-2;d+=3,u+=4){var v=p[d],y=p[d+1],g=p[d+2];l[u]=4278190080|v;l[u+1]=v>>>24|y<<8|4278190080;l[u+2]=y>>>16|g<<16|4278190080;l[u+3]=g>>>8|4278190080}for(var m=4*d,b=r.length;m<b;m+=3)l[u++]=r[m]|r[m+1]<<8|r[m+2]<<16|4278190080}else{for(;d<h-2;d+=3,u+=4){var w=p[d],P=p[d+1],S=p[d+2];l[u]=255|w;l[u+1]=w<<24|P>>>8|255;l[u+2]=P<<16|S>>>16|255;l[u+3]=S<<8|255}for(var k=4*d,x=r.length;k<x;k+=3)l[u++]=r[k]<<24|r[k+1]<<16|r[k+2]<<8|255}return{srcPos:o,destPos:u}}(t)}return null};r.grayToRGBA=function grayToRGBA(t,r){if(a.FeatureTest.isLittleEndian)for(var i=0,o=t.length;i<o;i++)r[i]=65793*t[i]|4278190080;else for(var l=0,c=t.length;l<c;l++)r[l]=16843008*t[l]|255};var a=i(1);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function convertBlackAndWhiteToRGBA(t){var r=t.src,i=t.srcPos,o=void 0===i?0:i,l=t.dest,c=t.width,u=t.height,d=t.nonBlackColor,h=void 0===d?4294967295:d,p=t.inverseDecode,v=void 0!==p&&p,y=a.FeatureTest.isLittleEndian?4278190080:255,g=_slicedToArray(v?[h,y]:[y,h],2),m=g[0],b=g[1],w=c>>3,P=7&c,S=r.length;l=new Uint32Array(l.buffer);for(var k=0,x=0;x<u;x++){for(var A=o+w;o<A;o++){var E=o<S?r[o]:255;l[k++]=128&E?b:m;l[k++]=64&E?b:m;l[k++]=32&E?b:m;l[k++]=16&E?b:m;l[k++]=8&E?b:m;l[k++]=4&E?b:m;l[k++]=2&E?b:m;l[k++]=1&E?b:m}if(0!==P)for(var T=o<S?r[o++]:255,C=0;C<P;C++)l[k++]=T&1<<7-C?b:m}return{srcPos:o,destPos:k}}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.GlobalWorkerOptions=void 0;var i=Object.create(null);r.GlobalWorkerOptions=i;i.workerPort=null;i.workerSrc=""},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MessageHandler=void 0;var a=i(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var o=1,l=2,c=1,u=2,d=3,h=4,p=5,v=6,y=7,g=8;function wrapReason(t){t instanceof Error||"object"===_typeof(t)&&null!==t||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.');switch(t.name){case"AbortException":return new a.AbortException(t.message);case"MissingPDFException":return new a.MissingPDFException(t.message);case"PasswordException":return new a.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new a.UnknownErrorException(t.message,t.details);default:return new a.UnknownErrorException(t.message,t.toString())}}var m=function(){function MessageHandler(t,r,i){var a=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MessageHandler);this.sourceName=t;this.targetName=r;this.comObj=i;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var r=t.data;if(r.targetName===a.sourceName)if(r.stream)a._processStreamMessage(r);else if(r.callback){var c=r.callbackId,u=a.callbackCapabilities[c];if(!u)throw new Error("Cannot resolve callback ".concat(c));delete a.callbackCapabilities[c];if(r.callback===o)u.resolve(r.data);else{if(r.callback!==l)throw new Error("Unexpected callback case");u.reject(wrapReason(r.reason))}}else{var d=a.actionHandler[r.action];if(!d)throw new Error("Unknown action from worker: ".concat(r.action));if(r.callbackId){var h=a.sourceName,p=r.sourceName;new Promise((function(t){t(d(r.data))})).then((function(t){i.postMessage({sourceName:h,targetName:p,callback:o,callbackId:r.callbackId,data:t})}),(function(t){i.postMessage({sourceName:h,targetName:p,callback:l,callbackId:r.callbackId,reason:wrapReason(t)})}))}else r.streamId?a._createStreamSink(r):d(r.data)}};i.addEventListener("message",this._onComObjOnMessage)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(MessageHandler,[{key:"on",value:function on(t,r){var i=this.actionHandler;if(i[t])throw new Error('There is already an actionName called "'.concat(t,'"'));i[t]=r}},{key:"send",value:function send(t,r,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:r},i)}},{key:"sendWithPromise",value:function sendWithPromise(t,r,i){var o=this.callbackId++,l=(0,a.createPromiseCapability)();this.callbackCapabilities[o]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:o,data:r},i)}catch(t){l.reject(t)}return l.promise}},{key:"sendWithStream",value:function sendWithStream(t,r,i,o){var l=this,u=this.streamId++,d=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:function start(i){var c=(0,a.createPromiseCapability)();l.streamControllers[u]={controller:i,startCall:c,pullCall:null,cancelCall:null,isClosed:!1};p.postMessage({sourceName:d,targetName:h,action:t,streamId:u,data:r,desiredSize:i.desiredSize},o);return c.promise},pull:function pull(t){var r=(0,a.createPromiseCapability)();l.streamControllers[u].pullCall=r;p.postMessage({sourceName:d,targetName:h,stream:v,streamId:u,desiredSize:t.desiredSize});return r.promise},cancel:function cancel(t){(0,a.assert)(t instanceof Error,"cancel must have a valid reason");var r=(0,a.createPromiseCapability)();l.streamControllers[u].cancelCall=r;l.streamControllers[u].isClosed=!0;p.postMessage({sourceName:d,targetName:h,stream:c,streamId:u,reason:wrapReason(t)});return r.promise}},i)}},{key:"_createStreamSink",value:function _createStreamSink(t){var r=t.streamId,i=this.sourceName,o=t.sourceName,l=this.comObj,c=this,u=this.actionHandler[t.action],v={enqueue:function enqueue(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var d=this.desiredSize;this.desiredSize-=c;if(d>0&&this.desiredSize<=0){this.sinkCapability=(0,a.createPromiseCapability)();this.ready=this.sinkCapability.promise}l.postMessage({sourceName:i,targetName:o,stream:h,streamId:r,chunk:t},u)}},close:function close(){if(!this.isCancelled){this.isCancelled=!0;l.postMessage({sourceName:i,targetName:o,stream:d,streamId:r});delete c.streamSinks[r]}},error:function error(t){(0,a.assert)(t instanceof Error,"error must have a valid reason");if(!this.isCancelled){this.isCancelled=!0;l.postMessage({sourceName:i,targetName:o,stream:p,streamId:r,reason:wrapReason(t)})}},sinkCapability:(0,a.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};v.sinkCapability.resolve();v.ready=v.sinkCapability.promise;this.streamSinks[r]=v;new Promise((function(r){r(u(t.data,v))})).then((function(){l.postMessage({sourceName:i,targetName:o,stream:g,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:i,targetName:o,stream:g,streamId:r,reason:wrapReason(t)})}))}},{key:"_processStreamMessage",value:function _processStreamMessage(t){var r=t.streamId,i=this.sourceName,o=t.sourceName,l=this.comObj,m=this.streamControllers[r],b=this.streamSinks[r];switch(t.stream){case g:t.success?m.startCall.resolve():m.startCall.reject(wrapReason(t.reason));break;case y:t.success?m.pullCall.resolve():m.pullCall.reject(wrapReason(t.reason));break;case v:if(!b){l.postMessage({sourceName:i,targetName:o,stream:y,streamId:r,success:!0});break}b.desiredSize<=0&&t.desiredSize>0&&b.sinkCapability.resolve();b.desiredSize=t.desiredSize;new Promise((function(t){t(b.onPull&&b.onPull())})).then((function(){l.postMessage({sourceName:i,targetName:o,stream:y,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:i,targetName:o,stream:y,streamId:r,reason:wrapReason(t)})}));break;case h:(0,a.assert)(m,"enqueue should have stream controller");if(m.isClosed)break;m.controller.enqueue(t.chunk);break;case d:(0,a.assert)(m,"close should have stream controller");if(m.isClosed)break;m.isClosed=!0;m.controller.close();this._deleteStreamController(m,r);break;case p:(0,a.assert)(m,"error should have stream controller");m.controller.error(wrapReason(t.reason));this._deleteStreamController(m,r);break;case u:t.success?m.cancelCall.resolve():m.cancelCall.reject(wrapReason(t.reason));this._deleteStreamController(m,r);break;case c:if(!b)break;new Promise((function(r){r(b.onCancel&&b.onCancel(wrapReason(t.reason)))})).then((function(){l.postMessage({sourceName:i,targetName:o,stream:u,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:i,targetName:o,stream:u,streamId:r,reason:wrapReason(t)})}));b.sinkCapability.reject(wrapReason(t.reason));b.isCancelled=!0;delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t,r){return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);case 2:delete this.streamControllers[r];case 3:case"end":return i.stop()}}),_callee,this)}))),function _deleteStreamController(r,i){return t.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]);var t;return MessageHandler}();r.MessageHandler=m},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.Metadata=void 0;var a=i(1);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var o=new WeakMap,l=new WeakMap,c=function(){function Metadata(t){var r=t.parsedData,i=t.rawData;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Metadata);_classPrivateFieldInitSpec(this,o,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,l,{writable:!0,value:void 0});_classPrivateFieldSet(this,o,r);_classPrivateFieldSet(this,l,i)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(Metadata,[{key:"getRaw",value:function getRaw(){return _classPrivateFieldGet(this,l)}},{key:"get",value:function get(t){var r;return null!==(r=_classPrivateFieldGet(this,o).get(t))&&void 0!==r?r:null}},{key:"getAll",value:function getAll(){return(0,a.objectFromMap)(_classPrivateFieldGet(this,o))}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,o).has(t)}}]);return Metadata}();r.Metadata=c},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.OptionalContentConfig=void 0;var a=i(1),o=i(143);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var l=Symbol("INTERNAL"),c=new WeakMap,u=function(){function OptionalContentGroup(t,r){_classCallCheck(this,OptionalContentGroup);_classPrivateFieldInitSpec(this,c,{writable:!0,value:!0});this.name=t;this.intent=r}_createClass(OptionalContentGroup,[{key:"visible",get:function get(){return _classPrivateFieldGet(this,c)}},{key:"_setVisible",value:function _setVisible(t,r){t!==l&&(0,a.unreachable)("Internal method `_setVisible` called.");_classPrivateFieldSet(this,c,r)}}]);return OptionalContentGroup}(),d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakSet,g=function(){function OptionalContentConfig(t){_classCallCheck(this,OptionalContentConfig);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,y);_classPrivateFieldInitSpec(this,d,{writable:!0,value:null});_classPrivateFieldInitSpec(this,h,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,p,{writable:!0,value:null});_classPrivateFieldInitSpec(this,v,{writable:!0,value:null});this.name=null;this.creator=null;if(null!==t){this.name=t.name;this.creator=t.creator;_classPrivateFieldSet(this,v,t.order);var r,i=_createForOfIteratorHelper(t.groups);try{for(i.s();!(r=i.n()).done;){var a=r.value;_classPrivateFieldGet(this,h).set(a.id,new u(a.name,a.intent))}}catch(t){i.e(t)}finally{i.f()}if("OFF"===t.baseState){var o,c=_createForOfIteratorHelper(_classPrivateFieldGet(this,h).values());try{for(c.s();!(o=c.n()).done;){o.value._setVisible(l,!1)}}catch(t){c.e(t)}finally{c.f()}}var g,m=_createForOfIteratorHelper(t.on);try{for(m.s();!(g=m.n()).done;){var b=g.value;_classPrivateFieldGet(this,h).get(b)._setVisible(l,!0)}}catch(t){m.e(t)}finally{m.f()}var w,P=_createForOfIteratorHelper(t.off);try{for(P.s();!(w=P.n()).done;){var S=w.value;_classPrivateFieldGet(this,h).get(S)._setVisible(l,!1)}}catch(t){P.e(t)}finally{P.f()}_classPrivateFieldSet(this,p,this.getHash())}}_createClass(OptionalContentConfig,[{key:"isVisible",value:function isVisible(t){if(0===_classPrivateFieldGet(this,h).size)return!0;if(!t){(0,a.warn)("Optional content group not defined.");return!0}if("OCG"===t.type){if(!_classPrivateFieldGet(this,h).has(t.id)){(0,a.warn)("Optional content group not found: ".concat(t.id));return!0}return _classPrivateFieldGet(this,h).get(t.id).visible}if("OCMD"===t.type){if(t.expression)return _classPrivateMethodGet(this,y,_evaluateVisibilityExpression2).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var r,i=_createForOfIteratorHelper(t.ids);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!_classPrivateFieldGet(this,h).has(o)){(0,a.warn)("Optional content group not found: ".concat(o));return!0}if(_classPrivateFieldGet(this,h).get(o).visible)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}if("AllOn"===t.policy){var l,c=_createForOfIteratorHelper(t.ids);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(!_classPrivateFieldGet(this,h).has(u)){(0,a.warn)("Optional content group not found: ".concat(u));return!0}if(!_classPrivateFieldGet(this,h).get(u).visible)return!1}}catch(t){c.e(t)}finally{c.f()}return!0}if("AnyOff"===t.policy){var d,p=_createForOfIteratorHelper(t.ids);try{for(p.s();!(d=p.n()).done;){var v=d.value;if(!_classPrivateFieldGet(this,h).has(v)){(0,a.warn)("Optional content group not found: ".concat(v));return!0}if(!_classPrivateFieldGet(this,h).get(v).visible)return!0}}catch(t){p.e(t)}finally{p.f()}return!1}if("AllOff"===t.policy){var g,m=_createForOfIteratorHelper(t.ids);try{for(m.s();!(g=m.n()).done;){var b=g.value;if(!_classPrivateFieldGet(this,h).has(b)){(0,a.warn)("Optional content group not found: ".concat(b));return!0}if(_classPrivateFieldGet(this,h).get(b).visible)return!1}}catch(t){m.e(t)}finally{m.f()}return!0}(0,a.warn)("Unknown optional content policy ".concat(t.policy,"."));return!0}(0,a.warn)("Unknown group type ".concat(t.type,"."));return!0}},{key:"setVisibility",value:function setVisibility(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(_classPrivateFieldGet(this,h).has(t)){_classPrivateFieldGet(this,h).get(t)._setVisible(l,!!r);_classPrivateFieldSet(this,d,null)}else(0,a.warn)("Optional content group not found: ".concat(t))}},{key:"hasInitialVisibility",get:function get(){return this.getHash()===_classPrivateFieldGet(this,p)}},{key:"getOrder",value:function getOrder(){return _classPrivateFieldGet(this,h).size?_classPrivateFieldGet(this,v)?_classPrivateFieldGet(this,v).slice():_toConsumableArray(_classPrivateFieldGet(this,h).keys()):null}},{key:"getGroups",value:function getGroups(){return _classPrivateFieldGet(this,h).size>0?(0,a.objectFromMap)(_classPrivateFieldGet(this,h)):null}},{key:"getGroup",value:function getGroup(t){return _classPrivateFieldGet(this,h).get(t)||null}},{key:"getHash",value:function getHash(){if(null!==_classPrivateFieldGet(this,d))return _classPrivateFieldGet(this,d);var t,r=new o.MurmurHash3_64,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,h));try{for(i.s();!(t=i.n()).done;){var a=_slicedToArray(t.value,2),l=a[0],c=a[1];r.update("".concat(l,":").concat(c.visible))}}catch(t){i.e(t)}finally{i.f()}return _classPrivateFieldSet(this,d,r.hexdigest())}}]);return OptionalContentConfig}();r.OptionalContentConfig=g;function _evaluateVisibilityExpression2(t){var r=t.length;if(r<2)return!0;for(var i=t[0],o=1;o<r;o++){var l=t[o],c=void 0;if(Array.isArray(l))c=_classPrivateMethodGet(this,y,_evaluateVisibilityExpression2).call(this,l);else{if(!_classPrivateFieldGet(this,h).has(l)){(0,a.warn)("Optional content group not found: ".concat(l));return!0}c=_classPrivateFieldGet(this,h).get(l).visible}switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return"And"===i}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFDataTransportStream=void 0;var a=i(1),o=i(141);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var l=function(){function PDFDataTransportStream(t,r){var i=this,o=t.length,l=t.initialData,c=t.progressiveDone,u=void 0!==c&&c,d=t.contentDispositionFilename,h=void 0===d?null:d,p=t.disableRange,v=void 0!==p&&p,y=t.disableStream,g=void 0!==y&&y;_classCallCheck(this,PDFDataTransportStream);(0,a.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');this._queuedChunks=[];this._progressiveDone=u;this._contentDispositionFilename=h;if((null==l?void 0:l.length)>0){var m=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=r;this._isStreamingSupported=!g;this._isRangeSupported=!v;this._contentLength=o;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener((function(t,r){i._onReceiveData({begin:t,chunk:r})}));this._pdfDataRangeTransport.addProgressListener((function(t,r){i._onProgress({loaded:t,total:r})}));this._pdfDataRangeTransport.addProgressiveReadListener((function(t){i._onReceiveData({chunk:t})}));this._pdfDataRangeTransport.addProgressiveDoneListener((function(){i._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady()}_createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(t){var r=t.begin,i=t.chunk,o=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(void 0===r)this._fullRequestReader?this._fullRequestReader._enqueue(o):this._queuedChunks.push(o);else{var l=this._rangeReaders.some((function(t){if(t._begin!==r)return!1;t._enqueue(o);return!0}));(0,a.assert)(l,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function _onProgress(t){if(void 0===t.total){var r,i;null===(r=this._rangeReaders[0])||void 0===r||null===(i=r.onProgress)||void 0===i||i.call(r,{loaded:t.loaded})}else{var a,o;null===(a=this._fullRequestReader)||void 0===a||null===(o=a.onProgress)||void 0===o||o.call(a,{loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone();this._progressiveDone=!0}},{key:"_removeRangeReader",value:function _removeRangeReader(t){var r=this._rangeReaders.indexOf(t);r>=0&&this._rangeReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;this._queuedChunks=null;return new c(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var i=new u(this,t,r);this._pdfDataRangeTransport.requestDataRange(t,r);this._rangeReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){var r;null===(r=this._fullRequestReader)||void 0===r||r.cancel(t);var i,a=_createForOfIteratorHelper(this._rangeReaders.slice(0));try{for(a.s();!(i=a.n()).done;){i.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}this._pdfDataRangeTransport.abort()}}]);return PDFDataTransportStream}();r.PDFDataTransportStream=l;var c=function(){function PDFDataTransportStreamReader(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataTransportStreamReader);this._stream=t;this._done=i||!1;this._filename=(0,o.isPdfFile)(a)?a:null;this._queuedChunks=r||[];this._loaded=0;var l,c=_createForOfIteratorHelper(this._queuedChunks);try{for(c.s();!(l=c.n()).done;){var u=l.value;this._loaded+=u.byteLength}}catch(t){c.e(t)}finally{c.f()}this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function get(){return this._stream._contentLength}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!(this._queuedChunks.length>0)){i.next=3;break}t=this._queuedChunks.shift();return i.abrupt("return",{value:t,done:!1});case 3:if(!this._done){i.next=5;break}return i.abrupt("return",{value:void 0,done:!0});case 5:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 8:case"end":return i.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0}},{key:"progressiveDone",value:function progressiveDone(){this._done||(this._done=!0)}}]);var t;return PDFDataTransportStreamReader}(),u=function(){function PDFDataTransportStreamRangeReader(t,r,i){_classCallCheck(this,PDFDataTransportStreamRangeReader);this._stream=t;this._begin=r;this._end=i;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0}this._done=!0;this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(!this._queuedChunk){i.next=4;break}t=this._queuedChunk;this._queuedChunk=null;return i.abrupt("return",{value:t,done:!1});case 4:if(!this._done){i.next=6;break}return i.abrupt("return",{value:void 0,done:!0});case 6:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 9:case"end":return i.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._stream._removeRangeReader(this)}}]);var t;return PDFDataTransportStreamRangeReader}()},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.XfaText=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var i=function(){function XfaText(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaText)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaText,null,[{key:"textContent",value:function textContent(t){var r=[],i={items:r,styles:Object.create(null)};!function walk(t){var i;if(t){var a=null,o=t.name;if("#text"===o)a=t.value;else{if(!XfaText.shouldBuildText(o))return;null!=t&&null!==(i=t.attributes)&&void 0!==i&&i.textContent?a=t.attributes.textContent:t.value&&(a=t.value)}null!==a&&r.push({str:a});if(t.children){var l,c=_createForOfIteratorHelper(t.children);try{for(c.s();!(l=c.n()).done;){walk(l.value)}}catch(t){c.e(t)}finally{c.f()}}}}(t);return i}},{key:"shouldBuildText",value:function shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}]);return XfaText}();r.XfaText=i},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.NodeStandardFontDataFactory=r.NodeFilterFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var a=i(142);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}var o=function fetchData(t){return new Promise((function(r,i){require("fs").readFile(t,(function(t,a){!t&&a?r(new Uint8Array(a)):i(new Error(t))}))}))},l=function(t){_inherits(NodeFilterFactory,t);var r=_createSuper(NodeFilterFactory);function NodeFilterFactory(){_classCallCheck(this,NodeFilterFactory);return r.apply(this,arguments)}return _createClass(NodeFilterFactory)}(a.BaseFilterFactory);r.NodeFilterFactory=l;var c=function(t){_inherits(NodeCanvasFactory,t);var r=_createSuper(NodeCanvasFactory);function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory);return r.apply(this,arguments)}_createClass(NodeCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,r){return require("canvas").createCanvas(t,r)}}]);return NodeCanvasFactory}(a.BaseCanvasFactory);r.NodeCanvasFactory=c;var u=function(t){_inherits(NodeCMapReaderFactory,t);var r=_createSuper(NodeCMapReaderFactory);function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory);return r.apply(this,arguments)}_createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){return o(t).then((function(t){return{cMapData:t,compressionType:r}}))}}]);return NodeCMapReaderFactory}(a.BaseCMapReaderFactory);r.NodeCMapReaderFactory=u;var d=function(t){_inherits(NodeStandardFontDataFactory,t);var r=_createSuper(NodeStandardFontDataFactory);function NodeStandardFontDataFactory(){_classCallCheck(this,NodeStandardFontDataFactory);return r.apply(this,arguments)}_createClass(NodeStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return o(t)}}]);return NodeStandardFontDataFactory}(a.BaseStandardFontDataFactory);r.NodeStandardFontDataFactory=d},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFNodeStream=void 0;var a=i(1),o=i(157);function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var l=require("fs"),c=require("http"),u=require("https"),d=require("url"),h=/^file:\/\/\/[a-zA-Z]:\//;var p=function(){function PDFNodeStream(t){_classCallCheck(this,PDFNodeStream);this.source=t;this.url=function parseUrl(t){var r=d.parse(t);if("file:"===r.protocol||r.host)return r;if(/^[a-z]:[/\\]/i.test(t))return d.parse("file:///".concat(t));r.host||(r.protocol="file:");return r}(t.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol||"capacitor:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new b(this):new g(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var i=this.isFsUrl?new w(this,t,r):new m(this,t,r);this._rangeRequestReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){var r;null===(r=this._fullRequestReader)||void 0===r||r.cancel(t);var i,a=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(a.s();!(i=a.n()).done;){i.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}}}]);return PDFNodeStream}();r.PDFNodeStream=p;var v=function(){function BaseFullReader(t){_classCallCheck(this,BaseFullReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;var r=t.source;this._contentLength=r.length;this._loaded=0;this._filename=null;this._disableRange=r.disableRange||!1;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!r.disableStream;this._isRangeSupported=!r.disableRange;this._readableStream=null;this._readCapability=(0,a.createPromiseCapability)();this._headersCapability=(0,a.createPromiseCapability)()}_createClass(BaseFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._readCapability.promise;case 2:if(!this._done){o.next=4;break}return o.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){o.next=6;break}throw this._storedError;case 6:if(null!==(r=this._readableStream.read())){o.next=10;break}this._readCapability=(0,a.createPromiseCapability)();return o.abrupt("return",this.read());case 10:this._loaded+=r.length;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength});i=new Uint8Array(r).buffer;return o.abrupt("return",{value:i,done:!1});case 14:case"end":return o.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled"));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseFullReader}(),y=function(){function BaseRangeReader(t){_classCallCheck(this,BaseRangeReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,a.createPromiseCapability)();var r=t.source;this._isStreamingSupported=!r.disableStream}_createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r,i;return _regeneratorRuntime().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._readCapability.promise;case 2:if(!this._done){o.next=4;break}return o.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){o.next=6;break}throw this._storedError;case 6:if(null!==(r=this._readableStream.read())){o.next=10;break}this._readCapability=(0,a.createPromiseCapability)();return o.abrupt("return",this.read());case 10:this._loaded+=r.length;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded});i=new Uint8Array(r).buffer;return o.abrupt("return",{value:i,done:!1});case 14:case"end":return o.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseRangeReader}();function createRequestOptions(t,r){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:r}}var g=function(t){_inherits(PDFNodeStreamFullReader,t);var r=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(t){var i;_classCallCheck(this,PDFNodeStreamFullReader);var l=function handleResponse(r){if(404!==r.statusCode){i._headersCapability.resolve();i._setReadableStream(r);var l=function getResponseHeader(t){return i._readableStream.headers[t.toLowerCase()]},c=(0,o.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:t.isHttp,rangeChunkSize:i._rangeChunkSize,disableRange:i._disableRange}),u=c.allowRangeRequests,d=c.suggestedLength;i._isRangeSupported=u;i._contentLength=d||i._contentLength;i._filename=(0,o.extractFilenameFromHeader)(l)}else{var h=new a.MissingPDFException('Missing PDF "'.concat(i._url,'".'));i._storedError=h;i._headersCapability.reject(h)}};(i=r.call(this,t))._request=null;"http:"===i._url.protocol?i._request=c.request(createRequestOptions(i._url,t.httpHeaders),l):i._request=u.request(createRequestOptions(i._url,t.httpHeaders),l);i._request.on("error",(function(t){i._storedError=t;i._headersCapability.reject(t)}));i._request.end();return i}return _createClass(PDFNodeStreamFullReader)}(v),m=function(t){_inherits(PDFNodeStreamRangeReader,t);var r=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(t,i,o){var l;_classCallCheck(this,PDFNodeStreamRangeReader);(l=r.call(this,t))._httpHeaders={};for(var d in t.httpHeaders){var h=t.httpHeaders[d];void 0!==h&&(l._httpHeaders[d]=h)}l._httpHeaders.Range="bytes=".concat(i,"-").concat(o-1);var p=function handleResponse(t){if(404!==t.statusCode)l._setReadableStream(t);else{var r=new a.MissingPDFException('Missing PDF "'.concat(l._url,'".'));l._storedError=r}};l._request=null;"http:"===l._url.protocol?l._request=c.request(createRequestOptions(l._url,l._httpHeaders),p):l._request=u.request(createRequestOptions(l._url,l._httpHeaders),p);l._request.on("error",(function(t){l._storedError=t}));l._request.end();return l}return _createClass(PDFNodeStreamRangeReader)}(y),b=function(t){_inherits(PDFNodeStreamFsFullReader,t);var r=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(t){var i;_classCallCheck(this,PDFNodeStreamFsFullReader);i=r.call(this,t);var o=decodeURIComponent(i._url.path);h.test(i._url.href)&&(o=o.replace(/^\//,""));l.lstat(o,(function(t,r){if(t){"ENOENT"===t.code&&(t=new a.MissingPDFException('Missing PDF "'.concat(o,'".')));i._storedError=t;i._headersCapability.reject(t)}else{i._contentLength=r.size;i._setReadableStream(l.createReadStream(o));i._headersCapability.resolve()}}));return i}return _createClass(PDFNodeStreamFsFullReader)}(v),w=function(t){_inherits(PDFNodeStreamFsRangeReader,t);var r=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(t,i,a){var o;_classCallCheck(this,PDFNodeStreamFsRangeReader);o=r.call(this,t);var c=decodeURIComponent(o._url.path);h.test(o._url.href)&&(c=c.replace(/^\//,""));o._setReadableStream(l.createReadStream(c,{start:i,end:a-1}));return o}return _createClass(PDFNodeStreamFsRangeReader)}(y)},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.createResponseStatusError=function createResponseStatusError(t,r){if(404===t||0===t&&r.startsWith("file:"))return new a.MissingPDFException('Missing PDF "'+r+'".');return new a.UnexpectedResponseException("Unexpected server response (".concat(t,') while retrieving PDF "').concat(r,'".'),t)};r.extractFilenameFromHeader=function extractFilenameFromHeader(t){var r=t("Content-Disposition");if(r){var i=(0,o.getFilenameFromContentDispositionHeader)(r);if(i.includes("%"))try{i=decodeURIComponent(i)}catch(t){}if((0,l.isPdfFile)(i))return i}return null};r.validateRangeRequestCapabilities=function validateRangeRequestCapabilities(t){var r=t.getResponseHeader,i=t.isHttp,a=t.rangeChunkSize,o=t.disableRange,l={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(r("Content-Length"),10);if(!Number.isInteger(c))return l;l.suggestedLength=c;if(c<=2*a)return l;if(o||!i)return l;if("bytes"!==r("Accept-Ranges"))return l;if("identity"!==(r("Content-Encoding")||"identity"))return l;l.allowRangeRequests=!0;return l};r.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var a=i(1),o=i(158),l=i(141)},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){var r=!0,i=toParamRegExp("filename\\*","i").exec(t);if(i){var o=rfc2616unquote(i=i[1]);return fixupEncoding(o=rfc2047decode(o=rfc5987decode(o=unescape(o))))}if(i=function rfc2231getparam(t){var r,i=[],a=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(r=a.exec(t));){var o=_slicedToArray(r,4),l=o[1],c=o[2],u=o[3];if((l=parseInt(l,10))in i){if(0===l)break}else i[l]=[c,u]}for(var d=[],h=0;h<i.length&&h in i;++h){var p=_slicedToArray(i[h],2),v=p[0],y=p[1];y=rfc2616unquote(y);if(v){y=unescape(y);0===h&&(y=rfc5987decode(y))}d.push(y)}return d.join("")}(t)){return fixupEncoding(rfc2047decode(i))}if(i=toParamRegExp("filename","i").exec(t)){var l=rfc2616unquote(i=i[1]);return fixupEncoding(l=rfc2047decode(l))}function toParamRegExp(t,r){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function textdecode(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{var o=new TextDecoder(t,{fatal:!0}),l=(0,a.stringToBytes)(i);i=o.decode(l);r=!1}catch(t){}}return i}function fixupEncoding(t){if(r&&/[\x80-\xff]/.test(t)){t=textdecode("utf-8",t);r&&(t=textdecode("iso-8859-1",t))}return t}function rfc2616unquote(t){if(t.startsWith('"')){for(var r=t.slice(1).split('\\"'),i=0;i<r.length;++i){var a=r[i].indexOf('"');if(-1!==a){r[i]=r[i].slice(0,a);r.length=i+1}r[i]=r[i].replaceAll(/\\(.)/g,"$1")}t=r.join('"')}return t}function rfc5987decode(t){var r=t.indexOf("'");return-1===r?t:textdecode(t.slice(0,r),t.slice(r+1).replace(/^[^']*'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,r,i,a){if("q"===i||"Q"===i)return textdecode(r,a=(a=a.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,r){return String.fromCharCode(parseInt(r,16))})));try{a=atob(a)}catch(t){}return textdecode(r,a)}))}return""};var a=i(1);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFNetworkStream=void 0;var a=i(1),o=i(157);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var l=function(){function NetworkManager(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,NetworkManager);this.url=t;this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&r.httpHeaders||Object.create(null);this.withCredentials=r.withCredentials||!1;this.getXhr=r.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}_createClass(NetworkManager,[{key:"requestRange",value:function requestRange(t,r,i){var a={begin:t,end:r};for(var o in i)a[o]=i[o];return this.request(a)}},{key:"requestFull",value:function requestFull(t){return this.request(t)}},{key:"request",value:function request(t){var r=this.getXhr(),i=this.currXhrId++,a=this.pendingRequests[i]={xhr:r};r.open("GET",this.url);r.withCredentials=this.withCredentials;for(var o in this.httpHeaders){var l=this.httpHeaders[o];void 0!==l&&r.setRequestHeader(o,l)}if(this.isHttp&&"begin"in t&&"end"in t){r.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1));a.expectedStatus=206}else a.expectedStatus=200;r.responseType="arraybuffer";t.onError&&(r.onerror=function(i){t.onError(r.status)});r.onreadystatechange=this.onStateChange.bind(this,i);r.onprogress=this.onProgress.bind(this,i);a.onHeadersReceived=t.onHeadersReceived;a.onDone=t.onDone;a.onError=t.onError;a.onProgress=t.onProgress;r.send(null);return i}},{key:"onProgress",value:function onProgress(t,r){var i,a=this.pendingRequests[t];a&&(null===(i=a.onProgress)||void 0===i||i.call(a,r))}},{key:"onStateChange",value:function onStateChange(t,r){var i=this.pendingRequests[t];if(i){var o=i.xhr;if(o.readyState>=2&&i.onHeadersReceived){i.onHeadersReceived();delete i.onHeadersReceived}if(4===o.readyState&&t in this.pendingRequests){delete this.pendingRequests[t];if(0===o.status&&this.isHttp){var l;null===(l=i.onError)||void 0===l||l.call(i,o.status)}else{var c=o.status||200;if(200===c&&206===i.expectedStatus||c===i.expectedStatus){var u=function getArrayBuffer(t){var r=t.response;return"string"!=typeof r?r:(0,a.stringToBytes)(r).buffer}(o);if(206===c){var d=o.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(h[1],10),chunk:u})}else if(u)i.onDone({begin:0,chunk:u});else{var p;null===(p=i.onError)||void 0===p||p.call(i,o.status)}}else{var v;null===(v=i.onError)||void 0===v||v.call(i,o.status)}}}}}},{key:"getRequestXhr",value:function getRequestXhr(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function isPendingRequest(t){return t in this.pendingRequests}},{key:"abortRequest",value:function abortRequest(t){var r=this.pendingRequests[t].xhr;delete this.pendingRequests[t];r.abort()}}]);return NetworkManager}(),c=function(){function PDFNetworkStream(t){_classCallCheck(this,PDFNetworkStream);this._source=t;this._manager=new l(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials});this._rangeChunkSize=t.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(t){var r=this._rangeRequestReaders.indexOf(t);r>=0&&this._rangeRequestReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new u(this._manager,this._source);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){var i=new d(this._manager,t,r);i.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){var r;null===(r=this._fullRequestReader)||void 0===r||r.cancel(t);var i,a=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(a.s();!(i=a.n()).done;){i.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}}}]);return PDFNetworkStream}();r.PDFNetworkStream=c;var u=function(){function PDFNetworkStreamFullRequestReader(t,r){_classCallCheck(this,PDFNetworkStreamFullRequestReader);this._manager=t;var i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url;this._fullRequestId=t.requestFull(i);this._headersReceivedCapability=(0,a.createPromiseCapability)();this._disableRange=r.disableRange||!1;this._contentLength=r.length;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!1;this._isRangeSupported=!1;this._cachedChunks=[];this._requests=[];this._done=!1;this._storedError=void 0;this._filename=null;this.onProgress=null}_createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var t=this._fullRequestId,r=this._manager.getRequestXhr(t),i=function getResponseHeader(t){return r.getResponseHeader(t)},a=(0,o.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),l=a.allowRangeRequests,c=a.suggestedLength;l&&(this._isRangeSupported=!0);this._contentLength=c||this._contentLength;this._filename=(0,o.extractFilenameFromHeader)(i);this._isRangeSupported&&this._manager.abortRequest(t);this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function _onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);this._done=!0;if(!(this._cachedChunks.length>0)){var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0}}},{key:"_onError",value:function _onError(t){this._storedError=(0,o.createResponseStatusError)(t,this._url);this._headersReceivedCapability.reject(this._storedError);var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.reject(this._storedError)}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._cachedChunks.length=0}},{key:"_onProgress",value:function _onProgress(t){var r;null===(r=this.onProgress)||void 0===r||r.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!this._storedError){i.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){i.next=5;break}t=this._cachedChunks.shift();return i.abrupt("return",{value:t,done:!1});case 5:if(!this._done){i.next=7;break}return i.abrupt("return",{value:void 0,done:!0});case 7:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 10:case"end":return i.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;this._headersReceivedCapability.reject(t);var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId);this._fullRequestReader=null}}]);var t;return PDFNetworkStreamFullRequestReader}(),d=function(){function PDFNetworkStreamRangeRequestReader(t,r,i){_classCallCheck(this,PDFNetworkStreamRangeRequestReader);this._manager=t;var a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url;this._requestId=t.requestRange(r,i,a);this._requests=[];this._queuedChunk=null;this._done=!1;this._storedError=void 0;this.onProgress=null;this.onClosed=null}_createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function _onDone(t){var r=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:r,done:!1})}else this._queuedChunk=r;this._done=!0;var i,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(i=a.n()).done;){i.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0;this._close()}},{key:"_onError",value:function _onError(t){this._storedError=(0,o.createResponseStatusError)(t,this._url);var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.reject(this._storedError)}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._queuedChunk=null}},{key:"_onProgress",value:function _onProgress(t){if(!this.isStreamingSupported){var r;null===(r=this.onProgress)||void 0===r||r.call(this,{loaded:t.loaded})}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(!this._storedError){i.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){i.next=6;break}t=this._queuedChunk;this._queuedChunk=null;return i.abrupt("return",{value:t,done:!1});case 6:if(!this._done){i.next=8;break}return i.abrupt("return",{value:void 0,done:!0});case 8:r=(0,a.createPromiseCapability)();this._requests.push(r);return i.abrupt("return",r.promise);case 11:case"end":return i.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(r=i.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId);this._close()}}]);var t;return PDFNetworkStreamRangeRequestReader}()},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFFetchStream=void 0;var a=i(1),o=i(157);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function createFetchOptions(t,r,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function createHeaders(t){var r=new Headers;for(var i in t){var a=t[i];void 0!==a&&r.append(i,a)}return r}function getArrayBuffer(t){if(t instanceof Uint8Array)return t.buffer;if(t instanceof ArrayBuffer)return t;(0,a.warn)("getArrayBuffer - unexpected data format: ".concat(t));return new Uint8Array(t).buffer}var l=function(){function PDFFetchStream(t){_classCallCheck(this,PDFFetchStream);this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new c(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var i=new u(this,t,r);this._rangeRequestReaders.push(i);return i}},{key:"cancelAllRequests",value:function cancelAllRequests(t){var r;null===(r=this._fullRequestReader)||void 0===r||r.cancel(t);var i,a=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(a.s();!(i=a.n()).done;){i.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}}}]);return PDFFetchStream}();r.PDFFetchStream=l;var c=function(){function PDFFetchStreamReader(t){var r=this;_classCallCheck(this,PDFFetchStreamReader);this._stream=t;this._reader=null;this._loaded=0;this._filename=null;var i=t.source;this._withCredentials=i.withCredentials||!1;this._contentLength=i.length;this._headersCapability=(0,a.createPromiseCapability)();this._disableRange=i.disableRange||!1;this._rangeChunkSize=i.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._abortController=new AbortController;this._isStreamingSupported=!i.disableStream;this._isRangeSupported=!i.disableRange;this._headers=createHeaders(this._stream.httpHeaders);var l=i.url;fetch(l,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,l);r._reader=t.body.getReader();r._headersCapability.resolve();var i=function getResponseHeader(r){return t.headers.get(r)},c=(0,o.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),u=c.allowRangeRequests,d=c.suggestedLength;r._isRangeSupported=u;r._contentLength=d||r._contentLength;r._filename=(0,o.extractFilenameFromHeader)(i);!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new a.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject);this.onProgress=null}_createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,a;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._headersCapability.promise;case 2:o.next=4;return this._reader.read();case 4:r=o.sent;i=r.value;if(!(a=r.done)){o.next=9;break}return o.abrupt("return",{value:i,done:a});case 9:this._loaded+=i.byteLength;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength});return o.abrupt("return",{value:getArrayBuffer(i),done:!1});case 12:case"end":return o.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){var r;null===(r=this._reader)||void 0===r||r.cancel(t);this._abortController.abort()}}]);var t;return PDFFetchStreamReader}(),u=function(){function PDFFetchStreamRangeReader(t,r,i){var l=this;_classCallCheck(this,PDFFetchStreamRangeReader);this._stream=t;this._reader=null;this._loaded=0;var c=t.source;this._withCredentials=c.withCredentials||!1;this._readCapability=(0,a.createPromiseCapability)();this._isStreamingSupported=!c.disableStream;this._abortController=new AbortController;this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range","bytes=".concat(r,"-").concat(i-1));var u=c.url;fetch(u,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,u);l._readCapability.resolve();l._reader=t.body.getReader()})).catch(this._readCapability.reject);this.onProgress=null}_createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r,i,a;return _regeneratorRuntime().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._readCapability.promise;case 2:o.next=4;return this._reader.read();case 4:r=o.sent;i=r.value;if(!(a=r.done)){o.next=9;break}return o.abrupt("return",{value:i,done:a});case 9:this._loaded+=i.byteLength;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded});return o.abrupt("return",{value:getArrayBuffer(i),done:!1});case 12:case"end":return o.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){var r;null===(r=this._reader)||void 0===r||r.cancel(t);this._abortController.abort()}}]);var t;return PDFFetchStreamRangeReader}()},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.TextLayerRenderTask=void 0;r.renderTextLayer=function renderTextLayer(t){if(!t.textContentSource&&(t.textContent||t.textContentStream)){(0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead.");t.textContentSource=t.textContent||t.textContentStream}var r=t.container,i=t.viewport,a=getComputedStyle(r),l=a.getPropertyValue("visibility"),c=parseFloat(a.getPropertyValue("--scale-factor"));"visible"===l&&(!c||Math.abs(c-i.scale)>1e-15)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");var u=new d(t);u._render();return u};r.updateTextLayer=function updateTextLayer(t){var r=t.container,i=t.viewport,a=t.textDivs,l=t.textDivProperties,c=t.isOffscreenCanvasSupported,u=t.mustRotate,d=void 0===u||u,h=t.mustRescale,p=void 0===h||h;d&&(0,o.setLayerDimensions)(r,{rotation:i.rotation});if(p){var v,y=getCtx(0,c),g={prevFontSize:null,prevFontFamily:null,div:null,scale:i.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y},m=_createForOfIteratorHelper(a);try{for(m.s();!(v=m.n()).done;){var b=v.value;g.properties=l.get(b);g.div=b;layout(g)}}catch(t){m.e(t)}finally{m.f()}}};var a=i(1),o=i(141);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var l=30,c=.8,u=new Map;function getCtx(t,r){var i,o=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0,alpha:!1}:{alpha:!1};if(r&&a.FeatureTest.isOffscreenCanvasSupported)i=new OffscreenCanvas(t,t).getContext("2d",o);else{var l=document.createElement("canvas");l.width=l.height=t;i=l.getContext("2d",o)}return i}function appendText(t,r,i){var o=document.createElement("span"),d={angle:0,canvasWidth:0,hasText:""!==r.str,hasEOL:r.hasEOL,fontSize:0};t._textDivs.push(o);var h=a.Util.transform(t._transform,r.transform),p=Math.atan2(h[1],h[0]),v=i[r.fontName];v.vertical&&(p+=Math.PI/2);var y,g,m=Math.hypot(h[2],h[3]),b=m*function getAscent(t,r){var i=u.get(t);if(i)return i;var a=getCtx(l,r);a.font="".concat(l,"px ").concat(t);var o=a.measureText(""),d=null==o?void 0:o.fontBoundingBoxAscent,h=Math.abs(null==o?void 0:o.fontBoundingBoxDescent);if(d){var p=d/(d+h);u.set(t,p);a.canvas.width=a.canvas.height=0;return p}a.strokeStyle="red";a.clearRect(0,0,l,l);a.strokeText("g",0,0);var v=a.getImageData(0,0,l,l).data;h=0;for(var y=v.length-1-3;y>=0;y-=4)if(v[y]>0){h=Math.ceil(y/4/l);break}a.clearRect(0,0,l,l);a.strokeText("A",0,l);d=0;for(var g=0,m=(v=a.getImageData(0,0,l,l).data).length;g<m;g+=4)if(v[g]>0){d=l-Math.floor(g/4/l);break}a.canvas.width=a.canvas.height=0;if(d){var b=d/(d+h);u.set(t,b);return b}u.set(t,c);return c}(v.fontFamily,t._isOffscreenCanvasSupported);if(0===p){y=h[4];g=h[5]-b}else{y=h[4]+b*Math.sin(p);g=h[5]-b*Math.cos(p)}var w="calc(var(--scale-factor)*",P=o.style;if(t._container===t._rootContainer){P.left="".concat((100*y/t._pageWidth).toFixed(2),"%");P.top="".concat((100*g/t._pageHeight).toFixed(2),"%")}else{P.left="".concat(w).concat(y.toFixed(2),"px)");P.top="".concat(w).concat(g.toFixed(2),"px)")}P.fontSize="".concat(w).concat(m.toFixed(2),"px)");P.fontFamily=v.fontFamily;d.fontSize=m;o.setAttribute("role","presentation");o.textContent=r.str;o.dir=r.dir;t._fontInspectorEnabled&&(o.dataset.fontName=r.fontName);0!==p&&(d.angle=p*(180/Math.PI));var S=!1;if(r.str.length>1)S=!0;else if(" "!==r.str&&r.transform[0]!==r.transform[3]){var k=Math.abs(r.transform[0]),x=Math.abs(r.transform[3]);k!==x&&Math.max(k,x)/Math.min(k,x)>1.5&&(S=!0)}S&&(d.canvasWidth=v.vertical?r.height:r.width);t._textDivProperties.set(o,d);t._isReadableStream&&t._layoutText(o)}function layout(t){var r=t.div,i=t.scale,a=t.properties,o=t.ctx,l=t.prevFontSize,c=t.prevFontFamily,u=r.style,d="";if(0!==a.canvasWidth&&a.hasText){var h=u.fontFamily,p=a.canvasWidth,v=a.fontSize;if(l!==v||c!==h){o.font="".concat(v*i,"px ").concat(h);t.prevFontSize=v;t.prevFontFamily=h}try{var y=o.measureText(r.textContent).width;y>0&&(d="scaleX(".concat(p*i/y,")"))}catch(t){}}0!==a.angle&&(d="rotate(".concat(a.angle,"deg) ").concat(d));d.length>0&&(u.transform=d)}var d=function(){function TextLayerRenderTask(t){var r,i=this,l=t.textContentSource,c=t.container,u=t.viewport,d=t.textDivs,h=t.textDivProperties,p=t.textContentItemsStr,v=t.isOffscreenCanvasSupported;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextLayerRenderTask);this._textContentSource=l;this._isReadableStream=l instanceof ReadableStream;this._container=this._rootContainer=c;this._textDivs=d||[];this._textContentItemsStr=p||[];this._isOffscreenCanvasSupported=v;this._fontInspectorEnabled=!(null===(r=globalThis.FontInspector)||void 0===r||!r.enabled);this._reader=null;this._textDivProperties=h||new WeakMap;this._canceled=!1;this._capability=(0,a.createPromiseCapability)();this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:u.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx(0,v)};var y=u.rawDims,g=y.pageWidth,m=y.pageHeight,b=y.pageX,w=y.pageY;this._transform=[1,0,0,-1,-b,w+m];this._pageWidth=g;this._pageHeight=m;(0,o.setLayerDimensions)(c,u);this._capability.promise.finally((function(){i._layoutTextParams=null})).catch((function(){}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextLayerRenderTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"cancel",value:function cancel(){this._canceled=!0;if(this._reader){this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch((function(){}));this._reader=null}this._capability.reject(new a.AbortException("TextLayer task cancelled."))}},{key:"_processItems",value:function _processItems(t,r){var i,a=_createForOfIteratorHelper(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(void 0!==o.str){this._textContentItemsStr.push(o.str);appendText(this,o,r)}else if("beginMarkedContentProps"===o.type||"beginMarkedContent"===o.type){var l=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");null!==o.id&&this._container.setAttribute("id","".concat(o.id));l.append(this._container)}else"endMarkedContent"===o.type&&(this._container=this._container.parentNode)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_layoutText",value:function _layoutText(t){var r=this._layoutTextParams.properties=this._textDivProperties.get(t);this._layoutTextParams.div=t;layout(this._layoutTextParams);r.hasText&&this._container.append(t);if(r.hasEOL){var i=document.createElement("br");i.setAttribute("role","presentation");this._container.append(i)}}},{key:"_render",value:function _render(){var t=this,r=(0,a.createPromiseCapability)(),i=Object.create(null);if(this._isReadableStream){this._reader=this._textContentSource.getReader();!function pump(){t._reader.read().then((function(a){var o=a.value;if(a.done)r.resolve();else{Object.assign(i,o.styles);t._processItems(o.items,i);pump()}}),r.reject)}()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');var o=this._textContentSource,l=o.items,c=o.styles;this._processItems(l,c);r.resolve()}r.promise.then((function(){i=null;!function render(t){if(!t._canceled){var r=t._textDivs,i=t._capability;if(r.length>1e5)i.resolve();else{if(!t._isReadableStream){var a,o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){var l=a.value;t._layoutText(l)}}catch(t){o.e(t)}finally{o.f()}}i.resolve()}}}(t)}),this._capability.reject)}}]);return TextLayerRenderTask}();r.TextLayerRenderTask=d},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditorLayer=void 0;var a=i(1),o=i(140),l=i(163),c=i(164),u=i(141);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakSet,P=new WeakSet,S=new WeakSet,k=new WeakSet,x=function(){function AnnotationEditorLayer(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditorLayer);_classPrivateMethodInitSpec(this,k);_classPrivateMethodInitSpec(this,S);_classPrivateMethodInitSpec(this,P);_classPrivateMethodInitSpec(this,w);_classPrivateFieldInitSpec(this,d,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,h,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,p,{writable:!0,value:this.pointerup.bind(this)});_classPrivateFieldInitSpec(this,v,{writable:!0,value:this.pointerdown.bind(this)});_classPrivateFieldInitSpec(this,y,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,g,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,m,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,b,{writable:!0,value:void 0});if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;l.FreeTextEditor.initialize(t.l10n);c.InkEditor.initialize(t.l10n)}t.uiManager.registerEditorTypes([l.FreeTextEditor,c.InkEditor]);_classPrivateFieldSet(this,b,t.uiManager);this.pageIndex=t.pageIndex;this.div=t.div;_classPrivateFieldSet(this,d,t.accessibilityManager);_classPrivateFieldGet(this,b).addLayer(this)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditorLayer,[{key:"isEmpty",get:function get(){return 0===_classPrivateFieldGet(this,y).size}},{key:"updateToolbar",value:function updateToolbar(t){_classPrivateFieldGet(this,b).updateToolbar(t)}},{key:"updateMode",value:function updateMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_classPrivateFieldGet(this,b).getMode();_classPrivateMethodGet(this,k,_cleanup2).call(this);if(t===a.AnnotationEditorType.INK){this.addInkEditorIfNeeded(!1);this.disableClick()}else this.enableClick();_classPrivateFieldGet(this,b).unselectAll();if(t!==a.AnnotationEditorType.NONE){this.div.classList.toggle("freeTextEditing",t===a.AnnotationEditorType.FREETEXT);this.div.classList.toggle("inkEditing",t===a.AnnotationEditorType.INK);this.div.hidden=!1}}},{key:"addInkEditorIfNeeded",value:function addInkEditorIfNeeded(t){if(t||_classPrivateFieldGet(this,b).getMode()===a.AnnotationEditorType.INK){if(!t){var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,y).values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.isEmpty()){o.setInBackground();return}}}catch(t){i.e(t)}finally{i.f()}}_classPrivateMethodGet(this,S,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function setEditingState(t){_classPrivateFieldGet(this,b).setEditingState(t)}},{key:"addCommands",value:function addCommands(t){_classPrivateFieldGet(this,b).addCommands(t)}},{key:"enable",value:function enable(){this.div.style.pointerEvents="auto";var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,y).values());try{for(r.s();!(t=r.n()).done;){t.value.enableEditing()}}catch(t){r.e(t)}finally{r.f()}}},{key:"disable",value:function disable(){this.div.style.pointerEvents="none";var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,y).values());try{for(r.s();!(t=r.n()).done;){t.value.disableEditing()}}catch(t){r.e(t)}finally{r.f()}_classPrivateMethodGet(this,k,_cleanup2).call(this);this.isEmpty&&(this.div.hidden=!0)}},{key:"setActiveEditor",value:function setActiveEditor(t){_classPrivateFieldGet(this,b).getActive()!==t&&_classPrivateFieldGet(this,b).setActiveEditor(t)}},{key:"enableClick",value:function enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,v));this.div.addEventListener("pointerup",_classPrivateFieldGet(this,p))}},{key:"disableClick",value:function disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,v));this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,p))}},{key:"attach",value:function attach(t){_classPrivateFieldGet(this,y).set(t.id,t)}},{key:"detach",value:function detach(t){var r;_classPrivateFieldGet(this,y).delete(t.id);null===(r=_classPrivateFieldGet(this,d))||void 0===r||r.removePointerInTextLayer(t.contentDiv)}},{key:"remove",value:function remove(t){var r=this;_classPrivateFieldGet(this,b).removeEditor(t);this.detach(t);t.div.style.display="none";setTimeout((function(){t.div.style.display="";t.div.remove();t.isAttachedToDOM=!1;document.activeElement===document.body&&_classPrivateFieldGet(r,b).focusMainContainer()}),0);_classPrivateFieldGet(this,m)||this.addInkEditorIfNeeded(!1)}},{key:"add",value:function add(t){_classPrivateMethodGet(this,w,_changeParent2).call(this,t);_classPrivateFieldGet(this,b).addEditor(t);this.attach(t);if(!t.isAttachedToDOM){var r=t.render();this.div.append(r);t.isAttachedToDOM=!0}this.moveEditorInDOM(t);t.onceAdded();_classPrivateFieldGet(this,b).addToAnnotationStorage(t)}},{key:"moveEditorInDOM",value:function moveEditorInDOM(t){var r;null===(r=_classPrivateFieldGet(this,d))||void 0===r||r.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}},{key:"addOrRebuild",value:function addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}},{key:"addANewEditor",value:function addANewEditor(t){var r=this;this.addCommands({cmd:function cmd(){r.addOrRebuild(t)},undo:function undo(){t.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function addUndoableEditor(t){var r=this;this.addCommands({cmd:function cmd(){r.addOrRebuild(t)},undo:function undo(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function getNextId(){return _classPrivateFieldGet(this,b).getId()}},{key:"deserialize",value:function deserialize(t){switch(t.annotationType){case a.AnnotationEditorType.FREETEXT:return l.FreeTextEditor.deserialize(t,this,_classPrivateFieldGet(this,b));case a.AnnotationEditorType.INK:return c.InkEditor.deserialize(t,this,_classPrivateFieldGet(this,b))}return null}},{key:"setSelected",value:function setSelected(t){_classPrivateFieldGet(this,b).setSelected(t)}},{key:"toggleSelected",value:function toggleSelected(t){_classPrivateFieldGet(this,b).toggleSelected(t)}},{key:"isSelected",value:function isSelected(t){return _classPrivateFieldGet(this,b).isSelected(t)}},{key:"unselect",value:function unselect(t){_classPrivateFieldGet(this,b).unselect(t)}},{key:"pointerup",value:function pointerup(t){var r=a.FeatureTest.platform.isMac;if(!(0!==t.button||t.ctrlKey&&r)&&t.target===this.div&&_classPrivateFieldGet(this,g)){_classPrivateFieldSet(this,g,!1);_classPrivateFieldGet(this,h)?_classPrivateMethodGet(this,S,_createAndAddNewEditor2).call(this,t):_classPrivateFieldSet(this,h,!0)}}},{key:"pointerdown",value:function pointerdown(t){var r=a.FeatureTest.platform.isMac;if(!(0!==t.button||t.ctrlKey&&r)&&t.target===this.div){_classPrivateFieldSet(this,g,!0);var i=_classPrivateFieldGet(this,b).getActive();_classPrivateFieldSet(this,h,!i||i.isEmpty())}}},{key:"drop",value:function drop(t){var r=t.dataTransfer.getData("text/plain"),i=_classPrivateFieldGet(this,b).getEditor(r);if(i){t.preventDefault();t.dataTransfer.dropEffect="move";_classPrivateMethodGet(this,w,_changeParent2).call(this,i);var a=this.div.getBoundingClientRect(),o=t.clientX-a.x,l=t.clientY-a.y;i.translate(o-i.startX,l-i.startY);this.moveEditorInDOM(i);i.div.focus()}}},{key:"dragover",value:function dragover(t){t.preventDefault()}},{key:"destroy",value:function destroy(){var t;(null===(t=_classPrivateFieldGet(this,b).getActive())||void 0===t?void 0:t.parent)===this&&_classPrivateFieldGet(this,b).setActiveEditor(null);var r,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,y).values());try{for(i.s();!(r=i.n()).done;){var a,o=r.value;null===(a=_classPrivateFieldGet(this,d))||void 0===a||a.removePointerInTextLayer(o.contentDiv);o.setParent(null);o.isAttachedToDOM=!1;o.div.remove()}}catch(t){i.e(t)}finally{i.f()}this.div=null;_classPrivateFieldGet(this,y).clear();_classPrivateFieldGet(this,b).removeLayer(this)}},{key:"render",value:function render(t){var r=t.viewport;this.viewport=r;(0,u.setLayerDimensions)(this.div,r);(0,o.bindEvents)(this,this.div,["dragover","drop"]);var i,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,b).getEditors(this.pageIndex));try{for(a.s();!(i=a.n()).done;){var l=i.value;this.add(l)}}catch(t){a.e(t)}finally{a.f()}this.updateMode()}},{key:"update",value:function update(t){var r=t.viewport;_classPrivateFieldGet(this,b).commitOrRemove();this.viewport=r;(0,u.setLayerDimensions)(this.div,{rotation:r.rotation});this.updateMode()}},{key:"pageDimensions",get:function get(){var t=this.viewport.rawDims;return[t.pageWidth,t.pageHeight]}}]);return AnnotationEditorLayer}();r.AnnotationEditorLayer=x;function _changeParent2(t){var r;if(t.parent!==this){this.attach(t);null===(r=t.parent)||void 0===r||r.detach(t);t.setParent(this);if(t.div&&t.isAttachedToDOM){t.div.remove();this.div.append(t.div)}}}function _createNewEditor2(t){switch(_classPrivateFieldGet(this,b).getMode()){case a.AnnotationEditorType.FREETEXT:return new l.FreeTextEditor(t);case a.AnnotationEditorType.INK:return new c.InkEditor(t)}return null}function _createAndAddNewEditor2(t){var r=this.getNextId(),i=_classPrivateMethodGet(this,P,_createNewEditor2).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:_classPrivateFieldGet(this,b)});i&&this.add(i);return i}function _cleanup2(){_classPrivateFieldSet(this,m,!0);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,y).values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isEmpty()&&i.remove()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldSet(this,m,!1)}!function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}(x,"_initialized",!1)},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.FreeTextEditor=void 0;var a=i(1),o=i(140),l=i(139);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakSet,w=new WeakSet,P=new WeakSet,S=new WeakSet,k=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(FreeTextEditor,t);var r=_createSuper(FreeTextEditor);function FreeTextEditor(t){var i;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FreeTextEditor);_classPrivateMethodInitSpec(_assertThisInitialized(i=r.call(this,_objectSpread(_objectSpread({},t),{},{name:"freeTextEditor"}))),S);_classPrivateMethodInitSpec(_assertThisInitialized(i),P);_classPrivateMethodInitSpec(_assertThisInitialized(i),w);_classPrivateMethodInitSpec(_assertThisInitialized(i),b);_classPrivateFieldInitSpec(_assertThisInitialized(i),c,{writable:!0,value:i.editorDivBlur.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),u,{writable:!0,value:i.editorDivFocus.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),d,{writable:!0,value:i.editorDivInput.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),h,{writable:!0,value:i.editorDivKeydown.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),p,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(i),v,{writable:!0,value:""});_classPrivateFieldInitSpec(_assertThisInitialized(i),y,{writable:!0,value:"".concat(i.id,"-editor")});_classPrivateFieldInitSpec(_assertThisInitialized(i),g,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(i),m,{writable:!0,value:void 0});_classPrivateFieldSet(_assertThisInitialized(i),p,t.color||FreeTextEditor._defaultColor||l.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(_assertThisInitialized(i),m,t.fontSize||FreeTextEditor._defaultFontSize);return i}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(FreeTextEditor,[{key:"updateParams",value:function updateParams(t,r){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,b,_updateFontSize2).call(this,r);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,w,_updateColor2).call(this,r)}}},{key:"propertiesToUpdate",get:function get(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,m)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,p)]]}},{key:"getInitialTranslation",value:function getInitialTranslation(){var t=this.parentScale;return[-FreeTextEditor._internalPadding*t,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(this,m))*t]}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(FreeTextEditor.prototype),"rebuild",this).call(this);null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function enableEditMode(){if(!this.isInEditMode()){this.parent.setEditingState(!1);this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT);_get(_getPrototypeOf(FreeTextEditor.prototype),"enableEditMode",this).call(this);this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=!0;this.div.draggable=!1;this.div.removeAttribute("aria-activedescendant");this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,h));this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,u));this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,c));this.editorDiv.addEventListener("input",_classPrivateFieldGet(this,d))}}},{key:"disableEditMode",value:function disableEditMode(){if(this.isInEditMode()){this.parent.setEditingState(!0);_get(_getPrototypeOf(FreeTextEditor.prototype),"disableEditMode",this).call(this);this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=!1;this.div.setAttribute("aria-activedescendant",_classPrivateFieldGet(this,y));this.div.draggable=!0;this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,h));this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,u));this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,c));this.editorDiv.removeEventListener("input",_classPrivateFieldGet(this,d));this.div.focus({preventScroll:!0});this.isEditing=!1;this.parent.div.classList.add("freeTextEditing")}}},{key:"focusin",value:function focusin(t){_get(_getPrototypeOf(FreeTextEditor.prototype),"focusin",this).call(this,t);t.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function onceAdded(){if(!this.width){this.enableEditMode();this.editorDiv.focus()}}},{key:"isEmpty",value:function isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function remove(){this.isEditing=!1;this.parent.setEditingState(!0);this.parent.div.classList.add("freeTextEditing");_get(_getPrototypeOf(FreeTextEditor.prototype),"remove",this).call(this)}},{key:"commit",value:function commit(){if(this.isInEditMode()){_get(_getPrototypeOf(FreeTextEditor.prototype),"commit",this).call(this);if(!_classPrivateFieldGet(this,g)){_classPrivateFieldSet(this,g,!0);this.parent.addUndoableEditor(this)}this.disableEditMode();_classPrivateFieldSet(this,v,_classPrivateMethodGet(this,P,_extractText2).call(this).trimEnd());_classPrivateMethodGet(this,S,_setEditorDimensions2).call(this)}}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return this.isInEditMode()}},{key:"dblclick",value:function dblclick(t){this.enableEditMode();this.editorDiv.focus()}},{key:"keydown",value:function keydown(t){if(t.target===this.div&&"Enter"===t.key){this.enableEditMode();this.editorDiv.focus()}}},{key:"editorDivKeydown",value:function editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(this,t)}},{key:"editorDivFocus",value:function editorDivFocus(t){this.isEditing=!0}},{key:"editorDivBlur",value:function editorDivBlur(t){this.isEditing=!1}},{key:"editorDivInput",value:function editorDivInput(t){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}},{key:"disableEditing",value:function disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function render(){var t,r,i=this;if(this.div)return this.div;if(this.width){t=this.x;r=this.y}_get(_getPrototypeOf(FreeTextEditor.prototype),"render",this).call(this);this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",_classPrivateFieldGet(this,y));this.enableEditing();FreeTextEditor._l10nPromise.get("editor_free_text2_aria_label").then((function(t){var r;return null===(r=i.editorDiv)||void 0===r?void 0:r.setAttribute("aria-label",t)}));FreeTextEditor._l10nPromise.get("free_text2_default_content").then((function(t){var r;return null===(r=i.editorDiv)||void 0===r?void 0:r.setAttribute("default-content",t)}));this.editorDiv.contentEditable=!0;var a=this.editorDiv.style;a.fontSize="calc(".concat(_classPrivateFieldGet(this,m),"px * var(--scale-factor))");a.color=_classPrivateFieldGet(this,p);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);(0,o.bindEvents)(this,this.div,["dblclick","keydown"]);if(this.width){var l=_slicedToArray(this.parentDimensions,2),c=l[0],u=l[1];this.setAt(t*c,r*u,this.width*c,this.height*u);var d,h=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).split("\n"));try{for(h.s();!(d=h.n()).done;){var g=d.value,b=document.createElement("div");b.append(g?document.createTextNode(g):document.createElement("br"));this.editorDiv.append(b)}}catch(t){h.e(t)}finally{h.f()}this.div.draggable=!0;this.editorDiv.contentEditable=!1}else{this.div.draggable=!1;this.editorDiv.contentEditable=!0}return this.div}},{key:"contentDiv",get:function get(){return this.editorDiv}},{key:"serialize",value:function serialize(){if(this.isEmpty())return null;var t=FreeTextEditor._internalPadding*this.parentScale,r=this.getRect(t,t),i=l.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(this,p));return{annotationType:a.AnnotationEditorType.FREETEXT,color:i,fontSize:_classPrivateFieldGet(this,m),value:_classPrivateFieldGet(this,v),pageIndex:this.pageIndex,rect:r,rotation:this.rotation}}}],[{key:"initialize",value:function initialize(t){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map((function(r){return[r,t.get(r)]})));var r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function updateDefaultParams(t,r){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=r;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=r}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||l.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function deserialize(t,r,i){var o=_get(_getPrototypeOf(FreeTextEditor),"deserialize",this).call(this,t,r,i);_classPrivateFieldSet(o,m,t.fontSize);_classPrivateFieldSet(o,p,a.Util.makeHexColor.apply(a.Util,_toConsumableArray(t.color)));_classPrivateFieldSet(o,v,t.value);return o}}]);return FreeTextEditor}(l.AnnotationEditor);r.FreeTextEditor=k;function _updateFontSize2(t){var r=this,i=function setFontsize(t){r.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))");r.translate(0,-(t-_classPrivateFieldGet(r,m))*r.parentScale);_classPrivateFieldSet(r,m,t);_classPrivateMethodGet(r,S,_setEditorDimensions2).call(r)},o=_classPrivateFieldGet(this,m);this.addCommands({cmd:function cmd(){i(t)},undo:function undo(){i(o)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(t){var r=this,i=_classPrivateFieldGet(this,p);this.addCommands({cmd:function cmd(){_classPrivateFieldSet(r,p,r.editorDiv.style.color=t)},undo:function undo(){_classPrivateFieldSet(r,p,r.editorDiv.style.color=i)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _extractText2(){var t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;var r,i=[],a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(o.innerText.replace(/\r\n?|\n/,""))}}catch(t){a.e(t)}finally{a.f()}return i.join("\n")}function _setEditorDimensions2(){var t,r=_slicedToArray(this.parentDimensions,2),i=r[0],a=r[1];if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{var o=this.currentLayer,l=this.div,c=l.style.display;l.style.display="hidden";o.div.append(this.div);t=l.getBoundingClientRect();l.remove();l.style.display=c}this.width=t.width/i;this.height=t.height/a}_defineProperty(k,"_freeTextDefaultContent","");_defineProperty(k,"_l10nPromise",void 0);_defineProperty(k,"_internalPadding",0);_defineProperty(k,"_defaultColor",null);_defineProperty(k,"_defaultFontSize",10);_defineProperty(k,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],k.prototype.commitOrRemove]]));_defineProperty(k,"_type","freetext")},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.InkEditor=void 0;Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function get(){return l.fitCurve}});var a=i(1),o=i(139),l=i(165),c=i(140);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var u=16,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,P=new WeakMap,S=new WeakMap,k=new WeakMap,x=new WeakMap,A=new WeakMap,E=new WeakSet,T=new WeakSet,C=new WeakSet,I=new WeakSet,O=new WeakSet,M=new WeakSet,L=new WeakSet,R=new WeakSet,D=new WeakSet,G=new WeakSet,j=new WeakSet,N=new WeakSet,B=new WeakSet,V=new WeakSet,W=new WeakSet,H=new WeakSet,U=new WeakSet,z=new WeakSet,X=new WeakSet,K=new WeakSet,Y=new WeakSet,$=new WeakSet,Q=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(InkEditor,t);var r=_createSuper(InkEditor);function InkEditor(t){var i;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,InkEditor);_classPrivateMethodInitSpec(_assertThisInitialized(i=r.call(this,_objectSpread(_objectSpread({},t),{},{name:"inkEditor"}))),$);_classPrivateMethodInitSpec(_assertThisInitialized(i),Y);_classPrivateMethodInitSpec(_assertThisInitialized(i),K);_classPrivateMethodInitSpec(_assertThisInitialized(i),X);_classPrivateMethodInitSpec(_assertThisInitialized(i),z);_classPrivateMethodInitSpec(_assertThisInitialized(i),U);_classPrivateMethodInitSpec(_assertThisInitialized(i),H);_classPrivateMethodInitSpec(_assertThisInitialized(i),W);_classPrivateMethodInitSpec(_assertThisInitialized(i),V);_classPrivateMethodInitSpec(_assertThisInitialized(i),B);_classPrivateMethodInitSpec(_assertThisInitialized(i),N);_classPrivateMethodInitSpec(_assertThisInitialized(i),j);_classPrivateMethodInitSpec(_assertThisInitialized(i),G);_classPrivateMethodInitSpec(_assertThisInitialized(i),D);_classPrivateMethodInitSpec(_assertThisInitialized(i),R);_classPrivateMethodInitSpec(_assertThisInitialized(i),L);_classPrivateMethodInitSpec(_assertThisInitialized(i),M);_classPrivateMethodInitSpec(_assertThisInitialized(i),O);_classPrivateMethodInitSpec(_assertThisInitialized(i),I);_classPrivateMethodInitSpec(_assertThisInitialized(i),C);_classPrivateMethodInitSpec(_assertThisInitialized(i),T);_classPrivateMethodInitSpec(_assertThisInitialized(i),E);_classPrivateFieldInitSpec(_assertThisInitialized(i),d,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),h,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),p,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),v,{writable:!0,value:i.canvasPointermove.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),y,{writable:!0,value:i.canvasPointerleave.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),g,{writable:!0,value:i.canvasPointerup.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),m,{writable:!0,value:i.canvasPointerdown.bind(_assertThisInitialized(i))});_classPrivateFieldInitSpec(_assertThisInitialized(i),b,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(i),w,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(i),P,{writable:!0,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(i),S,{writable:!0,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(i),k,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),x,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(i),A,{writable:!0,value:null});i.color=t.color||null;i.thickness=t.thickness||null;i.opacity=t.opacity||null;i.paths=[];i.bezierPath2D=[];i.currentPath=[];i.scaleFactor=1;i.translationX=i.translationY=0;i.x=0;i.y=0;return i}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(InkEditor,[{key:"updateParams",value:function updateParams(t,r){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,E,_updateThickness2).call(this,r);break;case a.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,T,_updateColor2).call(this,r);break;case a.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,C,_updateOpacity2).call(this,r)}}},{key:"propertiesToUpdate",get:function get(){var t;return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(t=this.opacity)&&void 0!==t?t:InkEditor._defaultOpacity))]]}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(InkEditor.prototype),"rebuild",this).call(this);if(null!==this.div){if(!this.canvas){_classPrivateMethodGet(this,j,_createCanvas2).call(this);_classPrivateMethodGet(this,N,_createObserver2).call(this)}if(!this.isAttachedToDOM){this.parent.add(this);_classPrivateMethodGet(this,B,_setCanvasDims2).call(this)}_classPrivateMethodGet(this,Y,_fitToContent2).call(this)}}},{key:"remove",value:function remove(){if(null!==this.canvas){this.isEmpty()||this.commit();this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;_classPrivateFieldGet(this,S).disconnect();_classPrivateFieldSet(this,S,null);_get(_getPrototypeOf(InkEditor.prototype),"remove",this).call(this)}}},{key:"setParent",value:function setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this);_get(_getPrototypeOf(InkEditor.prototype),"setParent",this).call(this,t)}},{key:"onScaleChanging",value:function onScaleChanging(){var t=_slicedToArray(this.parentDimensions,2),r=t[0],i=t[1],a=this.width*r,o=this.height*i;this.setDimensions(a,o)}},{key:"enableEditMode",value:function enableEditMode(){if(!_classPrivateFieldGet(this,b)&&null!==this.canvas){_get(_getPrototypeOf(InkEditor.prototype),"enableEditMode",this).call(this);this.div.draggable=!1;this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,m));this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,g))}}},{key:"disableEditMode",value:function disableEditMode(){if(this.isInEditMode()&&null!==this.canvas){_get(_getPrototypeOf(InkEditor.prototype),"disableEditMode",this).call(this);this.div.draggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,m));this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,g))}}},{key:"onceAdded",value:function onceAdded(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}},{key:"commit",value:function commit(){if(!_classPrivateFieldGet(this,b)){_get(_getPrototypeOf(InkEditor.prototype),"commit",this).call(this);this.isEditing=!1;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(this,b,!0);this.div.classList.add("disabled");_classPrivateMethodGet(this,Y,_fitToContent2).call(this,!0);this.parent.addInkEditorIfNeeded(!0);this.parent.moveEditorInDOM(this);this.div.focus({preventScroll:!0})}}},{key:"focusin",value:function focusin(t){_get(_getPrototypeOf(InkEditor.prototype),"focusin",this).call(this,t);this.enableEditMode()}},{key:"canvasPointerdown",value:function canvasPointerdown(t){if(0===t.button&&this.isInEditMode()&&!_classPrivateFieldGet(this,b)){this.setInForeground();"mouse"!==t.type&&this.div.focus({preventScroll:!0});t.stopPropagation();this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,y));this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,v));_classPrivateMethodGet(this,M,_startDrawing2).call(this,t.offsetX,t.offsetY)}}},{key:"canvasPointermove",value:function canvasPointermove(t){t.stopPropagation();_classPrivateMethodGet(this,L,_draw2).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function canvasPointerup(t){if(0===t.button&&this.isInEditMode()&&0!==this.currentPath.length){t.stopPropagation();_classPrivateMethodGet(this,G,_endDrawing2).call(this,t);this.setInBackground()}}},{key:"canvasPointerleave",value:function canvasPointerleave(t){_classPrivateMethodGet(this,G,_endDrawing2).call(this,t);this.setInBackground()}},{key:"render",value:function render(){var t,r,i=this;if(this.div)return this.div;if(this.width){t=this.x;r=this.y}_get(_getPrototypeOf(InkEditor.prototype),"render",this).call(this);InkEditor._l10nPromise.get("editor_ink2_aria_label").then((function(t){var r;return null===(r=i.div)||void 0===r?void 0:r.setAttribute("aria-label",t)}));var a=_slicedToArray(_classPrivateMethodGet(this,I,_getInitialBBox2).call(this),4),o=a[0],l=a[1],c=a[2],u=a[3];this.setAt(o,l,0,0);this.setDims(c,u);_classPrivateMethodGet(this,j,_createCanvas2).call(this);if(this.width){var d=_slicedToArray(this.parentDimensions,2),h=d[0],p=d[1];this.setAt(t*h,r*p,this.width*h,this.height*p);_classPrivateFieldSet(this,w,!0);_classPrivateMethodGet(this,B,_setCanvasDims2).call(this);this.setDims(this.width*h,this.height*p);_classPrivateMethodGet(this,D,_redraw2).call(this);_classPrivateMethodGet(this,$,_setMinDims2).call(this);this.div.classList.add("disabled")}else{this.div.classList.add("editing");this.enableEditMode()}_classPrivateMethodGet(this,N,_createObserver2).call(this);return this.div}},{key:"setDimensions",value:function setDimensions(t,r){var i=Math.round(t),a=Math.round(r);if(_classPrivateFieldGet(this,k)!==i||_classPrivateFieldGet(this,x)!==a){_classPrivateFieldSet(this,k,i);_classPrivateFieldSet(this,x,a);this.canvas.style.visibility="hidden";if(_classPrivateFieldGet(this,d)&&Math.abs(_classPrivateFieldGet(this,d)-t/r)>.01){r=Math.ceil(t/_classPrivateFieldGet(this,d));this.setDims(t,r)}var o=_slicedToArray(this.parentDimensions,2),l=o[0],c=o[1];this.width=t/l;this.height=r/c;_classPrivateFieldGet(this,b)&&_classPrivateMethodGet(this,V,_setScaleFactor2).call(this,t,r);_classPrivateMethodGet(this,B,_setCanvasDims2).call(this);_classPrivateMethodGet(this,D,_redraw2).call(this);this.canvas.style.visibility="visible";this.fixDims()}}},{key:"serialize",value:function serialize(){if(this.isEmpty())return null;var t=this.getRect(0,0),r=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],i=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,H,_serializePaths2).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,r),pageIndex:this.pageIndex,rect:t,rotation:this.rotation}}}],[{key:"initialize",value:function initialize(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map((function(r){return[r,t.get(r)]})))}},{key:"updateDefaultParams",value:function updateDefaultParams(t,r){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=r;break;case a.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=r;break;case a.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=r/100}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*InkEditor._defaultOpacity)]]}},{key:"deserialize",value:function deserialize(t,r,i){var o=_get(_getPrototypeOf(InkEditor),"deserialize",this).call(this,t,r,i);o.thickness=t.thickness;o.color=a.Util.makeHexColor.apply(a.Util,_toConsumableArray(t.color));o.opacity=t.opacity;var l=_slicedToArray(o.pageDimensions,2),c=l[0],v=l[1],y=o.width*c,g=o.height*v,m=o.parentScale,w=t.thickness/2;_classPrivateFieldSet(o,d,y/g);_classPrivateFieldSet(o,b,!0);_classPrivateFieldSet(o,k,Math.round(y));_classPrivateFieldSet(o,x,Math.round(g));var P,S=_createForOfIteratorHelper(t.paths);try{for(S.s();!(P=S.n()).done;){var A=P.value.bezier,E=[];o.paths.push(E);for(var T=m*(A[0]-w),C=m*(g-A[1]-w),I=2,O=A.length;I<O;I+=6){var M=m*(A[I]-w),L=m*(g-A[I+1]-w),R=m*(A[I+2]-w),D=m*(g-A[I+3]-w),G=m*(A[I+4]-w),j=m*(g-A[I+5]-w);E.push([[T,C],[M,L],[R,D],[G,j]]);T=G;C=j}var N=_classStaticPrivateMethodGet(this,InkEditor,_buildPath2D).call(this,E);o.bezierPath2D.push(N)}}catch(t){S.e(t)}finally{S.f()}var B=_classPrivateMethodGet(o,X,_getBbox2).call(o);_classPrivateFieldSet(o,p,Math.max(u,B[2]-B[0]));_classPrivateFieldSet(o,h,Math.max(u,B[3]-B[1]));_classPrivateMethodGet(o,V,_setScaleFactor2).call(o,y,g);return o}}]);return InkEditor}(o.AnnotationEditor);r.InkEditor=Q;function _updateThickness2(t){var r=this,i=this.thickness;this.addCommands({cmd:function cmd(){r.thickness=t;_classPrivateMethodGet(r,Y,_fitToContent2).call(r)},undo:function undo(){r.thickness=i;_classPrivateMethodGet(r,Y,_fitToContent2).call(r)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(t){var r=this,i=this.color;this.addCommands({cmd:function cmd(){r.color=t;_classPrivateMethodGet(r,D,_redraw2).call(r)},undo:function undo(){r.color=i;_classPrivateMethodGet(r,D,_redraw2).call(r)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _updateOpacity2(t){var r=this;t/=100;var i=this.opacity;this.addCommands({cmd:function cmd(){r.opacity=t;_classPrivateMethodGet(r,D,_redraw2).call(r)},undo:function undo(){r.opacity=i;_classPrivateMethodGet(r,D,_redraw2).call(r)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function _getInitialBBox2(){var t=this.parentRotation,r=_slicedToArray(this.parentDimensions,2),i=r[0],a=r[1];switch(t){case 90:return[0,a,a,i];case 180:return[i,a,i,a];case 270:return[i,0,a,i];default:return[0,0,i,a]}}function _setStroke2(){var t=this.ctx,r=this.color,i=this.opacity,a=this.thickness,o=this.parentScale,l=this.scaleFactor;t.lineWidth=a*o/l;t.lineCap="round";t.lineJoin="round";t.miterLimit=10;t.strokeStyle="".concat(r).concat((0,c.opacityToHex)(i))}function _startDrawing2(t,r){var i=this;this.isEditing=!0;if(!_classPrivateFieldGet(this,w)){var a;_classPrivateFieldSet(this,w,!0);_classPrivateMethodGet(this,B,_setCanvasDims2).call(this);this.thickness||(this.thickness=Q._defaultThickness);this.color||(this.color=Q._defaultColor||o.AnnotationEditor._defaultLineColor);null!==(a=this.opacity)&&void 0!==a||(this.opacity=Q._defaultOpacity)}this.currentPath.push([t,r]);_classPrivateFieldSet(this,P,null);_classPrivateMethodGet(this,O,_setStroke2).call(this);this.ctx.beginPath();this.ctx.moveTo(t,r);_classPrivateFieldSet(this,A,(function(){if(_classPrivateFieldGet(i,A)){if(_classPrivateFieldGet(i,P)){var t;if(i.isEmpty()){i.ctx.setTransform(1,0,0,1,0,0);i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height)}else _classPrivateMethodGet(i,D,_redraw2).call(i);(t=i.ctx).lineTo.apply(t,_toConsumableArray(_classPrivateFieldGet(i,P)));_classPrivateFieldSet(i,P,null);i.ctx.stroke()}window.requestAnimationFrame(_classPrivateFieldGet(i,A))}}));window.requestAnimationFrame(_classPrivateFieldGet(this,A))}function _draw2(t,r){var i=_slicedToArray(this.currentPath.at(-1),2),a=i[0],o=i[1];if(t!==a||r!==o){this.currentPath.push([t,r]);_classPrivateFieldSet(this,P,[t,r])}}function _stopDrawing2(t,r){var i=this;this.ctx.closePath();_classPrivateFieldSet(this,A,null);t=Math.min(Math.max(t,0),this.canvas.width);r=Math.min(Math.max(r,0),this.canvas.height);var a,o=_slicedToArray(this.currentPath.at(-1),2),c=o[0],u=o[1];t===c&&r===u||this.currentPath.push([t,r]);if(1!==this.currentPath.length)a=(0,l.fitCurve)(this.currentPath,30,null);else{var d=[t,r];a=[[d,d.slice(),d.slice(),d]]}var h=_classStaticPrivateMethodGet(Q,Q,_buildPath2D).call(Q,a);this.currentPath.length=0;this.addCommands({cmd:function cmd(){i.paths.push(a);i.bezierPath2D.push(h);i.rebuild()},undo:function undo(){i.paths.pop();i.bezierPath2D.pop();if(0===i.paths.length)i.remove();else{if(!i.canvas){_classPrivateMethodGet(i,j,_createCanvas2).call(i);_classPrivateMethodGet(i,N,_createObserver2).call(i)}_classPrivateMethodGet(i,Y,_fitToContent2).call(i)}},mustExec:!0})}function _redraw2(){if(this.isEmpty())_classPrivateMethodGet(this,W,_updateTransform2).call(this);else{_classPrivateMethodGet(this,O,_setStroke2).call(this);var t=this.canvas,r=this.ctx;r.setTransform(1,0,0,1,0,0);r.clearRect(0,0,t.width,t.height);_classPrivateMethodGet(this,W,_updateTransform2).call(this);var i,a=_createForOfIteratorHelper(this.bezierPath2D);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.stroke(o)}}catch(t){a.e(t)}finally{a.f()}}}function _endDrawing2(t){_classPrivateMethodGet(this,R,_stopDrawing2).call(this,t.offsetX,t.offsetY);this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,y));this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,v));this.addToAnnotationStorage()}function _createCanvas2(){var t=this;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";Q._l10nPromise.get("editor_ink_canvas_aria_label").then((function(r){var i;return null===(i=t.canvas)||void 0===i?void 0:i.setAttribute("aria-label",r)}));this.div.append(this.canvas);var r=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0;this.ctx=this.canvas.getContext("2d",r)}function _createObserver2(){var t=this;_classPrivateFieldSet(this,S,new ResizeObserver((function(r){var i=r[0].contentRect;i.width&&i.height&&t.setDimensions(i.width,i.height)})));_classPrivateFieldGet(this,S).observe(this.div)}function _setCanvasDims2(){if(_classPrivateFieldGet(this,w)){var t=_slicedToArray(this.parentDimensions,2),r=t[0],i=t[1];this.canvas.width=Math.ceil(this.width*r);this.canvas.height=Math.ceil(this.height*i);_classPrivateMethodGet(this,W,_updateTransform2).call(this)}}function _setScaleFactor2(t,r){var i=_classPrivateMethodGet(this,K,_getPadding2).call(this),a=(t-i)/_classPrivateFieldGet(this,p),o=(r-i)/_classPrivateFieldGet(this,h);this.scaleFactor=Math.min(a,o)}function _updateTransform2(){var t=_classPrivateMethodGet(this,K,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function _buildPath2D(t){for(var r=new Path2D,i=0,a=t.length;i<a;i++){var o=_slicedToArray(t[i],4),l=o[0],c=o[1],u=o[2],d=o[3];0===i&&r.moveTo.apply(r,_toConsumableArray(l));r.bezierCurveTo(c[0],c[1],u[0],u[1],d[0],d[1])}return r}function _serializePaths2(t,r,i,a){var o,l,c,u=[],d=this.thickness/2,h=_createForOfIteratorHelper(this.paths);try{for(h.s();!(c=h.n()).done;){var p=c.value;o=[];l=[];for(var v=0,y=p.length;v<y;v++){var g=_slicedToArray(p[v],4),m=g[0],b=g[1],w=g[2],P=g[3],S=t*(m[0]+r)+d,k=a-t*(m[1]+i)-d,x=t*(b[0]+r)+d,A=a-t*(b[1]+i)-d,E=t*(w[0]+r)+d,T=a-t*(w[1]+i)-d,C=t*(P[0]+r)+d,I=a-t*(P[1]+i)-d;if(0===v){o.push(S,k);l.push(S,k)}o.push(x,A,E,T,C,I);_classPrivateMethodGet(this,U,_extractPointsOnBezier2).call(this,S,k,x,A,E,T,C,I,4,l)}u.push({bezier:o,points:l})}}catch(t){h.e(t)}finally{h.f()}return u}function _extractPointsOnBezier2(t,r,i,a,o,l,c,u,d,h){if(_classPrivateMethodGet(this,z,_isAlmostFlat2).call(this,t,r,i,a,o,l,c,u))h.push(c,u);else{for(var p=1;p<d-1;p++){var v=p/d,y=1-v,g=v*t+y*i,m=v*r+y*a,b=v*i+y*o,w=v*a+y*l;g=v*(g=v*g+y*b)+y*(b=v*b+y*(v*o+y*c));m=v*(m=v*m+y*w)+y*(w=v*w+y*(v*l+y*u));h.push(g,m)}h.push(c,u)}}function _isAlmostFlat2(t,r,i,a,o,l,c,u){var d=Math.pow(3*i-2*t-c,2),h=Math.pow(3*a-2*r-u,2),p=Math.pow(3*o-t-2*c,2),v=Math.pow(3*l-r-2*u,2);return Math.max(d,p)+Math.max(h,v)<=10}function _getBbox2(){var t,r=1/0,i=-1/0,o=1/0,l=-1/0,c=_createForOfIteratorHelper(this.paths);try{for(c.s();!(t=c.n()).done;){var u,d=_createForOfIteratorHelper(t.value);try{for(d.s();!(u=d.n()).done;){var h=_slicedToArray(u.value,4),p=h[0],v=h[1],y=h[2],g=h[3],m=a.Util.bezierBoundingBox.apply(a.Util,_toConsumableArray(p).concat(_toConsumableArray(v),_toConsumableArray(y),_toConsumableArray(g)));r=Math.min(r,m[0]);o=Math.min(o,m[1]);i=Math.max(i,m[2]);l=Math.max(l,m[3])}}catch(t){d.e(t)}finally{d.f()}}}catch(t){c.e(t)}finally{c.f()}return[r,o,i,l]}function _getPadding2(){return _classPrivateFieldGet(this,b)?Math.ceil(this.thickness*this.parentScale):0}function _fitToContent2(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEmpty())if(_classPrivateFieldGet(this,b)){var r=_classPrivateMethodGet(this,X,_getBbox2).call(this),i=_classPrivateMethodGet(this,K,_getPadding2).call(this);_classPrivateFieldSet(this,p,Math.max(u,r[2]-r[0]));_classPrivateFieldSet(this,h,Math.max(u,r[3]-r[1]));var a=Math.ceil(i+_classPrivateFieldGet(this,p)*this.scaleFactor),o=Math.ceil(i+_classPrivateFieldGet(this,h)*this.scaleFactor),l=_slicedToArray(this.parentDimensions,2),c=l[0],v=l[1];this.width=a/c;this.height=o/v;_classPrivateFieldSet(this,d,a/o);_classPrivateMethodGet(this,$,_setMinDims2).call(this);var y=this.translationX,g=this.translationY;this.translationX=-r[0];this.translationY=-r[1];_classPrivateMethodGet(this,B,_setCanvasDims2).call(this);_classPrivateMethodGet(this,D,_redraw2).call(this);_classPrivateFieldSet(this,k,a);_classPrivateFieldSet(this,x,o);this.setDims(a,o);var m=t?i/this.scaleFactor/2:0;this.translate(y-this.translationX-m,g-this.translationY-m)}else _classPrivateMethodGet(this,D,_redraw2).call(this)}function _setMinDims2(){var t=this.div.style;if(_classPrivateFieldGet(this,d)>=1){t.minHeight="".concat(u,"px");t.minWidth="".concat(Math.round(_classPrivateFieldGet(this,d)*u),"px")}else{t.minWidth="".concat(u,"px");t.minHeight="".concat(Math.round(u/_classPrivateFieldGet(this,d)),"px")}}_defineProperty(Q,"_defaultColor",null);_defineProperty(Q,"_defaultOpacity",1);_defineProperty(Q,"_defaultThickness",1);_defineProperty(Q,"_l10nPromise",void 0);_defineProperty(Q,"_type","ink")},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.fitCurve=void 0;var a=i(166);r.fitCurve=a},t=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function fitCubic(t,r,a,o,l){var c,u,d,h,p,v,y,g,m,b,w,P,S;if(2===t.length){P=i.vectorLen(i.subtract(t[0],t[1]))/3;return[c=[t[0],i.addArrays(t[0],i.mulItems(r,P)),i.addArrays(t[1],i.mulItems(a,P)),t[1]]]}u=function chordLengthParameterize(t){var r,a,o,l=[];t.forEach((function(t,c){r=c?a+i.vectorLen(i.subtract(t,o)):0;l.push(r);a=r;o=t}));l=l.map((function(t){return t/a}));return l}(t);var k=_slicedToArray(generateAndReport(t,u,u,r,a,l),3);c=k[0];h=k[1];v=k[2];if(0===h||h<o)return[c];if(h<o*o){d=u;p=h;y=v;for(S=0;S<20;S++){var x=_slicedToArray(generateAndReport(t,u,d=reparameterize(c,t,d),r,a,l),3);c=x[0];h=x[1];v=x[2];if(h<o)return[c];if(v===y){var A=h/p;if(A>.9999&&A<1.0001)break}p=h;y=v}}w=[];if((g=i.subtract(t[v-1],t[v+1])).every((function(t){return 0===t}))){var E=[-(g=i.subtract(t[v-1],t[v]))[1],g[0]];g[0]=E[0];g[1]=E[1]}m=i.normalize(g);b=i.mulItems(m,-1);return w=(w=w.concat(fitCubic(t.slice(0,v+1),r,m,o,l))).concat(fitCubic(t.slice(v),b,a,o,l))}function generateAndReport(t,o,l,c,u,d){var h,p,v;h=function generateBezier(t,r,o,l){var c,u,d,h,p,v,y,g,m,b,w,P,S,k,x,A,E,T=t[0],C=t[t.length-1];c=[T,null,null,C];u=i.zeros_Xx2x2(r.length);for(S=0,k=r.length;S<k;S++){E=1-(A=r[S]);(d=u[S])[0]=i.mulItems(o,3*A*(E*E));d[1]=i.mulItems(l,3*E*(A*A))}h=[[0,0],[0,0]];p=[0,0];for(S=0,k=t.length;S<k;S++){A=r[S];d=u[S];h[0][0]+=i.dot(d[0],d[0]);h[0][1]+=i.dot(d[0],d[1]);h[1][0]+=i.dot(d[0],d[1]);h[1][1]+=i.dot(d[1],d[1]);x=i.subtract(t[S],a.q([T,T,C,C],A));p[0]+=i.dot(d[0],x);p[1]+=i.dot(d[1],x)}v=h[0][0]*h[1][1]-h[1][0]*h[0][1];y=h[0][0]*p[1]-h[1][0]*p[0];g=p[0]*h[1][1]-p[1]*h[0][1];m=0===v?0:g/v;b=0===v?0:y/v;P=i.vectorLen(i.subtract(T,C));if(m<(w=1e-6*P)||b<w){c[1]=i.addArrays(T,i.mulItems(o,P/3));c[2]=i.addArrays(C,i.mulItems(l,P/3))}else{c[1]=i.addArrays(T,i.mulItems(o,m));c[2]=i.addArrays(C,i.mulItems(l,b))}return c}(t,l,c,u);var y=function computeMaxError(t,o,l){var c,u,d,h,p,v,y,g;u=0;d=Math.floor(t.length/2);var m=r(o,10);for(p=0,v=t.length;p<v;p++){y=t[p];g=find_t(o,l[p],m,10);if((c=(h=i.subtract(a.q(o,g),y))[0]*h[0]+h[1]*h[1])>u){u=c;d=p}}return[u,d]}(t,h,o),g=_slicedToArray(y,2);p=g[0];v=g[1];d&&d({bez:h,points:t,params:o,maxErr:p,maxPoint:v});return[h,p,v]}function reparameterize(t,r,i){return i.map((function(i,a){return newtonRaphsonRootFind(t,r[a],i)}))}function newtonRaphsonRootFind(t,r,o){var l=i.subtract(a.q(t,o),r),c=a.qprime(t,o),u=i.mulMatrix(l,c),d=i.sum(i.squareItems(c))+2*i.mulMatrix(l,a.qprimeprime(t,o));return 0===d?o:o-u/d}var r=function mapTtoRelativeDistances(t,r){for(var o,l=[0],c=t[0],u=0,d=1;d<=r;d++){o=a.q(t,d/r);u+=i.vectorLen(i.subtract(o,c));l.push(u);c=o}return l=l.map((function(t){return t/u}))};function find_t(t,r,i,a){if(r<0)return 0;if(r>1)return 1;for(var o,l,c,u,d=1;d<=a;d++)if(r<=i[d]){c=(d-1)/a;l=d/a;u=(r-(o=i[d-1]))/(i[d]-o)*(l-c)+c;break}return u}function createTangent(t,r){return i.normalize(i.subtract(t,r))}var i=function(){function maths(){_classCallCheck(this,maths)}_createClass(maths,null,[{key:"zeros_Xx2x2",value:function zeros_Xx2x2(t){for(var r=[];t--;)r.push([0,0]);return r}},{key:"mulItems",value:function mulItems(t,r){return t.map((function(t){return t*r}))}},{key:"mulMatrix",value:function mulMatrix(t,r){return t.reduce((function(t,i,a){return t+i*r[a]}),0)}},{key:"subtract",value:function subtract(t,r){return t.map((function(t,i){return t-r[i]}))}},{key:"addArrays",value:function addArrays(t,r){return t.map((function(t,i){return t+r[i]}))}},{key:"addItems",value:function addItems(t,r){return t.map((function(t){return t+r}))}},{key:"sum",value:function sum(t){return t.reduce((function(t,r){return t+r}))}},{key:"dot",value:function dot(t,r){return maths.mulMatrix(t,r)}},{key:"vectorLen",value:function vectorLen(t){return Math.hypot.apply(Math,_toConsumableArray(t))}},{key:"divItems",value:function divItems(t,r){return t.map((function(t){return t/r}))}},{key:"squareItems",value:function squareItems(t){return t.map((function(t){return t*t}))}},{key:"normalize",value:function normalize(t){return this.divItems(t,this.vectorLen(t))}}]);return maths}(),a=function(){function bezier(){_classCallCheck(this,bezier)}_createClass(bezier,null,[{key:"q",value:function q(t,r){var a=1-r,o=i.mulItems(t[0],a*a*a),l=i.mulItems(t[1],3*a*a*r),c=i.mulItems(t[2],3*a*r*r),u=i.mulItems(t[3],r*r*r);return i.addArrays(i.addArrays(o,l),i.addArrays(c,u))}},{key:"qprime",value:function qprime(t,r){var a=1-r,o=i.mulItems(i.subtract(t[1],t[0]),3*a*a),l=i.mulItems(i.subtract(t[2],t[1]),6*a*r),c=i.mulItems(i.subtract(t[3],t[2]),3*r*r);return i.addArrays(i.addArrays(o,l),c)}},{key:"qprimeprime",value:function qprimeprime(t,r){return i.addArrays(i.mulItems(i.addArrays(i.subtract(t[2],i.mulItems(t[1],2)),t[0]),6*(1-r)),i.mulItems(i.addArrays(i.subtract(t[3],i.mulItems(t[2],2)),t[1]),6*r))}}]);return bezier}();t.exports=function fitCurve(t,r,i){if(!Array.isArray(t))throw new TypeError("First argument should be an array");t.forEach((function(r){if(!Array.isArray(r)||r.some((function(t){return"number"!=typeof t}))||r.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}));if((t=t.filter((function(r,i){return 0===i||!r.every((function(r,a){return r===t[i-1][a]}))}))).length<2)return[];var a=t.length,o=createTangent(t[1],t[0]),l=createTangent(t[a-2],t[a-1]);return fitCubic(t,o,l,r,i)};t.exports.fitCubic=fitCubic;t.exports.createTangent=createTangent},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationLayer=void 0;var a=i(1),o=i(141),l=i(138),c=i(168),u=i(169);function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}var d=1e3,h=new WeakSet;function getRectDims(t){return{width:t[2]-t[0],height:t[3]-t[1]}}var p=function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory)}_createClass(AnnotationElementFactory,null,[{key:"create",value:function create(t){switch(t.data.annotationType){case a.AnnotationType.LINK:return new m(t);case a.AnnotationType.TEXT:return new b(t);case a.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new P(t);case"Btn":return t.data.radioButton?new k(t):t.data.checkBox?new S(t):new x(t);case"Ch":return new A(t)}return new w(t);case a.AnnotationType.POPUP:return new E(t);case a.AnnotationType.FREETEXT:return new C(t);case a.AnnotationType.LINE:return new I(t);case a.AnnotationType.SQUARE:return new O(t);case a.AnnotationType.CIRCLE:return new M(t);case a.AnnotationType.POLYLINE:return new L(t);case a.AnnotationType.CARET:return new D(t);case a.AnnotationType.INK:return new G(t);case a.AnnotationType.POLYGON:return new R(t);case a.AnnotationType.HIGHLIGHT:return new j(t);case a.AnnotationType.UNDERLINE:return new N(t);case a.AnnotationType.SQUIGGLY:return new B(t);case a.AnnotationType.STRIKEOUT:return new V(t);case a.AnnotationType.STAMP:return new W(t);case a.AnnotationType.FILEATTACHMENT:return new H(t);default:return new v(t)}}}]);return AnnotationElementFactory}(),v=function(){function AnnotationElement(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.isRenderable,a=void 0!==i&&i,o=r.ignoreBorder,l=void 0!==o&&o,c=r.createQuadrilaterals,u=void 0!==c&&c;_classCallCheck(this,AnnotationElement);this.isRenderable=a;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService;this.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderForms=t.renderForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._fieldObjects=t.fieldObjects;a&&(this.container=this._createContainer(l));u&&(this.quadrilaterals=this._createQuadrilaterals(l))}_createClass(AnnotationElement,[{key:"_createContainer",value:function _createContainer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.data,i=this.page,o=this.viewport,l=document.createElement("section");l.setAttribute("data-annotation-id",r.id);r.noRotate&&l.classList.add("norotate");var c=o.rawDims,u=c.pageWidth,d=c.pageHeight,h=c.pageX,p=c.pageY,v=getRectDims(r.rect),y=v.width,g=v.height,m=a.Util.normalizeRect([r.rect[0],i.view[3]-r.rect[1]+i.view[1],r.rect[2],i.view[3]-r.rect[3]+i.view[1]]);if(!t&&r.borderStyle.width>0){l.style.borderWidth="".concat(r.borderStyle.width,"px");var b=r.borderStyle.horizontalCornerRadius,w=r.borderStyle.verticalCornerRadius;if(b>0||w>0){var P="calc(".concat(b,"px * var(--scale-factor)) / calc(").concat(w,"px * var(--scale-factor))");l.style.borderRadius=P}else if(this instanceof k){var S="calc(".concat(y,"px * var(--scale-factor)) / calc(").concat(g,"px * var(--scale-factor))");l.style.borderRadius=S}switch(r.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:l.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:l.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:l.style.borderBottomStyle="solid"}var x=r.borderColor||null;x?l.style.borderColor=a.Util.makeHexColor(0|x[0],0|x[1],0|x[2]):l.style.borderWidth=0}l.style.left="".concat(100*(m[0]-h)/u,"%");l.style.top="".concat(100*(m[1]-p)/d,"%");var A=r.rotation;if(r.hasOwnCanvas||0===A){l.style.width="".concat(100*y/u,"%");l.style.height="".concat(100*g/d,"%")}else this.setRotation(A,l);return l}},{key:"setRotation",value:function setRotation(t){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,o=this.viewport.rawDims,l=o.pageWidth,c=o.pageHeight,u=getRectDims(this.data.rect),d=u.width,h=u.height;if(t%180==0){r=100*d/l;i=100*h/c}else{r=100*h/l;i=100*d/c}a.style.width="".concat(r,"%");a.style.height="".concat(i,"%");a.setAttribute("data-main-rotation",(360-t)%360)}},{key:"_commonActions",get:function get(){var t=this,r=function setColor(t,r,i){var a=i.detail[t];i.target.style[r]=c.ColorConverters["".concat(a[0],"_HTML")](a.slice(1))};return(0,a.shadow)(this,"_commonActions",{display:function display(r){var i=r.detail.display%2==1;t.container.style.visibility=i?"hidden":"visible";t.annotationStorage.setValue(t.data.id,{hidden:i,print:0===r.detail.display||3===r.detail.display})},print:function print(r){t.annotationStorage.setValue(t.data.id,{print:r.detail.print})},hidden:function hidden(r){t.container.style.visibility=r.detail.hidden?"hidden":"visible";t.annotationStorage.setValue(t.data.id,{hidden:r.detail.hidden})},focus:function focus(t){setTimeout((function(){return t.target.focus({preventScroll:!1})}),0)},userName:function userName(t){t.target.title=t.detail.userName},readonly:function readonly(t){t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:function required(r){t._setRequired(r.target,r.detail.required)},bgColor:function bgColor(t){r("bgColor","backgroundColor",t)},fillColor:function fillColor(t){r("fillColor","backgroundColor",t)},fgColor:function fgColor(t){r("fgColor","color",t)},textColor:function textColor(t){r("textColor","color",t)},borderColor:function borderColor(t){r("borderColor","borderColor",t)},strokeColor:function strokeColor(t){r("strokeColor","borderColor",t)},rotation:function rotation(r){var i=r.detail.rotation;t.setRotation(i);t.annotationStorage.setValue(t.data.id,{rotation:i})}})}},{key:"_dispatchEventFromSandbox",value:function _dispatchEventFromSandbox(t,r){for(var i=this._commonActions,a=0,o=Object.keys(r.detail);a<o.length;a++){var l=o[a],c=t[l]||i[l];null==c||c(r)}}},{key:"_setDefaultPropertiesFromJS",value:function _setDefaultPropertiesFromJS(t){if(this.enableScripting){var r=this.annotationStorage.getRawValue(this.data.id);if(r)for(var i=this._commonActions,a=0,o=Object.entries(r);a<o.length;a++){var l=_slicedToArray(o[a],2),c=l[0],u=l[1],d=i[c];if(d){d({detail:_defineProperty({},c,u),target:t});delete r[c]}}}}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var r,i=[],a=this.data.rect,o=_createForOfIteratorHelper(this.data.quadPoints);try{for(o.s();!(r=o.n()).done;){var l=r.value;this.data.rect=[l[2].x,l[2].y,l[1].x,l[1].y];i.push(this._createContainer(t))}}catch(t){o.e(t)}finally{o.f()}this.data.rect=a;return i}},{key:"_createPopup",value:function _createPopup(t,r){var i=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;i=this.quadrilaterals[0]}if(!t){(t=document.createElement("div")).classList.add("popupTriggerArea");i.append(t)}var a=new T({container:i,trigger:t,color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,hideWrapper:!0}).render();a.style.left="100%";i.append(a)}},{key:"_renderQuadrilaterals",value:function _renderQuadrilaterals(t){var r,i=_createForOfIteratorHelper(this.quadrilaterals);try{for(i.s();!(r=i.n()).done;){r.value.classList.add(t)}}catch(t){i.e(t)}finally{i.f()}return this.quadrilaterals}},{key:"render",value:function render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function _getElementsByName(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];if(this._fieldObjects){var o=this._fieldObjects[t];if(o){var l,c=_createForOfIteratorHelper(o);try{for(c.s();!(l=c.n()).done;){var u=l.value,d=u.page,p=u.id,v=u.exportValues;if(-1!==d&&p!==r){var y="string"==typeof v?v:null,g=document.querySelector('[data-element-id="'.concat(p,'"]'));!g||h.has(g)?i.push({id:p,exportValue:y,domElement:g}):(0,a.warn)("_getElementsByName - element not allowed: ".concat(p))}}}catch(t){c.e(t)}finally{c.f()}}return i}var m,b=_createForOfIteratorHelper(document.getElementsByName(t));try{for(b.s();!(m=b.n()).done;){var w=m.value,P=w.exportValue,S=w.getAttribute("data-element-id");S!==r&&(h.has(w)&&i.push({id:S,exportValue:P,domElement:w}))}}catch(t){b.e(t)}finally{b.f()}return i}}]);return AnnotationElement}(),y=new WeakSet,g=new WeakSet,m=function(t){_inherits(LinkAnnotationElement,t);var r=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,LinkAnnotationElement);_classPrivateMethodInitSpec(_assertThisInitialized(i=r.call(this,t,{isRenderable:!0,ignoreBorder:!(null==a||!a.ignoreBorder),createQuadrilaterals:!0})),g);_classPrivateMethodInitSpec(_assertThisInitialized(i),y);i.isTooltipOnly=t.data.isTooltipOnly;return i}_createClass(LinkAnnotationElement,[{key:"render",value:function render(){var t=this.data,r=this.linkService,i=document.createElement("a");i.setAttribute("data-element-id",t.id);var a=!1;if(t.url){r.addLinkAttributes(i,t.url,t.newWindow);a=!0}else if(t.action){this._bindNamedAction(i,t.action);a=!0}else if(t.attachment){this._bindAttachment(i,t.attachment);a=!0}else if(t.setOCGState){_classPrivateMethodGet(this,g,_bindSetOCGState2).call(this,i,t.setOCGState);a=!0}else if(t.dest){this._bindLink(i,t.dest);a=!0}else{if(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(i,t);a=!0}if(t.resetForm){this._bindResetFormAction(i,t.resetForm);a=!0}else if(this.isTooltipOnly&&!a){this._bindLink(i,"");a=!0}}if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation").map((function(t,r){var a=0===r?i:i.cloneNode();t.append(a);return t}));this.container.classList.add("linkAnnotation");a&&this.container.append(i);return this.container}},{key:"_bindLink",value:function _bindLink(t,r){var i=this;t.href=this.linkService.getDestinationHash(r);t.onclick=function(){r&&i.linkService.goToDestination(r);return!1};(r||""===r)&&_classPrivateMethodGet(this,y,_setInternalLink2).call(this)}},{key:"_bindNamedAction",value:function _bindNamedAction(t,r){var i=this;t.href=this.linkService.getAnchorUrl("");t.onclick=function(){i.linkService.executeNamedAction(r);return!1};_classPrivateMethodGet(this,y,_setInternalLink2).call(this)}},{key:"_bindAttachment",value:function _bindAttachment(t,r){var i=this;t.href=this.linkService.getAnchorUrl("");t.onclick=function(){var t;null===(t=i.downloadManager)||void 0===t||t.openOrDownloadData(i.container,r.content,r.filename);return!1};_classPrivateMethodGet(this,y,_setInternalLink2).call(this)}},{key:"_bindJSAction",value:function _bindJSAction(t,r){var i=this;t.href=this.linkService.getAnchorUrl("");for(var a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),o=function _loop(){var o=c[l],u=a.get(o);if(!u)return"continue";t[u]=function(){var t;null===(t=i.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:i,detail:{id:r.id,name:o}});return!1}},l=0,c=Object.keys(r.actions);l<c.length;l++)o();t.onclick||(t.onclick=function(){return!1});_classPrivateMethodGet(this,y,_setInternalLink2).call(this)}},{key:"_bindResetFormAction",value:function _bindResetFormAction(t,r){var i=this,o=t.onclick;o||(t.href=this.linkService.getAnchorUrl(""));_classPrivateMethodGet(this,y,_setInternalLink2).call(this);if(this._fieldObjects)t.onclick=function(){null==o||o();var t=r.fields,l=r.refs,c=r.include,u=[];if(0!==t.length||0!==l.length){var d,p=new Set(l),v=_createForOfIteratorHelper(t);try{for(v.s();!(d=v.n()).done;){var y,g=d.value,m=_createForOfIteratorHelper(i._fieldObjects[g]||[]);try{for(m.s();!(y=m.n()).done;){var b=y.value.id;p.add(b)}}catch(t){m.e(t)}finally{m.f()}}}catch(t){v.e(t)}finally{v.f()}for(var w=0,P=Object.values(i._fieldObjects);w<P.length;w++){var S,k=_createForOfIteratorHelper(P[w]);try{for(k.s();!(S=k.n()).done;){var x=S.value;p.has(x.id)===c&&u.push(x)}}catch(t){k.e(t)}finally{k.f()}}}else for(var A=0,E=Object.values(i._fieldObjects);A<E.length;A++){var T=E[A];u.push.apply(u,_toConsumableArray(T))}for(var C=i.annotationStorage,I=[],O=0,M=u;O<M.length;O++){var L=M[O],R=L.id;I.push(R);switch(L.type){case"text":var D=L.defaultValue||"";C.setValue(R,{value:D});window.updateAngularFormValue(R,{value:D});break;case"checkbox":case"radiobutton":var G=L.defaultValue===L.exportValues;C.setValue(R,{value:G});window.updateAngularFormValue(R,{value:G});break;case"combobox":case"listbox":var j=L.defaultValue||"";C.setValue(R,{value:j});window.updateAngularFormValue(R,{value:j});break;default:continue}var N=document.querySelector('[data-element-id="'.concat(R,'"]'));N&&(h.has(N)?N.dispatchEvent(new Event("resetform")):(0,a.warn)("_bindResetFormAction - element not allowed: ".concat(R)))}if(i.enableScripting){var B;null===(B=i.linkService.eventBus)||void 0===B||B.dispatch("dispatcheventinsandbox",{source:i,detail:{id:"app",ids:I,name:"ResetForm"}})}return!1};else{(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.');o||(t.onclick=function(){return!1})}}}]);return LinkAnnotationElement}(v);function _setInternalLink2(){this.container.setAttribute("data-internal-link","")}function _bindSetOCGState2(t,r){var i=this;t.href=this.linkService.getAnchorUrl("");t.onclick=function(){i.linkService.executeSetOCGState(r);return!1};_classPrivateMethodGet(this,y,_setInternalLink2).call(this)}var b=function(t){_inherits(TextAnnotationElement,t);var r=_createSuper(TextAnnotationElement);function TextAnnotationElement(t){var i,a,o;_classCallCheck(this,TextAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l})}_createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("textAnnotation");var t=document.createElement("img");t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Annotation]";t.dataset.l10nId="text_annotation_type";t.dataset.l10nArgs=JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(t,this.data);this.container.append(t);return this.container}}]);return TextAnnotationElement}(v),w=function(t){_inherits(WidgetAnnotationElement,t);var r=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){_classCallCheck(this,WidgetAnnotationElement);return r.apply(this,arguments)}_createClass(WidgetAnnotationElement,[{key:"render",value:function render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);return this.container}},{key:"_getKeyModifier",value:function _getKeyModifier(t){var r=a.FeatureTest.platform,i=r.isWin,o=r.isMac;return i&&t.ctrlKey||o&&t.metaKey}},{key:"_setEventListener",value:function _setEventListener(t,r,i,a){var o=this;r.includes("mouse")?t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:i,value:a(t),shift:t.shiftKey,modifier:o._getKeyModifier(t)}})})):t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:i,value:a(t)}})}))}},{key:"_setEventListeners",value:function _setEventListeners(t,r,i){var a,o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){var l,c=_slicedToArray(a.value,2),u=c[0],d=c[1];("Action"===d||null!==(l=this.data.actions)&&void 0!==l&&l[d])&&this._setEventListener(t,u,d,i)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_setBackgroundColor",value:function _setBackgroundColor(t){var r=this.data.backgroundColor||null;t.style.backgroundColor=null===r?"transparent":a.Util.makeHexColor(r[0],r[1],r[2])}},{key:"_setTextStyle",value:function _setTextStyle(t){var r,i=this.data.defaultAppearanceData.fontColor,o=this.data.defaultAppearanceData.fontSize||9,l=t.style,c=function roundToOneDecimal(t){return Math.round(10*t)/10};if(this.data.multiLine){var u=Math.abs(this.data.rect[3]-this.data.rect[1]-2),d=u/(Math.round(u/(a.LINE_FACTOR*o))||1);r=Math.min(o,c(d/a.LINE_FACTOR))}else{var h=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(o,c(h/a.LINE_FACTOR))}l.fontSize="calc(".concat(r,"px * var(--scale-factor))");l.color=a.Util.makeHexColor(i[0],i[1],i[2]);null!==this.data.textAlignment&&(l.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function _setRequired(t,r){r?t.setAttribute("required",!0):t.removeAttribute("required");t.setAttribute("aria-required",r)}}]);return WidgetAnnotationElement}(v),P=function(t){_inherits(TextWidgetAnnotationElement,t);var r=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(t){_classCallCheck(this,TextWidgetAnnotationElement);var i=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;return r.call(this,t,{isRenderable:i})}_createClass(TextWidgetAnnotationElement,[{key:"setPropertyOnSiblings",value:function setPropertyOnSiblings(t,r,i,a){var o,l=this.annotationStorage,c=_createForOfIteratorHelper(this._getElementsByName(t.name,t.id));try{for(c.s();!(o=c.n()).done;){var u=o.value;u.domElement&&(u.domElement[r]=i);l.setValue(u.id,_defineProperty({},a,i))}}catch(t){c.e(t)}finally{c.f()}}},{key:"render",value:function render(){var t=this,r=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");var a=null;if(this.renderForms){var o=window.getFormValueFromAngular(this.data.fieldName),l=r.getValue(i,{value:this.data.fieldValue}),c=o.value?o:l;o!==l&&r.setValue(i,{value:o.value});var u=c.value||"",p=r.getValue(i,{charLimit:this.data.maxLen}).charLimit;p&&u.length>p&&(u=u.slice(0,p));var v={userValue:u,formattedValue:null,lastCommittedValue:null,commitKey:1};if(this.data.multiLine){(a=document.createElement("textarea")).textContent=u;this.data.doNotScroll&&(a.style.overflowY="hidden")}else{(a=document.createElement("input")).type="text";a.setAttribute("value",u);this.data.doNotScroll&&(a.style.overflowX="hidden")}h.add(a);a.setAttribute("data-element-id",i);a.disabled=this.data.readOnly;a.name=this.data.fieldName;a.tabIndex=d;this._setRequired(a,this.data.required);p&&(a.maxLength=p);a.addEventListener("input",(function(o){r.setValue(i,{value:o.target.value});window.updateAngularFormValue(i,{value:o.target.value});t.setPropertyOnSiblings(a,"value",o.target.value,"value")}));a.addEventListener("resetform",(function(r){var i,o=null!==(i=t.data.defaultFieldValue)&&void 0!==i?i:"";a.value=v.userValue=o;v.formattedValue=null}));var y=function blurListener(t){var r=v.formattedValue;null!=r&&(t.target.value=r);t.target.scrollLeft=0};window.registerAcroformField(i,a,c.value);a.addEventListener("updateFromAngular",(function(t){return r.setValue(i,{value:t.detail})}));if(this.enableScripting&&this.hasJSActions){var g;a.addEventListener("focus",(function(t){var r=t.target;v.userValue&&(r.value=v.userValue);v.lastCommittedValue=r.value;v.commitKey=1}));a.addEventListener("updatefromsandbox",(function(a){var o={value:function value(t){var a;v.userValue=null!==(a=t.detail.value)&&void 0!==a?a:"";r.setValue(i,{value:v.userValue.toString()});window.updateAngularFormValue(i,{value:v.userValue.toString()});t.target.value=v.userValue},formattedValue:function formattedValue(t){var formattedValue=t.detail.formattedValue;v.formattedValue=formattedValue;null!=formattedValue&&t.target!==document.activeElement&&(t.target.value=formattedValue);r.setValue(i,{formattedValue:formattedValue});window.updateAngularFormValue(i,{formattedValue:formattedValue})},selRange:function selRange(t){var r;(r=t.target).setSelectionRange.apply(r,_toConsumableArray(t.detail.selRange))},charLimit:function charLimit(a){var o,charLimit=a.detail.charLimit,l=a.target;if(0!==charLimit){l.setAttribute("maxLength",charLimit);var c=v.userValue;if(c&&!(c.length<=charLimit)){c=c.slice(0,charLimit);l.value=v.userValue=c;r.setValue(i,{value:c});window.updateAngularFormValue(i,{value:c});null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:c,willCommit:!0,commitKey:1,selStart:l.selectionStart,selEnd:l.selectionEnd}})}}else l.removeAttribute("maxLength")}};t._dispatchEventFromSandbox(o,a)}));a.addEventListener("keydown",(function(r){var a;v.commitKey=1;var o=-1;"Escape"===r.key?o=0:"Enter"!==r.key||t.data.multiLine?"Tab"===r.key&&(v.commitKey=3):o=2;if(-1!==o){var l=r.target.value;if(v.lastCommittedValue!==l){v.lastCommittedValue=l;v.userValue=l;null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:l,willCommit:!0,commitKey:o,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}}}));var m=y;y=null;a.addEventListener("blur",(function(r){if(r.relatedTarget){var a=r.target.value;v.userValue=a;if(v.lastCommittedValue!==a){var o;null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:a,willCommit:!0,commitKey:v.commitKey,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}m(r)}}));null!==(g=this.data.actions)&&void 0!==g&&g.Keystroke&&a.addEventListener("beforeinput",(function(r){var a;v.lastCommittedValue=null;var o=r.data,l=r.target,c=l.value,u=l.selectionStart,d=l.selectionEnd,h=u,p=d;switch(r.inputType){case"deleteWordBackward":var y=c.substring(0,u).match(/\w*[^\w]*$/);y&&(h-=y[0].length);break;case"deleteWordForward":var g=c.substring(u).match(/^[^\w]*\w*/);g&&(p+=g[0].length);break;case"deleteContentBackward":u===d&&(h-=1);break;case"deleteContentForward":u===d&&(p+=1)}r.preventDefault();null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:c,change:o||"",willCommit:!1,selStart:h,selEnd:p}})}));this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}y&&a.addEventListener("blur",y);if(this.data.comb){var b=(this.data.rect[2]-this.data.rect[0])/p;a.classList.add("comb");a.style.letterSpacing="calc(".concat(b,"px * var(--scale-factor) - 1ch)")}}else{(a=document.createElement("div")).textContent=this.data.fieldValue;a.style.verticalAlign="middle";a.style.display="table-cell"}this._setTextStyle(a);this._setBackgroundColor(a);this._setDefaultPropertiesFromJS(a);this.container.append(a);return this.container}}]);return TextWidgetAnnotationElement}(w),S=function(t){_inherits(CheckboxWidgetAnnotationElement,t);var r=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(t){_classCallCheck(this,CheckboxWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=this.annotationStorage,i=this.data,a=i.id,o=window.getFormValueFromAngular(this.data.fieldName),l=r.getValue(a,{value:i.exportValue===i.fieldValue}).value,c=void 0;o.value&&(c=!0===o.value||o.value===i.exportValue);var u=void 0!==c?c:l,p=!1;if("string"==typeof u||null!=o&&o.value&&(null==o?void 0:o.value)!==l){u="Off"!==u;r.setValue(a,{value:u});p=!0}this.container.classList.add("buttonWidgetAnnotation","checkBox");var v=document.createElement("input");h.add(v);v.setAttribute("data-element-id",a);v.disabled=i.readOnly;this._setRequired(v,this.data.required);v.type="checkbox";v.name=i.fieldName;u&&v.setAttribute("checked",!0);v.setAttribute("exportValue",i.exportValue);v.tabIndex=d;v.addEventListener("change",(function(o){var l,c=o.target,u=c.name,d=c.checked,h=_createForOfIteratorHelper(t._getElementsByName(u,a));try{for(h.s();!(l=h.n()).done;){var p=l.value,v=d&&p.exportValue===i.exportValue;p.domElement&&(p.domElement.checked=v);r.setValue(p.id,{value:v});window.updateAngularFormValue(a,{value:v})}}catch(t){h.e(t)}finally{h.f()}r.setValue(a,{value:d});window.updateAngularFormValue(a,{value:d})}));v.addEventListener("resetform",(function(t){var r=i.defaultFieldValue||"Off";t.target.checked=r===i.exportValue}));window.registerAcroformField(a,v,!!u&&i.exportValue);v.addEventListener("updateFromAngular",(function(t){return r.setValue(a,{value:t.detail})}));p&&window.updateAngularFormValue(a,{value:u});if(this.enableScripting&&this.hasJSActions){v.addEventListener("updatefromsandbox",(function(i){var o={value:function value(t){t.target.checked="Off"!==t.detail.value;r.setValue(a,{value:t.target.checked});window.updateAngularFormValue(a,{value:t.target.value})}};t._dispatchEventFromSandbox(o,i)}));this._setEventListeners(v,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this._setBackgroundColor(v);this._setDefaultPropertiesFromJS(v);this.container.append(v);return this.container}}]);return CheckboxWidgetAnnotationElement}(w),k=function(t){_inherits(RadioButtonWidgetAnnotationElement,t);var r=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(t){_classCallCheck(this,RadioButtonWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t,r=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var i=this.annotationStorage,a=this.data,o=a.id,l=window.getFormValueFromAngular(this.data.fieldName),c=i.getValue(o,{value:a.fieldValue===a.buttonValue}).value,u=null!==(t=l.value)&&void 0!==t?t:c;if("string"==typeof u||l!==c){u=u===a.buttonValue;i.setValue(o,{value:u})}else u&&window.updateAngularFormValue(o,{value:a.buttonValue});var p=document.createElement("input");h.add(p);p.setAttribute("data-element-id",o);p.disabled=a.readOnly;this._setRequired(p,this.data.required);p.type="radio";p.name=a.fieldName;u&&p.setAttribute("checked",!0);p.tabIndex=d;p.addEventListener("change",(function(t){var a,l=t.target,c=l.name,u=l.checked,d=_createForOfIteratorHelper(r._getElementsByName(c,o));try{for(d.s();!(a=d.n()).done;){var h=a.value;i.setValue(h.id,{value:!1});window.updateAngularFormValue(h.id,{value:!1})}}catch(t){d.e(t)}finally{d.f()}i.setValue(o,{value:u});window.updateAngularFormValue(o,{value:u})}));p.addEventListener("resetform",(function(t){var r=a.defaultFieldValue;t.target.checked=null!=r&&r===a.buttonValue}));window.registerAcroformField(o,p,u?a.buttonValue:void 0,a.buttonValue);p.addEventListener("updateFromAngular",(function(t){return i.setValue(o,{value:t.detail})}));if(this.enableScripting&&this.hasJSActions){var v=a.buttonValue;p.addEventListener("updatefromsandbox",(function(t){var a={value:function value(t){var a,l=v===t.detail.value,c=_createForOfIteratorHelper(r._getElementsByName(t.target.name));try{for(c.s();!(a=c.n()).done;){var u=a.value,d=l&&u.id===o;u.domElement&&(u.domElement.checked=d);i.setValue(u.id,{value:d});window.updateAngularFormValue(o,{value:d})}}catch(t){c.e(t)}finally{c.f()}}};r._dispatchEventFromSandbox(a,t)}));this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this._setBackgroundColor(p);this._setDefaultPropertiesFromJS(p);this.container.append(p);return this.container}}]);return RadioButtonWidgetAnnotationElement}(w),x=function(t){_inherits(PushButtonWidgetAnnotationElement,t);var r=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(t){_classCallCheck(this,PushButtonWidgetAnnotationElement);return r.call(this,t,{ignoreBorder:t.data.hasAppearance})}_createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);r.classList.add("buttonWidgetAnnotation","pushButton");this.data.alternativeText&&(r.title=this.data.alternativeText);var i=r.lastChild;if(this.enableScripting&&this.hasJSActions&&i){this._setDefaultPropertiesFromJS(i);i.addEventListener("updatefromsandbox",(function(r){t._dispatchEventFromSandbox({},r)}))}return r}}]);return PushButtonWidgetAnnotationElement}(m),A=function(t){_inherits(ChoiceWidgetAnnotationElement,t);var r=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(t){_classCallCheck(this,ChoiceWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.classList.add("choiceWidgetAnnotation");var r=this.annotationStorage,i=this.data.id,a=window.getFormValueFromAngular(this.data.fieldName),o=r.getValue(i,{value:this.data.fieldValue}),l=a.value?a:o;a!==o&&r.setValue(i,{value:a.value});var c=document.createElement("select");h.add(c);c.setAttribute("data-element-id",i);c.disabled=this.data.readOnly;this._setRequired(c,this.data.required);c.name=this.data.fieldName;c.tabIndex=d;var u=this.data.combo&&this.data.options.length>0;if(!this.data.combo){c.size=this.data.options.length;this.data.multiSelect&&(c.multiple=!0)}c.addEventListener("resetform",(function(r){var i,a=t.data.defaultFieldValue,o=_createForOfIteratorHelper(c.options);try{for(o.s();!(i=o.n()).done;){var l=i.value;l.selected=l.value===a}}catch(t){o.e(t)}finally{o.f()}}));var p,v=_createForOfIteratorHelper(this.data.options);try{for(v.s();!(p=v.n()).done;){var y=p.value,g=document.createElement("option");g.textContent=y.displayValue;g.value=y.exportValue;if(l.value.includes(y.exportValue)){g.setAttribute("selected",!0);u=!1}c.append(g)}}catch(t){v.e(t)}finally{v.f()}var m=null;if(u){var b=document.createElement("option");b.value=" ";b.setAttribute("hidden",!0);b.setAttribute("selected",!0);c.prepend(b);m=function removeEmptyEntry(){b.remove();c.removeEventListener("input",m);m=null};c.addEventListener("input",m)}var w=function getValue(t){var r=t?"value":"textContent",i=c.options;return c.multiple?Array.prototype.filter.call(i,(function(t){return t.selected})).map((function(t){return t[r]})):-1===i.selectedIndex?null:i[i.selectedIndex][r]},P=w(!1),S=function getItems(t){var r=t.target.options;return Array.prototype.map.call(r,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};window.registerAcroformField(i,c,P);c.addEventListener("updateFromAngular",(function(t){return r.setValue(i,{value:t.detail})}));if(this.enableScripting&&this.hasJSActions){c.addEventListener("updatefromsandbox",(function(a){var o={value:function value(t){var a;null===(a=m)||void 0===a||a();var o,value=t.detail.value,l=new Set(Array.isArray(value)?value:[value]),u=_createForOfIteratorHelper(c.options);try{for(u.s();!(o=u.n()).done;){var d=o.value;d.selected=l.has(d.value)}}catch(t){u.e(t)}finally{u.f()}r.setValue(i,{value:w(!0)});P=w(!1);window.updateAngularFormValue(i,{value:P})},multipleSelection:function multipleSelection(t){c.multiple=!0},remove:function remove(t){var a=c.options,o=t.detail.remove;a[o].selected=!1;c.remove(o);if(a.length>0){var l=Array.prototype.findIndex.call(a,(function(t){return t.selected}));-1===l&&(a[0].selected=!0)}r.setValue(i,{value:w(!0),items:S(t)});P=w(!1)},clear:function clear(t){for(;0!==c.length;)c.remove(0);r.setValue(i,{value:null,items:[]});P=w(!1);window.updateAngularFormValue(i,{value:P})},insert:function insert(t){var a=t.detail.insert,o=a.index,l=a.displayValue,u=a.exportValue,d=c.children[o],h=document.createElement("option");h.textContent=l;h.value=u;d?d.before(h):c.append(h);r.setValue(i,{value:w(!0),items:S(t)});P=w(!1);window.updateAngularFormValue(i,{value:P})},items:function items(t){for(var items=t.detail.items;0!==c.length;)c.remove(0);var a,o=_createForOfIteratorHelper(items);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=l.displayValue,d=l.exportValue,h=document.createElement("option");h.textContent=u;h.value=d;c.append(h)}}catch(t){o.e(t)}finally{o.f()}c.options.length>0&&(c.options[0].selected=!0);r.setValue(i,{value:w(!0),items:S(t)});P=w(!1);window.updateAngularFormValue(i,{value:P})},indices:function indices(t){var a,indices=new Set(t.detail.indices),o=_createForOfIteratorHelper(t.target.options);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.selected=indices.has(l.index)}}catch(t){o.e(t)}finally{o.f()}r.setValue(i,{value:w(!0)});P=w(!1);window.updateAngularFormValue(i,{value:P})},editable:function editable(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(o,a)}));c.addEventListener("input",(function(a){var o,l=w(!0);r.setValue(i,{value:l});window.updateAngularFormValue(i,{value:l});a.preventDefault();null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:i,name:"Keystroke",value:P,changeEx:l,willCommit:!1,commitKey:1,keyDown:!1}})}));this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(function(t){return t.target.value}))}else c.addEventListener("input",(function(t){r.setValue(i,{value:w(!0)});window.updateAngularFormValue(i,{value:w(!0)})}));this.data.combo&&this._setTextStyle(c);this._setBackgroundColor(c);this._setDefaultPropertiesFromJS(c);this.container.append(c);return this.container}}]);return ChoiceWidgetAnnotationElement}(w),E=function(t){_inherits(PopupAnnotationElement,t);var r=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(t){var i,a,o;_classCallCheck(this,PopupAnnotationElement);var l=t.data,c=!PopupAnnotationElement.IGNORE_TYPES.has(l.parentType)&&!!(null!==(i=l.titleObj)&&void 0!==i&&i.str||null!==(a=l.contentsObj)&&void 0!==a&&a.str||null!==(o=l.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:c})}_createClass(PopupAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("popupAnnotation");var t=this.layer.querySelectorAll('[data-annotation-id="'.concat(this.data.parentId,'"]'));if(0===t.length)return this.container;var r=new T({container:this.container,trigger:Array.from(t),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),i=this.page,o=a.Util.normalizeRect([this.data.parentRect[0],i.view[3]-this.data.parentRect[1]+i.view[1],this.data.parentRect[2],i.view[3]-this.data.parentRect[3]+i.view[1]]),l=o[0]+this.data.parentRect[2]-this.data.parentRect[0],c=o[1],u=this.viewport.rawDims,d=u.pageWidth,h=u.pageHeight,p=u.pageX,v=u.pageY;this.container.style.left="".concat(100*(l-p)/d,"%");this.container.style.top="".concat(100*(c-v)/h,"%");this.container.append(r.render());return this.container}}]);return PopupAnnotationElement}(v);_defineProperty(E,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));var T=function(){function PopupElement(t){_classCallCheck(this,PopupElement);this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.titleObj=t.titleObj;this.modificationDate=t.modificationDate;this.contentsObj=t.contentsObj;this.richText=t.richText;this.hideWrapper=t.hideWrapper||!1;this.pinned=!1}_createClass(PopupElement,[{key:"render",value:function render(){var t,r,i=document.createElement("div");i.classList.add("popupWrapper");this.hideElement=this.hideWrapper?i:this.container;this.hideElement.hidden=!0;var l=document.createElement("div");l.classList.add("popup");var c=this.color;if(c){var d=.7*(255-c[0])+c[0],h=.7*(255-c[1])+c[1],p=.7*(255-c[2])+c[2];l.style.backgroundColor=a.Util.makeHexColor(0|d,0|h,0|p)}var v=document.createElement("h1");v.dir=this.titleObj.dir;v.textContent=this.titleObj.str;l.append(v);var y=o.PDFDateString.toDateObject(this.modificationDate);if(y){var g=document.createElement("span");g.classList.add("popupDate");g.textContent="{{date}}, {{time}}";g.dataset.l10nId="annotation_date_string";g.dataset.l10nArgs=JSON.stringify({date:y.toLocaleDateString(),time:y.toLocaleTimeString()});l.append(g)}if(null===(t=this.richText)||void 0===t||!t.str||null!==(r=this.contentsObj)&&void 0!==r&&r.str&&this.contentsObj.str!==this.richText.str){var m=this._formatContents(this.contentsObj);l.append(m)}else{u.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:l});l.lastChild.classList.add("richText","popupContent")}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var b,w=_createForOfIteratorHelper(this.trigger);try{for(w.s();!(b=w.n()).done;){var P=b.value;P.addEventListener("click",this._toggle.bind(this));P.addEventListener("mouseover",this._show.bind(this,!1));P.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(t){w.e(t)}finally{w.f()}l.addEventListener("click",this._hide.bind(this,!0));i.append(l);return i}},{key:"_formatContents",value:function _formatContents(t){var r=t.str,i=t.dir,a=document.createElement("p");a.classList.add("popupContent");a.dir=i;for(var o=r.split(/(?:\r\n?|\n)/),l=0,c=o.length;l<c;++l){var u=o[l];a.append(document.createTextNode(u));l<c-1&&a.append(document.createElement("br"))}return a}},{key:"_toggle",value:function _toggle(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function _show(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.pinned=!0);if(this.hideElement.hidden){this.hideElement.hidden=!1;this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3}}},{key:"_hide",value:function _hide(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.pinned=!1);if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=!0;this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3}}}]);return PopupElement}(),C=function(t){_inherits(FreeTextAnnotationElement,t);var r=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(t){var i,a,o,l;_classCallCheck(this,FreeTextAnnotationElement);var c=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);(l=r.call(this,t,{isRenderable:c,ignoreBorder:!0})).textContent=t.data.textContent;return l}_createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("freeTextAnnotation");if(this.textContent){var t=document.createElement("div");t.classList.add("annotationTextContent");t.setAttribute("role","comment");var r,i=_createForOfIteratorHelper(this.textContent);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=document.createElement("span");o.textContent=a;t.append(o)}}catch(t){i.e(t)}finally{i.f()}this.container.append(t)}this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return FreeTextAnnotationElement}(v),I=function(t){_inherits(LineAnnotationElement,t);var r=_createSuper(LineAnnotationElement);function LineAnnotationElement(t){var i,a,o;_classCallCheck(this,LineAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("lineAnnotation");var t=this.data,r=getRectDims(t.rect),i=r.width,a=r.height,o=this.svgFactory.create(i,a,!0),l=this.svgFactory.createElement("svg:line");l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]);l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]);l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]);l.setAttribute("stroke-width",t.borderStyle.width||1);l.setAttribute("stroke","transparent");l.setAttribute("fill","transparent");o.append(l);this.container.append(o);this._createPopup(l,t);return this.container}}]);return LineAnnotationElement}(v),O=function(t){_inherits(SquareAnnotationElement,t);var r=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(t){var i,a,o;_classCallCheck(this,SquareAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("squareAnnotation");var t=this.data,r=getRectDims(t.rect),i=r.width,a=r.height,o=this.svgFactory.create(i,a,!0),l=t.borderStyle.width,c=this.svgFactory.createElement("svg:rect");c.setAttribute("x",l/2);c.setAttribute("y",l/2);c.setAttribute("width",i-l);c.setAttribute("height",a-l);c.setAttribute("stroke-width",l||1);c.setAttribute("stroke","transparent");c.setAttribute("fill","transparent");o.append(c);this.container.append(o);this._createPopup(c,t);return this.container}}]);return SquareAnnotationElement}(v),M=function(t){_inherits(CircleAnnotationElement,t);var r=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(t){var i,a,o;_classCallCheck(this,CircleAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("circleAnnotation");var t=this.data,r=getRectDims(t.rect),i=r.width,a=r.height,o=this.svgFactory.create(i,a,!0),l=t.borderStyle.width,c=this.svgFactory.createElement("svg:ellipse");c.setAttribute("cx",i/2);c.setAttribute("cy",a/2);c.setAttribute("rx",i/2-l/2);c.setAttribute("ry",a/2-l/2);c.setAttribute("stroke-width",l||1);c.setAttribute("stroke","transparent");c.setAttribute("fill","transparent");o.append(c);this.container.append(o);this._createPopup(c,t);return this.container}}]);return CircleAnnotationElement}(v),L=function(t){_inherits(PolylineAnnotationElement,t);var r=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(t){var i,a,o,l;_classCallCheck(this,PolylineAnnotationElement);var c=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);(l=r.call(this,t,{isRenderable:c,ignoreBorder:!0})).containerClassName="polylineAnnotation";l.svgElementName="svg:polyline";return l}_createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var t,r=this.data,i=getRectDims(r.rect),a=i.width,o=i.height,l=this.svgFactory.create(a,o,!0),c=[],u=_createForOfIteratorHelper(r.vertices);try{for(u.s();!(t=u.n()).done;){var d=t.value,h=d.x-r.rect[0],p=r.rect[3]-d.y;c.push(h+","+p)}}catch(t){u.e(t)}finally{u.f()}c=c.join(" ");var v=this.svgFactory.createElement(this.svgElementName);v.setAttribute("points",c);v.setAttribute("stroke-width",r.borderStyle.width||1);v.setAttribute("stroke","transparent");v.setAttribute("fill","transparent");l.append(v);this.container.append(l);this._createPopup(v,r);return this.container}}]);return PolylineAnnotationElement}(v),R=function(t){_inherits(PolygonAnnotationElement,t);var r=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(t){var i;_classCallCheck(this,PolygonAnnotationElement);(i=r.call(this,t)).containerClassName="polygonAnnotation";i.svgElementName="svg:polygon";return i}return _createClass(PolygonAnnotationElement)}(L),D=function(t){_inherits(CaretAnnotationElement,t);var r=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(t){var i,a,o;_classCallCheck(this,CaretAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(CaretAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("caretAnnotation");this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return CaretAnnotationElement}(v),G=function(t){_inherits(InkAnnotationElement,t);var r=_createSuper(InkAnnotationElement);function InkAnnotationElement(t){var i,a,o,l;_classCallCheck(this,InkAnnotationElement);var c=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);(l=r.call(this,t,{isRenderable:c,ignoreBorder:!0})).containerClassName="inkAnnotation";l.svgElementName="svg:polyline";return l}_createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var t,r=this.data,i=getRectDims(r.rect),a=i.width,o=i.height,l=this.svgFactory.create(a,o,!0),c=_createForOfIteratorHelper(r.inkLists);try{for(c.s();!(t=c.n()).done;){var u,d=t.value,h=[],p=_createForOfIteratorHelper(d);try{for(p.s();!(u=p.n()).done;){var v=u.value,y=v.x-r.rect[0],g=r.rect[3]-v.y;h.push("".concat(y,",").concat(g))}}catch(t){p.e(t)}finally{p.f()}h=h.join(" ");var m=this.svgFactory.createElement(this.svgElementName);m.setAttribute("points",h);m.setAttribute("stroke-width",r.borderStyle.width||1);m.setAttribute("stroke","transparent");m.setAttribute("fill","transparent");this._createPopup(m,r);l.append(m)}}catch(t){c.e(t)}finally{c.f()}this.container.append(l);return this.container}}]);return InkAnnotationElement}(v),j=function(t){_inherits(HighlightAnnotationElement,t);var r=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(t){var i,a,o;_classCallCheck(this,HighlightAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(HighlightAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("highlightAnnotation");this.container.classList.add("highlightAnnotation");return this.container}}]);return HighlightAnnotationElement}(v),N=function(t){_inherits(UnderlineAnnotationElement,t);var r=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(t){var i,a,o;_classCallCheck(this,UnderlineAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("underlineAnnotation");this.container.classList.add("underlineAnnotation");return this.container}}]);return UnderlineAnnotationElement}(v),B=function(t){_inherits(SquigglyAnnotationElement,t);var r=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(t){var i,a,o;_classCallCheck(this,SquigglyAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation");this.container.classList.add("squigglyAnnotation");return this.container}}]);return SquigglyAnnotationElement}(v),V=function(t){_inherits(StrikeOutAnnotationElement,t);var r=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(t){var i,a,o;_classCallCheck(this,StrikeOutAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.classList.add("strikeoutAnnotation");return this.container}}]);return StrikeOutAnnotationElement}(v),W=function(t){_inherits(StampAnnotationElement,t);var r=_createSuper(StampAnnotationElement);function StampAnnotationElement(t){var i,a,o;_classCallCheck(this,StampAnnotationElement);var l=!!(t.data.hasPopup||null!==(i=t.data.titleObj)&&void 0!==i&&i.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(StampAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("stampAnnotation");this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return StampAnnotationElement}(v),H=function(t){_inherits(FileAttachmentAnnotationElement,t);var r=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(t){var i,a;_classCallCheck(this,FileAttachmentAnnotationElement);var l=(a=r.call(this,t,{isRenderable:!0})).data.file,c=l.filename,u=l.content;a.filename=(0,o.getFilenameFromUrl)(c,!0);a.content=u;null===(i=a.linkService.eventBus)||void 0===i||i.dispatch("fileattachmentannotation",{source:_assertThisInitialized(a),filename:c,content:u});return a}_createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){var t,r,i;this.container.classList.add("fileAttachmentAnnotation");this.data.hasAppearance?i=document.createElement("div"):(i=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(this.data.name)?"paperclip":"pushpin",".svg");i.classList.add("popupTriggerArea");i.addEventListener("dblclick",this._download.bind(this));!this.data.hasPopup&&(null!==(t=this.data.titleObj)&&void 0!==t&&t.str||null!==(r=this.data.contentsObj)&&void 0!==r&&r.str||this.data.richText)&&this._createPopup(i,this.data);this.container.append(i);return this.container}},{key:"_download",value:function _download(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.container,this.content,this.filename)}}]);return FileAttachmentAnnotationElement}(v),U=function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer)}_createClass(AnnotationLayer,null,[{key:"render",value:function render(t){var r=t.annotations,i=t.div,c=t.viewport,u=t.accessibilityManager;(0,o.setLayerDimensions)(i,c);var d,h={data:null,layer:i,page:t.page,viewport:c,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new o.DOMSVGFactory,annotationStorage:t.annotationStorage||new l.AnnotationStorage,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects},v=0,y=_createForOfIteratorHelper(r);try{for(y.s();!(d=y.n()).done;){var g=d.value;if(!g.noHTML){if(g.annotationType!==a.AnnotationType.POPUP){var m=getRectDims(g.rect),b=m.width,w=m.height;if(b<=0||w<=0)continue}h.data=g;var P=p.create(h);if(P.isRenderable){var S=P.render();g.hidden&&(S.style.visibility="hidden");if(Array.isArray(S)){var k,x=_createForOfIteratorHelper(S);try{for(x.s();!(k=x.n()).done;){var A=k.value;A.style.zIndex=v++;_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,A,g.id,i,u)}}catch(t){x.e(t)}finally{x.f()}}else{S.style.zIndex=v++;P instanceof E?i.prepend(S):_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,S,g.id,i,u)}}}}}catch(t){y.e(t)}finally{y.f()}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,i,t.annotationCanvasMap)}},{key:"update",value:function update(t){var r=t.annotationCanvasMap,i=t.div,a=t.viewport;(0,o.setLayerDimensions)(i,{rotation:a.rotation});_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,i,r);i.hidden=!1}}]);return AnnotationLayer}();r.AnnotationLayer=U;function _appendElement(t,r,i,a){var l=t.firstChild||t;l.id="".concat(o.AnnotationPrefix).concat(r);i.append(t);null==a||a.moveElementInDOM(i,t,l,!1)}function _setAnnotationCanvasMap(t,r){if(r){var i,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var o=_slicedToArray(i.value,2),l=o[0],c=o[1],u=t.querySelector('[data-annotation-id="'.concat(l,'"]'));if(u){var d=u.firstChild;d?"CANVAS"===d.nodeName?d.replaceWith(c):d.before(c):u.append(c)}}}catch(t){a.e(t)}finally{a.f()}r.clear()}}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ColorConverters=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}var i=function(){function ColorConverters(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ColorConverters)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(t){var r=_slicedToArray(t,4),i=r[0],a=r[1],o=r[2],l=r[3];return["G",1-Math.min(1,.3*i+.59*o+.11*a+l)]}},{key:"G_CMYK",value:function G_CMYK(t){return["CMYK",0,0,0,1-_slicedToArray(t,1)[0]]}},{key:"G_RGB",value:function G_RGB(t){var r=_slicedToArray(t,1)[0];return["RGB",r,r,r]}},{key:"G_HTML",value:function G_HTML(t){var r=makeColorComp(_slicedToArray(t,1)[0]);return"#".concat(r).concat(r).concat(r)}},{key:"RGB_G",value:function RGB_G(t){var r=_slicedToArray(t,3);return["G",.3*r[0]+.59*r[1]+.11*r[2]]}},{key:"RGB_HTML",value:function RGB_HTML(t){var r=_slicedToArray(t,3),i=r[0],a=r[1],o=r[2],l=makeColorComp(i),c=makeColorComp(a),u=makeColorComp(o);return"#".concat(l).concat(c).concat(u)}},{key:"T_HTML",value:function T_HTML(){return"#00000000"}},{key:"CMYK_RGB",value:function CMYK_RGB(t){var r=_slicedToArray(t,4),i=r[0],a=r[1],o=r[2],l=r[3];return["RGB",1-Math.min(1,i+l),1-Math.min(1,o+l),1-Math.min(1,a+l)]}},{key:"CMYK_HTML",value:function CMYK_HTML(t){var r=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(r)}},{key:"RGB_CMYK",value:function RGB_CMYK(t){var r=_slicedToArray(t,3),i=1-r[0],a=1-r[1],o=1-r[2];return["CMYK",i,a,o,Math.min(i,a,o)]}}]);return ColorConverters}();r.ColorConverters=i},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.XfaLayer=void 0;var a=i(154);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var o=function(){function XfaLayer(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaLayer)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaLayer,null,[{key:"setupStorage",value:function setupStorage(t,r,i,a,o){var l=window.getFormValueFromAngular(t);l.value&&a.setValue(r,l);var c=l.value?l:a.getValue(r,{value:null});window.registerXFAField(t,c);t.addEventListener("updateFromAngular",(function(t){return a.setValue(r,{value:t.detail})}));switch(i.name){case"textarea":null!==c.value&&(t.textContent=c.value);if("print"===o)break;t.addEventListener("input",(function(i){window.updateAngularFormValue(t,{value:i.target.value});a.setValue(r,{value:i.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):t.removeAttribute("checked");if("print"===o)break;t.addEventListener("change",(function(i){window.updateAngularFormValue(t,{value:i.target.checked?i.target.getAttribute("xfaOn"):i.target.getAttribute("xfaOff")});a.setValue(r,{value:i.target.checked?i.target.getAttribute("xfaOn"):i.target.getAttribute("xfaOff")})}))}else{null!==c.value&&t.setAttribute("value",c.value);if("print"===o)break;t.addEventListener("input",(function(i){window.updateAngularFormValue(t,{value:i.target.value});a.setValue(r,{value:i.target.value})}))}break;case"select":if(null!==c.value){i.attributes.value=c.value;var u,d=_createForOfIteratorHelper(i.children);try{for(d.s();!(u=d.n()).done;){var h=u.value;h.attributes.value===c.value?h.attributes.selected=!0:delete h.attributes.selected}}catch(t){d.e(t)}finally{d.f()}}t.addEventListener("input",(function(i){var o=i.target.options,l=-1===o.selectedIndex?"":o[o.selectedIndex].value;window.updateAngularFormValue(t,{value:l});a.setValue(r,{value:l})}))}}},{key:"setAttributes",value:function setAttributes(t){var r=t.html,i=t.element,a=t.storage,o=void 0===a?null:a,l=t.intent,c=t.linkService,u=i.attributes,d=r instanceof HTMLAnchorElement;"radio"===u.type&&(u.name="".concat(u.name,"-").concat(l));for(var h=0,p=Object.entries(u);h<p.length;h++){var v=_slicedToArray(p[h],2),y=v[0],g=v[1];if(null!=g)switch(y){case"class":g.length&&r.setAttribute(y,g.join(" "));break;case"dataId":break;case"id":r.setAttribute("data-element-id",g);break;case"style":Object.assign(r.style,g);break;case"textContent":r.textContent=g;break;default:(!d||"href"!==y&&"newWindow"!==y)&&r.setAttribute(y,g)}}d&&c.addLinkAttributes(r,u.href,u.newWindow);o&&u.dataId&&this.setupStorage(r,u.dataId,i,o)}},{key:"render",value:function render(t){var r=t.annotationStorage,i=t.linkService,o=t.xfaHtml,l=t.intent||"display",c=document.createElement(o.name);o.attributes&&this.setAttributes({html:c,element:o,intent:l,linkService:i});var u=[[o,-1,c]],d=t.div;d.append(c);if(t.viewport){var h="matrix(".concat(t.viewport.transform.join(","),")");d.style.transform=h}"richText"!==l&&d.setAttribute("class","xfaLayer xfaFont");for(var p=[];u.length>0;){var v,y=_slicedToArray(u.at(-1),3),g=y[0],m=y[1],b=y[2];if(m+1!==g.children.length){var w=g.children[++u.at(-1)[1]];if(null!==w){var P=w.name;if("#text"!==P){var S=void 0;S=null!=w&&null!==(v=w.attributes)&&void 0!==v&&v.xmlns?document.createElementNS(w.attributes.xmlns,P):document.createElement(P);b.append(S);w.attributes&&this.setAttributes({html:S,element:w,storage:r,intent:l,linkService:i});if(w.children&&w.children.length>0)u.push([w,-1,S]);else if(w.value){var k=document.createTextNode(w.value);a.XfaText.shouldBuildText(P)&&p.push(k);S.append(k)}}else{var x=document.createTextNode(w.value);p.push(x);b.append(x)}}}else u.pop()}var A,E=_createForOfIteratorHelper(d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(E.s();!(A=E.n()).done;){A.value.setAttribute("readOnly",!0)}}catch(t){E.e(t)}finally{E.f()}return{textDivs:p}}},{key:"update",value:function update(t){var r="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=r;t.div.hidden=!1}}]);return XfaLayer}();r.XfaLayer=o},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.SVGGraphics=void 0;var a=i(141),o=i(1);i(145);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var l=_createClass((function SVGGraphics(){_classCallCheck(this,SVGGraphics);(0,o.unreachable)("Not implemented: SVGGraphics")}));r.SVGGraphics=l;var c=function pf(t){if(Number.isInteger(t))return t.toString();var r=t.toFixed(10),i=r.length-1;if("0"!==r[i])return r;do{i--}while("0"===r[i]);return r.substring(0,"."===r[i]?i:i+1)},u=function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(c(t[0])," ").concat(c(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var r=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(c(r),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(c(t[4])," ").concat(c(t[5]),")");return"matrix(".concat(c(t[0])," ").concat(c(t[1])," ").concat(c(t[2])," ").concat(c(t[3])," ").concat(c(t[4])," ")+"".concat(c(t[5]),")")},d={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},h=["butt","round","square"],p=["miter","round","bevel"],v=function createObjectURL(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!i)return URL.createObjectURL(new Blob([t],{type:r}));for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="data:".concat(r,";base64,"),l=0,c=t.length;l<c;l+=3){var u=255&t[l],d=255&t[l+1],h=255&t[l+2];o+=a[u>>2]+a[(3&u)<<4|d>>4]+a[l+1<c?(15&d)<<2|h>>6:64]+a[l+2<c?63&h:64]}return o},y=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),r=new Int32Array(256),i=0;i<256;i++){for(var a=i,l=0;l<8;l++)a=1&a?3988292384^a>>1&2147483647:a>>1&2147483647;r[i]=a}function writePngChunk(t,i,a,o){var l=o,c=i.length;a[l]=c>>24&255;a[l+1]=c>>16&255;a[l+2]=c>>8&255;a[l+3]=255&c;a[l+=4]=255&t.charCodeAt(0);a[l+1]=255&t.charCodeAt(1);a[l+2]=255&t.charCodeAt(2);a[l+3]=255&t.charCodeAt(3);l+=4;a.set(i,l);var u=function crc32(t,i,a){for(var o=-1,l=i;l<a;l++){var c=255&(o^t[l]);o=o>>>8^r[c]}return-1^o}(a,o+4,l+=i.length);a[l]=u>>24&255;a[l+1]=u>>16&255;a[l+2]=u>>8&255;a[l+3]=255&u}function deflateSync(t){return function deflateSyncUncompressed(t){var r=t.length,i=65535,a=Math.ceil(r/i),o=new Uint8Array(2+r+5*a+4),l=0;o[l++]=120;o[l++]=156;var c=0;for(;r>i;){o[l++]=0;o[l++]=255;o[l++]=255;o[l++]=0;o[l++]=0;o.set(t.subarray(c,c+i),l);l+=i;c+=i;r-=i}o[l++]=1;o[l++]=255&r;o[l++]=r>>8&255;o[l++]=255&~r;o[l++]=(65535&~r)>>8&255;o.set(t.subarray(c),l);l+=t.length-c;var u=function adler32(t,r,i){for(var a=1,o=0,l=r;l<i;++l)o=(o+(a=(a+(255&t[l]))%65521))%65521;return o<<16|a}(t,0,t.length);o[l++]=u>>24&255;o[l++]=u>>16&255;o[l++]=u>>8&255;o[l++]=255&u;return o}(t)}return function convertImgDataToPng(r,i,a){return function encode(r,i,a,l){var c,u,d,h=r.width,p=r.height,y=r.data;switch(i){case o.ImageKind.GRAYSCALE_1BPP:u=0;c=1;d=h+7>>3;break;case o.ImageKind.RGB_24BPP:u=2;c=8;d=3*h;break;case o.ImageKind.RGBA_32BPP:u=6;c=8;d=4*h;break;default:throw new Error("invalid format")}for(var g=new Uint8Array((1+d)*p),m=0,b=0,w=0;w<p;++w){g[m++]=0;g.set(y.subarray(b,b+d),m);b+=d;m+=d}if(i===o.ImageKind.GRAYSCALE_1BPP&&l){m=0;for(var P=0;P<p;P++){m++;for(var S=0;S<d;S++)g[m++]^=255}}var k=new Uint8Array([h>>24&255,h>>16&255,h>>8&255,255&h,p>>24&255,p>>16&255,p>>8&255,255&p,c,u,0,0,0]),x=deflateSync(g),A=t.length+36+k.length+x.length,E=new Uint8Array(A),T=0;E.set(t,T);writePngChunk("IHDR",k,E,T+=t.length);writePngChunk("IDATA",x,E,T+=12+k.length);T+=12+x.length;writePngChunk("IEND",new Uint8Array(0),E,T);return v(E,"image/png",a)}(r,void 0===r.kind?o.ImageKind.GRAYSCALE_1BPP:r.kind,i,a)}}(),g=function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState);this.fontSizeScale=1;this.fontWeight=d.fontWeight;this.fontSize=0;this.textMatrix=o.IDENTITY_MATRIX;this.fontMatrix=o.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=o.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=d.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}_createClass(SVGExtraState,[{key:"clone",value:function clone(){return Object.create(this)}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t;this.y=r}}]);return SVGExtraState}(),m=0,b=0,w=0;r.SVGGraphics=l=function(){function SVGGraphics(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,SVGGraphics);(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future.");this.svgFactory=new a.DOMSVGFactory;this.current=new g;this.transformMatrix=o.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=t;this.objs=r;this.pendingClip=null;this.pendingEOFill=!1;this.embedFonts=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!i;this._operatorIdMapping=[];for(var l in o.OPS)this._operatorIdMapping[o.OPS[l]]=l}_createClass(SVGGraphics,[{key:"getObject",value:function getObject(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):r}},{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t);this.current=t.clone()}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}},{key:"group",value:function group(t){this.save();this.executeOpTree(t);this.restore()}},{key:"loadDependencies",value:function loadDependencies(t){for(var r=this,i=t.fnArray,a=t.argsArray,l=0,c=i.length;l<c;l++)if(i[l]===o.OPS.dependency){var u,d=_createForOfIteratorHelper(a[l]);try{var h=function _loop(){var t=u.value,i=t.startsWith("g_")?r.commonObjs:r.objs,a=new Promise((function(r){i.get(t,r)}));r.current.dependencies.push(a)};for(d.s();!(u=d.n()).done;)h()}catch(t){d.e(t)}finally{d.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function transform(t,r,i,a,l,c){var u=[t,r,i,a,l,c];this.transformMatrix=o.Util.transform(this.transformMatrix,u);this.tgrp=null}},{key:"getSVG",value:function getSVG(t,r){var i=this;this.viewport=r;var a=this._initialize(r);return this.loadDependencies(t).then((function(){i.transformMatrix=o.IDENTITY_MATRIX;i.executeOpTree(i.convertOpList(t));return a}))}},{key:"convertOpList",value:function convertOpList(t){for(var r=this._operatorIdMapping,i=t.argsArray,a=t.fnArray,o=[],l=0,c=a.length;l<c;l++){var u=a[l];o.push({fnId:u,fn:r[u],args:i[l]})}return function opListToTree(t){var r,i=[],a=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;if("save"!==l.fn)"restore"===l.fn?i=a.pop():i.push(l);else{i.push({fnId:92,fn:"group",items:[]});a.push(i);i=i.at(-1).items}}}catch(t){o.e(t)}finally{o.f()}return i}(o)}},{key:"executeOpTree",value:function executeOpTree(t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,l=a.fn,c=a.fnId,u=a.args;switch(0|c){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(u);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(u[0],u[1]);break;case o.OPS.setFont:this.setFont(u);break;case o.OPS.showText:case o.OPS.showSpacedText:this.showText(u[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(u[0],u[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(u[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(u[0]);break;case o.OPS.setHScale:this.setHScale(u[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(u[0],u[1],u[2],u[3],u[4],u[5]);break;case o.OPS.setTextRise:this.setTextRise(u[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(u[0]);break;case o.OPS.setLineWidth:this.setLineWidth(u[0]);break;case o.OPS.setLineJoin:this.setLineJoin(u[0]);break;case o.OPS.setLineCap:this.setLineCap(u[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(u[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(u[0],u[1],u[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(u[0],u[1],u[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(u);break;case o.OPS.setFillColorN:this.setFillColorN(u);break;case o.OPS.shadingFill:this.shadingFill(u[0]);break;case o.OPS.setDash:this.setDash(u[0],u[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(u[0]);break;case o.OPS.setFlatness:this.setFlatness(u[0]);break;case o.OPS.setGState:this.setGState(u[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(u[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(u[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(u[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(u[0],u[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(u[0],u[1],u[2],u[3],u[4],u[5]);break;case o.OPS.constructPath:this.constructPath(u[0],u[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,o.warn)("Unimplemented operator ".concat(l))}}}catch(t){i.e(t)}finally{i.f()}}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,i,a,o,l){var u=this.current;u.textMatrix=u.lineMatrix=[t,r,i,a,o,l];u.textMatrixScale=Math.hypot(t,r);u.x=u.lineX=0;u.y=u.lineY=0;u.xcoords=[];u.ycoords=[];u.tspan=this.svgFactory.createElement("svg:tspan");u.tspan.setAttributeNS(null,"font-family",u.fontFamily);u.tspan.setAttributeNS(null,"font-size","".concat(c(u.fontSize),"px"));u.tspan.setAttributeNS(null,"y",c(-u.y));u.txtElement=this.svgFactory.createElement("svg:text");u.txtElement.append(u.tspan)}},{key:"beginText",value:function beginText(){var t=this.current;t.x=t.lineX=0;t.y=t.lineY=0;t.textMatrix=o.IDENTITY_MATRIX;t.lineMatrix=o.IDENTITY_MATRIX;t.textMatrixScale=1;t.tspan=this.svgFactory.createElement("svg:tspan");t.txtElement=this.svgFactory.createElement("svg:text");t.txtgrp=this.svgFactory.createElement("svg:g");t.xcoords=[];t.ycoords=[]}},{key:"moveText",value:function moveText(t,r){var i=this.current;i.x=i.lineX+=t;i.y=i.lineY+=r;i.xcoords=[];i.ycoords=[];i.tspan=this.svgFactory.createElement("svg:tspan");i.tspan.setAttributeNS(null,"font-family",i.fontFamily);i.tspan.setAttributeNS(null,"font-size","".concat(c(i.fontSize),"px"));i.tspan.setAttributeNS(null,"y",c(-i.y))}},{key:"showText",value:function showText(t){var r=this.current,i=r.font,a=r.fontSize;if(0!==a){var l,h=r.fontSizeScale,p=r.charSpacing,v=r.wordSpacing,y=r.fontDirection,g=r.textHScale*y,m=i.vertical,b=m?1:-1,w=i.defaultVMetrics,P=a*r.fontMatrix[0],S=0,k=_createForOfIteratorHelper(t);try{for(k.s();!(l=k.n()).done;){var x=l.value;if(null!==x)if("number"!=typeof x){var A=(x.isSpace?v:0)+p,E=x.fontChar,T=void 0,C=void 0,I=x.width;if(m){var O=void 0,M=x.vmetric||w;O=-(O=x.vmetric?M[1]:.5*I)*P;var L=M[2]*P;I=M?-M[0]:I;T=O/h;C=(S+L)/h}else{T=S/h;C=0}if(x.isInFont||i.missingFile){r.xcoords.push(r.x+T);m&&r.ycoords.push(-r.y+C);r.tspan.textContent+=E}S+=m?I*P-A*y:I*P+A*y}else S+=b*x*a/1e3;else S+=y*v}}catch(t){k.e(t)}finally{k.f()}r.tspan.setAttributeNS(null,"x",r.xcoords.map(c).join(" "));m?r.tspan.setAttributeNS(null,"y",r.ycoords.map(c).join(" ")):r.tspan.setAttributeNS(null,"y",c(-r.y));m?r.y-=S:r.x+=S*g;r.tspan.setAttributeNS(null,"font-family",r.fontFamily);r.tspan.setAttributeNS(null,"font-size","".concat(c(r.fontSize),"px"));r.fontStyle!==d.fontStyle&&r.tspan.setAttributeNS(null,"font-style",r.fontStyle);r.fontWeight!==d.fontWeight&&r.tspan.setAttributeNS(null,"font-weight",r.fontWeight);var R=r.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(R===o.TextRenderingMode.FILL||R===o.TextRenderingMode.FILL_STROKE){r.fillColor!==d.fillColor&&r.tspan.setAttributeNS(null,"fill",r.fillColor);r.fillAlpha<1&&r.tspan.setAttributeNS(null,"fill-opacity",r.fillAlpha)}else r.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?r.tspan.setAttributeNS(null,"fill","transparent"):r.tspan.setAttributeNS(null,"fill","none");if(R===o.TextRenderingMode.STROKE||R===o.TextRenderingMode.FILL_STROKE){var D=1/(r.textMatrixScale||1);this._setStrokeAttributes(r.tspan,D)}var G=r.textMatrix;0!==r.textRise&&((G=G.slice())[5]+=r.textRise);r.txtElement.setAttributeNS(null,"transform","".concat(u(G)," scale(").concat(c(g),", -1)"));r.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");r.txtElement.append(r.tspan);r.txtgrp.append(r.txtElement);this._ensureTransformGroup().append(r.txtElement)}}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)}},{key:"addFontStyle",value:function addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.append(this.cssStyle)}var r=v(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(r,"); }\n")}},{key:"setFont",value:function setFont(t){var r=this.current,i=this.commonObjs.get(t[0]),a=t[1];r.font=i;if(this.embedFonts&&!i.missingFile&&!this.embeddedFonts[i.loadedName]){this.addFontStyle(i);this.embeddedFonts[i.loadedName]=i}r.fontMatrix=i.fontMatrix||o.FONT_IDENTITY_MATRIX;var l="normal";i.black?l="900":i.bold&&(l="bold");var u=i.italic?"italic":"normal";if(a<0){a=-a;r.fontDirection=-1}else r.fontDirection=1;r.fontSize=a;r.fontFamily=i.loadedName;r.fontWeight=l;r.fontStyle=u;r.tspan=this.svgFactory.createElement("svg:tspan");r.tspan.setAttributeNS(null,"y",c(-r.y));r.xcoords=[];r.ycoords=[]}},{key:"endText",value:function endText(){var t,r=this.current;if(r.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=r.txtElement)&&void 0!==t&&t.hasChildNodes()){r.element=r.txtElement;this.clip("nonzero");this.endPath()}}},{key:"setLineWidth",value:function setLineWidth(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function setLineCap(t){this.current.lineCap=h[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.current.lineJoin=p[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function setStrokeAlpha(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,i){this.current.strokeColor=o.Util.makeHexColor(t,r,i)}},{key:"setFillAlpha",value:function setFillAlpha(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,i){this.current.fillColor=o.Util.makeHexColor(t,r,i);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}},{key:"setStrokeColorN",value:function setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function shadingFill(t){var r=this.viewport.width,i=this.viewport.height,a=o.Util.inverseTransform(this.transformMatrix),l=o.Util.applyTransform([0,0],a),c=o.Util.applyTransform([0,i],a),u=o.Util.applyTransform([r,0],a),d=o.Util.applyTransform([r,i],a),h=Math.min(l[0],c[0],u[0],d[0]),p=Math.min(l[1],c[1],u[1],d[1]),v=Math.max(l[0],c[0],u[0],d[0]),y=Math.max(l[1],c[1],u[1],d[1]),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",h);g.setAttributeNS(null,"y",p);g.setAttributeNS(null,"width",v-h);g.setAttributeNS(null,"height",y-p);g.setAttributeNS(null,"fill",this._makeShadingPattern(t));this.current.fillAlpha<1&&g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha);this._ensureTransformGroup().append(g)}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function _makeTilingPattern(t){var r=t[1],i=t[2],a=t[3]||o.IDENTITY_MATRIX,l=_slicedToArray(t[4],4),c=l[0],u=l[1],d=l[2],h=l[3],p=t[5],v=t[6],y=t[7],g="shading".concat(w++),m=_slicedToArray(o.Util.normalizeRect([].concat(_toConsumableArray(o.Util.applyTransform([c,u],a)),_toConsumableArray(o.Util.applyTransform([d,h],a)))),4),b=m[0],P=m[1],S=m[2],k=m[3],x=_slicedToArray(o.Util.singularValueDecompose2dScale(a),2),A=p*x[0],E=v*x[1],T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",g);T.setAttributeNS(null,"patternUnits","userSpaceOnUse");T.setAttributeNS(null,"width",A);T.setAttributeNS(null,"height",E);T.setAttributeNS(null,"x","".concat(b));T.setAttributeNS(null,"y","".concat(P));var C=this.svg,I=this.transformMatrix,O=this.current.fillColor,M=this.current.strokeColor,L=this.svgFactory.create(S-b,k-P);this.svg=L;this.transformMatrix=a;if(2===y){var R=o.Util.makeHexColor.apply(o.Util,_toConsumableArray(r));this.current.fillColor=R;this.current.strokeColor=R}this.executeOpTree(this.convertOpList(i));this.svg=C;this.transformMatrix=I;this.current.fillColor=O;this.current.strokeColor=M;T.append(L.childNodes[0]);this.defs.append(T);return"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function _makeShadingPattern(t){"string"==typeof t&&(t=this.objs.get(t));switch(t[0]){case"RadialAxial":var r,i="shading".concat(w++),a=t[3];switch(t[1]){case"axial":var l=t[4],c=t[5];(r=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",i);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"x1",l[0]);r.setAttributeNS(null,"y1",l[1]);r.setAttributeNS(null,"x2",c[0]);r.setAttributeNS(null,"y2",c[1]);break;case"radial":var u=t[4],d=t[5],h=t[6],p=t[7];(r=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",i);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"cx",d[0]);r.setAttributeNS(null,"cy",d[1]);r.setAttributeNS(null,"r",p);r.setAttributeNS(null,"fx",u[0]);r.setAttributeNS(null,"fy",u[1]);r.setAttributeNS(null,"fr",h);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var v,y=_createForOfIteratorHelper(a);try{for(y.s();!(v=y.n()).done;){var g=v.value,m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",g[0]);m.setAttributeNS(null,"stop-color",g[1]);r.append(m)}}catch(t){y.e(t)}finally{y.f()}this.defs.append(r);return"url(#".concat(i,")");case"Mesh":(0,o.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function setDash(t,r){this.current.dashArray=t;this.current.dashPhase=r}},{key:"constructPath",value:function constructPath(t,r){var i,a=this.current,l=a.x,u=a.y,d=[],h=0,p=_createForOfIteratorHelper(t);try{for(p.s();!(i=p.n()).done;){switch(0|i.value){case o.OPS.rectangle:l=r[h++];u=r[h++];var v=r[h++],y=r[h++],g=l+v,m=u+y;d.push("M",c(l),c(u),"L",c(g),c(u),"L",c(g),c(m),"L",c(l),c(m),"Z");break;case o.OPS.moveTo:l=r[h++];u=r[h++];d.push("M",c(l),c(u));break;case o.OPS.lineTo:l=r[h++];u=r[h++];d.push("L",c(l),c(u));break;case o.OPS.curveTo:l=r[h+4];u=r[h+5];d.push("C",c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3]),c(l),c(u));h+=6;break;case o.OPS.curveTo2:d.push("C",c(l),c(u),c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3]));l=r[h+2];u=r[h+3];h+=4;break;case o.OPS.curveTo3:l=r[h+2];u=r[h+3];d.push("C",c(r[h]),c(r[h+1]),c(l),c(u),c(l),c(u));h+=4;break;case o.OPS.closePath:d.push("Z")}}}catch(t){p.e(t)}finally{p.f()}d=d.join(" ");if(a.path&&t.length>0&&t[0]!==o.OPS.rectangle&&t[0]!==o.OPS.moveTo)d=a.path.getAttributeNS(null,"d")+d;else{a.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().append(a.path)}a.path.setAttributeNS(null,"d",d);a.path.setAttributeNS(null,"fill","none");a.element=a.path;a.setCurrentPoint(l,u)}},{key:"endPath",value:function endPath(){var t=this.current;t.path=null;if(this.pendingClip)if(t.element){var r="clippath".concat(m++),i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",r);i.setAttributeNS(null,"transform",u(this.transformMatrix));var a=t.element.cloneNode(!0);"evenodd"===this.pendingClip?a.setAttributeNS(null,"clip-rule","evenodd"):a.setAttributeNS(null,"clip-rule","nonzero");this.pendingClip=null;i.append(a);this.defs.append(i);if(t.activeClipUrl){t.clipGroup=null;var o,l=_createForOfIteratorHelper(this.extraStack);try{for(l.s();!(o=l.n()).done;){o.value.clipGroup=null}}catch(t){l.e(t)}finally{l.f()}i.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(r,")");this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function clip(t){this.pendingClip=t}},{key:"closePath",value:function closePath(){var t=this.current;if(t.path){var r="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",r)}}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=_slicedToArray(r.value,2),l=a[0],c=a[1];switch(l){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c);break;case"CA":this.setStrokeAlpha(c);break;case"ca":this.setFillAlpha(c);break;default:(0,o.warn)("Unimplemented graphic state operator ".concat(l))}}}catch(t){i.e(t)}finally{i.f()}}},{key:"fill",value:function fill(){var t=this.current;if(t.element){t.element.setAttributeNS(null,"fill",t.fillColor);t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha);this.endPath()}}},{key:"stroke",value:function stroke(){var t=this.current;if(t.element){this._setStrokeAttributes(t.element);t.element.setAttributeNS(null,"fill","none");this.endPath()}}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.current,a=i.dashArray;1!==r&&a.length>0&&(a=a.map((function(t){return r*t})));t.setAttributeNS(null,"stroke",i.strokeColor);t.setAttributeNS(null,"stroke-opacity",i.strokeAlpha);t.setAttributeNS(null,"stroke-miterlimit",c(i.miterLimit));t.setAttributeNS(null,"stroke-linecap",i.lineCap);t.setAttributeNS(null,"stroke-linejoin",i.lineJoin);t.setAttributeNS(null,"stroke-width",c(r*i.lineWidth)+"px");t.setAttributeNS(null,"stroke-dasharray",a.map(c).join(" "));t.setAttributeNS(null,"stroke-dashoffset",c(r*i.dashPhase)+"px")}},{key:"eoFill",value:function eoFill(){var t;null===(t=this.current.element)||void 0===t||t.setAttributeNS(null,"fill-rule","evenodd");this.fill()}},{key:"fillStroke",value:function fillStroke(){this.stroke();this.fill()}},{key:"eoFillStroke",value:function eoFillStroke(){var t;null===(t=this.current.element)||void 0===t||t.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath();this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0");t.setAttributeNS(null,"y","0");t.setAttributeNS(null,"width","1px");t.setAttributeNS(null,"height","1px");t.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().append(t)}},{key:"paintImageXObject",value:function paintImageXObject(t){var r=this.getObject(t);r?this.paintInlineImageXObject(r):(0,o.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t,r){var i=t.width,a=t.height,o=y(t,this.forceDataSchema,!!r),l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0");l.setAttributeNS(null,"y","0");l.setAttributeNS(null,"width",c(i));l.setAttributeNS(null,"height",c(a));this.current.element=l;this.clip("nonzero");var u=this.svgFactory.createElement("svg:image");u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);u.setAttributeNS(null,"x","0");u.setAttributeNS(null,"y",c(-a));u.setAttributeNS(null,"width",c(i)+"px");u.setAttributeNS(null,"height",c(a)+"px");u.setAttributeNS(null,"transform","scale(".concat(c(1/i)," ").concat(c(-1/a),")"));r?r.append(u):this._ensureTransformGroup().append(u)}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){var r=this.getObject(t.data,t);if(r.bitmap)(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");else{var i=this.current,a=r.width,l=r.height,u=i.fillColor;i.maskId="mask".concat(b++);var d=this.svgFactory.createElement("svg:mask");d.setAttributeNS(null,"id",i.maskId);var h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0");h.setAttributeNS(null,"y","0");h.setAttributeNS(null,"width",c(a));h.setAttributeNS(null,"height",c(l));h.setAttributeNS(null,"fill",u);h.setAttributeNS(null,"mask","url(#".concat(i.maskId,")"));this.defs.append(d);this._ensureTransformGroup().append(h);this.paintInlineImageXObject(r,d)}}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]);if(r){var i=r[2]-r[0],a=r[3]-r[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",r[0]);o.setAttributeNS(null,"y",r[1]);o.setAttributeNS(null,"width",c(i));o.setAttributeNS(null,"height",c(a));this.current.element=o;this.clip("nonzero");this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(t){var r=this.svgFactory.create(t.width,t.height),i=this.svgFactory.createElement("svg:defs");r.append(i);this.defs=i;var a=this.svgFactory.createElement("svg:g");a.setAttributeNS(null,"transform",u(t.transform));r.append(a);this.svg=a;return r}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(t);this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",u(this.transformMatrix));this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)}return this.tgrp}}]);return SVGGraphics}()}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var r=__webpack_module_cache__[t];if(void 0!==r)return r.exports;var i=__webpack_module_cache__[t]={exports:{}};__webpack_modules__[t](i,i.exports,__w_pdfjs_require__);return i.exports}var __webpack_exports__={};(()=>{"use strict";var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"AbortException",{enumerable:!0,get:function get(){return r.AbortException}});Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function get(){return l.AnnotationEditorLayer}});Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function get(){return r.AnnotationEditorParamsType}});Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function get(){return r.AnnotationEditorType}});Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function get(){return c.AnnotationEditorUIManager}});Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function get(){return u.AnnotationLayer}});Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function get(){return r.AnnotationMode}});Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function get(){return r.CMapCompressionType}});Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function get(){return r.FeatureTest}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function get(){return d.GlobalWorkerOptions}});Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function get(){return r.InvalidPDFException}});Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function get(){return r.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:!0,get:function get(){return r.OPS}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function get(){return i.PDFDataRangeTransport}});Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function get(){return a.PDFDateString}});Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function get(){return i.PDFWorker}});Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function get(){return r.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function get(){return r.PermissionFlag}});Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function get(){return a.PixelsPerInch}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function get(){return a.RenderingCancelledException}});Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function get(){return h.SVGGraphics}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function get(){return r.UnexpectedResponseException}});Object.defineProperty(t,"Util",{enumerable:!0,get:function get(){return r.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function get(){return r.VerbosityLevel}});Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function get(){return p.XfaLayer}});Object.defineProperty(t,"build",{enumerable:!0,get:function get(){return i.build}});Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function get(){return r.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function get(){return r.createValidAbsoluteUrl}});Object.defineProperty(t,"getDocument",{enumerable:!0,get:function get(){return i.getDocument}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function get(){return a.getFilenameFromUrl}});Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function get(){return a.getPdfFilenameFromUrl}});Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function get(){return a.getXfaPageViewport}});Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function get(){return a.isDataScheme}});Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function get(){return a.isPdfFile}});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function get(){return a.loadScript}});Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function get(){return o.renderTextLayer}});Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function get(){return a.setLayerDimensions}});Object.defineProperty(t,"shadow",{enumerable:!0,get:function get(){return r.shadow}});Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function get(){return o.updateTextLayer}});Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return i.version}});var r=__w_pdfjs_require__(1),i=__w_pdfjs_require__(137),a=__w_pdfjs_require__(141),o=__w_pdfjs_require__(161),l=__w_pdfjs_require__(162),c=__w_pdfjs_require__(140),u=__w_pdfjs_require__(167),d=__w_pdfjs_require__(149),h=__w_pdfjs_require__(170),p=__w_pdfjs_require__(169)})();return __webpack_exports__})()));
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */(()=>{var t=[,(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.GenericCom=void 0;var a=i(2),o=i(183),l=i(184),c=i(185),u=i(187);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}r.GenericCom={};var d=function(t){_inherits(GenericPreferences,t);var r,i,a=_createSuper(GenericPreferences);function GenericPreferences(){_classCallCheck(this,GenericPreferences);return a.apply(this,arguments)}_createClass(GenericPreferences,[{key:"_writeToStorage",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:try{localStorage.setItem("pdfjs.preferences",JSON.stringify(t))}catch(t){}case 1:case"end":return r.stop()}}),_callee)}))),function _writeToStorage(t){return i.apply(this,arguments)})},{key:"_readFromStorage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;return t.abrupt("return",JSON.parse(localStorage.getItem("pdfjs.preferences")));case 4:t.prev=4;t.t0=t.catch(0);return t.abrupt("return",{});case 7:case"end":return t.stop()}}),_callee2,null,[[0,4]])}))),function _readFromStorage(t){return r.apply(this,arguments)})}]);return GenericPreferences}(o.BasePreferences),h=function(t){_inherits(GenericExternalServices,t);var r=_createSuper(GenericExternalServices);function GenericExternalServices(){_classCallCheck(this,GenericExternalServices);return r.apply(this,arguments)}_createClass(GenericExternalServices,null,[{key:"createDownloadManager",value:function createDownloadManager(){return new l.DownloadManager}},{key:"createPreferences",value:function createPreferences(){return new d}},{key:"createL10n",value:function createL10n(t){var r=t.locale,i=void 0===r?"en-US":r;return new c.GenericL10n(i)}},{key:"createScripting",value:function createScripting(t){var r=t.sandboxBundleSrc;return new u.GenericScripting(r)}}]);return GenericExternalServices}(a.DefaultExternalServices);a.PDFViewerApplication.externalServices=h},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFViewerApplication=r.PDFPrintServiceFactory=r.DefaultExternalServices=void 0;var a=i(3),o=i(4),l=i(5),c=i(6),u=i(7),d=i(8),h=i(9),p=i(11),v=i(12),y=i(14),g=i(16),m=i(17),b=i(18),w=i(22),P=i(23),S=i(24),k=i(25),x=i(26),A=i(27),E=i(28),T=i(29),C=i(30),I=i(32),O=i(180),M=i(181),L=i(182);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}var R=1e3,D=-1,G=1,j={AUTOMATIC:0,LIGHT:1,DARK:2},N=function(){function DefaultExternalServices(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DefaultExternalServices);throw new Error("Cannot initialize DefaultExternalServices.")}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(DefaultExternalServices,null,[{key:"updateFindControlState",value:function updateFindControlState(t){}},{key:"updateFindMatchesCount",value:function updateFindMatchesCount(t){}},{key:"initPassiveLoading",value:function initPassiveLoading(t){}},{key:"reportTelemetry",value:function reportTelemetry(t){}},{key:"createDownloadManager",value:function createDownloadManager(){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function createPreferences(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function createL10n(t){throw new Error("Not implemented: createL10n")}},{key:"createScripting",value:function createScripting(t){throw new Error("Not implemented: createScripting")}},{key:"supportsPinchToZoom",get:function get(){return(0,o.shadow)(this,"supportsPinchToZoom",!0)}},{key:"supportsIntegratedFind",get:function get(){return(0,o.shadow)(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function get(){return(0,o.shadow)(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function get(){return(0,o.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function get(){return(0,o.shadow)(this,"isInAutomation",!1)}},{key:"updateEditorStates",value:function updateEditorStates(t){throw new Error("Not implemented: updateEditorStates")}},{key:"canvasMaxAreaInBytes",get:function get(){return(0,o.shadow)(this,"canvasMaxAreaInBytes",-1)}}]);return DefaultExternalServices}();r.DefaultExternalServices=N;var B={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,o.createPromiseCapability)(),appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,annotationEditorParams:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",_downloadUrl:"",externalServices:N,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:!1,_wheelUnusedTicks:0,_wheelUnusedFactor:1,_touchUnusedTicks:0,_touchUnusedFactor:1,_PDFBug:null,_hasAnnotationEditors:!1,_title:document.title,_printAnnotationStoragePromise:null,_touchInfo:null,_isCtrlKeyDown:!1,initialize:function initialize(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var i;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:r.preferences=r.externalServices.createPreferences();r.appConfig=t;a.next=4;return r._initializeOptions();case 4:r._forceCssTheme();a.next=7;return r._initializeL10n();case 7:r.isViewerEmbedded&&l.AppOptions.get("externalLinkTarget")===u.LinkTarget.NONE&&l.AppOptions.set("externalLinkTarget",u.LinkTarget.TOP);a.next=10;return r._initializeViewerComponents();case 10:r.bindEvents();r.bindWindowEvents();i=t.appContainer||document.documentElement;r.l10n.translate(i).then((function(){r.eventBus.dispatch("localized",{source:r})}));r._initializedCapability.resolve();r.initializeLoadingBar();case 16:case"end":return a.stop()}}),_callee)})))()},_initializeOptions:function _initializeOptions(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(!l.AppOptions.get("disablePreferences")){r.next=5;break}if(!l.AppOptions.get("pdfBugEnabled")){r.next=4;break}r.next=4;return t._parseHashParams();case 4:return r.abrupt("return");case 5:l.AppOptions._hasUserOptions()&&globalThis.ngxConsole.warn('_initializeOptions: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');r.prev=6;r.t0=l.AppOptions;r.next=10;return t.preferences.getAll();case 10:r.t1=r.sent;r.t0.setAll.call(r.t0,r.t1);r.next=17;break;case 14:r.prev=14;r.t2=r.catch(6);globalThis.ngxConsole.error('_initializeOptions: "'.concat(null===r.t2||void 0===r.t2?void 0:r.t2.message,'".'));case 17:if(!l.AppOptions.get("pdfBugEnabled")){r.next=20;break}r.next=20;return t._parseHashParams();case 20:case"end":return r.stop()}}),_callee2,null,[[6,14]])})))()},_parseHashParams:function _parseHashParams(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var r,i,c,u,d,h;return _regeneratorRuntime().wrap((function _callee3$(p){for(;;)switch(p.prev=p.next){case 0:if(r=document.location.hash.substring(1)){p.next=3;break}return p.abrupt("return");case 3:i=t.appConfig,c=i.mainContainer,u=i.viewerContainer;if("true"!==(d=(0,a.parseQueryString)(r)).get("disableworker")){p.next=13;break}p.prev=5;p.next=8;return loadFakeWorker();case 8:p.next=13;break;case 10:p.prev=10;p.t0=p.catch(5);console.error('_parseHashParams: "'.concat(p.t0.message,'".'));case 13:d.has("disablerange")&&l.AppOptions.set("disableRange","true"===d.get("disablerange"));d.has("disablestream")&&l.AppOptions.set("disableStream","true"===d.get("disablestream"));d.has("disableautofetch")&&l.AppOptions.set("disableAutoFetch","true"===d.get("disableautofetch"));d.has("disablefontface")&&l.AppOptions.set("disableFontFace","true"===d.get("disablefontface"));d.has("disablehistory")&&l.AppOptions.set("disableHistory","true"===d.get("disablehistory"));d.has("verbosity")&&l.AppOptions.set("verbosity",0|d.get("verbosity"));if(!d.has("textlayer")){p.next=36;break}p.t1=d.get("textlayer");p.next="off"===p.t1?23:"visible"===p.t1||"shadow"===p.t1||"hover"===p.t1?25:36;break;case 23:l.AppOptions.set("textLayerMode",a.TextLayerMode.DISABLE);return p.abrupt("break",36);case 25:u.classList.add("textLayer-".concat(d.get("textlayer")));p.prev=26;p.next=29;return loadPDFBug(t);case 29:t._PDFBug.loadCSS();p.next=35;break;case 32:p.prev=32;p.t2=p.catch(26);console.error('_parseHashParams: "'.concat(p.t2.message,'".'));case 35:return p.abrupt("break",36);case 36:if(!d.has("pdfbug")){p.next=49;break}l.AppOptions.set("pdfBug",!0);l.AppOptions.set("fontExtraProperties",!0);h=d.get("pdfbug").split(",");p.prev=40;p.next=43;return loadPDFBug(t);case 43:t._PDFBug.init({OPS:o.OPS},c,h);p.next=49;break;case 46:p.prev=46;p.t3=p.catch(40);console.error('_parseHashParams: "'.concat(p.t3.message,'".'));case 49:d.has("locale")&&l.AppOptions.set("locale",d.get("locale"));case 50:case"end":return p.stop()}}),_callee3,null,[[5,10],[26,32],[40,46]])})))()},_initializeL10n:function _initializeL10n(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var r;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:t.l10n=t.externalServices.createL10n({locale:l.AppOptions.get("locale")});i.next=3;return t.l10n.getDirection();case 3:r=i.sent;document.getElementsByTagName("html")[0].dir=r;case 5:case"end":return i.stop()}}),_callee4)})))()},_forceCssTheme:function _forceCssTheme(){var t=l.AppOptions.get("viewerCssTheme");if(t!==j.AUTOMATIC&&Object.values(j).includes(t))try{for(var r=document.styleSheets[0],i=(null==r?void 0:r.cssRules)||[],a=0,o=i.length;a<o;a++){var c,u=i[a];if(u instanceof CSSMediaRule&&"(prefers-color-scheme: dark)"===(null===(c=u.media)||void 0===c?void 0:c[0])){if(t===j.LIGHT){r.deleteRule(a);return}var d=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(u.cssText);if(null!=d&&d[1]){r.deleteRule(a);r.insertRule(d[1],a)}return}}}catch(t){globalThis.ngxConsole.error('_forceCssTheme: "'.concat(null==t?void 0:t.message,'".'))}},_initializeViewerComponents:function _initializeViewerComponents(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var r,i,a,L,R,D,G,j,N,B,V,W,H,U,z,X,K,Y,$,Q,Z,J,ee,te;return _regeneratorRuntime().wrap((function _callee5$(re){for(;;)switch(re.prev=re.next){case 0:j=t.appConfig,N=t.externalServices;B=N.isInAutomation?new c.AutomationEventBus:new c.EventBus;t.eventBus=B;t.overlayManager=new h.OverlayManager;(V=new x.PDFRenderingQueue).onIdle=t._cleanup.bind(t);t.pdfRenderingQueue=V;W=new u.PDFLinkService({eventBus:B,externalLinkTarget:l.AppOptions.get("externalLinkTarget"),externalLinkRel:l.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:l.AppOptions.get("ignoreDestinationZoom")});t.pdfLinkService=W;H=N.createDownloadManager();t.downloadManager=H;U=new b.PDFFindController({linkService:W,eventBus:B,pageViewMode:l.AppOptions.get("pageViewMode"),updateMatchesCountOnProgress:!0});t.findController=U;z=new A.PDFScriptingManager({eventBus:B,sandboxBundleSrc:l.AppOptions.get("sandboxBundleSrc"),scriptingFactory:N,docPropertiesLookup:t._scriptingDocProperties.bind(t)});t.pdfScriptingManager=z;X=j.mainContainer,K=j.viewerContainer;Y=l.AppOptions.get("annotationEditorMode");$=l.AppOptions.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:l.AppOptions.get("pageColorsBackground"),foreground:l.AppOptions.get("pageColorsForeground")}:null;t.pdfViewer=new I.PDFViewer({container:X,viewer:K,eventBus:B,renderingQueue:V,linkService:W,downloadManager:H,findController:U,scriptingManager:l.AppOptions.get("enableScripting")&&z,renderer:l.AppOptions.get("renderer"),l10n:t.l10n,textLayerMode:l.AppOptions.get("textLayerMode"),annotationMode:l.AppOptions.get("annotationMode"),annotationEditorMode:Y,imageResourcesPath:l.AppOptions.get("imageResourcesPath"),removePageBorders:l.AppOptions.get("removePageBorders"),enablePrintAutoRotate:l.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:l.AppOptions.get("useOnlyCssZoom"),isOffscreenCanvasSupported:l.AppOptions.get("isOffscreenCanvasSupported"),maxCanvasPixels:l.AppOptions.get("maxCanvasPixels"),pageViewMode:l.AppOptions.get("pageViewMode"),enablePermissions:l.AppOptions.get("enablePermissions"),pageColors:$});V.setViewer(t.pdfViewer);W.setViewer(t.pdfViewer);z.setViewer(t.pdfViewer);if(null!==(r=j.sidebar)&&void 0!==r&&r.thumbnailView){t.pdfThumbnailViewer=new C.PDFThumbnailViewer({container:j.sidebar.thumbnailView,renderingQueue:V,linkService:W,l10n:t.l10n,pageColors:$,eventBus:B});V.setThumbnailViewer(t.pdfThumbnailViewer)}if(!t.isViewerEmbedded&&!l.AppOptions.get("disableHistory")){t.pdfHistory=new w.PDFHistory({linkService:W,eventBus:B});W.setHistory(t.pdfHistory)}!t.supportsIntegratedFind&&j.findBar&&(t.findBar=new m.PDFFindBar(j.findBar,B,t.l10n));if(j.annotationEditorParams)if(Y!==o.AnnotationEditorType.DISABLE)t.annotationEditorParams=new d.AnnotationEditorParams(j.annotationEditorParams,B);else for(Q=0,Z=["editorModeButtons","editorModeSeparator"];Q<Z.length;Q++){ee=Z[Q];null===(J=document.getElementById(ee))||void 0===J||J.classList.add("hidden")}j.documentProperties&&(t.pdfDocumentProperties=new g.PDFDocumentProperties(j.documentProperties,t.overlayManager,B,t.l10n,(function(){return t._docFilename})));null!==(i=j.secondaryToolbar)&&void 0!==i&&i.cursorHandToolButton&&(t.pdfCursorTools=new y.PDFCursorTools({container:X,eventBus:B,cursorToolOnLoad:l.AppOptions.get("cursorToolOnLoad")}));j.toolbar&&(t.toolbar=new M.Toolbar(j.toolbar,B,t.l10n));j.secondaryToolbar&&(t.secondaryToolbar=new O.SecondaryToolbar(j.secondaryToolbar,B,t.externalServices));t.supportsFullscreen&&(null!==(a=j.toolbar)&&void 0!==a&&a.presentationModeButton||null!==(L=j.secondaryToolbar)&&void 0!==L&&L.presentationModeButton)&&(t.pdfPresentationMode=new k.PDFPresentationMode({container:X,pdfViewer:t.pdfViewer,eventBus:B}));(te=l.AppOptions.get("passwordPrompt"))||j.passwordOverlay&&(te=new p.PasswordPrompt(j.passwordOverlay,t.overlayManager,t.l10n,t.isViewerEmbedded));t.passwordPrompt=te;null!==(R=j.sidebar)&&void 0!==R&&R.outlineView&&(t.pdfOutlineViewer=new S.PDFOutlineViewer({container:j.sidebar.outlineView,eventBus:B,linkService:W,downloadManager:H}));null!==(D=j.sidebar)&&void 0!==D&&D.attachmentsView&&(t.pdfAttachmentViewer=new v.PDFAttachmentViewer({container:j.sidebar.attachmentsView,eventBus:B,downloadManager:H}));null!==(G=j.sidebar)&&void 0!==G&&G.layersView&&(t.pdfLayerViewer=new P.PDFLayerViewer({container:j.sidebar.layersView,eventBus:B,l10n:t.l10n}));if(j.sidebar){t.pdfSidebar=new E.PDFSidebar({elements:j.sidebar,pdfViewer:t.pdfViewer,pdfThumbnailViewer:t.pdfThumbnailViewer,eventBus:B,l10n:t.l10n});t.pdfSidebar.onToggled=t.forceRendering.bind(t);t.pdfSidebarResizer=new T.PDFSidebarResizer(j.sidebarResizer,B,t.l10n)}case 38:case"end":return re.stop()}}),_callee5)})))()},run:function run(t){this.initialize(t).then(webViewerInitialized)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn:function zoomIn(t,r){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale({drawingDelay:l.AppOptions.get("defaultZoomDelay"),steps:t,scaleFactor:r})},zoomOut:function zoomOut(t,r){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale({drawingDelay:l.AppOptions.get("defaultZoomDelay"),steps:t,scaleFactor:r})},zoomReset:function zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(t){this.pdfViewer.currentPageNumber=t},get supportsPrinting(){return X.instance.supportsPrinting},get supportsFullscreen(){return(0,o.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)},get supportsPinchToZoom(){return this.externalServices.supportsPinchToZoom},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},initializeLoadingBar:function initializeLoadingBar(){var t=document.getElementById("loadingBar"),r=t?new a.ProgressBar(t):null;null==r||r.hide();return(0,o.shadow)(this,"loadingBar",r)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading:function initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl:function setTitleUsingUrl(){},setTitle:function setTitle(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._title;this._title=t;if(!this.isViewerEmbedded){var r=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title="".concat(r?"* ":"").concat(t)}},get _docFilename(){return this._contentDispositionFilename||(0,o.getPdfFilenameFromUrl)(this.url)},_hideViewBookmark:function _hideViewBookmark(){if(this.appConfig){var t=this.appConfig.secondaryToolbar;null==t||t.viewBookmarkButton.classList.add("hidden");if(null!=t&&t.presentationModeButton.classList.contains("hidden")){var r;null===(r=document.getElementById("viewBookmarkSeparator"))||void 0===r||r.classList.add("hidden")}}},close:function close(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){var r,i,a,o,l,c,u,d,h,p,v,y,g;return _regeneratorRuntime().wrap((function _callee6$(m){for(;;)switch(m.prev=m.next){case 0:t._unblockDocumentLoadEvent();t._hideViewBookmark();if(t.pdfLoadingTask){m.next=4;break}return m.abrupt("return");case 4:if(!((null===(r=t.pdfDocument)||void 0===r?void 0:r.annotationStorage.size)>0&&t._annotationStorageModified)){m.next=12;break}m.prev=5;m.next=8;return t.save();case 8:m.next=12;break;case 10:m.prev=10;m.t0=m.catch(5);case 12:(v=[]).push(t.pdfLoadingTask.destroy());t.pdfLoadingTask=null;if(t.pdfDocument){t.pdfDocument=null;null===(y=t.pdfThumbnailViewer)||void 0===y||y.setDocument(null);t.pdfViewer.setDocument(null);t.pdfLinkService.setDocument(null);null===(g=t.pdfDocumentProperties)||void 0===g||g.setDocument(null)}t.pdfLinkService.externalLinkEnabled=!0;t.store=null;t.isInitialViewSet=!1;t.downloadComplete=!1;t.url="";t.baseUrl="";t._downloadUrl="";t.documentInfo=null;t.metadata=null;t._contentDispositionFilename=null;t._contentLength=null;t._saveInProgress=!1;t._hasAnnotationEditors=!1;v.push(t.pdfScriptingManager.destroyPromise);t.setTitle();null===(i=t.pdfSidebar)||void 0===i||i.reset();null===(a=t.pdfOutlineViewer)||void 0===a||a.reset();null===(o=t.pdfAttachmentViewer)||void 0===o||o.reset();null===(l=t.pdfLayerViewer)||void 0===l||l.reset();null===(c=t.pdfHistory)||void 0===c||c.reset();null===(u=t.findBar)||void 0===u||u.reset();null===(d=t.toolbar)||void 0===d||d.reset();null===(h=t.secondaryToolbar)||void 0===h||h.reset();null===(p=t._PDFBug)||void 0===p||p.cleanup();m.next=42;return Promise.all(v);case 42:case"end":return m.stop()}}),_callee6,null,[[5,10]])})))()},open:function open(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee8(){var i;return _regeneratorRuntime().wrap((function _callee8$(a){for(;;)switch(a.prev=a.next){case 0:window.adjacentPagesLoader=void 0;null===(i=r.pdfViewer)||void 0===i||i.destroyBookMode();window.ngxZone.runOutsideAngular(_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(){var i,a,c,u,d,h;return _regeneratorRuntime().wrap((function _callee7$(p){for(;;)switch(p.prev=p.next){case 0:a=!1;if("string"==typeof t){t={url:t};a=!0}else if(null!==(i=t)&&void 0!==i&&i.byteLength){t={data:t};a=!0}a&&console.error("The `PDFViewerApplication.open` signature was updated, please use an object instead.");if(!r.pdfLoadingTask){p.next=6;break}p.next=6;return r.close();case 6:c=l.AppOptions.getAll(l.OptionKind.WORKER);Object.assign(o.GlobalWorkerOptions,c);t.url&&r.setTitleUsingUrl(t.originalUrl||t.url,t.url);u=l.AppOptions.getAll(l.OptionKind.API);d=_objectSpread(_objectSpread({canvasMaxAreaInBytes:r.externalServices.canvasMaxAreaInBytes},u),t);h=(0,o.getDocument)(d);r.pdfLoadingTask=h;h.onPassword=function(t,i){r.isViewerEmbedded&&r._unblockDocumentLoadEvent();r.pdfLinkService.externalLinkEnabled=!1;r.passwordPrompt.setUpdateCallback(t,i);r.passwordPrompt.open()};h.onProgress=function(t){var i,a=t.loaded,o=t.total;r.progress(a/o);null===(i=r.eventBus)||void 0===i||i.dispatch("progress",{source:r,type:"load",total:o,loaded:a,percent:100*a/o})};return p.abrupt("return",h.promise.then((function(t){r.load(t)}),(function(t){if(h===r.pdfLoadingTask){var i="loading_error";t instanceof o.InvalidPDFException?i="invalid_file_error":t instanceof o.MissingPDFException?i="missing_file_error":t instanceof o.UnexpectedResponseException&&(i="unexpected_response_error");B.onError&&B.onError(t);return r.l10n.get(i).then((function(i){r._documentError(i,{message:null==t?void 0:t.message});throw t}))}})));case 16:case"end":return p.stop()}}),_callee7)}))));case 3:case"end":return a.stop()}}),_callee8)})))()},_ensureDownloadComplete:function _ensureDownloadComplete(){if(!this.pdfDocument||!this.downloadComplete)throw new Error("PDF document not downloaded.")},download:function download(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee9(){var r,i,a,o;return _regeneratorRuntime().wrap((function _callee9$(l){for(;;)switch(l.prev=l.next){case 0:r=t._downloadUrl,i=t._docFilename;l.prev=1;t._ensureDownloadComplete();l.next=5;return t.pdfDocument.getData();case 5:a=l.sent;o=new Blob([a],{type:"application/pdf"});l.next=9;return t.downloadManager.download(o,r,i);case 9:l.next=15;break;case 11:l.prev=11;l.t0=l.catch(1);l.next=15;return t.downloadManager.downloadUrl(r,i);case 15:case"end":return l.stop()}}),_callee9,null,[[1,11]])})))()},save:function save(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee10(){var r,i,a,o;return _regeneratorRuntime().wrap((function _callee10$(l){for(;;)switch(l.prev=l.next){case 0:if(!t._saveInProgress){l.next=2;break}return l.abrupt("return");case 2:t._saveInProgress=!0;l.next=5;return t.pdfScriptingManager.dispatchWillSave();case 5:r=t._downloadUrl,i=t._docFilename;l.prev=6;t._ensureDownloadComplete();l.next=10;return t.pdfDocument.saveDocument();case 10:a=l.sent;o=new Blob([a],{type:"application/pdf"});l.next=14;return t.downloadManager.download(o,r,i);case 14:l.next=21;break;case 16:l.prev=16;l.t0=l.catch(6);globalThis.ngxConsole.error("Error when saving the document: ".concat(l.t0.message));l.next=21;return t.download();case 21:l.prev=21;l.next=24;return t.pdfScriptingManager.dispatchDidSave();case 24:t._saveInProgress=!1;return l.finish(21);case 26:t._hasAnnotationEditors&&t.externalServices.reportTelemetry({type:"editing",data:{type:"save"}});case 27:case"end":return l.stop()}}),_callee10,null,[[6,16,21,26]])})))()},downloadOrSave:function downloadOrSave(){var t;(null===(t=this.pdfDocument)||void 0===t?void 0:t.annotationStorage.size)>0?this.save():this.download()},_exportWithAnnotations:function _exportWithAnnotations(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee11(){var r,i;return _regeneratorRuntime().wrap((function _callee11$(a){for(;;)switch(a.prev=a.next){case 0:if(!t._saveInProgress){a.next=2;break}throw new Error("Already downloading");case 2:t._saveInProgress=!0;a.next=5;return t.pdfScriptingManager.dispatchWillSave();case 5:a.prev=5;t._ensureDownloadComplete();a.next=9;return t.pdfDocument.saveDocument();case 9:r=a.sent;i=new Blob([r],{type:"application/pdf"});return a.abrupt("return",i);case 14:a.prev=14;a.t0=a.catch(5);throw new Error("Error when saving the document: ".concat(a.t0.message));case 17:a.prev=17;a.next=20;return t.pdfScriptingManager.dispatchDidSave();case 20:t._saveInProgress=!1;return a.finish(17);case 22:case"end":return a.stop()}}),_callee11,null,[[5,14,17,22]])})))()},_exportWithoutAnnotations:function _exportWithoutAnnotations(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee12(){var r,i;return _regeneratorRuntime().wrap((function _callee12$(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0;t._ensureDownloadComplete();a.next=4;return t.pdfDocument.getData();case 4:r=a.sent;i=new Blob([r],{type:"application/pdf"});return a.abrupt("return",i);case 9:a.prev=9;a.t0=a.catch(0);throw new Error("Error when saving the document: ".concat(a.t0.message));case 12:case"end":return a.stop()}}),_callee12,null,[[0,9]])})))()},export:function _export(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee13(){var r;return _regeneratorRuntime().wrap((function _callee13$(i){for(;;)switch(i.prev=i.next){case 0:if(!((null===(r=t.pdfDocument)||void 0===r?void 0:r.annotationStorage.size)>0)){i.next=2;break}return i.abrupt("return",t._exportWithAnnotations());case 2:return i.abrupt("return",t._exportWithoutAnnotations());case 3:case"end":return i.stop()}}),_callee13)})))()},_documentError:function _documentError(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._unblockDocumentLoadEvent();this._otherError(t,i);this.eventBus.dispatch("documenterror",{source:this,message:t,reason:null!==(r=null==i?void 0:i.message)&&void 0!==r?r:null})},_otherError:function _otherError(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=["PDF.js v".concat(o.version||"?"," (build: ").concat(o.build||"?",")")];if(r){i.push("Message: ".concat(r.message));if(r.stack)i.push("Stack: ".concat(r.stack));else{r.filename&&i.push("File: ".concat(r.filename));r.lineNumber&&i.push("Line: ".concat(r.lineNumber))}}console.error("".concat(t,"\n\n").concat(i.join("\n")))},progress:function progress(t){var r,i;if(this.loadingBar&&!this.downloadComplete){var a=Math.round(100*t);if(!(a<=this.loadingBar.percent)){this.loadingBar.percent=a;(null!==(r=null===(i=this.pdfDocument)||void 0===i?void 0:i.loadingParams.disableAutoFetch)&&void 0!==r?r:l.AppOptions.get("disableAutoFetch"))&&this.loadingBar.setDisableAutoFetch()}}},load:function load(t){var r,i,o,c,u=this;this.pdfDocument=t;t.getDownloadInfo().then((function(t){var r,i=t.length;u._contentLength=i;u.downloadComplete=!0;null===(r=u.loadingBar)||void 0===r||r.hide();y.then((function(){var t;null===(t=u.eventBus)||void 0===t||t.dispatch("documentloaded",{source:u})}))}));var d=t.getPageLayout().catch((function(){})),h=t.getPageMode().catch((function(){})),p=t.getOpenAction().catch((function(){}));null===(r=this.toolbar)||void 0===r||r.setPagesCount(t.numPages,!1);null===(i=this.secondaryToolbar)||void 0===i||i.setPagesCount(t.numPages);this.pdfLinkService.setDocument(t);null===(o=this.pdfDocumentProperties)||void 0===o||o.setDocument(t);var v=this.pdfViewer;v.setDocument(t);var y=v.firstPagePromise,g=v.onePageRendered,m=v.pagesPromise;null===(c=this.pdfThumbnailViewer)||void 0===c||c.setDocument(t);var b=(this.store=new L.ViewHistory(t.fingerprints[0])).getMultiple({page:null,zoom:a.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:a.SidebarView.UNKNOWN,scrollMode:a.ScrollMode.UNKNOWN,spreadMode:a.SpreadMode.UNKNOWN}).catch((function(){return Object.create(null)}));y.then((function(r){var i;null===(i=u.loadingBar)||void 0===i||i.setWidth(u.appConfig.viewerContainer);u._initializeAnnotationStorageCallbacks(t);Promise.all([a.animationStarted,b,d,h,p]).then(function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee14(r){var i,o,c,d,h,p,y,g,b,w,P,S,k,x;return _regeneratorRuntime().wrap((function _callee14$(A){for(;;)switch(A.prev=A.next){case 0:i=_slicedToArray(r,5),i[0],o=i[1],c=i[2],d=i[3],h=i[4];p=l.AppOptions.get("viewOnLoad");u._initializePdfHistory({fingerprint:t.fingerprints[0],viewOnLoad:p,initialDest:null==h?void 0:h.dest});y=u.initialBookmark;g=l.AppOptions.get("defaultZoomValue");b=g?"zoom=".concat(g):null;w=null;P=l.AppOptions.get("sidebarViewOnLoad");S=l.AppOptions.get("scrollModeOnLoad");k=l.AppOptions.get("spreadModeOnLoad");if(o.page&&p!==G){b="page=".concat(o.page,"&zoom=").concat(g||o.zoom,",")+"".concat(o.scrollLeft,",").concat(o.scrollTop);w=parseInt(o.rotation,10);P===a.SidebarView.UNKNOWN&&(P=0|o.sidebarView);S===a.ScrollMode.UNKNOWN&&(S=0|o.scrollMode);k===a.SpreadMode.UNKNOWN&&(k=0|o.spreadMode)}d&&P===a.SidebarView.UNKNOWN&&(P=(0,a.apiPageModeToSidebarView)(d));if(c&&S===a.ScrollMode.UNKNOWN&&k===a.SpreadMode.UNKNOWN){x=(0,a.apiPageLayoutToViewerModes)(c);k=x.spreadMode}u.setInitialView(b,{rotation:w,sidebarView:P,scrollMode:S,spreadMode:k});u.eventBus.dispatch("documentinit",{source:u});u.isViewerEmbedded||v.focus();A.next=18;return Promise.race([m,new Promise((function(t){setTimeout(t,10)}))]);case 18:if(y||b){A.next=20;break}return A.abrupt("return");case 20:if(!v.hasEqualPageSizes){A.next=22;break}return A.abrupt("return");case 22:u.initialBookmark=y;v.currentScaleValue=v.currentScaleValue;u.setInitialView(b);case 25:case"end":return A.stop()}}),_callee14)})));return function(t){return r.apply(this,arguments)}}()).catch((function(){u.setInitialView()})).then((function(){v.update()}))}));m.then((function(){u._unblockDocumentLoadEvent();u._initializeAutoPrint(t,p)}),(function(t){B.onError&&B.onError(t);u.l10n.get("loading_error").then((function(r){u._documentError(r,{message:null==t?void 0:t.message})}))}));g.then((function(r){u.externalServices.reportTelemetry({type:"pageInfo",timestamp:r.timestamp});u.pdfOutlineViewer&&t.getOutline().then((function(r){t===u.pdfDocument&&u.pdfOutlineViewer.render({outline:r,pdfDocument:t})}));u.pdfAttachmentViewer&&t.getAttachments().then((function(r){t===u.pdfDocument&&u.pdfAttachmentViewer.render({attachments:r})}));u.pdfLayerViewer&&v.optionalContentConfigPromise.then((function(r){t===u.pdfDocument&&u.pdfLayerViewer.render({optionalContentConfig:r,pdfDocument:t})}))}));this._initializePageLabels(t);this._initializeMetadata(t)},_scriptingDocProperties:function _scriptingDocProperties(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee15(){var i,a;return _regeneratorRuntime().wrap((function _callee15$(o){for(;;)switch(o.prev=o.next){case 0:if(r.documentInfo){o.next=5;break}o.next=3;return new Promise((function(t){r.eventBus._on("metadataloaded",t,{once:!0})}));case 3:if(t===r.pdfDocument){o.next=5;break}return o.abrupt("return",null);case 5:if(r._contentLength){o.next=10;break}o.next=8;return new Promise((function(t){r.eventBus._on("documentloaded",t,{once:!0})}));case 8:if(t===r.pdfDocument){o.next=10;break}return o.abrupt("return",null);case 10:return o.abrupt("return",_objectSpread(_objectSpread({},r.documentInfo),{},{baseURL:r.baseUrl,filesize:r._contentLength,filename:r._docFilename,metadata:null===(i=r.metadata)||void 0===i?void 0:i.getRaw(),authors:null===(a=r.metadata)||void 0===a?void 0:a.get("dc:creator"),numPages:r.pagesCount,URL:r.url}));case 11:case"end":return o.stop()}}),_callee15)})))()},_initializeAutoPrint:function _initializeAutoPrint(t,r){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee16(){var o,l,c,u,d,h,p,v;return _regeneratorRuntime().wrap((function _callee16$(y){for(;;)switch(y.prev=y.next){case 0:y.next=2;return Promise.all([r,i.pdfViewer.enableScripting?null:t.getJavaScript()]);case 2:o=y.sent;l=_slicedToArray(o,2);c=l[0];u=l[1];if(t===i.pdfDocument){y.next=8;break}return y.abrupt("return");case 8:d=!1;"Print"===(null==c?void 0:c.action)&&(d=!0);if(!u){y.next=31;break}u.some((function(t){if(!t)return!1;globalThis.ngxConsole.warn("Warning: JavaScript support is not enabled");return!0}));if(d){y.next=31;break}h=_createForOfIteratorHelper(u);y.prev=14;h.s();case 16:if((p=h.n()).done){y.next=23;break}if(!(v=p.value)||!a.AutoPrintRegExp.test(v)){y.next=21;break}d=!0;return y.abrupt("break",23);case 21:y.next=16;break;case 23:y.next=28;break;case 25:y.prev=25;y.t0=y.catch(14);h.e(y.t0);case 28:y.prev=28;h.f();return y.finish(28);case 31:d&&i.triggerPrinting();case 32:case"end":return y.stop()}}),_callee16,null,[[14,25,28,31]])})))()},_initializeMetadata:function _initializeMetadata(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee17(){var i,a,l,c,u,d,h,p,v,y;return _regeneratorRuntime().wrap((function _callee17$(g){for(;;)switch(g.prev=g.next){case 0:g.next=2;return t.getMetadata();case 2:l=g.sent;c=l.info;u=l.metadata;d=l.contentDispositionFilename;h=l.contentLength;if(t===r.pdfDocument){g.next=9;break}return g.abrupt("return");case 9:r.documentInfo=c;r.metadata=u;null!==(i=r._contentDispositionFilename)&&void 0!==i||(r._contentDispositionFilename=d);null!==(a=r._contentLength)&&void 0!==a||(r._contentLength=h);(!(p=window.PDFViewerApplicationOptions)||p.get("verbosity")>0)&&globalThis.ngxConsole.log("PDF ".concat(t.fingerprints[0]," [").concat(c.PDFFormatVersion," ")+"".concat((c.Producer||"-").trim()," / ").concat((c.Creator||"-").trim(),"] ")+"(PDF.js: ".concat(o.version||"?"," [").concat(o.build||"?","])  modified by ngx-extended-pdf-viewer"));v=c.Title;(y=null==u?void 0:u.get("dc:title"))&&("Untitled"===y||/[\uFFF0-\uFFFF]/g.test(y)||(v=y));v?r.setTitle("".concat(v," - ").concat(r._contentDispositionFilename||r._title)):r._contentDispositionFilename&&r.setTitle(r._contentDispositionFilename);!c.IsXFAPresent||c.IsAcroFormPresent||t.isPureXfa?!c.IsAcroFormPresent&&!c.IsXFAPresent||r.pdfViewer.renderForms||console.warn("Warning: Interactive form support is not enabled"):t.loadingParams.enableXfa?globalThis.ngxConsole.warn("Warning: XFA Foreground documents are not supported"):globalThis.ngxConsole.warn("Warning: XFA support is not enabled");c.IsSignaturesPresent&&console.warn("Warning: Digital signatures validation is not supported");r.eventBus.dispatch("metadataloaded",{source:r});case 22:case"end":return g.stop()}}),_callee17)})))()},_initializePageLabels:function _initializePageLabels(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee18(){var i,a,o,c,u,d,h,p,v;return _regeneratorRuntime().wrap((function _callee18$(y){for(;;)switch(y.prev=y.next){case 0:y.next=2;return t.getPageLabels();case 2:i=y.sent;if(t===r.pdfDocument){y.next=5;break}return y.abrupt("return");case 5:if(i&&!l.AppOptions.get("disablePageLabels")){y.next=7;break}return y.abrupt("return");case 7:a=i.length;o=0,c=0;u=0;case 10:if(!(u<a)){y.next=24;break}if((d=i[u])!==(u+1).toString()){y.next=16;break}o++;y.next=21;break;case 16:if(""!==d){y.next=20;break}c++;y.next=21;break;case 20:return y.abrupt("break",24);case 21:u++;y.next=10;break;case 24:if(!(o>=a||c>=a)){y.next=26;break}return y.abrupt("return");case 26:h=r.pdfViewer,p=r.pdfThumbnailViewer,v=r.toolbar;h.setPageLabels(i);null==p||p.setPageLabels(i);null==v||v.setPagesCount(a,!0);null==v||v.setPageNumber(h.currentPageNumber,h.currentPageLabel);case 31:case"end":return y.stop()}}),_callee18)})))()},_initializePdfHistory:function _initializePdfHistory(t){var r=t.fingerprint,i=t.viewOnLoad,a=t.initialDest,o=void 0===a?null:a;if(this.pdfHistory){this.pdfHistory.initialize({fingerprint:r,resetHistory:i===G,updateUrl:l.AppOptions.get("historyUpdateUrl")});if(this.pdfHistory.initialBookmark){this.initialBookmark=this.pdfHistory.initialBookmark;this.initialRotation=this.pdfHistory.initialRotation}if(o&&!this.initialBookmark&&i===D){this.initialBookmark=JSON.stringify(o);this.pdfHistory.push({explicitDest:o,pageNumber:null})}}},_initializeAnnotationStorageCallbacks:function _initializeAnnotationStorageCallbacks(t){var r=this;if(t===this.pdfDocument){var i=t.annotationStorage;i.onSetModified=function(){window.addEventListener("beforeunload",beforeUnload);r._annotationStorageModified=!0};i.onResetModified=function(){window.removeEventListener("beforeunload",beforeUnload);delete r._annotationStorageModified};i.onAnnotationEditor=function(t){r._hasAnnotationEditors=!!t;r.setTitle();t&&r.externalServices.reportTelemetry({type:"editing",data:{type:t}})}}},setInitialView:function setInitialView(t){var r,i,o,l=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=c.rotation,d=c.sidebarView,h=c.scrollMode,p=c.spreadMode,v=function setRotation(t){(0,a.isValidRotation)(t)&&(l.pdfViewer.pagesRotation=t)};this.isInitialViewSet=!0;null===(r=this.pdfSidebar)||void 0===r||r.setInitialView(d);!function setViewerModes(t,r){(0,a.isValidScrollMode)(t)&&(l.pdfViewer.scrollMode=t);(0,a.isValidSpreadMode)(r)&&(l.pdfViewer.spreadMode=r)}(h,p);if(this.initialBookmark){v(this.initialRotation);delete this.initialRotation;this.pdfLinkService.setHash(this.initialBookmark);this.initialBookmark=null}else if(t){v(u);this.pdfLinkService.setHash(t)}null===(i=this.toolbar)||void 0===i||i.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel);null===(o=this.secondaryToolbar)||void 0===o||o.setPageNumber(this.pdfViewer.currentPageNumber);if(!this.pdfViewer.currentScaleValue){var y=PDFViewerApplicationOptions.get("defaultZoomValue");y&&(this.pdfViewer.currentScaleValue=y)}},_cleanup:function _cleanup(){var t;if(this.pdfDocument){this.pdfViewer.cleanup();null===(t=this.pdfThumbnailViewer)||void 0===t||t.cleanup();this.pdfDocument.cleanup(this.pdfViewer.renderer===a.RendererType.SVG)}},forceRendering:function forceRendering(){var t;this.pdfRenderingQueue.printing=!!this.printService;this.pdfRenderingQueue.isThumbnailViewEnabled=(null===(t=this.pdfSidebar)||void 0===t?void 0:t.visibleView)===a.SidebarView.THUMBS;this.pdfRenderingQueue.renderHighestPriority()},beforePrint:function beforePrint(){var t=this;this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch((function(){})).then((function(){var r;return null===(r=t.pdfDocument)||void 0===r?void 0:r.annotationStorage.print}));if(!this.printService)if(this.supportsPrinting)if(this.pdfViewer.pageViewsReady){var r=this.pdfViewer.getPagesOverview(),i=this.appConfig.printContainer,a=l.AppOptions.get("printResolution"),o=this.pdfViewer.optionalContentConfigPromise,c=X.instance.createPrintService(this.pdfDocument,r,i,a,o,this._printAnnotationStoragePromise,this.l10n,this.pdfViewer.eventBus);this.printService=c;this.forceRendering();this.setTitle();c.layout();this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})}else this.l10n.get("printing_not_ready").then((function(t){window.alert(t)}));else this.l10n.get("printing_not_supported").then((function(r){t._otherError(r)}))},afterPrint:function afterPrint(){var t=this;if(this._printAnnotationStoragePromise){this._printAnnotationStoragePromise.then((function(){t.pdfScriptingManager.dispatchDidPrint()}));this._printAnnotationStoragePromise=null}if(this.printService){var r;this.printService.destroy();this.printService=null;null===(r=this.pdfDocument)||void 0===r||r.annotationStorage.resetModified()}this.forceRendering();this.setTitle()},rotatePages:function rotatePages(t){this.pdfViewer.pagesRotation+=t},requestPresentationMode:function requestPresentationMode(){var t;null===(t=this.pdfPresentationMode)||void 0===t||t.request()},triggerPrinting:function triggerPrinting(){this.supportsPrinting&&window.printPDF()},bindEvents:function bindEvents(){var t=this.eventBus,r=this._boundEvents;r.beforePrint=this.beforePrint.bind(this);r.afterPrint=this.afterPrint.bind(this);t._on("resize",webViewerResize);t._on("hashchange",webViewerHashchange);t._on("beforeprint",r.beforePrint);t._on("afterprint",r.afterPrint);t._on("pagerender",webViewerPageRender);t._on("pagerendered",webViewerPageRendered);t._on("updateviewarea",webViewerUpdateViewarea);t._on("pagechanging",webViewerPageChanging);t._on("scalechanging",webViewerScaleChanging);t._on("rotationchanging",webViewerRotationChanging);t._on("sidebarviewchanged",webViewerSidebarViewChanged);t._on("pagemode",webViewerPageMode);t._on("namedaction",webViewerNamedAction);t._on("presentationmodechanged",webViewerPresentationModeChanged);t._on("presentationmode",webViewerPresentationMode);t._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode);t._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams);t._on("print",webViewerPrint);t._on("download",webViewerDownload);t._on("firstpage",webViewerFirstPage);t._on("lastpage",webViewerLastPage);t._on("nextpage",webViewerNextPage);t._on("previouspage",webViewerPreviousPage);t._on("zoomin",webViewerZoomIn);t._on("zoomout",webViewerZoomOut);t._on("zoomreset",webViewerZoomReset);t._on("pagenumberchanged",webViewerPageNumberChanged);t._on("scalechanged",webViewerScaleChanged);t._on("rotatecw",webViewerRotateCw);t._on("rotateccw",webViewerRotateCcw);t._on("optionalcontentconfig",webViewerOptionalContentConfig);t._on("switchscrollmode",webViewerSwitchScrollMode);t._on("scrollmodechanged",webViewerScrollModeChanged);t._on("switchspreadmode",webViewerSwitchSpreadMode);t._on("spreadmodechanged",webViewerSpreadModeChanged);t._on("documentproperties",webViewerDocumentProperties);t._on("findfromurlhash",webViewerFindFromUrlHash);t._on("updatefindmatchescount",webViewerUpdateFindMatchesCount);t._on("updatefindcontrolstate",webViewerUpdateFindControlState);if(l.AppOptions.get("pdfBug")){r.reportPageStatsPDFBug=reportPageStatsPDFBug;t._on("pagerendered",r.reportPageStatsPDFBug);t._on("pagechanging",r.reportPageStatsPDFBug)}t._on("fileinputchange",H);t._on("openfile",U)},bindWindowEvents:function bindWindowEvents(){var t=this.eventBus,r=this._boundEvents;!function addWindowResolutionChange(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&function webViewerResolutionChange(t){B.pdfViewer.refresh()}();var i=window.matchMedia("(resolution: ".concat(window.devicePixelRatio||1,"dppx)"));i.addEventListener("change",addWindowResolutionChange,{once:!0});r.removeWindowResolutionChange||(r.removeWindowResolutionChange=function(){i.removeEventListener("change",addWindowResolutionChange);r.removeWindowResolutionChange=null})}();r.windowResize=function(){t.dispatch("resize",{source:window})};r.windowHashChange=function(){t.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})};r.windowBeforePrint=function(){t.dispatch("beforeprint",{source:window})};r.windowAfterPrint=function(){t.dispatch("afterprint",{source:window})};r.windowUpdateFromSandbox=function(r){t.dispatch("updatefromsandbox",{source:window,detail:r.detail})};window.addEventListener("visibilitychange",webViewerVisibilityChange);window.addEventListener("wheel",webViewerWheel,{passive:!1});var i=document.getElementById("mainContainer");null==i||i.addEventListener("touchstart",webViewerTouchStart,{passive:!1});null==i||i.addEventListener("touchmove",webViewerTouchMove,{passive:!1});null==i||i.addEventListener("touchend",webViewerTouchEnd,{passive:!1});window.addEventListener("click",webViewerClick);window.addEventListener("keydown",webViewerKeyDown);window.addEventListener("keyup",webViewerKeyUp);window.addEventListener("resize",r.windowResize);window.addEventListener("hashchange",r.windowHashChange);window.addEventListener("beforeprint",r.windowBeforePrint);window.addEventListener("afterprint",r.windowAfterPrint);window.addEventListener("updatefromsandbox",r.windowUpdateFromSandbox)},unbindEvents:function unbindEvents(){var t=this.eventBus,r=this._boundEvents;t._off("resize",webViewerResize);t._off("hashchange",webViewerHashchange);t._off("beforeprint",r.beforePrint);t._off("afterprint",r.afterPrint);t._off("pagerender",webViewerPageRender);t._off("pagerendered",webViewerPageRendered);t._off("updateviewarea",webViewerUpdateViewarea);t._off("pagechanging",webViewerPageChanging);t._off("scalechanging",webViewerScaleChanging);t._off("rotationchanging",webViewerRotationChanging);t._off("sidebarviewchanged",webViewerSidebarViewChanged);t._off("pagemode",webViewerPageMode);t._off("namedaction",webViewerNamedAction);t._off("presentationmodechanged",webViewerPresentationModeChanged);t._off("presentationmode",webViewerPresentationMode);t._off("print",webViewerPrint);t._off("download",webViewerDownload);t._off("firstpage",webViewerFirstPage);t._off("lastpage",webViewerLastPage);t._off("nextpage",webViewerNextPage);t._off("previouspage",webViewerPreviousPage);t._off("zoomin",webViewerZoomIn);t._off("zoomout",webViewerZoomOut);t._off("zoomreset",webViewerZoomReset);t._off("pagenumberchanged",webViewerPageNumberChanged);t._off("scalechanged",webViewerScaleChanged);t._off("rotatecw",webViewerRotateCw);t._off("rotateccw",webViewerRotateCcw);t._off("optionalcontentconfig",webViewerOptionalContentConfig);t._off("switchscrollmode",webViewerSwitchScrollMode);t._off("scrollmodechanged",webViewerScrollModeChanged);t._off("switchspreadmode",webViewerSwitchSpreadMode);t._off("spreadmodechanged",webViewerSpreadModeChanged);t._off("documentproperties",webViewerDocumentProperties);t._off("findfromurlhash",webViewerFindFromUrlHash);t._off("updatefindmatchescount",webViewerUpdateFindMatchesCount);t._off("updatefindcontrolstate",webViewerUpdateFindControlState);if(r.reportPageStatsPDFBug){t._off("pagerendered",r.reportPageStatsPDFBug);t._off("pagechanging",r.reportPageStatsPDFBug);r.reportPageStatsPDFBug=null}t._off("fileinputchange",H);t._off("openfile",U);r.beforePrint=null;r.afterPrint=null},unbindWindowEvents:function unbindWindowEvents(){var t,r=this._boundEvents;window.removeEventListener("visibilitychange",webViewerVisibilityChange);window.removeEventListener("wheel",webViewerWheel,{passive:!1});var i=document.getElementById("mainContainer");if(i){i.removeEventListener("touchstart",webViewerTouchStart,{passive:!1});i.removeEventListener("touchmove",webViewerTouchMove,{passive:!1});i.removeEventListener("touchend",webViewerTouchEnd,{passive:!1})}window.removeEventListener("click",webViewerClick);window.removeEventListener("keydown",webViewerKeyDown);window.removeEventListener("keyup",webViewerKeyUp);window.removeEventListener("resize",r.windowResize);window.removeEventListener("hashchange",r.windowHashChange);window.removeEventListener("beforeprint",r.windowBeforePrint);window.removeEventListener("afterprint",r.windowAfterPrint);window.removeEventListener("updatefromsandbox",r.windowUpdateFromSandbox);null===(t=r.removeWindowResolutionChange)||void 0===t||t.call(r);r.windowResize=null;r.windowHashChange=null;r.windowBeforePrint=null;r.windowAfterPrint=null;r.windowUpdateFromSandbox=null},_accumulateTicks:function _accumulateTicks(t,r){(this[r]>0&&t<0||this[r]<0&&t>0)&&(this[r]=0);this[r]+=t;var i=Math.trunc(this[r]);this[r]-=i;return i},_accumulateFactor:function _accumulateFactor(t,r,i){if(1===r)return 1;(this[i]>1&&r<1||this[i]<1&&r>1)&&(this[i]=1);var a=Math.floor(t*r*this[i]*100)/(100*t);this[i]=r/a;return a},_centerAtPos:function _centerAtPos(t,r,i){var a=this.pdfViewer,o=a.currentScale/t-1;if(0!==o){var l=_slicedToArray(a.containerTopLeft,2),c=l[0],u=l[1];a.container.scrollLeft+=(r-u)*o;a.container.scrollTop+=(i-c)*o}},_unblockDocumentLoadEvent:function _unblockDocumentLoadEvent(){var t,r;null===(t=(r=document).blockUnblockOnload)||void 0===t||t.call(r,!1);this._unblockDocumentLoadEvent=function(){}},get scriptingReady(){return this.pdfScriptingManager.ready}};r.PDFViewerApplication=B;var V=["null","http://mozilla.github.io","https://mozilla.github.io"],W=function validateFileURL(t){if(t)try{var r=new URL(window.location.href).origin||"null";if(V.includes(r))return;if(new URL(t,window.location.href).origin!==r)throw new Error("file origin does not match viewer's")}catch(t){B.onError&&B.onError(t);B.l10n.get("loading_error").then((function(r){B._documentError(r,{message:null==t?void 0:t.message})}));throw t}};function loadFakeWorker(){return _loadFakeWorker.apply(this,arguments)}function _loadFakeWorker(){return(_loadFakeWorker=_asyncToGenerator(_regeneratorRuntime().mark((function _callee19(){return _regeneratorRuntime().wrap((function _callee19$(t){for(;;)switch(t.prev=t.next){case 0:o.GlobalWorkerOptions.workerSrc||(o.GlobalWorkerOptions.workerSrc=l.AppOptions.get("workerSrc"));"Function"===o.GlobalWorkerOptions.workerSrc.constructor.name&&(o.GlobalWorkerOptions.workerSrc=o.GlobalWorkerOptions.workerSrc());t.next=4;return(0,o.loadScript)(o.PDFWorker.workerSrc);case 4:case"end":return t.stop()}}),_callee19)})))).apply(this,arguments)}function loadPDFBug(t){return _loadPDFBug.apply(this,arguments)}function _loadPDFBug(){return(_loadPDFBug=_asyncToGenerator(_regeneratorRuntime().mark((function _callee20(t){return _regeneratorRuntime().wrap((function _callee20$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee20)})))).apply(this,arguments)}function reportPageStatsPDFBug(t){var r,i,a=t.pageNumber;if(null!==(r=globalThis.Stats)&&void 0!==r&&r.enabled){var o=B.pdfViewer.getPageView(a-1);globalThis.Stats.add(a,null==o||null===(i=o.pdfPage)||void 0===i?void 0:i.stats)}}function webViewerInitialized(){var t,r,i=B.appConfig,o=B.eventBus,c=B.l10n,u=document.location.search.substring(1);r=null!==(t=(0,a.parseQueryString)(u).get("file"))&&void 0!==t?t:l.AppOptions.get("defaultUrl");W(r);var d=i.openFileInput;d.value=null;d.addEventListener("change",(function(t){var r=t.target.files;r&&0!==r.length&&o.dispatch("fileinputchange",{source:this,fileInput:t.target})}));i.mainContainer.addEventListener("dragover",(function(t){if(l.AppOptions.get("enableDragAndDrop")){t.preventDefault();t.dataTransfer.dropEffect="copy"===t.dataTransfer.effectAllowed?"copy":"move"}}));i.mainContainer.addEventListener("drop",(function(t){if(l.AppOptions.get("enableDragAndDrop")){t.preventDefault();var r=t.dataTransfer.files;if(!r||0===r.length)return;B.eventBus.dispatch("fileinputchange",{source:this,fileInput:t.dataTransfer,dropEvent:t})}}));if(!B.supportsDocumentFonts){l.AppOptions.set("disableFontFace",!0);c.get("web_fonts_disabled").then((function(t){globalThis.ngxConsole.warn(t)}))}if(!B.supportsPrinting){var h,p;null===(h=i.toolbar)||void 0===h||h.print.classList.add("hidden");null===(p=i.secondaryToolbar)||void 0===p||p.printButton.classList.add("hidden")}if(!B.supportsFullscreen){var v;null===(v=i.secondaryToolbar)||void 0===v||v.presentationModeButton.classList.add("hidden")}if(B.supportsIntegratedFind){var y;null===(y=i.toolbar)||void 0===y||y.viewFind.classList.add("hidden")}i.mainContainer.addEventListener("transitionend",(function(t){t.target===this&&o.dispatch("resize",{source:this})}),!0);try{r?B.open({url:r}):B._hideViewBookmark()}catch(t){B.onError&&B.onError(t);c.get("loading_error").then((function(r){B._documentError(r,t)}))}}function webViewerPageRender(t){if(t.pageNumber===B.page){var r;null===(r=B.toolbar)||void 0===r||r.updateLoadingIndicatorState(!0)}}function webViewerPageRendered(t){var r,i=t.pageNumber,o=t.error;if(i===B.page){var l;null===(l=B.toolbar)||void 0===l||l.updateLoadingIndicatorState(!1)}if((null===(r=B.pdfSidebar)||void 0===r?void 0:r.visibleView)===a.SidebarView.THUMBS){var c,u=B.pdfViewer.getPageView(i-1),d=null===(c=B.pdfThumbnailViewer)||void 0===c?void 0:c.getThumbnail(i-1);u&&d&&d.setImage(u)}o&&B.l10n.get("rendering_error").then((function(t){B._otherError(t,o)}))}function webViewerPageMode(t){var r,i,o=t.mode;switch(o){case"thumbs":i=a.SidebarView.THUMBS;break;case"bookmarks":case"outline":i=a.SidebarView.OUTLINE;break;case"attachments":i=a.SidebarView.ATTACHMENTS;break;case"layers":i=a.SidebarView.LAYERS;break;case"none":i=a.SidebarView.NONE;break;default:globalThis.ngxConsole.error('Invalid "pagemode" hash parameter: '+o);return}null===(r=B.pdfSidebar)||void 0===r||r.switchView(i,!0)}function webViewerNamedAction(t){var r;switch(t.action){case"GoToPage":null===(r=B.appConfig.toolbar)||void 0===r||r.pageNumber.select();break;case"Find":B.supportsIntegratedFind||null==B||B.findBar.toggle();break;case"Print":B.triggerPrinting();break;case"SaveAs":B.downloadOrSave()}}function webViewerPresentationModeChanged(t){B.pdfViewer.presentationModeState=t.state}function webViewerSidebarViewChanged(t){var r=t.view;B.pdfRenderingQueue.isThumbnailViewEnabled=r===a.SidebarView.THUMBS;if(B.isInitialViewSet){var i;null===(i=B.store)||void 0===i||i.set("sidebarView",r).catch((function(){}))}}function webViewerUpdateViewarea(t){var r=t.location;if(B.isInitialViewSet){var i,a={};void 0===r.pageNumber&&null===r.pageNumber||(a.page=r.pageNumber);r.scale&&(a.zoom=r.scale);r.left&&(a.scrollLeft=r.left);r.top&&(a.scrollTop=r.top);void 0===r.rotation&&null===r.rotation||(a.rotation=r.rotation);null===(i=B.store)||void 0===i||i.setMultiple(a).catch((function(){}))}if(B.appConfig.secondaryToolbar){var o=B.pdfLinkService.getAnchorUrl(r.pdfOpenParams);B.appConfig.secondaryToolbar.viewBookmarkButton.href=o}}function webViewerScrollModeChanged(t){if(B.isInitialViewSet&&!B.pdfViewer.isInPresentationMode){var r;null===(r=B.store)||void 0===r||r.set("scrollMode",t.mode).catch((function(){}))}}function webViewerSpreadModeChanged(t){if(B.isInitialViewSet&&!B.pdfViewer.isInPresentationMode){var r;null===(r=B.store)||void 0===r||r.set("spreadMode",t.mode).catch((function(){}))}}function webViewerResize(){var t=B.pdfDocument,r=B.pdfViewer;if((!B.pdfRenderingQueue.printing||!window.matchMedia("print").matches)&&t){var i=r.currentScaleValue;"auto"!==i&&"page-fit"!==i&&"page-width"!==i||(r.currentScaleValue=i);r.update()}}function webViewerHashchange(t){var r,i=t.hash;i&&(B.isInitialViewSet?null!==(r=B.pdfHistory)&&void 0!==r&&r.popStateInProgress||B.pdfLinkService.setHash(i):B.initialBookmark=i)}var H=function webViewerFileInputChange(t){var r;if(null===(r=B.pdfViewer)||void 0===r||!r.isInPresentationMode){var i=t.fileInput.files[0];B.open({url:URL.createObjectURL(i),originalUrl:i.name});window.setNgxExtendedPdfViewerSource&&window.setNgxExtendedPdfViewerSource(i.name?i.name:URL.createObjectURL(i))}},U=function webViewerOpenFile(t){B.appConfig.openFileInput.click()};function webViewerPresentationMode(){B.requestPresentationMode()}function webViewerSwitchAnnotationEditorMode(t){B.pdfViewer.annotationEditorMode=t.mode}function webViewerSwitchAnnotationEditorParams(t){B.pdfViewer.annotationEditorParams=t}function webViewerPrint(){B.triggerPrinting()}function webViewerDownload(){B.downloadOrSave()}function webViewerFirstPage(){B.page=1}function webViewerLastPage(){B.page=B.pagesCount}function webViewerNextPage(){B.pdfViewer.nextPage()}function webViewerPreviousPage(){B.pdfViewer.previousPage()}function webViewerZoomIn(){B.zoomIn()}function webViewerZoomOut(){B.zoomOut()}function webViewerZoomReset(){B.zoomReset()}function webViewerPageNumberChanged(t){var r=B.pdfViewer;""!==t.value&&B.pdfLinkService.goToPage(t.value);if(t.value!==r.currentPageNumber.toString()&&t.value!==r.currentPageLabel){var i;null===(i=B.toolbar)||void 0===i||i.setPageNumber(r.currentPageNumber,r.currentPageLabel)}}function webViewerScaleChanged(t){B.pdfViewer.currentScaleValue=t.value}function webViewerRotateCw(){B.rotatePages(90)}function webViewerRotateCcw(){B.rotatePages(-90)}function webViewerOptionalContentConfig(t){B.pdfViewer.optionalContentConfigPromise=t.promise}function webViewerSwitchScrollMode(t){B.pdfViewer.scrollMode=t.mode}function webViewerSwitchSpreadMode(t){B.pdfViewer.spreadMode=t.mode}function webViewerDocumentProperties(){var t;null===(t=B.pdfDocumentProperties)||void 0===t||t.open()}function webViewerFindFromUrlHash(t){B.eventBus.dispatch("find",{source:t.source,type:"",query:t.query,phraseSearch:t.phraseSearch,caseSensitive:!1,entireWord:!1,ignoreAccents:!1,fuzzySearch:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function webViewerUpdateFindMatchesCount(t){var r=t.matchesCount;B.supportsIntegratedFind?B.externalServices.updateFindMatchesCount(r):B.findBar.updateResultsCount(r)}function webViewerUpdateFindControlState(t){var r=t.state,i=t.previous,a=t.matchesCount,o=t.rawQuery;if(B.supportsIntegratedFind)B.externalServices.updateFindControlState({result:r,findPrevious:i,matchesCount:a,rawQuery:o});else{var l;null===(l=B.findBar)||void 0===l||l.updateUIState(r,i,a)}}function webViewerScaleChanging(t){var r;null===(r=B.toolbar)||void 0===r||r.setPageScale(t.presetValue,t.scale);B.pdfViewer.update()}function webViewerRotationChanging(t){B.pdfThumbnailViewer&&(B.pdfThumbnailViewer.pagesRotation=t.pagesRotation);B.forceRendering();B.pdfViewer.currentPageNumber=t.pageNumber}function webViewerPageChanging(t){var r,i,o,l,c=t.pageNumber,u=t.pageLabel;null===(r=B.toolbar)||void 0===r||r.setPageNumber(c,u);null===(i=B.secondaryToolbar)||void 0===i||i.setPageNumber(c);if((null===(o=B.pdfSidebar)||void 0===o?void 0:o.visibleView)===a.SidebarView.THUMBS){var d;null===(d=B.pdfThumbnailViewer)||void 0===d||d.scrollThumbnailIntoView(c)}var h=B.pdfViewer.getPageView(c-1);null===(l=B.toolbar)||void 0===l||l.updateLoadingIndicatorState((null==h?void 0:h.renderingState)===a.RenderingStates.RUNNING);var p=document.getElementById("pageNumber");if(p){var v=new CustomEvent("page-change");p.dispatchEvent(v)}}function webViewerVisibilityChange(t){"visible"===document.visibilityState&&setZoomDisabledTimeout()}var z=null;function setZoomDisabledTimeout(){z&&clearTimeout(z);z=setTimeout((function(){z=null}),R)}function webViewerWheel(t){var r=document.getElementById("viewerContainer");if(r.parentNode.querySelector(":hover")===r){var i=B.pdfViewer,o=B.supportedMouseWheelZoomModifierKeys,l=B.supportsPinchToZoom;if(!i.isInPresentationMode){var c=(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0);if(!window.isKeyIgnored||!window.isKeyIgnored(c,"WHEEL")){var u=t.deltaMode,d=Math.exp(-t.deltaY/100),h=t.ctrlKey&&!B._isCtrlKeyDown&&u===WheelEvent.DOM_DELTA_PIXEL&&0===t.deltaX&&(Math.abs(d-1)<.05||!1)&&0===t.deltaZ;if(h||t.ctrlKey&&o.ctrlKey||t.metaKey&&o.metaKey){t.preventDefault();if(z||"hidden"===document.visibilityState)return;var p=i.currentScale;if(h&&l)if((d=B._accumulateFactor(p,d,"_wheelUnusedFactor"))<1)B.zoomOut(null,d);else{if(!(d>1))return;B.zoomIn(null,d)}else{var v=(0,a.normalizeWheelEventDirection)(t),y=0;if(u===WheelEvent.DOM_DELTA_LINE||u===WheelEvent.DOM_DELTA_PAGE)y=Math.abs(v)>=1?Math.sign(v):B._accumulateTicks(v,"_wheelUnusedTicks");else{y=B._accumulateTicks(v/30,"_wheelUnusedTicks")}if(y<0)B.zoomOut(-y);else{if(!(y>0))return;B.zoomIn(y)}}B._centerAtPos(p,t.clientX,t.clientY)}else setZoomDisabledTimeout()}}}}function webViewerTouchStart(t){if(!(B.pdfViewer.isInPresentationMode||t.touches.length<2)){t.preventDefault();if(2===t.touches.length){var r=_slicedToArray(t.touches,2),i=r[0],a=r[1];if(i.identifier>a.identifier){var o=[a,i];i=o[0];a=o[1]}B._touchInfo={touch0X:i.pageX,touch0Y:i.pageY,touch1X:a.pageX,touch1Y:a.pageY}}else B._touchInfo=null}}function webViewerTouchMove(t){if(B._touchInfo&&2===t.touches.length){var r=B.pdfViewer,i=B._touchInfo,a=B.supportsPinchToZoom,o=_slicedToArray(t.touches,2),l=o[0],c=o[1];if(l.identifier>c.identifier){var u=[c,l];l=u[0];c=u[1]}var d=l,h=d.pageX,p=d.pageY,v=c,y=v.pageX,g=v.pageY,m=i.touch0X,b=i.touch0Y,w=i.touch1X,P=i.touch1Y;if(!(Math.abs(m-h)<=1&&Math.abs(b-p)<=1&&Math.abs(w-y)<=1&&Math.abs(P-g)<=1)){i.touch0X=h;i.touch0Y=p;i.touch1X=y;i.touch1Y=g;if(m===h&&b===p){var S=w-h,k=P-p,x=y-h,A=g-p,E=S*A-k*x;if(Math.abs(E)>.02*Math.hypot(S,k)*Math.hypot(x,A))return}else if(w===y&&P===g){var T=m-y,C=b-g,I=h-y,O=p-g,M=T*O-C*I;if(Math.abs(M)>.02*Math.hypot(T,C)*Math.hypot(I,O))return}else{if((h-m)*(y-w)+(p-b)*(g-P)>=0)return}t.preventDefault();var L=Math.hypot(h-y,p-g)||1,R=Math.hypot(m-w,b-P)||1,D=r.currentScale;if(a){var G=B._accumulateFactor(D,L/R,"_touchUnusedFactor");if(G<1)B.zoomOut(null,G);else{if(!(G>1))return;B.zoomIn(null,G)}}else{var j=B._accumulateTicks((L-R)/30,"_touchUnusedTicks");if(j<0)B.zoomOut(-j);else{if(!(j>0))return;B.zoomIn(j)}}B._centerAtPos(D,(h+y)/2,(p+g)/2)}}}function webViewerTouchEnd(t){if(B._touchInfo){t.preventDefault();B._touchInfo=null;B._touchUnusedTicks=0;B._touchUnusedFactor=1}}function webViewerClick(t){var r,i,a;if(null!==(r=B.secondaryToolbar)&&void 0!==r&&r.isOpen){var o=B.appConfig;if(B.pdfViewer.containsElement(t.target)||null!==(i=o.toolbar)&&void 0!==i&&i.container.contains(t.target)&&t.target!==(null===(a=o.secondaryToolbar)||void 0===a?void 0:a.toggleButton)){if(t.target&&t.target.parentElement===o.secondaryToolbar.toggleButton)return;if(t.target&&t.target.parentElement&&t.target.parentElement.parentElement===o.secondaryToolbar.toggleButton)return;B.secondaryToolbar.close()}}}function webViewerKeyUp(t){"Control"===t.key&&(B._isCtrlKeyDown=!1)}function webViewerKeyDown(t){var r,i,o,l,c;B._isCtrlKeyDown="Control"===t.key;if(!B.overlayManager.active){var u=B.eventBus,d=B.pdfViewer,h=d.isInPresentationMode,p=!1,v=!1,y=(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0);if(!window.isKeyIgnored||!window.isKeyIgnored(y,t.keyCode)){if(1===y||8===y||5===y||12===y)switch(t.keyCode){case 70:if(!B.supportsIntegratedFind&&!t.shiftKey){var g;null===(g=B.findBar)||void 0===g||g.open();p=!0}break;case 71:if(!B.supportsIntegratedFind){var m=B.findController.state;if(m){var b={source:window,type:"again",findPrevious:5===y||12===y};u.dispatch("find",_objectSpread(_objectSpread({},m),b))}p=!0}break;case 61:case 107:case 187:case 171:B.zoomIn();p=!0;break;case 173:case 109:case 189:B.zoomOut();p=!0;break;case 48:case 96:if(!h){setTimeout((function(){B.zoomReset()}));p=!1}break;case 38:if(h||B.page>1){B.page=1;p=!0;v=!0}break;case 40:if(h||B.page<B.pagesCount){B.page=B.pagesCount;p=!0;v=!0}}if(1===y||8===y)switch(t.keyCode){case 83:u.dispatch("download",{source:window});p=!0;break;case 79:u.dispatch("openfile",{source:window});p=!0}if(3===y||10===y)switch(t.keyCode){case 80:B.requestPresentationMode();p=!0;B.externalServices.reportTelemetry({type:"buttons",data:{id:"presentationModeKeyboard"}});break;case 71:if(B.appConfig.toolbar){B.appConfig.toolbar.pageNumber.select();p=!0}}if(p){v&&!h&&d.focus();t.preventDefault()}else{var w=(0,a.getActiveOrFocusedElement)(),P=null==w?void 0:w.tagName.toUpperCase();if(!("INPUT"===P||"TEXTAREA"===P||"SELECT"===P||null!=w&&w.isContentEditable)||27===t.keyCode){if(0===y){var S=0,k=!1;switch(t.keyCode){case 38:case 33:d.isVerticalScrollbarEnabled&&(k=!0);S=-1;break;case 8:h||(k=!0);S=-1;break;case 37:d.isHorizontalScrollbarEnabled&&(k=!0);case 75:case 80:S=-1;break;case 27:if(null!==(r=B.secondaryToolbar)&&void 0!==r&&r.isOpen){B.secondaryToolbar.close();p=!0}if(!B.supportsIntegratedFind&&null!==(i=B.findBar)&&void 0!==i&&i.opened){B.findBar.close();p=!0}break;case 40:case 34:d.isVerticalScrollbarEnabled&&(k=!0);S=1;break;case 13:case 32:h||(k=!0);S=1;break;case 39:d.isHorizontalScrollbarEnabled&&(k=!0);case 74:case 78:S=1;break;case 36:if(h||B.page>1){B.page=1;p=!0;v=!0}break;case 35:if(h||B.page<B.pagesCount){B.page=B.pagesCount;p=!0;v=!0}break;case 83:null===(o=B.pdfCursorTools)||void 0===o||o.switchTool(a.CursorTool.SELECT);break;case 72:null===(l=B.pdfCursorTools)||void 0===l||l.switchTool(a.CursorTool.HAND);break;case 82:B.rotatePages(90);break;case 115:null===(c=B.pdfSidebar)||void 0===c||c.toggle()}if(0!==S&&(!k||"page-fit"===d.currentScaleValue)){S>0?d.nextPage():d.previousPage();p=!0}}if(4===y)switch(t.keyCode){case 13:case 32:if(!h&&"page-fit"!==d.currentScaleValue)break;d.previousPage();p=!0;break;case 82:B.rotatePages(-90)}v&&!d.containsElement(w)&&d.focus();p&&t.preventDefault()}}}}}function beforeUnload(t){t.preventDefault();t.returnValue="";return!1}var X={instance:{supportsPrinting:!1,createPrintService:function createPrintService(){throw new Error("Not implemented: createPrintService")}}};r.PDFPrintServiceFactory=X},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.animationStarted=r.VERTICAL_PADDING=r.UNKNOWN_SCALE=r.TextLayerMode=r.SpreadMode=r.SidebarView=r.ScrollMode=r.SCROLLBAR_PADDING=r.RenderingStates=r.RendererType=r.ProgressBar=r.PresentationModeState=r.OutputScale=r.MIN_SCALE=r.MAX_SCALE=r.MAX_AUTO_SCALE=r.DEFAULT_SCALE_VALUE=r.DEFAULT_SCALE_DELTA=r.DEFAULT_SCALE=r.CursorTool=r.AutoPrintRegExp=void 0;r.apiPageLayoutToViewerModes=function apiPageLayoutToViewerModes(t){var r=a.VERTICAL,i=o.NONE;switch(t){case"SinglePage":r=a.PAGE;break;case"OneColumn":break;case"TwoPageLeft":r=a.PAGE;case"TwoColumnLeft":i=o.ODD;break;case"TwoPageRight":r=a.PAGE;case"TwoColumnRight":i=o.EVEN}return{scrollMode:r,spreadMode:i}};r.apiPageModeToSidebarView=function apiPageModeToSidebarView(t){switch(t){case"UseNone":return i.NONE;case"UseThumbs":return i.THUMBS;case"UseOutlines":return i.OUTLINE;case"UseAttachments":return i.ATTACHMENTS;case"UseOC":return i.LAYERS}return i.NONE};r.approximateFraction=function approximateFraction(t){if(Math.floor(t)===t)return[t,1];var r=1/t;if(r>8)return[1,8];if(Math.floor(r)===r)return[1,r];var i,a=t>1?r:t,o=0,l=1,c=1,u=1;for(;;){var d=o+c,h=l+u;if(h>8)break;if(a<=d/h){c=d;u=h}else{o=d;l=h}}i=a-o/l<c/u-a?a===t?[o,l]:[l,o]:a===t?[c,u]:[u,c];return i};r.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements;r.binarySearchFirstItem=binarySearchFirstItem;r.docStyle=void 0;r.getActiveOrFocusedElement=function getActiveOrFocusedElement(){var t=document,r=t.activeElement||t.querySelector(":focus");for(;null!==(i=r)&&void 0!==i&&i.shadowRoot;){var i;r=(t=r.shadowRoot).activeElement||t.querySelector(":focus")}return r};r.getPageSizeInches=function getPageSizeInches(t){var r=t.view,i=t.userUnit,a=t.rotate,o=_slicedToArray(r,4),l=o[0],c=o[1],u=o[2],d=o[3],h=a%180!=0,p=(u-l)/72*i,v=(d-c)/72*i;return{width:h?v:p,height:h?p:v}};r.getVisibleElements=function getVisibleElements(t){var r=t.scrollEl,i=t.views,a=t.sortByVisibility,o=void 0!==a&&a,l=t.horizontal,c=void 0!==l&&l,u=t.rtl,d=void 0!==u&&u,h=r.scrollTop,p=h+r.clientHeight,v=r.scrollLeft,y=v+r.clientWidth;var g=[],m=new Set,b=i.length,w=binarySearchFirstItem(i,c?function isElementNextAfterViewHorizontally(t){var r=t.div,i=r.offsetLeft+r.clientLeft,a=i+r.clientWidth;return d?i<y:a>v}:function isElementBottomAfterViewTop(t){var r=t.div;return r.offsetTop+r.clientTop+r.clientHeight>h});w>0&&w<b&&!c&&(w=backtrackBeforeAllVisibleElements(w,i,h));for(var P=c?y:-1,S=w;S<b;S++){var k=i[S],x=k.div,A=x.offsetLeft+x.clientLeft,E=x.offsetTop+x.clientTop,T=x.clientWidth,C=x.clientHeight,I=A+T,O=E+C;if(-1===P)O>=p&&(P=O);else if((c?A:E)>P)break;if(!(O<=h||E>=p||I<=v||A>=y)){var M=Math.max(0,h-E)+Math.max(0,O-p),L=(T-(Math.max(0,v-A)+Math.max(0,I-y)))/T,R=(C-M)/C*L*100|0;g.push({id:k.id,x:A,y:E,view:k,percent:R,widthPercent:100*L|0});m.add(k.id)}}var D=g[0],G=g.at(-1);o&&g.sort((function(t,r){var i=t.percent-r.percent;return Math.abs(i)>.001?-i:t.id-r.id}));return{first:D,last:G,views:g,ids:m}};r.isPortraitOrientation=function isPortraitOrientation(t){return t.width<=t.height};r.isValidRotation=function isValidRotation(t){return Number.isInteger(t)&&t%90==0};r.isValidScrollMode=function isValidScrollMode(t){return Number.isInteger(t)&&Object.values(a).includes(t)&&t!==a.UNKNOWN};r.isValidSpreadMode=function isValidSpreadMode(t){return Number.isInteger(t)&&Object.values(o).includes(t)&&t!==o.UNKNOWN};r.noContextMenuHandler=function noContextMenuHandler(t){t.preventDefault()};r.normalizeWheelEventDelta=function normalizeWheelEventDelta(t){var r=t.deltaMode,i=normalizeWheelEventDirection(t);r===WheelEvent.DOM_DELTA_PIXEL?i/=900:r===WheelEvent.DOM_DELTA_LINE&&(i/=30);return i};r.normalizeWheelEventDirection=normalizeWheelEventDirection;r.parseQueryString=function parseQueryString(t){var r,i=new Map,a=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}(new URLSearchParams(t));try{for(a.s();!(r=a.n()).done;){var o=_slicedToArray(r.value,2),l=o[0],c=o[1];i.set(l.toLowerCase(),c)}}catch(t){a.e(t)}finally{a.f()}return i};r.removeNullCharacters=function removeNullCharacters(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof t){console.error("The argument must be a string.");return t}r&&(t=t.replaceAll(c," "));return t.replaceAll("\0","")};r.roundToDivide=function roundToDivide(t,r){var i=t%r;return 0===i?t:Math.round(t-i+r)};r.scrollIntoView=function scrollIntoView(t,r){var i,a,o,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.classList.contains("stf__item")||null!==(i=t.parentElement)&&void 0!==i&&i.classList.contains("stf__item")||null!==(a=t.parentElement)&&void 0!==a&&null!==(o=a.parentElement)&&void 0!==o&&o.classList.contains("stf__item"))return;var u=t.offsetParent;if(!u){globalThis.ngxConsole.error("offsetParent is not set -- cannot scroll");return}var d=t.offsetTop+t.clientTop,h=t.offsetLeft+t.clientLeft;for(;u.clientHeight===u.scrollHeight&&u.clientWidth===u.scrollWidth||l&&(u.classList.contains("markedContent")||"hidden"===getComputedStyle(u).overflow);){d+=u.offsetTop;h+=u.offsetLeft;if(!(u=u.offsetParent)){if(c&&document.body.clientHeight>d){d-=32;window.scrollTo(window.scrollX,d)}return}}if(r){void 0!==r.top&&(d+=r.top);if(void 0!==r.left){h+=r.left;u.scrollLeft=h}}u.scrollTop=d};r.watchScroll=function watchScroll(t,r){var i=function debounceScroll(i){o||(o=window.requestAnimationFrame((function viewAreaElementScrolled(){o=null;var i=t.scrollLeft,l=a.lastX;i!==l&&(a.right=i>l);a.lastX=i;var c=t.scrollTop,u=a.lastY;c!==u&&(a.down=c>u);a.lastY=c;r(a)})))},a={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:i},o=null;t.addEventListener("scroll",i,!0);return a};function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}r.DEFAULT_SCALE_VALUE="auto";r.DEFAULT_SCALE=1;r.DEFAULT_SCALE_DELTA=1.1;r.MIN_SCALE=.1;r.MAX_SCALE=10;r.UNKNOWN_SCALE=0;r.MAX_AUTO_SCALE=1.25;r.SCROLLBAR_PADDING=40;r.VERTICAL_PADDING=5;r.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};r.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var i={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};r.SidebarView=i;r.RendererType={CANVAS:"canvas",SVG:"svg"};r.TextLayerMode={DISABLE:0,ENABLE:1};var a={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};r.ScrollMode=a;var o={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};r.SpreadMode=o;r.CursorTool={SELECT:0,HAND:1,ZOOM:2};r.AutoPrintRegExp=/\bprint\s*\(/;var l=function(){function OutputScale(){_classCallCheck(this,OutputScale);var t=window.devicePixelRatio||1;this.sx=t;this.sy=t}_createClass(OutputScale,[{key:"scaled",get:function get(){return 1!==this.sx||1!==this.sy}}]);return OutputScale}();r.OutputScale=l;var c=/[\x01-\x1F]/g;function binarySearchFirstItem(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.length-1;if(a<0||!r(t[a]))return t.length;if(r(t[i]))return i;for(;i<a;){var o=i+a>>1;r(t[o])?a=o:i=o+1}return i}function backtrackBeforeAllVisibleElements(t,r,i){if(t<2)return t;var a=r[t].div,o=a.offsetTop+a.clientTop;o>=i&&(o=(a=r[t-1].div).offsetTop+a.clientTop);for(var l=t-2;l>=0&&!((a=r[l].div).offsetTop+a.clientTop+a.clientHeight<=o);--l)t=l;return t}function normalizeWheelEventDirection(t){var r=Math.hypot(t.deltaX,t.deltaY),i=Math.atan2(t.deltaY,t.deltaX);-.25*Math.PI<i&&i<.75*Math.PI&&(r=-r);return r}var u=new Promise((function(t){window.ngxZone.runOutsideAngular((function(){window.requestAnimationFrame(t)}))}));r.animationStarted=u;var d=document.documentElement.style;r.docStyle=d;var h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=function(){function ProgressBar(t){_classCallCheck(this,ProgressBar);_classPrivateFieldInitSpec(this,h,{writable:!0,value:null});_classPrivateFieldInitSpec(this,p,{writable:!0,value:null});_classPrivateFieldInitSpec(this,v,{writable:!0,value:0});_classPrivateFieldInitSpec(this,y,{writable:!0,value:null});_classPrivateFieldInitSpec(this,g,{writable:!0,value:!0});_classPrivateFieldSet(this,h,t.classList);_classPrivateFieldSet(this,y,t.style)}_createClass(ProgressBar,[{key:"percent",get:function get(){return _classPrivateFieldGet(this,v)},set:function set(t){_classPrivateFieldSet(this,v,function clamp(t,r,i){return Math.min(Math.max(t,r),i)}(t,0,100));if(isNaN(t))_classPrivateFieldGet(this,h).add("indeterminate");else{_classPrivateFieldGet(this,h).remove("indeterminate");_classPrivateFieldGet(this,y).setProperty("--progressBar-percent","".concat(_classPrivateFieldGet(this,v),"%"))}}},{key:"setWidth",value:function setWidth(t){if(t){var r=t.parentNode.offsetWidth-t.offsetWidth;r>0&&_classPrivateFieldGet(this,y).setProperty("--progressBar-end-offset","".concat(r,"px"))}}},{key:"setDisableAutoFetch",value:function setDisableAutoFetch(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;if(!isNaN(_classPrivateFieldGet(this,v))){_classPrivateFieldGet(this,p)&&clearTimeout(_classPrivateFieldGet(this,p));this.show();_classPrivateFieldSet(this,p,setTimeout((function(){_classPrivateFieldSet(t,p,null);t.hide()}),r))}}},{key:"hide",value:function hide(){if(_classPrivateFieldGet(this,g)){_classPrivateFieldSet(this,g,!1);_classPrivateFieldGet(this,h).add("hidden")}}},{key:"show",value:function show(){if(!_classPrivateFieldGet(this,g)){_classPrivateFieldSet(this,g,!0);_classPrivateFieldGet(this,h).remove("hidden")}}}]);return ProgressBar}();r.ProgressBar=m},t=>{"use strict";t.exports=window["pdfjs-dist/build/pdf"]},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.compatibilityParams=r.OptionKind=r.AppOptions=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}var i=Object.create(null);r.compatibilityParams=i;var a=navigator.userAgent||"",o=navigator.platform||"",l=navigator.maxTouchPoints||1,c=/Android/.test(a),u=/\b(iPad|iPhone|iPod)(?=;)/.test(a)||"MacIntel"===o&&l>1;!function checkCanvasSizeLimitation(){(u||c)&&(i.maxCanvasPixels=5242880)}();var d={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};r.OptionKind=d;var h={annotationEditorMode:{value:0,kind:d.VIEWER+d.PREFERENCE},annotationMode:{value:2,kind:d.VIEWER+d.PREFERENCE},cursorToolOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},defaultZoomDelay:{value:400,kind:d.VIEWER+d.PREFERENCE},defaultZoomValue:{value:"",kind:d.VIEWER+d.PREFERENCE},disableHistory:{value:!1,kind:d.VIEWER},disablePageLabels:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePermissions:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:d.VIEWER+d.PREFERENCE},enableScripting:{value:!0,kind:d.VIEWER+d.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:d.VIEWER},externalLinkTarget:{value:0,kind:d.VIEWER+d.PREFERENCE},historyUpdateUrl:{value:!1,kind:d.VIEWER+d.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:d.VIEWER+d.PREFERENCE},imageResourcesPath:{value:"./images/",kind:d.VIEWER},maxCanvasPixels:{value:16777216,kind:d.VIEWER},forcePageColors:{value:!1,kind:d.VIEWER+d.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:d.VIEWER+d.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:d.VIEWER+d.PREFERENCE},pdfBugEnabled:{value:!1,kind:d.VIEWER+d.PREFERENCE},printResolution:{value:150,kind:d.VIEWER},removePageBorders:{value:!1,kind:d.VIEWER+d.PREFERENCE},sidebarViewOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},scrollModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},spreadModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},textLayerMode:{value:1,kind:d.VIEWER+d.PREFERENCE},useOnlyCssZoom:{value:!1,kind:d.VIEWER+d.PREFERENCE},viewerCssTheme:{value:0,kind:d.VIEWER+d.PREFERENCE},viewOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},cMapPacked:{value:!0,kind:d.API},cMapUrl:{value:"../web/cmaps/",kind:d.API},disableAutoFetch:{value:!1,kind:d.API+d.PREFERENCE},disableFontFace:{value:!1,kind:d.API+d.PREFERENCE},disableRange:{value:!1,kind:d.API+d.PREFERENCE},disableStream:{value:!1,kind:d.API+d.PREFERENCE},docBaseUrl:{value:"",kind:d.API},enableXfa:{value:!0,kind:d.API+d.PREFERENCE},fontExtraProperties:{value:!1,kind:d.API},isEvalSupported:{value:!0,kind:d.API},isOffscreenCanvasSupported:{value:!0,kind:d.API},maxImageSize:{value:-1,kind:d.API},pdfBug:{value:!1,kind:d.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:d.API},verbosity:{value:1,kind:d.API},workerPort:{value:null,kind:d.WORKER},workerSrc:{value:"./assets/pdf.worker.js",kind:d.WORKER}};h.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:d.VIEWER};h.disablePreferences={value:!1,kind:d.VIEWER};h.locale={value:navigator.language||"en-US",kind:d.VIEWER};h.renderer={value:"canvas",kind:d.VIEWER+d.PREFERENCE};h.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:d.VIEWER};var p=Object.create(null);if(globalThis.pdfDefaultOptions)for(var v in globalThis.pdfDefaultOptions)p[v]=globalThis.pdfDefaultOptions[v];var y=function(){function AppOptions(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AppOptions);throw new Error("Cannot initialize AppOptions.")}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AppOptions,null,[{key:"get",value:function get(t){var r=p[t];if(void 0!==r)return r;var a=h[t];if(void 0!==a){var o;return null!==(o=i[t])&&void 0!==o?o:a.value}}},{key:"getAll",value:function getAll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Object.create(null);for(var a in h){var o,l=h[a];if(t){if(0==(t&l.kind))continue;if(t===d.PREFERENCE){var c=l.value,u=_typeof(c);if("boolean"===u||"string"===u||"number"===u&&Number.isInteger(c)){r[a]=c;continue}throw new Error("Invalid type for preference: ".concat(a))}}var v=p[a];r[a]=void 0!==v?v:null!==(o=i[a])&&void 0!==o?o:l.value}return r}},{key:"set",value:function set(t,r){p[t]=r}},{key:"setAll",value:function setAll(t){for(var r in t)p[r]=t[r]}},{key:"remove",value:function remove(t){delete p[t]}}]);return AppOptions}();r.AppOptions=y;y._hasUserOptions=function(){return Object.keys(p).length>0}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.WaitOnType=r.EventBus=r.AutomationEventBus=void 0;r.waitOnEventOrTimeout=function waitOnEventOrTimeout(t){var r=t.target,a=t.name,l=t.delay,c=void 0===l?0:l;return new Promise((function(t,l){if("object"!==_typeof(r)||!a||"string"!=typeof a||!(Number.isInteger(c)&&c>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(i){r instanceof o?r._off(a,u):r.removeEventListener(a,u);h&&clearTimeout(h);t(i)}var u=handler.bind(null,i.EVENT);r instanceof o?r._on(a,u):r.addEventListener(a,u);var d=handler.bind(null,i.TIMEOUT),h=setTimeout(d,c)}))};function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){var i=function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}(t,r,"get");return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,i)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var i={EVENT:"event",TIMEOUT:"timeout"};r.WaitOnType=i;var a=new WeakMap,o=function(){function EventBus(){_classCallCheck(this,EventBus);_classPrivateFieldInitSpec(this,a,{writable:!0,value:Object.create(null)})}_createClass(EventBus,[{key:"on",value:function on(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(t,r,{external:!0,once:null==i?void 0:i.once})}},{key:"off",value:function off(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(t,r,{external:!0,once:null==i?void 0:i.once})}},{key:"dispatch",value:function dispatch(t,r){var i=_classPrivateFieldGet(this,a)[t];if(i&&0!==i.length){var o,l,c=_createForOfIteratorHelper(i.slice(0));try{for(c.s();!(l=c.n()).done;){var u=l.value,d=u.listener,h=u.external;u.once&&this._off(t,d);h?(o||(o=[])).push(d):d(r)}}catch(t){c.e(t)}finally{c.f()}if(o){var p,v=_createForOfIteratorHelper(o);try{for(v.s();!(p=v.n()).done;){(0,p.value)(r)}}catch(t){v.e(t)}finally{v.f()}o=null}}}},{key:"_on",value:function _on(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;((i=_classPrivateFieldGet(this,a))[t]||(i[t]=[])).push({listener:r,external:!0===(null==o?void 0:o.external),once:!0===(null==o?void 0:o.once)})}},{key:"_off",value:function _off(t,r){var i=_classPrivateFieldGet(this,a)[t];if(i)for(var o=0,l=i.length;o<l;o++)if(i[o].listener===r){i.splice(o,1);return}}}]);return EventBus}();r.EventBus=o;var l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(AutomationEventBus,t);var r=_createSuper(AutomationEventBus);function AutomationEventBus(){_classCallCheck(this,AutomationEventBus);return r.apply(this,arguments)}_createClass(AutomationEventBus,[{key:"dispatch",value:function dispatch(t,r){throw new Error("Not implemented: AutomationEventBus.dispatch")}}]);return AutomationEventBus}(o);r.AutomationEventBus=l},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.SimpleLinkService=r.PDFLinkService=r.LinkTarget=void 0;var a=i(3);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(t,r){var i=function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}(t,r,"get");return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,i)}var o={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};r.LinkTarget=o;function _addLinkAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.url,l=r.target,c=r.rel,u=r.enabled,d=void 0===u||u;if(!i||"string"!=typeof i)throw new Error('A valid "url" parameter must provided.');var h=(0,a.removeNullCharacters)(i);if(d)t.href=t.title=h;else{t.href="";t.title="Disabled: ".concat(h);t.onclick=function(){return!1}}var p="";switch(l){case o.NONE:break;case o.SELF:p="_self";break;case o.BLANK:p="_blank";break;case o.PARENT:p="_parent";break;case o.TOP:p="_top"}t.target=p;t.rel="string"==typeof c?c:"noopener noreferrer nofollow"}var l=new WeakMap,c=new WeakSet,u=function(){function PDFLinkService(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.eventBus,i=t.externalLinkTarget,a=void 0===i?null:i,o=t.externalLinkRel,u=void 0===o?null:o,d=t.ignoreDestinationZoom,h=void 0!==d&&d;_classCallCheck(this,PDFLinkService);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,c);!function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}(this,l,{writable:!0,value:new Map});this.eventBus=r;this.externalLinkTarget=a;this.externalLinkRel=u;this.externalLinkEnabled=!0;this._ignoreDestinationZoom=h;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null}_createClass(PDFLinkService,[{key:"setDocument",value:function setDocument(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=r;this.pdfDocument=t;_classPrivateFieldGet(this,l).clear()}},{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setHistory",value:function setHistory(t){this.pdfHistory=t}},{key:"pagesCount",get:function get(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function get(){return this.pdfViewer.currentPageNumber},set:function set(t){this.pdfViewer.currentPageNumber=t}},{key:"rotation",get:function get(){return this.pdfViewer.pagesRotation},set:function set(t){this.pdfViewer.pagesRotation=t}},{key:"isInPresentationMode",get:function get(){return this.pdfViewer.isInPresentationMode}},{key:"goToDestination",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,i;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(this.pdfDocument){a.next=2;break}return a.abrupt("return");case 2:if("string"!=typeof t){a.next=9;break}r=t;a.next=6;return this.pdfDocument.getDestination(t);case 6:i=a.sent;a.next=13;break;case 9:r=null;a.next=12;return t;case 12:i=a.sent;case 13:if(Array.isArray(i)){a.next=16;break}globalThis.ngxConsole.error('PDFLinkService.goToDestination: "'.concat(i,'" is not ')+'a valid destination array, for dest="'.concat(t,'".'));return a.abrupt("return");case 16:_classPrivateMethodGet(this,c,_goToDestinationHelper2).call(this,t,r,i);case 17:case"end":return a.stop()}}),_callee,this)}))),function goToDestination(t){return r.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){if(this.pdfDocument){var r="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;if(Number.isInteger(r)&&r>0&&r<=this.pagesCount){if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(r)}if("book"===this.pdfViewer.pageViewMode){if(this.pdfViewer.pageFlip){this.pdfViewer.ensureAdjecentPagesAreLoaded();var i=this.pdfViewer.currentPageNumber-this.pdfViewer.currentPageNumber%2,a=r-r%2;i===a-2?this.pdfViewer.pageFlip.flipNext():i===a+2?this.pdfViewer.pageFlip.flipPrev():this.pdfViewer.pageFlip.turnToPage(r-1)}}else this.pdfViewer.scrollPageIntoView({pageNumber:r})}else globalThis.ngxConsole.error('PDFLinkService.goToPage: "'.concat(t,'" is not a valid page.'))}}},{key:"addLinkAttributes",value:function addLinkAttributes(t,r){_addLinkAttributes(t,{url:r,target:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?o.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function getDestinationHash(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){var r=JSON.stringify(t);if(r.length>0)return this.getAnchorUrl("#"+escape(r))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return this.baseUrl?this.baseUrl+t:t}},{key:"setHash",value:function setHash(t){if(this.pdfDocument){var r,i;if(t.includes("=")){var o=(0,a.parseQueryString)(t);o.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:o.get("search").replaceAll('"',""),phraseSearch:"true"===o.get("phrase")});o.has("page")&&(r=0|o.get("page")||1);if(o.has("zoom")){var l=o.get("zoom").split(","),c=l[0],u=parseFloat(c);c.includes("Fit")?"Fit"===c||"FitB"===c?i=[null,{name:c}]:"FitH"===c||"FitBH"===c||"FitV"===c||"FitBV"===c?i=[null,{name:c},l.length>1?0|l[1]:null]:"FitR"===c?5!==l.length?globalThis.ngxConsole.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:c},0|l[1],0|l[2],0|l[3],0|l[4]]:globalThis.ngxConsole.error('PDFLinkService.setHash: "'.concat(c,'" is not a valid zoom value.')):i=[null,{name:"XYZ"},l.length>1?0|l[1]:null,l.length>2?0|l[2]:null,u?u/100:c]}i?this.pdfViewer.scrollPageIntoView({pageNumber:r||this.page,destArray:i,allowNegativeOffset:!0}):r&&(this.page=r);o.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:o.get("pagemode")});o.has("nameddest")&&this.goToDestination(o.get("nameddest"))}else{i=unescape(t);try{i=JSON.parse(i);Array.isArray(i)||(i=i.toString())}catch(t){}if("string"==typeof i||_classStaticPrivateMethodGet(PDFLinkService,PDFLinkService,_isValidExplicitDestination).call(PDFLinkService,i)){this.goToDestination(i);return}globalThis.ngxConsole.error('PDFLinkService.setHash: "'.concat(unescape(t),'" is not a valid destination.'))}}}},{key:"executeNamedAction",value:function executeNamedAction(t){var r,i;switch(t){case"GoBack":null===(r=this.pdfHistory)||void 0===r||r.back();break;case"GoForward":null===(i=this.pdfHistory)||void 0===i||i.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}},{key:"executeSetOCGState",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i,a,o,l,c,u;return _regeneratorRuntime().wrap((function _callee2$(d){for(;;)switch(d.prev=d.next){case 0:r=this.pdfDocument;d.next=3;return this.pdfViewer.optionalContentConfigPromise;case 3:i=d.sent;if(r===this.pdfDocument){d.next=6;break}return d.abrupt("return");case 6:o=_createForOfIteratorHelper(t.state);d.prev=7;o.s();case 9:if((l=o.n()).done){d.next=28;break}c=l.value;d.t0=c;d.next="ON"===d.t0||"OFF"===d.t0||"Toggle"===d.t0?14:16;break;case 14:a=c;return d.abrupt("continue",26);case 16:d.t1=a;d.next="ON"===d.t1?19:"OFF"===d.t1?21:"Toggle"===d.t1?23:26;break;case 19:i.setVisibility(c,!0);return d.abrupt("break",26);case 21:i.setVisibility(c,!1);return d.abrupt("break",26);case 23:(u=i.getGroup(c))&&i.setVisibility(c,!u.visible);return d.abrupt("break",26);case 26:d.next=9;break;case 28:d.next=33;break;case 30:d.prev=30;d.t2=d.catch(7);o.e(d.t2);case 33:d.prev=33;o.f();return d.finish(33);case 36:this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i);case 37:case"end":return d.stop()}}),_callee2,this,[[7,30,33,36]])}))),function executeSetOCGState(r){return t.apply(this,arguments)})},{key:"cachePageRef",value:function cachePageRef(t,r){if(r){var i=0===r.gen?"".concat(r.num,"R"):"".concat(r.num,"R").concat(r.gen);_classPrivateFieldGet(this,l).set(i,t)}}},{key:"_cachedPageNumber",value:function _cachedPageNumber(t){if(!t)return null;var r=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return _classPrivateFieldGet(this,l).get(r)||null}},{key:"isPageVisible",value:function isPageVisible(t){return this.pdfViewer.isPageVisible(t)}},{key:"isPageCached",value:function isPageCached(t){return this.pdfViewer.isPageCached(t)}}]);var t,r;return PDFLinkService}();r.PDFLinkService=u;function _goToDestinationHelper2(t){var r,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,l=o[0];if("object"===_typeof(l)&&null!==l){if(!(r=this._cachedPageNumber(l))){this.pdfDocument.getPageIndex(l).then((function(r){i.cachePageRef(r+1,l);_classPrivateMethodGet(i,c,_goToDestinationHelper2).call(i,t,a,o)})).catch((function(){globalThis.ngxConsole.error('PDFLinkService.#goToDestinationHelper: "'.concat(l,'" is not ')+'a valid page reference, for dest="'.concat(t,'".'))}));return}}else{if(!Number.isInteger(l)){globalThis.ngxConsole.error('PDFLinkService.#goToDestinationHelper: "'.concat(l,'" is not ')+'a valid destination reference, for dest="'.concat(t,'".'));return}r=l+1}if(!r||r<1||r>this.pagesCount)globalThis.ngxConsole.error('PDFLinkService.#goToDestinationHelper: "'.concat(r,'" is not ')+'a valid page number, for dest="'.concat(t,'".'));else{if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:a,explicitDest:o,pageNumber:r})}this.pdfViewer.scrollPageIntoView({pageNumber:r,destArray:o,ignoreDestinationZoom:this._ignoreDestinationZoom})}}function _isValidExplicitDestination(t){if(!Array.isArray(t))return!1;var r=t.length;if(r<2)return!1;var i=t[0];if(!("object"===_typeof(i)&&Number.isInteger(i.num)&&Number.isInteger(i.gen)||Number.isInteger(i)&&i>=0))return!1;var a=t[1];if("object"!==_typeof(a)||"string"!=typeof a.name)return!1;var o=!0;switch(a.name){case"XYZ":if(5!==r)return!1;break;case"Fit":case"FitB":return 2===r;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==r)return!1;break;case"FitR":if(6!==r)return!1;o=!1;break;default:return!1}for(var l=2;l<r;l++){var c=t[l];if(!("number"==typeof c||o&&null===c))return!1}return!0}var d=function(){function SimpleLinkService(){_classCallCheck(this,SimpleLinkService);this.externalLinkEnabled=!0}_createClass(SimpleLinkService,[{key:"pagesCount",get:function get(){return 0}},{key:"page",get:function get(){return 0},set:function set(t){}},{key:"rotation",get:function get(){return 0},set:function set(t){}},{key:"isInPresentationMode",get:function get(){return!1}},{key:"goToDestination",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){return _regeneratorRuntime().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee3)}))),function goToDestination(r){return t.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){}},{key:"addLinkAttributes",value:function addLinkAttributes(t,r){_addLinkAttributes(t,{url:r,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function getDestinationHash(t){return"#"}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return"#"}},{key:"setHash",value:function setHash(t){}},{key:"executeNamedAction",value:function executeNamedAction(t){}},{key:"executeSetOCGState",value:function executeSetOCGState(t){}},{key:"cachePageRef",value:function cachePageRef(t,r){}},{key:"isPageVisible",value:function isPageVisible(t){return!0}},{key:"isPageCached",value:function isPageCached(t){return!0}}]);var t;return SimpleLinkService}();r.SimpleLinkService=d},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditorParams=void 0;var a=i(4);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}var o=new WeakSet,l=_createClass((function AnnotationEditorParams(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditorParams);_classPrivateMethodInitSpec(this,o);this.eventBus=r;(function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i})(this,o,_bindListeners2).call(this,t)}));r.AnnotationEditorParams=l;function _bindListeners2(t){var r=this,i=t.editorFreeTextFontSize,o=t.editorFreeTextColor,l=t.editorInkColor,c=t.editorInkThickness,u=t.editorInkOpacity;i.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,value:i.valueAsNumber})}));o.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,value:o.value})}));l.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.INK_COLOR,value:l.value})}));c.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.INK_THICKNESS,value:c.valueAsNumber})}));u.addEventListener("input",(function(t){r.eventBus.dispatch("switchannotationeditorparams",{source:r,type:a.AnnotationEditorParamsType.INK_OPACITY,value:u.valueAsNumber})}));this.eventBus._on("annotationeditorparamschanged",(function(t){var r,d=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}(t.details);try{for(d.s();!(r=d.n()).done;){var h=_slicedToArray(r.value,2),p=h[0],v=h[1];switch(p){case a.AnnotationEditorParamsType.FREETEXT_SIZE:i.value=v;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:o.value=v;break;case a.AnnotationEditorParamsType.INK_COLOR:l.value=v;break;case a.AnnotationEditorParamsType.INK_THICKNESS:c.value=v;break;case a.AnnotationEditorParamsType.INK_OPACITY:u.value=v}}}catch(t){d.e(t)}finally{d.f()}}))}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.OverlayManager=void 0;function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var a=new WeakMap,o=new WeakMap,l=function(){function OverlayManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OverlayManager);_classPrivateFieldInitSpec(this,a,{writable:!0,value:new WeakMap});_classPrivateFieldInitSpec(this,o,{writable:!0,value:null})}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(OverlayManager,[{key:"active",get:function get(){return _classPrivateFieldGet(this,o)}},{key:"register",value:(c=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,l,c=this,u=arguments;return _regeneratorRuntime().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:r=u.length>1&&void 0!==u[1]&&u[1];if("object"===_typeof(t)){d.next=5;break}throw new Error("Not enough parameters.");case 5:if(!_classPrivateFieldGet(this,a).has(t)){d.next=7;break}throw new Error("The overlay is already registered.");case 7:_classPrivateFieldGet(this,a).set(t,{canForceClose:r});if(!t.showModal){i(10).registerDialog(t);if(!this._dialogPolyfillCSS){this._dialogPolyfillCSS=!0;(l=document.createElement("style")).textContent="dialog {\n  position: absolute;\n  left: 0; right: 0;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: fit-content;\n  margin: auto;\n  border: solid;\n  padding: 1em;\n  background: white;\n  color: black;\n  display: block;\n}\n\ndialog:not([open]) {\n  display: none;\n}\n\ndialog + .backdrop {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background: rgba(0,0,0,0.1);\n}\n\n._dialog_overlay {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n}\n\ndialog.fixed {\n  position: fixed;\n  top: 50%;\n  transform: translate(0, -50%);\n}";document.head.prepend(l)}}t.addEventListener("cancel",(function(t){_classPrivateFieldSet(c,o,null)}));case 10:case"end":return d.stop()}}),_callee,this)}))),function register(t){return c.apply(this,arguments)})},{key:"unregister",value:(l=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(_classPrivateFieldGet(this,a).has(t)){r.next=4;break}throw new Error("The overlay does not exist.");case 4:if(_classPrivateFieldGet(this,o)!==t){r.next=6;break}throw new Error("The overlay cannot be removed while it is active.");case 6:_classPrivateFieldGet(this,a).delete(t);case 7:case"end":return r.stop()}}),_callee2,this)}))),function unregister(t){return l.apply(this,arguments)})},{key:"open",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){return _regeneratorRuntime().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(_classPrivateFieldGet(this,a).has(t)){r.next=4;break}throw new Error("The overlay does not exist.");case 4:if(!_classPrivateFieldGet(this,o)){r.next=15;break}if(_classPrivateFieldGet(this,o)!==t){r.next=9;break}throw new Error("The overlay is already active.");case 9:if(!_classPrivateFieldGet(this,a).get(t).canForceClose){r.next=14;break}r.next=12;return this.close();case 12:r.next=15;break;case 14:throw new Error("Another overlay is currently active.");case 15:_classPrivateFieldSet(this,o,t);t.showModal();t.classList.remove("hidden");case 18:case"end":return r.stop()}}),_callee3,this)}))),function open(t){return r.apply(this,arguments)})},{key:"close",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var t,r=arguments;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:_classPrivateFieldGet(this,o);if(_classPrivateFieldGet(this,a).has(t)){i.next=5;break}throw new Error("The overlay does not exist.");case 5:if(_classPrivateFieldGet(this,o)){i.next=9;break}throw new Error("The overlay is currently not active.");case 9:if(_classPrivateFieldGet(this,o)===t){i.next=11;break}throw new Error("Another overlay is currently active.");case 11:t.close();_classPrivateFieldSet(this,o,null);case 13:case"end":return i.stop()}}),_callee4,this)}))),function close(){return t.apply(this,arguments)})}]);var t,r,l,c;return OverlayManager}();r.OverlayManager=l},(t,r,i)=>{"use strict";var a,o,l;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}l=function(){var t=window.CustomEvent;t&&"object"!==_typeof(t)||((t=function CustomEvent(t,r){r=r||{};var i=document.createEvent("CustomEvent");i.initCustomEvent(t,!!r.bubbles,!!r.cancelable,r.detail||null);return i}).prototype=window.Event.prototype);function safeDispatchEvent(t,r){var i="on"+r.type.toLowerCase();"function"==typeof t[i]&&t[i](r);return t.dispatchEvent(r)}function findNearestDialog(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement?t.parentElement:t.parentNode?t.parentNode.host:null}return null}function safeBlur(t){for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;t&&t.blur&&t!==document.body&&t.blur()}function inNodeList(t,r){for(var i=0;i<t.length;++i)if(t[i]===r)return!0;return!1}function isFormMethodDialog(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function findFocusableElementWithin(t){var r=["button","input","keygen","select","textarea"].map((function(t){return t+":not([disabled])"}));r.push('[tabindex]:not([disabled]):not([tabindex=""])');var i=t.querySelector(r.join(", "));if(!i&&"attachShadow"in Element.prototype)for(var a=t.querySelectorAll("*"),o=0;o<a.length&&!(a[o].tagName&&a[o].shadowRoot&&(i=findFocusableElementWithin(a[o].shadowRoot)));o++);return i}function isConnected(t){return t.isConnected||document.body.contains(t)}function findFormSubmitter(t){if(t.submitter)return t.submitter;var i=t.target;if(!(i instanceof HTMLFormElement))return null;var a=r.formSubmitter;if(!a){var o=t.target;a=("getRootNode"in o&&o.getRootNode()||document).activeElement}return a&&a.form===i?a:null}function maybeHandleSubmit(t){if(!t.defaultPrevented){var i=t.target,a=r.imagemapUseValue,o=findFormSubmitter(t);null===a&&o&&(a=o.value);var l=findNearestDialog(i);if(l&&"dialog"===(o&&o.getAttribute("formmethod")||i.getAttribute("method"))){t.preventDefault();null!=a?l.close(a):l.close()}}}function dialogPolyfillInfo(t){this.dialog_=t;this.replacedStyleTop_=!1;this.openAsModal_=!1;t.hasAttribute("role")||t.setAttribute("role","dialog");t.show=this.show.bind(this);t.showModal=this.showModal.bind(this);t.close=this.close.bind(this);t.addEventListener("submit",maybeHandleSubmit,!1);"returnValue"in t||(t.returnValue="");if("MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]});else{var r,i=!1,a=function(){i?this.downgradeModal():this.maybeHideModal();i=!1}.bind(this),o=function delayModel(o){if(o.target===t){var l="DOMNodeRemoved";i|=o.type.substr(0,l.length)===l;window.clearTimeout(r);r=window.setTimeout(a,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(r){t.addEventListener(r,o)}))}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")});this.backdrop_=document.createElement("div");this.backdrop_.className="backdrop";this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this));this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this));this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}dialogPolyfillInfo.prototype={get dialog(){return this.dialog_},maybeHideModal:function maybeHideModal(){this.dialog_.hasAttribute("open")&&isConnected(this.dialog_)||this.downgradeModal()},downgradeModal:function downgradeModal(){if(this.openAsModal_){this.openAsModal_=!1;this.dialog_.style.zIndex="";if(this.replacedStyleTop_){this.dialog_.style.top="";this.replacedStyleTop_=!1}this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_);r.dm.removeDialog(this)}},setOpen:function setOpen(t){if(t)this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open","");else{this.dialog_.removeAttribute("open");this.maybeHideModal()}},backdropMouseEvent_:function backdropMouseEvent_(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var r=document.createElement("div");this.dialog_.insertBefore(r,this.dialog_.firstChild);r.tabIndex=-1;r.focus();this.dialog_.removeChild(r)}var i=document.createEvent("MouseEvents");i.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget);this.dialog_.dispatchEvent(i);t.stopPropagation()},focus_:function focus_(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_);t||(t=findFocusableElementWithin(this.dialog_));safeBlur(document.activeElement);t&&t.focus()},updateZIndex:function updateZIndex(t,r){if(t<r)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t;this.backdrop_.style.zIndex=r},show:function show(){if(!this.dialog_.open){this.setOpen(!0);this.focus_()}},showModal:function showModal(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!isConnected(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!r.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function createsStackingContext(t){for(;t&&t!==document.body;){var r=window.getComputedStyle(t),i=function invalid(t,i){return!(void 0===r[t]||r[t]===i)};if(r.opacity<1||i("zIndex","auto")||i("transform","none")||i("mixBlendMode","normal")||i("filter","none")||i("perspective","none")||"isolate"===r.isolation||"fixed"===r.position||"touch"===r.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context");this.setOpen(!0);this.openAsModal_=!0;if(r.needsCentering(this.dialog_)){r.reposition(this.dialog_);this.replacedStyleTop_=!0}else this.replacedStyleTop_=!1;this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling);this.focus_()},close:function close(r){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1);void 0!==r&&(this.dialog_.returnValue=r);var i=new t("close",{bubbles:!1,cancelable:!1});safeDispatchEvent(this.dialog_,i)}};var r={reposition:function(t){var r=document.body.scrollTop||document.documentElement.scrollTop,i=r+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(r,i)+"px"},isInlinePositionSetByStylesheet:function(t){for(var r=0;r<document.styleSheets.length;++r){var i=document.styleSheets[r],a=null;try{a=i.cssRules}catch(t){}if(a)for(var o=0;o<a.length;++o){var l=a[o],c=null;try{c=document.querySelectorAll(l.selectorText)}catch(t){}if(c&&inNodeList(c,t)){var u=l.style.getPropertyValue("top"),d=l.style.getPropertyValue("bottom");if(u&&"auto"!==u||d&&"auto"!==d)return!0}}}return!1},needsCentering:function(t){return!("absolute"!==window.getComputedStyle(t).position||"auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom||r.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){(window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t);if("dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new dialogPolyfillInfo(t)},registerDialog:function(t){t.showModal||r.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div");this.overlay.className="_dialog_overlay";this.overlay.addEventListener("click",function(r){this.forwardTab_=void 0;r.stopPropagation();t([])}.bind(this));this.handleKey_=this.handleKey_.bind(this);this.handleFocus_=this.handleFocus_.bind(this);this.zIndexLow_=1e5;this.zIndexHigh_=100150;this.forwardTab_=void 0;"MutationObserver"in window&&(this.mo_=new MutationObserver((function(r){var i=[];r.forEach((function(t){for(var r,a=0;r=t.removedNodes[a];++a)if(r instanceof Element){"dialog"===r.localName&&i.push(r);i=i.concat(r.querySelectorAll("dialog"))}}));i.length&&t(i)})))}};r.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0);document.addEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};r.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0);document.removeEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.disconnect()};r.DialogManager.prototype.updateStacking=function(){for(var t,r=this.zIndexHigh_,i=0;t=this.pendingDialogStack[i];++i){t.updateZIndex(--r,--r);0===i&&(this.overlay.style.zIndex=--r)}var a=this.pendingDialogStack[0];a?(a.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};r.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=findNearestDialog(t);){for(var r,i=0;r=this.pendingDialogStack[i];++i)if(r.dialog===t)return 0===i;t=t.parentElement}return!1};r.DialogManager.prototype.handleFocus_=function(t){var r=t.composedPath?t.composedPath()[0]:t.target;if(!this.containedByTopDialog_(r)&&document.activeElement!==document.documentElement){t.preventDefault();t.stopPropagation();safeBlur(r);if(void 0!==this.forwardTab_){var i=this.pendingDialogStack[0];i.dialog.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?i.focus_():r!==document.documentElement&&document.documentElement.focus());return!1}}};r.DialogManager.prototype.handleKey_=function(r){this.forwardTab_=void 0;if(27===r.keyCode){r.preventDefault();r.stopPropagation();var i=new t("cancel",{bubbles:!1,cancelable:!0}),a=this.pendingDialogStack[0];a&&safeDispatchEvent(a.dialog,i)&&a.dialog.close()}else 9===r.keyCode&&(this.forwardTab_=!r.shiftKey)};r.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach((function(r){-1!==t.indexOf(r.dialog)?r.downgradeModal():r.maybeHideModal()}))};r.DialogManager.prototype.pushDialog=function(t){var r=(this.zIndexHigh_-this.zIndexLow_)/2-1;if(this.pendingDialogStack.length>=r)return!1;1===this.pendingDialogStack.unshift(t)&&this.blockDocument();this.updateStacking();return!0};r.DialogManager.prototype.removeDialog=function(t){var r=this.pendingDialogStack.indexOf(t);if(-1!==r){this.pendingDialogStack.splice(r,1);0===this.pendingDialogStack.length&&this.unblockDocument();this.updateStacking()}};r.dm=new r.DialogManager;r.formSubmitter=null;r.imagemapUseValue=null;if(void 0===window.HTMLDialogElement){var i=document.createElement("form");i.setAttribute("method","dialog");if("dialog"!==i.method){var a=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(a){var o=a.get;a.get=function(){return isFormMethodDialog(this)?"dialog":o.call(this)};var l=a.set;a.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):l.call(this,t)};Object.defineProperty(HTMLFormElement.prototype,"method",a)}}document.addEventListener("click",(function(t){r.formSubmitter=null;r.imagemapUseValue=null;if(!t.defaultPrevented){var i=t.target;"composedPath"in t&&(i=t.composedPath().shift()||i);if(i&&isFormMethodDialog(i.form)){if(!("submit"===i.type&&["button","input"].indexOf(i.localName)>-1)){if("input"!==i.localName||"image"!==i.type)return;r.imagemapUseValue=t.offsetX+","+t.offsetY}findNearestDialog(i)&&(r.formSubmitter=i)}}}),!1);document.addEventListener("submit",(function(t){var r=t.target;if(!findNearestDialog(r)){var i=findFormSubmitter(t);"dialog"===(i&&i.getAttribute("formmethod")||r.getAttribute("method"))&&t.preventDefault()}}));var c=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function replacementFormSubmit(){if(!isFormMethodDialog(this))return c.call(this);var t=findNearestDialog(this);t&&t.close()}}return r},"object"===_typeof(r)?t.exports=l():void 0!==(o="function"==typeof(a=l)?a.call(r,i,r,t):a)&&(t.exports=o)},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PasswordPrompt=void 0;var a=i(4);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakSet,d=new WeakSet,h=new WeakSet,p=function(){function PasswordPrompt(t,r,i){var a=this,p=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PasswordPrompt);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,u);_classPrivateFieldInitSpec(this,o,{writable:!0,value:null});_classPrivateFieldInitSpec(this,l,{writable:!0,value:null});_classPrivateFieldInitSpec(this,c,{writable:!0,value:null});this.dialog=t.dialog;this.label=t.label;this.input=t.input;this.submitButton=t.submitButton;this.cancelButton=t.cancelButton;this.overlayManager=r;this.l10n=i;this._isViewerEmbedded=p;this.submitButton.addEventListener("click",_classPrivateMethodGet(this,u,_verify2).bind(this));this.cancelButton.addEventListener("click",this.close.bind(this));this.input.addEventListener("keydown",(function(t){13===t.keyCode&&_classPrivateMethodGet(a,u,_verify2).call(a)}));this.overlayManager.register(this.dialog,!0);this.dialog.addEventListener("close",_classPrivateMethodGet(this,d,_cancel2).bind(this))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PasswordPrompt,[{key:"open",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(!_classPrivateFieldGet(this,o)){r.next=3;break}r.next=3;return _classPrivateFieldGet(this,o).promise;case 3:_classPrivateFieldSet(this,o,(0,a.createPromiseCapability)());r.prev=4;r.next=7;return this.overlayManager.open(this.dialog);case 7:this.input.type="password";this.input.focus();r.next=15;break;case 11:r.prev=11;r.t0=r.catch(4);_classPrivateFieldSet(this,o,null);throw r.t0;case 15:t=_classPrivateFieldGet(this,c)===a.PasswordResponses.INCORRECT_PASSWORD;this._isViewerEmbedded&&!t||this.input.focus();r.next=19;return this.l10n.get("password_".concat(t?"invalid":"label"));case 19:this.label.textContent=r.sent;case 20:case"end":return r.stop()}}),_callee,this,[[4,11]])}))),function open(){return i.apply(this,arguments)})},{key:"close",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(this.overlayManager.active===this.dialog){this.overlayManager.close(this.dialog);this.input.value="";this.input.type="hidden"}case 1:case"end":return t.stop()}}),_callee2,this)}))),function close(){return r.apply(this,arguments)})},{key:"setUpdateCallback",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t,r){return _regeneratorRuntime().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:if(!_classPrivateFieldGet(this,o)){i.next=3;break}i.next=3;return _classPrivateFieldGet(this,o).promise;case 3:_classPrivateFieldSet(this,l,t);_classPrivateFieldSet(this,c,r);case 5:case"end":return i.stop()}}),_callee3,this)}))),function setUpdateCallback(r,i){return t.apply(this,arguments)})}]);var t,r,i;return PasswordPrompt}();r.PasswordPrompt=p;function _verify2(){var t=this.input.value;(null==t?void 0:t.length)>0&&_classPrivateMethodGet(this,h,_invokeCallback2).call(this,t)}function _cancel2(){_classPrivateMethodGet(this,h,_invokeCallback2).call(this,new Error("PasswordPrompt cancelled."));_classPrivateFieldGet(this,o).resolve()}function _invokeCallback2(t){if(_classPrivateFieldGet(this,l)){this.close();this.input.value="";_classPrivateFieldGet(this,l).call(this,t);_classPrivateFieldSet(this,l,null)}}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFAttachmentViewer=void 0;var a=i(4),o=i(13),l=i(6);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}var c=new WeakSet,u=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PDFAttachmentViewer,t);var r,i=_createSuper(PDFAttachmentViewer);function PDFAttachmentViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFAttachmentViewer);_classPrivateMethodInitSpec(_assertThisInitialized(r=i.call(this,t)),c);r.downloadManager=t.downloadManager;r.eventBus._on("fileattachmentannotation",function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}(_assertThisInitialized(r),c,_appendAttachment2).bind(_assertThisInitialized(r)));return r}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFAttachmentViewer,[{key:"reset",value:function reset(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_get(_getPrototypeOf(PDFAttachmentViewer.prototype),"reset",this).call(this);this._attachments=null;t||(this._renderedCapability=(0,a.createPromiseCapability)());this._pendingDispatchEvent=!1}},{key:"_dispatchEvent",value:(r=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:this._renderedCapability.resolve();if(0!==t||this._pendingDispatchEvent){r.next=7;break}this._pendingDispatchEvent=!0;r.next=5;return(0,l.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3});case 5:if(this._pendingDispatchEvent){r.next=7;break}return r.abrupt("return");case 7:this._pendingDispatchEvent=!1;this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:t});case 9:case"end":return r.stop()}}),_callee,this)}))),function _dispatchEvent(t){return r.apply(this,arguments)})},{key:"_bindLink",value:function _bindLink(t,r){var i=this,a=r.content,o=r.filename;t.onclick=function(){i.downloadManager.openOrDownloadData(t,a,o);return!1}}},{key:"render",value:function render(t){var r=t.attachments,i=t.keepRenderedCapability,o=void 0!==i&&i;this._attachments&&this.reset(o);this._attachments=r||null;if(r){var l,c=Object.keys(r).sort((function(t,r){return t.toLowerCase().localeCompare(r.toLowerCase())})),u=document.createDocumentFragment(),d=0,h=_createForOfIteratorHelper(c);try{for(h.s();!(l=h.n()).done;){var p=r[l.value],v=p.content,y=(0,a.getFilenameFromUrl)(p.filename,!0),g=document.createElement("div");g.className="treeItem";var m=document.createElement("a");this._bindLink(m,{content:v,filename:y});m.textContent=this._normalizeTextContent(y);g.append(m);u.append(g);d++}}catch(t){h.e(t)}finally{h.f()}this._finishRendering(u,d)}else this._dispatchEvent(0)}}]);return PDFAttachmentViewer}(o.BaseTreeViewer);r.PDFAttachmentViewer=u;function _appendAttachment2(t){var r=this,i=t.filename,a=t.content,o=this._renderedCapability.promise;o.then((function(){if(o===r._renderedCapability.promise){var t=r._attachments||Object.create(null);for(var l in t)if(i===l)return;t[i]={filename:i,content:a};r.render({attachments:t,keepRenderedCapability:!0})}}))}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BaseTreeViewer=void 0;var a=i(3);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var o="selected",l=function(){function BaseTreeViewer(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseTreeViewer);if(this.constructor===BaseTreeViewer)throw new Error("Cannot initialize BaseTreeViewer.");this.container=t.container;this.eventBus=t.eventBus;this.reset()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(BaseTreeViewer,[{key:"reset",value:function reset(){this._pdfDocument=null;this._lastToggleIsShow=!0;this._currentTreeItem=null;this.container.textContent="";this.container.classList.remove("treeWithDeepNesting")}},{key:"_dispatchEvent",value:function _dispatchEvent(t){throw new Error("Not implemented: _dispatchEvent")}},{key:"_bindLink",value:function _bindLink(t,r){throw new Error("Not implemented: _bindLink")}},{key:"_normalizeTextContent",value:function _normalizeTextContent(t){return(0,a.removeNullCharacters)(t,!0)||"–"}},{key:"_addToggleButton",value:function _addToggleButton(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document.createElement("div");a.className="treeItemToggler";i&&a.classList.add("treeItemsHidden");a.onclick=function(i){i.stopPropagation();a.classList.toggle("treeItemsHidden");if(i.shiftKey){var o=!a.classList.contains("treeItemsHidden");r._toggleTreeItem(t,o)}};t.prepend(a)}},{key:"_toggleTreeItem",value:function _toggleTreeItem(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._lastToggleIsShow=r;var i,a=_createForOfIteratorHelper(t.querySelectorAll(".treeItemToggler"));try{for(a.s();!(i=a.n()).done;){i.value.classList.toggle("treeItemsHidden",!r)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}},{key:"_finishRendering",value:function _finishRendering(t,r){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){this.container.classList.add("treeWithDeepNesting");this._lastToggleIsShow=!t.querySelector(".treeItemsHidden")}this.container.append(t);this._dispatchEvent(r)}},{key:"render",value:function render(t){throw new Error("Not implemented: render")}},{key:"_updateCurrentTreeItem",value:function _updateCurrentTreeItem(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._currentTreeItem){this._currentTreeItem.classList.remove(o);this._currentTreeItem=null}if(t){t.classList.add(o);this._currentTreeItem=t}}},{key:"_scrollToCurrentTreeItem",value:function _scrollToCurrentTreeItem(t){if(t){for(var r=t.parentNode;r&&r!==this.container;){if(r.classList.contains("treeItem")){var i=r.firstElementChild;null==i||i.classList.remove("treeItemsHidden")}r=r.parentNode}this._updateCurrentTreeItem(t);this.container.scrollTo(t.offsetLeft,t.offsetTop+-100)}}}]);return BaseTreeViewer}();r.BaseTreeViewer=l},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFCursorTools=void 0;var a=i(3),o=i(4),l=i(15);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var c=new WeakSet,u=new WeakSet,d=function(){function PDFCursorTools(t){var r=this,i=t.container,o=t.eventBus,d=t.cursorToolOnLoad,h=void 0===d?a.CursorTool.SELECT:d;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFCursorTools);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,c);this.container=i;this.eventBus=o;this.active=a.CursorTool.SELECT;this.previouslyActive=null;this.handTool=new l.GrabToPan({element:this.container});_classPrivateMethodGet(this,u,_addEventListeners2).call(this);Promise.resolve().then((function(){r.switchTool(h)}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFCursorTools,[{key:"activeTool",get:function get(){return this.active}},{key:"switchTool",value:function switchTool(t){var r=this;if(null===this.previouslyActive&&t!==this.active){var i=function disableActiveTool(){switch(r.active){case a.CursorTool.SELECT:break;case a.CursorTool.HAND:r.handTool.deactivate();case a.CursorTool.ZOOM:}};switch(t){case a.CursorTool.SELECT:i();break;case a.CursorTool.HAND:i();this.handTool.activate();break;case a.CursorTool.ZOOM:default:globalThis.ngxConsole.error('switchTool: "'.concat(t,'" is an unsupported value.'));return}this.active=t;_classPrivateMethodGet(this,c,_dispatchEvent2).call(this)}}}]);return PDFCursorTools}();r.PDFCursorTools=d;function _dispatchEvent2(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}function _addEventListeners2(){var t=this;this.eventBus._on("switchcursortool",(function(r){t.switchTool(r.tool)}));var r=o.AnnotationEditorType.NONE,i=a.PresentationModeState.NORMAL,l=function disableActive(){var r,i=t.active;t.switchTool(a.CursorTool.SELECT);null!==(r=t.previouslyActive)&&void 0!==r||(t.previouslyActive=i)},c=function enableActive(){var l=t.previouslyActive;if(null!==l&&r===o.AnnotationEditorType.NONE&&i===a.PresentationModeState.NORMAL){t.previouslyActive=null;t.switchTool(l)}};this.eventBus._on("secondarytoolbarreset",(function(l){if(null!==t.previouslyActive){r=o.AnnotationEditorType.NONE;i=a.PresentationModeState.NORMAL;c()}}));this.eventBus._on("annotationeditormodechanged",(function(t){var i=t.mode;r=i;i===o.AnnotationEditorType.NONE?c():l()}));this.eventBus._on("presentationmodechanged",(function(t){var r=t.state;i=r;r===a.PresentationModeState.NORMAL?c():r===a.PresentationModeState.FULLSCREEN&&l()}))}},(t,r)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.GrabToPan=void 0;function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var i="grab-to-pan-grab",a=new WeakSet,o=new WeakSet,l=new WeakSet,c=function(){function GrabToPan(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GrabToPan);_classPrivateMethodInitSpec(this,l);_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,a);this.element=t.element;this.document=t.element.ownerDocument;"function"==typeof t.ignoreTarget&&(this.ignoreTarget=t.ignoreTarget);this.onActiveChanged=t.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onMouseDown=_classPrivateMethodGet(this,a,_onMouseDown2).bind(this);this._onMouseMove=_classPrivateMethodGet(this,o,_onMouseMove2).bind(this);this._endPan=_classPrivateMethodGet(this,l,_endPan2).bind(this);(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(GrabToPan,[{key:"activate",value:function activate(){if(!this.active){var t;this.active=!0;this.element.addEventListener("mousedown",this._onMouseDown);this.element.classList.add(i);null===(t=this.onActiveChanged)||void 0===t||t.call(this,!0)}}},{key:"deactivate",value:function deactivate(){if(this.active){var t;this.active=!1;this.element.removeEventListener("mousedown",this._onMouseDown);this._endPan();this.element.classList.remove(i);null===(t=this.onActiveChanged)||void 0===t||t.call(this,!1)}}},{key:"toggle",value:function toggle(){this.active?this.deactivate():this.activate()}},{key:"ignoreTarget",value:function ignoreTarget(t){return!!document.querySelector(".stf__item")||t.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}]);return GrabToPan}();r.GrabToPan=c;function _onMouseDown2(t){if(0===t.button&&!this.ignoreTarget(t.target)){if(t.originalTarget)try{t.originalTarget.tagName}catch(t){return}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=t.clientX;this.clientYStart=t.clientY;if(!isOverPerfectScrollbar(this.clientXStart,this.clientYStart,"ps__rail-x")&&!isOverPerfectScrollbar(this.clientXStart,this.clientYStart,"ps__rail-y")){this.document.addEventListener("mousemove",this._onMouseMove,!0);this.document.addEventListener("mouseup",this._endPan,!0);this.element.addEventListener("scroll",this._endPan,!0);t.preventDefault();t.stopPropagation();var r=document.activeElement;r&&!r.contains(t.target)&&r.blur()}}}function _onMouseMove2(t){this.element.removeEventListener("scroll",this._endPan,!0);if(1&t.buttons){var r=t.clientX-this.clientXStart,i=t.clientY-this.clientYStart,a=this.scrollTopStart-i,o=this.scrollLeftStart-r;if(this.element.scrollTo)this.element.scrollTo({top:a,left:o,behavior:"instant"});else{this.element.scrollTop=a;this.element.scrollLeft=o}this.overlay.parentNode||document.body.append(this.overlay)}else this._endPan()}function _endPan2(){this.element.removeEventListener("scroll",this._endPan,!0);this.document.removeEventListener("mousemove",this._onMouseMove,!0);this.document.removeEventListener("mouseup",this._endPan,!0);this.overlay.remove()}function isOverPerfectScrollbar(t,r,i){var a=document.getElementsByClassName(i);if(a&&1===a.length){var o=a[0].getBoundingClientRect(),l=o.top,c=o.right,u=o.bottom,d=o.left;if(r>=l&&r<=u&&t<=c&&t>=d)return!0}return!1}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFDocumentProperties=void 0;var a=i(4),o=i(3);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var l=["en-us","en-lr","my"],c={"8.5x11":"Letter","8.5x14":"Legal"},u={"297x420":"A3","210x297":"A4"};function getPageName(t,r,i){var a=r?t.width:t.height,o=r?t.height:t.width;return i["".concat(a,"x").concat(o)]}var d=new WeakMap,h=new WeakSet,p=new WeakSet,v=new WeakSet,y=new WeakSet,g=new WeakSet,m=new WeakSet,b=function(){function PDFDocumentProperties(t,r,i,a,o){var c=this,u=t.dialog,b=t.fields,w=t.closeButton;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFDocumentProperties);_classPrivateMethodInitSpec(this,m);_classPrivateMethodInitSpec(this,g);_classPrivateMethodInitSpec(this,y);_classPrivateMethodInitSpec(this,v);_classPrivateMethodInitSpec(this,p);_classPrivateMethodInitSpec(this,h);!function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}(this,d,{writable:!0,value:null});this.dialog=u;this.fields=b;this.overlayManager=r;this.l10n=a;this._fileNameLookup=o;this.eventBus=i;_classPrivateMethodGet(this,h,_reset2).call(this);w.addEventListener("click",this.close.bind(this));this.overlayManager.register(this.dialog);i._on("pagechanging",(function(t){c._currentPageNumber=t.pageNumber}));i._on("rotationchanging",(function(t){c._pagesRotation=t.pagesRotation}));this._isNonMetricLocale=!0;a.getLanguage().then((function(t){c._isNonMetricLocale=l.includes(t)}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFDocumentProperties,[{key:"open",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,a,l,c,u,h,b,w,P,S,k,x,A,E,T=this;return _regeneratorRuntime().wrap((function _callee$(C){for(;;)switch(C.prev=C.next){case 0:C.next=2;return Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);case 2:this.eventBus.dispatch("propertiesdialogopen",this);t=this._currentPageNumber;r=this._pagesRotation;if(!_classPrivateFieldGet(this,d)||t!==_classPrivateFieldGet(this,d)._currentPageNumber||r!==_classPrivateFieldGet(this,d)._pagesRotation){C.next=8;break}_classPrivateMethodGet(this,p,_updateUI2).call(this);return C.abrupt("return");case 8:C.next=10;return this.pdfDocument.getMetadata();case 10:i=C.sent;a=i.info;l=i.contentLength;C.next=15;return Promise.all([this._fileNameLookup(),_classPrivateMethodGet(this,v,_parseFileSize2).call(this,l),_classPrivateMethodGet(this,g,_parseDate2).call(this,a.CreationDate),_classPrivateMethodGet(this,g,_parseDate2).call(this,a.ModDate),this.pdfDocument.getPage(t).then((function(t){return _classPrivateMethodGet(T,y,_parsePageSize2).call(T,(0,o.getPageSizeInches)(t),r)})),_classPrivateMethodGet(this,m,_parseLinearization2).call(this,a.IsLinearized)]);case 15:c=C.sent;u=_slicedToArray(c,6);h=u[0];b=u[1];w=u[2];P=u[3];S=u[4];k=u[5];_classPrivateFieldSet(this,d,Object.freeze({fileName:h,fileSize:b,title:a.Title,author:a.Author,subject:a.Subject,keywords:a.Keywords,creationDate:w,modificationDate:P,creator:a.Creator,producer:a.Producer,version:a.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:S,linearized:k,_currentPageNumber:t,_pagesRotation:r}));_classPrivateMethodGet(this,p,_updateUI2).call(this);C.next=27;return this.pdfDocument.getDownloadInfo();case 27:x=C.sent;A=x.length;if(l!==A){C.next=31;break}return C.abrupt("return");case 31:E=Object.assign(Object.create(null),_classPrivateFieldGet(this,d));C.next=34;return _classPrivateMethodGet(this,v,_parseFileSize2).call(this,A);case 34:E.fileSize=C.sent;_classPrivateFieldSet(this,d,Object.freeze(E));_classPrivateMethodGet(this,p,_updateUI2).call(this);case 37:case"end":return C.stop()}}),_callee,this)}))),function open(){return r.apply(this,arguments)})},{key:"close",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:this.overlayManager.close(this.dialog);this.eventBus.dispatch("propertiesdialogclose",this);case 2:case"end":return t.stop()}}),_callee2,this)}))),function close(){return t.apply(this,arguments)})},{key:"setDocument",value:function setDocument(t){if(this.pdfDocument){_classPrivateMethodGet(this,h,_reset2).call(this);_classPrivateMethodGet(this,p,_updateUI2).call(this,!0)}if(t){this.pdfDocument=t;this._dataAvailableCapability.resolve()}}}]);var t,r;return PDFDocumentProperties}();r.PDFDocumentProperties=b;function _reset2(){this.pdfDocument=null;_classPrivateFieldSet(this,d,null);this._dataAvailableCapability=(0,a.createPromiseCapability)();this._currentPageNumber=1;this._pagesRotation=0}function _updateUI2(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&_classPrivateFieldGet(this,d)){if(this.overlayManager.active===this.dialog)for(var t in this.fields){var r=_classPrivateFieldGet(this,d)[t];this.fields[t].textContent=r||0===r?r:"-"}}else for(var i in this.fields)this.fields[i].textContent="-"}function _parseFileSize2(){return _parseFileSize3.apply(this,arguments)}function _parseFileSize3(){_parseFileSize3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t,r,i,a=arguments;return _regeneratorRuntime().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:i=(r=(t=a.length>0&&void 0!==a[0]?a[0]:0)/1024)/1024;if(r){o.next=4;break}return o.abrupt("return",void 0);case 4:return o.abrupt("return",this.l10n.get("document_properties_".concat(i>=1?"mb":"kb"),{size_mb:i>=1&&(+i.toPrecision(3)).toLocaleString(),size_kb:i<1&&(+r.toPrecision(3)).toLocaleString(),size_b:t.toLocaleString()}));case 5:case"end":return o.stop()}}),_callee3,this)})));return _parseFileSize3.apply(this,arguments)}function _parsePageSize2(t,r){return _parsePageSize3.apply(this,arguments)}function _parsePageSize3(){return(_parsePageSize3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t,r){var i,a,l,d,h,p,v,y,g,m,b,w,P,S;return _regeneratorRuntime().wrap((function _callee4$(k){for(;;)switch(k.prev=k.next){case 0:if(t){k.next=2;break}return k.abrupt("return",void 0);case 2:r%180!=0&&(t={width:t.height,height:t.width});i=(0,o.isPortraitOrientation)(t);a={width:Math.round(100*t.width)/100,height:Math.round(100*t.height)/100};l={width:Math.round(25.4*t.width*10)/10,height:Math.round(25.4*t.height*10)/10};if(!((d=getPageName(a,i,c)||getPageName(l,i,u))||Number.isInteger(l.width)&&Number.isInteger(l.height))){h={width:25.4*t.width,height:25.4*t.height};p={width:Math.round(l.width),height:Math.round(l.height)};if(Math.abs(h.width-p.width)<.1&&Math.abs(h.height-p.height)<.1&&(d=getPageName(p,i,u))){a={width:Math.round(p.width/25.4*100)/100,height:Math.round(p.height/25.4*100)/100};l=p}}k.next=10;return Promise.all([this._isNonMetricLocale?a:l,this.l10n.get("document_properties_page_size_unit_".concat(this._isNonMetricLocale?"inches":"millimeters")),d&&this.l10n.get("document_properties_page_size_name_".concat(d.toLowerCase())),this.l10n.get("document_properties_page_size_orientation_".concat(i?"portrait":"landscape"))]);case 10:v=k.sent;y=_slicedToArray(v,4);g=y[0];m=g.width;b=g.height;w=y[1];P=y[2];S=y[3];return k.abrupt("return",this.l10n.get("document_properties_page_size_dimension_".concat(P?"name_":"","string"),{width:m.toLocaleString(),height:b.toLocaleString(),unit:w,name:P,orientation:S}));case 19:case"end":return k.stop()}}),_callee4,this)})))).apply(this,arguments)}function _parseDate2(t){return _parseDate3.apply(this,arguments)}function _parseDate3(){return(_parseDate3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t){var r;return _regeneratorRuntime().wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:if(r=a.PDFDateString.toDateObject(t)){i.next=3;break}return i.abrupt("return",void 0);case 3:return i.abrupt("return",this.l10n.get("document_properties_date_string",{date:r.toLocaleDateString(),time:r.toLocaleTimeString()}));case 4:case"end":return i.stop()}}),_callee5,this)})))).apply(this,arguments)}function _parseLinearization2(t){return this.l10n.get("document_properties_linearized_".concat(t?"yes":"no"))}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFFindBar=void 0;var a=i(18);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o=new WeakSet,l=function(){function PDFFindBar(t,r,i){var a,l=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFFindBar);_classPrivateMethodInitSpec(this,o);this.opened=!1;this.bar=t.bar;this.toggleButton=t.toggleButton;this.findField=t.findField;this.highlightAll=t.highlightAllCheckbox;this.currentPage=t.findCurrentPageCheckbox;this.pageRange=t.findPageRangeField;this.caseSensitive=t.caseSensitiveCheckbox;this.matchDiacritics=t.matchDiacriticsCheckbox;this.entireWord=t.entireWordCheckbox;this.findMsg=t.findMsg;this.findResultsCount=t.findResultsCount;this.findPreviousButton=t.findPreviousButton;this.findNextButton=t.findNextButton;this.findFieldMultiline=t.findFieldMultiline||null;this.multipleSearchTexts=t.findMultipleSearchTextsCheckbox||null;this.ignoreAccents=t.ignoreAccentsCheckbox||null;this.fuzzySearch=t.fuzzyCheckbox||null;this.eventBus=r;this.l10n=i;this.toggleButton.addEventListener("click",(function(){l.toggle()}));this.findFieldMultiline.addEventListener("input",(function(){l.dispatchEvent("")}));this.findField.addEventListener("input",(function(){l.dispatchEvent("")}));this.bar.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:t.target===l.findField&&l.dispatchEvent("again",t.shiftKey);break;case 27:l.close()}}));this.findPreviousButton.addEventListener("click",(function(){l.dispatchEvent("again",!0)}));this.findNextButton.addEventListener("click",(function(){l.dispatchEvent("again",!1)}));this.highlightAll.addEventListener("click",(function(){l.dispatchEvent("highlightallchange")}));this.caseSensitive.addEventListener("click",(function(){l.dispatchEvent("casesensitivitychange")}));this.entireWord.addEventListener("click",(function(){l.dispatchEvent("entirewordchange")}));this.multipleSearchTexts.addEventListener("click",(function(){l.dispatchEvent("multiplesearchtextschange")}));this.ignoreAccents.addEventListener("click",(function(){l.dispatchEvent("ignoreAccentsChange")}));this.fuzzySearch.addEventListener("click",(function(){l.dispatchEvent("fuzzySearchChange")}));this.currentPage.addEventListener("click",(function(){l.dispatchEvent("currentPageChange")}));this.pageRange.addEventListener("input",(function(){l.dispatchEvent("pageRangeChange")}));null===(a=this.matchDiacritics)||void 0===a||a.addEventListener("click",(function(){l.dispatchEvent("diacriticmatchingchange")}));this.eventBus._on("resize",_classPrivateMethodGet(this,o,_adjustWidth2).bind(this))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFFindBar,[{key:"reset",value:function reset(){this.updateUIState()}},{key:"dispatchEvent",value:function dispatchEvent(t){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.eventBus.dispatch("find",{source:this,type:t,query:this.findFieldMultiline.classList.contains("hidden")?this.findField.value:this.findFieldMultiline.value+"\n",phraseSearch:!this.multipleSearchTexts.checked,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,ignoreAccents:this.ignoreAccents.checked,fuzzySearch:this.fuzzySearch.checked,highlightAll:this.highlightAll.checked,currentPage:this.currentPage.checked,pageRange:this.pageRange.value,findPrevious:i,matchDiacritics:null===(r=this.matchDiacritics)||void 0===r?void 0:r.checked})}},{key:"updateUIState",value:function updateUIState(t,r,i){var l=this,c=Promise.resolve(""),u="";switch(t){case a.FindState.FOUND:break;case a.FindState.PENDING:u="pending";break;case a.FindState.NOT_FOUND:c=this.l10n.get("find_not_found");u="notFound";break;case a.FindState.WRAPPED:c=this.l10n.get("find_reached_".concat(r?"top":"bottom"))}this.findField.setAttribute("data-status",u);this.findFieldMultiline.classList.toggle("notFound","notFound"===u);this.findFieldMultiline.setAttribute("data-status",u);this.findField.setAttribute("aria-invalid",t===a.FindState.NOT_FOUND);c.then((function(t){l.findMsg.textContent=t;_classPrivateMethodGet(l,o,_adjustWidth2).call(l)}));this.updateResultsCount(i)}},{key:"updateResultsCount",value:function updateResultsCount(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.current,a=void 0===i?0:i,l=r.total,c=void 0===l?0:l,u=Promise.resolve("");if(c>0)if(c>1e3){u=this.l10n.get("find_match_count_limit",{limit:1e3})}else{u=this.l10n.get("find_match_count",{current:a,total:c})}u.then((function(r){t.findResultsCount.textContent=r;_classPrivateMethodGet(t,o,_adjustWidth2).call(t)}))}},{key:"open",value:function open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus();this.dispatchEvent("");this.eventBus.dispatch("findbaropen",{source:this});_classPrivateMethodGet(this,o,_adjustWidth2).call(this)}},{key:"close",value:function close(){if(this.opened){this.opened=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.bar.classList.add("hidden");this.eventBus.dispatch("findbarclose",{source:this})}}},{key:"toggle",value:function toggle(){this.opened?this.close():this.open()}}]);return PDFFindBar}();r.PDFFindBar=l;function _adjustWidth2(){if(this.opened){this.bar.classList.remove("wrapContainers");this.bar.clientHeight>this.bar.firstElementChild.clientHeight&&this.bar.classList.add("wrapContainers")}}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFFindController=r.FindState=void 0;var a=i(4),o=i(19),l=i(20),c=i(21),u=i(3);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var d={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};r.FindState=d;var h={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4","\n":" "},p=null;function normalize(t){if(!p){var r=Object.keys(h).join("");p=new RegExp("[".concat(r,"]"),"g")}var i=null;return[t.replace(p,(function(t,r){var a=h[t],o=a.length-t.length;"\n"===t?(i||(i=[])).push([r-1,1]):0!==o&&(i||(i=[])).push([r,o]);return a})),i]}function getOriginalIndex(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return t;var i,a=0,o=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}(r);try{for(o.s();!(i=o.n()).done;){var l=_slicedToArray(i.value,2),c=l[0],u=l[1],d=c+a;if(c>=t)break;if(c+u>t){a+=t-d;break}a+=u}}catch(t){o.e(t)}finally{o.f()}return t-a}var v=function(){function PDFFindController(t){var r=this,i=t.linkService,a=t.eventBus,o=t.pageViewMode;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFFindController);this._linkService=i;this._eventBus=a;this._pageViewMode=o;this._reset();a._on("find",this._onFind.bind(this));a._on("findbarclose",this._onFindBarClose.bind(this));this.executeCommand=function(t,i){globalThis.ngxConsole.error('Deprecated method `PDFFindController.executeCommand` called, please dispatch a "find"-event using the EventBus instead.');var a=Object.assign(Object.create(null),i,{type:t.substring("find".length)});r._onFind(a)}}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFFindController,[{key:"highlightMatches",get:function get(){return this._highlightMatches}},{key:"pageMatches",get:function get(){return this._pageMatches}},{key:"pageMatchesColor",get:function get(){return this._pageMatchesColor}},{key:"pageMatchesLength",get:function get(){return this._pageMatchesLength}},{key:"selected",get:function get(){return this._selected}},{key:"state",get:function get(){return this._state}},{key:"setDocument",value:function setDocument(t){this._pdfDocument&&this._reset();if(t){this._pdfDocument=t;this._firstPageCapability.resolve()}}},{key:"_onFind",value:function _onFind(t){var r=this;if(t){var i=this._pdfDocument,a=t.type;(null===this._state||this._shouldDirtyMatch(t))&&(this._dirtyMatch=!0);this._state=t;"highlightallchange"!==a&&this._updateUIState(d.PENDING);this._firstPageCapability.promise.then((function(){if(r._pdfDocument&&(!i||r._pdfDocument===i)){r._extractText();var t=!r._highlightMatches,o=!!r._findTimeout;if(r._findTimeout){clearTimeout(r._findTimeout);r._findTimeout=null}if(a)if(r._dirtyMatch)r._nextMatch();else if("again"===a){r._nextMatch();t&&r._state.highlightAll&&r._updateAllPages()}else if("highlightallchange"===a){o?r._nextMatch():r._highlightMatches=!0;r._updateAllPages()}else r._nextMatch();else r._findTimeout=setTimeout((function(){r._nextMatch();r._findTimeout=null}),250)}}))}}},{key:"scrollMatchIntoView",value:function scrollMatchIntoView(t){var r=t.element,i=void 0===r?null:r,a=t.selectedLeft,o=void 0===a?0:a,l=t.pageIndex,c=void 0===l?-1:l,d=t.matchIndex,h=void 0===d?-1:d;if(this._scrollMatches&&i&&-1!==h&&h===this._selected.matchIdx&&-1!==c&&c===this._selected.pageIdx){this._scrollMatches=!1;var p={top:-50,left:o+-400};(0,u.scrollIntoView)(i,p,!0,"infinite-scroll"===this._pageViewMode)}}},{key:"_reset",value:function _reset(){this._highlightMatches=!1;this._scrollMatches=!1;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this._pageMatchesColor=[];this._state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:!1};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=new Set;this._resumePageIdx=null;this._dirtyMatch=!1;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=(0,a.createPromiseCapability)()}},{key:"_query",get:function get(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;var t=this._state.query.split("\n").map((function(t){return normalize(t)[0]}));this._normalizedQuery=t.join("\n")}return this._normalizedQuery}},{key:"_shouldDirtyMatch",value:function _shouldDirtyMatch(t){if(t.query!==this._state.query)return!0;switch(t.type){case"again":var r=this._selected.pageIdx+1,i=this._linkService;return r>=1&&r<=i.pagesCount&&r!==i.page&&!i.isPageVisible(r);case"highlightallchange":return!1}return!0}},{key:"_prepareMatches",value:function _prepareMatches(t,r,i,a){function isSubTerm(r){var i=t[r],a=t[r+1];if(r<t.length-1&&i.match===a.match){i.skipped=!0;return!0}for(var o=r-1;o>=0;o--){var l=t[o];if(!l.skipped){if(l.match+l.matchLength<i.match)break;if(l.match+l.matchLength>=i.match+i.matchLength){i.skipped=!0;return!0}}}return!1}t.sort((function(t,r){return t.match===r.match?t.matchLength-r.matchLength:t.match-r.match}));for(var o=0,l=t.length;o<l;o++)if(!isSubTerm(o)){r.push(t[o].match);i.push(t[o].matchLength);a.push(t[o].color)}}},{key:"_isEntireWord",value:function _isEntireWord(t,r,i){if(r>0){var a=t.charCodeAt(r),o=t.charCodeAt(r-1);if((0,l.getCharacterType)(a)===(0,l.getCharacterType)(o))return!1}var c=r+i-1;if(c<t.length-1){var u=t.charCodeAt(c),d=t.charCodeAt(c+1);if((0,l.getCharacterType)(u)===(0,l.getCharacterType)(d))return!1}return!0}},{key:"_calculateFuzzyMatch",value:function _calculateFuzzyMatch(t,r,i,a){for(var o=[],l=[],u=t.length,d=u<5?u:5,h=Math.round(u/5),p=t.substring(0,d),v={useCollator:!0},y=0;y<i.length-u;y++){var g=i.substring(y,y+d);if(c.Levenshtein.distance(p,g,v)<3){var m=i.substring(y,y+u),b=c.Levenshtein.distance(t,m,v);if(b<=h){if(y+1<i.length-u){var w=i.substring(y+1,y+1+u);if(b>=c.Levenshtein.distance(t,w,v))continue}var P=getOriginalIndex(y,a),S=getOriginalIndex(y+u-1,a)-P+1;o.push(P);l.push(S);y+=u-1}}}this._pageMatches[r]=o;this._pageMatchesLength[r]=l}},{key:"_calculatePhraseMatch",value:function _calculatePhraseMatch(t,r,i,a,l,c){if(c){i=(0,o.deburr)(i);t=(0,o.deburr)(t)}for(var u=[],d=[],h=t.length,p=-h;-1!==(p=i.indexOf(t,p+h));)if(!l||this._isEntireWord(i,p,h)){var v=getOriginalIndex(p,a),y=getOriginalIndex(p+h-1,a)-v+1;u.push(v);d.push(y)}this._pageMatches[r]=u;this._pageMatchesLength[r]=d}},{key:"_calculateWordMatch",value:function _calculateWordMatch(t,r,i,a,l,c){if(c){i=(0,o.deburr)(i);t=(0,o.deburr)(t)}for(var u=[],d=t.includes("\n")?t.trim().split(/\n+/g):t.trim().match(/\S+/g),h=0,p=d.length;h<p;h++){var v=d[h],y=v.length;if(0!==y)for(var g=-y;-1!==(g=i.indexOf(v,g+y));)if(!l||this._isEntireWord(i,g,y)){var m=getOriginalIndex(g,a),b=getOriginalIndex(g+y-1,a)-m+1;u.push({match:m,matchLength:b,skipped:!1,color:h})}}this._pageMatchesLength[r]=[];this._pageMatchesColor[r]=[];this._pageMatches[r]=[];this._prepareMatches(u,this._pageMatches[r],this._pageMatchesLength[r],this._pageMatchesColor[r])}},{key:"_isInPageRanges",value:function _isInPageRanges(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1?arguments[1]:void 0;try{return!i||i.split(",").some((function(i){return t._isInPageRange(r,i)}))}catch(t){return!0}}},{key:"_isInPageRange",value:function _isInPageRange(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"6-7";try{if(!r)return!0;if(r.includes("-")){var i=r.split("-"),a=i[0].trim();if(a.length>0&&t<Number(a))return!1;var o=i[1].trim();if(o.length>0&&t>Number(o))return!1}else{var l=r.trim();if(l.length>0)return Number(l)===t}return!0}catch(t){return!0}}},{key:"_calculateMatch",value:function _calculateMatch(t){if(this.state){var r=this._pageContents[t],i=this._pageDiffs[t],a=this._query,o=this._state,l=o.caseSensitive,c=o.entireWord,u=o.ignoreAccents,d=o.fuzzySearch,h=o.phraseSearch,p=o.currentPage,v=o.pageRange,y=!1;if(p&&t!==this._linkService.page-1){y=!0;this._pageMatches[t]=[]}if(!this._isInPageRanges(t+1,v)){y=!0;this._pageMatches[t]=[]}if(0!==a.length){if(!y){if(!l){r=r.toLowerCase();a=a.toLowerCase()}d?a.length<=2?this._calculatePhraseMatch(a,t,r,i,!1):this._calculateFuzzyMatch(a,t,r,i):h?this._calculatePhraseMatch(a,t,r,i,c,u):this._calculateWordMatch(a,t,r,i,c,u)}this._state.highlightAll&&this._updatePage(t);if(this._resumePageIdx===t){this._resumePageIdx=null;this._nextPageMatch()}var g=this._pageMatches[t].length;if(g>0){this._matchesCountTotal+=g;this._updateUIResultsCount()}else t+1===this._pageContents.length&&0===this._matchesCountTotal?this._updateUIResultsCount():p&&!y&&this._updateMatch(!1)}}}},{key:"_extractText",value:function _extractText(){var t=this;if(!(this._extractTextPromises.length>0))for(var r=Promise.resolve(),i=function _loop(i){var o=(0,a.createPromiseCapability)();t._extractTextPromises[i]=o.promise;r=r.then((function(){return t._pdfDocument&&t._extractTextPromises.length>0?t._pdfDocument.getPage(i+1).then((function(t){return t.getTextContent()})).then((function(r){for(var a=r.items,l=[],c=0,u=a.length;c<u;c++){l.push(a[c].str);a[c].hasEOL&&l.push("\n")}var d=_slicedToArray(normalize(l.join("")),2);t._pageContents[i]=d[0];t._pageDiffs[i]=d[1];o.resolve(i)}),(function(r){globalThis.ngxConsole.error("Unable to get text content for page ".concat(i+1),r);t._pageContents[i]="";t._pageDiffs[i]=null;o.resolve(i)})):Promise.resolve()}))},o=0,l=this._linkService.pagesCount;o<l;o++)i(o)}},{key:"_updatePage",value:function _updatePage(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1);this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}},{key:"_updateAllPages",value:function _updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}},{key:"_nextMatch",value:function _nextMatch(){var t=this,r=this._state.findPrevious,i=this._linkService.page-1,a=this._linkService.pagesCount;this._highlightMatches=!0;if(this._dirtyMatch){this._dirtyMatch=!1;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=i;this._offset.matchIdx=null;this._offset.wrapped=!1;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this._pageMatchesColor.length=0;this._matchesCountTotal=0;this._updateAllPages();var o=0,l=a-1;this.state.currentPage&&(l=o=this._linkService.page-1);for(var c=o;c<=l;c++)if(!this._pendingFindMatches.has(c)){this._pendingFindMatches.add(c);this._extractTextPromises[c].then((function(r){t._pendingFindMatches.delete(r);t._calculateMatch(r)}))}}if(""!==this._query){if(!this._resumePageIdx){var u=this._offset;this._pagesToSearch=a;if(null!==u.matchIdx){var h=this._pageMatches[u.pageIdx].length;if(!r&&u.matchIdx+1<h||r&&u.matchIdx>0){u.matchIdx=r?u.matchIdx-1:u.matchIdx+1;this._updateMatch(!0);return}if(this.state.currentPage){u.matchIdx=r?h-1:0;this._updateMatch(!0);this._updateUIState(d.WRAPPED);return}this._advanceOffsetPage(r)}this._nextPageMatch()}}else this._updateUIState(d.FOUND)}},{key:"_matchesReady",value:function _matchesReady(t){var r=this._offset,i=t.length,a=this._state.findPrevious;if(i){r.matchIdx=a?i-1:0;this._updateMatch(!0);return!0}this._advanceOffsetPage(a);if(r.wrapped){r.matchIdx=null;if(this._pagesToSearch<0){this._updateMatch(!1);return!0}}return!1}},{key:"_nextPageMatch",value:function _nextPageMatch(){null!==this._resumePageIdx&&globalThis.ngxConsole.error("There can only be one pending page.");var t=null;do{var r=this._offset.pageIdx;if(!(t=this._pageMatches[r])){this._resumePageIdx=r;break}}while(!this._matchesReady(t))}},{key:"_advanceOffsetPage",value:function _advanceOffsetPage(t){var r=this._offset,i=this._linkService.pagesCount;r.pageIdx=t?r.pageIdx-1:r.pageIdx+1;r.matchIdx=null;this._pagesToSearch--;if(r.pageIdx>=i||r.pageIdx<0){r.pageIdx=t?i-1:0;r.wrapped=!0}}},{key:"_updateMatch",value:function _updateMatch(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=d.NOT_FOUND,i=this._offset.wrapped;this._offset.wrapped=!1;if(t){var a=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;r=i?d.WRAPPED:d.FOUND;-1!==a&&a!==this._selected.pageIdx&&this._updatePage(a)}this._updateUIState(r,this._state.findPrevious);if(-1!==this._selected.pageIdx){this._scrollMatches=!0;this._updatePage(this._selected.pageIdx)}}},{key:"_onFindBarClose",value:function _onFindBarClose(t){var r=this,i=this._pdfDocument;this._firstPageCapability.promise.then((function(){if(r._pdfDocument&&(!i||r._pdfDocument===i)){if(r._findTimeout){clearTimeout(r._findTimeout);r._findTimeout=null}if(r._resumePageIdx){r._resumePageIdx=null;r._dirtyMatch=!0}r._updateUIState(d.FOUND);r._highlightMatches=!1;r._updateAllPages()}}))}},{key:"_requestMatchesCount",value:function _requestMatchesCount(){var t=this._selected,r=t.pageIdx,i=t.matchIdx,a=0,o=this._matchesCountTotal;if(-1!==i){for(var l=0;l<r;l++){var c;a+=(null===(c=this._pageMatches[l])||void 0===c?void 0:c.length)||0}a+=i+1}(a<1||a>o)&&(a=o=0);return{current:a,total:o}}},{key:"_updateUIResultsCount",value:function _updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}},{key:"_updateUIState",value:function _updateUIState(t){var r,i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:a,matchesCount:this._requestMatchesCount(),rawQuery:null!==(r=null===(i=this._state)||void 0===i?void 0:i.query)&&void 0!==r?r:null})}}]);return PDFFindController}();r.PDFFindController=v},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.deburr=function deburr(t){return(t=function toString(t){return null==t?"":function baseToString(t){if("string"==typeof t)return t;if(function isSymbol(t){return"symbol"==_typeof(t)||function isObjectLike(t){return!!t&&"object"==_typeof(t)}(t)&&p.call(t)==a}(t))return g?g.call(t):"";var r=t+"";return"0"==r&&1/t==-i?"-0":r}(t)}(t))&&t.replace(o,h).replace(l,"")};function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var i=1/0,a="[object Symbol]",o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,l=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),c="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global&&global.Object===Object&&global,u="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,d=c||u||Function("return this")();var h=function basePropertyOf(t){return function(r){return null==t?void 0:t[r]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"}),p=Object.prototype.toString,v=d.Symbol,y=v?v.prototype:void 0,g=y?y.toString:void 0},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.CharacterType=void 0;r.getCharacterType=function getCharacterType(t){if(function isAlphabeticalScript(t){return t<11904}(t))return function isAscii(t){return 0==(65408&t)}(t)?function isAsciiSpace(t){return 32===t||9===t||13===t||10===t}(t)?i.SPACE:function isAsciiAlpha(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function isAsciiDigit(t){return t>=48&&t<=57}(t)||95===t?i.ALPHA_LETTER:i.PUNCT:function isThai(t){return 3584==(65408&t)}(t)?i.THAI_LETTER:160===t?i.SPACE:i.ALPHA_LETTER;if(function isHan(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t))return i.HAN_LETTER;if(function isKatakana(t){return t>=12448&&t<=12543}(t))return i.KATAKANA_LETTER;if(function isHiragana(t){return t>=12352&&t<=12447}(t))return i.HIRAGANA_LETTER;if(function isHalfwidthKatakana(t){return t>=65376&&t<=65439}(t))return i.HALFWIDTH_KATAKANA_LETTER;return i.ALPHA_LETTER};var i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};r.CharacterType=i},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.Levenshtein=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var i;try{i=Intl.Collator("und",{sensitivity:"base"})}catch(t){try{i=Intl.Collator("generic",{sensitivity:"base"})}catch(t){i=void 0}}var a=[],o=[],l=function(){function Levenshtein(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Levenshtein)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(Levenshtein,null,[{key:"distance",value:function distance(t,r,l){var c,u,d,h,p,v,y=l&&i&&l.useCollator,g=t.length,m=r.length;if(0===g)return m;if(0===m)return g;for(d=0;d<m;++d){a[d]=d;o[d]=r.charCodeAt(d)}a[m]=m;if(y)for(d=0;d<g;++d){u=d+1;for(h=0;h<m;++h){c=u;v=0===i.compare(t.charAt(d),String.fromCharCode(o[h]));(u=a[h]+(v?0:1))>(p=c+1)&&(u=p);u>(p=a[h+1]+1)&&(u=p);a[h]=c}a[h]=u}else for(d=0;d<g;++d){u=d+1;for(h=0;h<m;++h){c=u;v=t.charCodeAt(d)===o[h];(u=a[h]+(v?0:1))>(p=c+1)&&(u=p);u>(p=a[h+1]+1)&&(u=p);a[h]=c}a[h]=u}return u}}]);return Levenshtein}();r.Levenshtein=l},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFHistory=void 0;r.isDestArraysEqual=isDestArraysEqual;r.isDestHashesEqual=isDestHashesEqual;var a=i(3),o=i(6);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function getCurrentHash(){return document.location.hash}var l=function(){function PDFHistory(t){var r=this,i=t.linkService,a=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFHistory);this.linkService=i;this.eventBus=a;this._initialized=!1;this._fingerprint="";this.reset();this._boundEvents=null;this.eventBus._on("pagesinit",(function(){r._isPagesLoaded=!1;r.eventBus._on("pagesloaded",(function(t){r._isPagesLoaded=!!t.pagesCount}),{once:!0})}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFHistory,[{key:"initialize",value:function initialize(t){var r=t.fingerprint,i=t.resetHistory,a=void 0!==i&&i,o=t.updateUrl,l=void 0!==o&&o;if(r&&"string"==typeof r){this._initialized&&this.reset();var c=""!==this._fingerprint&&this._fingerprint!==r;this._fingerprint=r;this._updateUrl=!0===l;this._initialized=!0;this._bindEvents();var u=window.history.state;this._popStateInProgress=!1;this._blockHashChange=0;this._currentHash=getCurrentHash();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(this._isValidState(u,!0)&&!a){var d=u.destination;this._updateInternalState(d,u.uid,!0);void 0!==d.rotation&&(this._initialRotation=d.rotation);if(d.dest){this._initialBookmark=JSON.stringify(d.dest);this._destination.page=null}else d.hash?this._initialBookmark=d.hash:d.page&&(this._initialBookmark="page=".concat(d.page))}else{var h=this._parseCurrentHash(!0),p=h.hash,v=h.page,y=h.rotation;if(!p||c||a){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:p,page:v,rotation:y},!0)}}else globalThis.ngxConsole.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function reset(){if(this._initialized){this._pageHide();this._initialized=!1;this._unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}},{key:"push",value:function push(t){var r=this,i=t.namedDest,a=void 0===i?null:i,o=t.explicitDest,l=t.pageNumber;if(this._initialized)if(a&&"string"!=typeof a)globalThis.ngxConsole.error("PDFHistory.push: "+'"'.concat(a,'" is not a valid namedDest parameter.'));else if(Array.isArray(o))if(this._isValidPage(l)||null===l&&!this._destination){var c=a||JSON.stringify(o);if(c){var u=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,c)||isDestArraysEqual(this._destination.dest,o))){if(this._destination.page)return;u=!0}if(!this._popStateInProgress||u){this._pushOrReplaceState({dest:o,hash:c,page:l,rotation:this.linkService.rotation},u);if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((function(){r._popStateInProgress=!1}))}}}}else globalThis.ngxConsole.error("PDFHistory.push: "+'"'.concat(l,'" is not a valid pageNumber parameter.'));else globalThis.ngxConsole.error("PDFHistory.push: "+'"'.concat(o,'" is not a valid explicitDest parameter.'))}},{key:"pushPage",value:function pushPage(t){var r,i=this;if(this._initialized)if(this._isValidPage(t)){if((null===(r=this._destination)||void 0===r?void 0:r.page)!==t&&!this._popStateInProgress){this._pushOrReplaceState({dest:null,hash:"page=".concat(t),page:t,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((function(){i._popStateInProgress=!1}))}}}else globalThis.ngxConsole.error('PDFHistory.pushPage: "'.concat(t,'" is not a valid page number.'))}},{key:"pushCurrentPosition",value:function pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function back(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}}},{key:"forward",value:function forward(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}}},{key:"popStateInProgress",get:function get(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function get(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function get(){return this._initialized?this._initialRotation:null}},{key:"_pushOrReplaceState",value:function _pushOrReplaceState(t){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,a={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:t};this._updateInternalState(t,a.uid);if(this._updateUrl&&null!=t&&t.hash){var o=document.location.href.split("#")[0];o.startsWith("file://")||(r="".concat(o,"#").concat(t.hash))}i?window.history.replaceState(a,"",r):window.history.pushState(a,"",r)}},{key:"_tryPushCurrentPosition",value:function _tryPushCurrentPosition(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var r=this._position;t&&((r=Object.assign(Object.create(null),this._position)).temporary=!0);if(this._destination){if(this._destination.temporary)this._pushOrReplaceState(r,!0);else if(this._destination.hash!==r.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var i=!1;if(this._destination.page>=r.first&&this._destination.page<=r.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this._pushOrReplaceState(r,i)}}else this._pushOrReplaceState(r)}}},{key:"_isValidPage",value:function _isValidPage(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}},{key:"_isValidState",value:function _isValidState(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!r)return!1;if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;var i=_slicedToArray(performance.getEntriesByType("navigation"),1)[0];if("reload"!==(null==i?void 0:i.type))return!1}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"===_typeof(t.destination))}},{key:"_updateInternalState",value:function _updateInternalState(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}i&&null!=t&&t.temporary&&delete t.temporary;this._destination=t;this._uid=r;this._maxUid=Math.max(this._maxUid,r);this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function _parseCurrentHash(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=unescape(getCurrentHash()).substring(1),i=(0,a.parseQueryString)(r),o=i.get("nameddest")||"",l=0|i.get("page");(!this._isValidPage(l)||t&&o.length>0)&&(l=null);return{hash:r,page:l,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function _updateViewarea(t){var r=this,i=t.location;if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:i.pdfOpenParams.substring(1),page:this.linkService.page,first:i.pageNumber,rotation:i.rotation};if(!this._popStateInProgress){this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++;this._updateViewareaTimeout=setTimeout((function(){r._popStateInProgress||r._tryPushCurrentPosition(!0);r._updateViewareaTimeout=null}),1e3)}}},{key:"_popState",value:function _popState(t){var r=this,i=t.state,l=getCurrentHash(),c=this._currentHash!==l;this._currentHash=l;if(i){if(this._isValidState(i)){this._popStateInProgress=!0;if(c){this._blockHashChange++;(0,o.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((function(){r._blockHashChange--}))}var u=i.destination;this._updateInternalState(u,i.uid,!0);(0,a.isValidRotation)(u.rotation)&&(this.linkService.rotation=u.rotation);u.dest?this.linkService.goToDestination(u.dest):u.hash?this.linkService.setHash(u.hash):u.page&&(this.linkService.page=u.page);Promise.resolve().then((function(){r._popStateInProgress=!1}))}}else{this._uid++;var d=this._parseCurrentHash(),h=d.hash,p=d.page,v=d.rotation;this._pushOrReplaceState({hash:h,page:p,rotation:v},!0)}}},{key:"_pageHide",value:function _pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function _bindEvents(){if(!this._boundEvents){this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)};this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea);window.addEventListener("popstate",this._boundEvents.popState);window.addEventListener("pagehide",this._boundEvents.pageHide)}}},{key:"_unbindEvents",value:function _unbindEvents(){if(this._boundEvents){this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea);window.removeEventListener("popstate",this._boundEvents.popState);window.removeEventListener("pagehide",this._boundEvents.pageHide);this._boundEvents=null}}}]);return PDFHistory}();r.PDFHistory=l;function isDestHashesEqual(t,r){return"string"==typeof t&&"string"==typeof r&&(t===r||(0,a.parseQueryString)(t).get("nameddest")===r)}function isDestArraysEqual(t,r){function isEntryEqual(t,r){if(_typeof(t)!==_typeof(r))return!1;if(Array.isArray(t)||Array.isArray(r))return!1;if(null!==t&&"object"===_typeof(t)&&null!==r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(var i in t)if(!isEntryEqual(t[i],r[i]))return!1;return!0}return t===r||Number.isNaN(t)&&Number.isNaN(r)}if(!Array.isArray(t)||!Array.isArray(r))return!1;if(t.length!==r.length)return!1;for(var i=0,a=t.length;i<a;i++)if(!isEntryEqual(t[i],r[i]))return!1;return!0}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFLayerViewer=void 0;var a=i(13);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o=new WeakSet,l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PDFLayerViewer,t);var r,i=_createSuper(PDFLayerViewer);function PDFLayerViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFLayerViewer);_classPrivateMethodInitSpec(_assertThisInitialized(r=i.call(this,t)),o);r.l10n=t.l10n;r.eventBus._on("optionalcontentconfigchanged",(function(t){_classPrivateMethodGet(_assertThisInitialized(r),o,_updateLayers2).call(_assertThisInitialized(r),t.promise)}));r.eventBus._on("resetlayers",(function(){_classPrivateMethodGet(_assertThisInitialized(r),o,_updateLayers2).call(_assertThisInitialized(r))}));r.eventBus._on("togglelayerstree",r._toggleAllTreeItems.bind(_assertThisInitialized(r)));return r}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFLayerViewer,[{key:"reset",value:function reset(){_get(_getPrototypeOf(PDFLayerViewer.prototype),"reset",this).call(this);this._optionalContentConfig=null;this._optionalContentHash=null}},{key:"_dispatchEvent",value:function _dispatchEvent(t){this.eventBus.dispatch("layersloaded",{source:this,layersCount:t})}},{key:"_bindLink",value:function _bindLink(t,r){var i=this,a=r.groupId,o=r.input,l=function setVisibility(){i._optionalContentConfig.setVisibility(a,o.checked);i._optionalContentHash=i._optionalContentConfig.getHash();i.eventBus.dispatch("optionalcontentconfig",{source:i,promise:Promise.resolve(i._optionalContentConfig)})};t.onclick=function(r){if(r.target===o){l();return!0}if(r.target!==t)return!0;o.checked=!o.checked;l();return!1}}},{key:"_setNestedName",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t,r){var i,a;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:i=r.name;if("string"!=typeof(a=void 0===i?null:i)){o.next=4;break}t.textContent=this._normalizeTextContent(a);return o.abrupt("return");case 4:o.next=6;return this.l10n.get("additional_layers");case 6:t.textContent=o.sent;t.style.fontStyle="italic";case 8:case"end":return o.stop()}}),_callee,this)}))),function _setNestedName(t,i){return r.apply(this,arguments)})},{key:"_addToggleButton",value:function _addToggleButton(t,r){var i=r.name,a=void 0===i?null:i;_get(_getPrototypeOf(PDFLayerViewer.prototype),"_addToggleButton",this).call(this,t,null===a)}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._optionalContentConfig&&_get(_getPrototypeOf(PDFLayerViewer.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function render(t){var r=t.optionalContentConfig,i=t.pdfDocument;this._optionalContentConfig&&this.reset();this._optionalContentConfig=r||null;this._pdfDocument=i||null;var a=null==r?void 0:r.getOrder();if(a){this._optionalContentHash=r.getHash();for(var o=document.createDocumentFragment(),l=[{parent:o,groups:a}],c=0,u=!1;l.length>0;){var d,h=l.shift(),p=_createForOfIteratorHelper(h.groups);try{for(p.s();!(d=p.n()).done;){var v=d.value,y=document.createElement("div");y.className="treeItem";var g=document.createElement("a");y.append(g);if("object"===_typeof(v)){u=!0;this._addToggleButton(y,v);this._setNestedName(g,v);var m=document.createElement("div");m.className="treeItems";y.append(m);l.push({parent:m,groups:v.order})}else{var b=r.getGroup(v),w=document.createElement("input");this._bindLink(g,{groupId:v,input:w});w.type="checkbox";w.checked=b.visible;var P=document.createElement("label");P.textContent=this._normalizeTextContent(b.name);P.append(w);g.append(P);c++}h.parent.append(y)}}catch(t){p.e(t)}finally{p.f()}}this._finishRendering(o,c,u)}else this._dispatchEvent(0)}}]);return PDFLayerViewer}(a.BaseTreeViewer);r.PDFLayerViewer=l;function _updateLayers2(){return _updateLayers3.apply(this,arguments)}function _updateLayers3(){_updateLayers3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r,i,a=arguments;return _regeneratorRuntime().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:null;if(this._optionalContentConfig){o.next=3;break}return o.abrupt("return");case 3:r=this._pdfDocument;o.next=6;return t||r.getOptionalContentConfig();case 6:i=o.sent;if(r===this._pdfDocument){o.next=9;break}return o.abrupt("return");case 9:if(!t){o.next=14;break}if(i.getHash()!==this._optionalContentHash){o.next=12;break}return o.abrupt("return");case 12:o.next=15;break;case 14:this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(i)});case 15:this.render({optionalContentConfig:i,pdfDocument:this._pdfDocument});case 16:case"end":return o.stop()}}),_callee2,this)})));return _updateLayers3.apply(this,arguments)}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFOutlineViewer=void 0;var a=i(13),o=i(4),l=i(3);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,i)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}var c=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PDFOutlineViewer,t);var r,i,a=_createSuper(PDFOutlineViewer);function PDFOutlineViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFOutlineViewer);(r=a.call(this,t)).linkService=t.linkService;r.downloadManager=t.downloadManager;r.eventBus._on("toggleoutlinetree",r._toggleAllTreeItems.bind(_assertThisInitialized(r)));r.eventBus._on("currentoutlineitem",r._currentOutlineItem.bind(_assertThisInitialized(r)));r.eventBus._on("pagechanging",(function(t){r._currentPageNumber=t.pageNumber}));r.eventBus._on("pagesloaded",(function(t){r._isPagesLoaded=!!t.pagesCount;r._currentOutlineItemCapability&&!r._currentOutlineItemCapability.settled&&r._currentOutlineItemCapability.resolve(r._isPagesLoaded)}));r.eventBus._on("sidebarviewchanged",(function(t){r._sidebarView=t.view}));return r}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFOutlineViewer,[{key:"reset",value:function reset(){_get(_getPrototypeOf(PDFOutlineViewer.prototype),"reset",this).call(this);this._outline=null;this._pageNumberToDestHashCapability=null;this._currentPageNumber=1;this._isPagesLoaded=null;this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1);this._currentOutlineItemCapability=null}},{key:"_dispatchEvent",value:function _dispatchEvent(t){var r;this._currentOutlineItemCapability=(0,o.createPromiseCapability)();0===t||null!==(r=this._pdfDocument)&&void 0!==r&&r.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):null!==this._isPagesLoaded&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded);this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:t,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}},{key:"_bindLink",value:function _bindLink(t,r){var i=this,a=r.url,o=r.newWindow,l=r.action,c=r.attachment,u=r.dest,d=r.setOCGState,h=this.linkService;if(a)h.addLinkAttributes(t,a,o);else if(l){t.href=h.getAnchorUrl("");t.onclick=function(){h.executeNamedAction(l);return!1}}else if(c){t.href=h.getAnchorUrl("");t.onclick=function(){i.downloadManager.openOrDownloadData(t,c.content,c.filename);return!1}}else if(d){t.href=h.getAnchorUrl("");t.onclick=function(){h.executeSetOCGState(d);return!1}}else{t.href=h.getDestinationHash(u);t.onclick=function(t){i._updateCurrentTreeItem(t.target.parentNode);u&&h.goToDestination(u);return!1}}}},{key:"_setStyles",value:function _setStyles(t,r){var i=r.bold,a=r.italic;i&&(t.style.fontWeight="bold");a&&(t.style.fontStyle="italic")}},{key:"_addToggleButton",value:function _addToggleButton(t,r){var i=r.count,a=r.items,o=!1;if(i<0){var l=a.length;if(l>0)for(var c=_toConsumableArray(a);c.length>0;){var u=c.shift(),d=u.count,h=u.items;if(d>0&&h.length>0){l+=h.length;c.push.apply(c,_toConsumableArray(h))}}Math.abs(i)===l&&(o=!0)}_get(_getPrototypeOf(PDFOutlineViewer.prototype),"_addToggleButton",this).call(this,t,o)}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._outline&&_get(_getPrototypeOf(PDFOutlineViewer.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function render(t){var r=t.outline,i=t.pdfDocument;this._outline&&this.reset();this._outline=r||null;this._pdfDocument=i||null;if(r){for(var a=document.createDocumentFragment(),o=[{parent:a,items:r}],l=0,c=!1;o.length>0;){var u,d=o.shift(),h=_createForOfIteratorHelper(d.items);try{for(h.s();!(u=h.n()).done;){var p=u.value,v=document.createElement("div");v.className="treeItem";var y=document.createElement("a");this._bindLink(y,p);this._setStyles(y,p);y.textContent=this._normalizeTextContent(p.title);v.append(y);if(p.items.length>0){c=!0;this._addToggleButton(v,p);var g=document.createElement("div");g.className="treeItems";v.append(g);o.push({parent:g,items:p.items})}d.parent.append(v);l++}}catch(t){h.e(t)}finally{h.f()}}this._finishRendering(a,l,c)}else this._dispatchEvent(0)}},{key:"_currentOutlineItem",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,a;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(this._isPagesLoaded){o.next=2;break}throw new Error("_currentOutlineItem: All pages have not been loaded.");case 2:if(this._outline&&this._pdfDocument){o.next=4;break}return o.abrupt("return");case 4:o.next=6;return this._getPageNumberToDestHash(this._pdfDocument);case 6:if(t=o.sent){o.next=9;break}return o.abrupt("return");case 9:this._updateCurrentTreeItem(null);if(this._sidebarView===l.SidebarView.OUTLINE){o.next=12;break}return o.abrupt("return");case 12:r=this._currentPageNumber;case 13:if(!(r>0)){o.next=25;break}if(i=t.get(r)){o.next=17;break}return o.abrupt("continue",22);case 17:if(a=this.container.querySelector('a[href="'.concat(i,'"]'))){o.next=20;break}return o.abrupt("continue",22);case 20:this._scrollToCurrentTreeItem(a.parentNode);return o.abrupt("break",25);case 22:r--;o.next=13;break;case 25:case"end":return o.stop()}}),_callee,this)}))),function _currentOutlineItem(){return i.apply(this,arguments)})},{key:"_getPageNumberToDestHash",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i,a,l,c,u,d,h,p,v,y,g,m,b,w;return _regeneratorRuntime().wrap((function _callee2$(P){for(;;)switch(P.prev=P.next){case 0:if(!this._pageNumberToDestHashCapability){P.next=2;break}return P.abrupt("return",this._pageNumberToDestHashCapability.promise);case 2:this._pageNumberToDestHashCapability=(0,o.createPromiseCapability)();r=new Map,i=new Map;a=[{nesting:0,items:this._outline}];case 5:if(!(a.length>0)){P.next=56;break}l=a.shift(),c=l.nesting;u=_createForOfIteratorHelper(l.items);P.prev=8;u.s();case 10:if((d=u.n()).done){P.next=46;break}h=d.value,p=h.dest,v=h.items;y=void 0,g=void 0;if("string"!=typeof p){P.next=21;break}P.next=16;return t.getDestination(p);case 16:y=P.sent;if(t===this._pdfDocument){P.next=19;break}return P.abrupt("return",null);case 19:P.next=22;break;case 21:y=p;case 22:if(!Array.isArray(y)){P.next=43;break}m=_slicedToArray(y,1);if("object"!==_typeof(b=m[0])||null===b){P.next=41;break}if(g=this.linkService._cachedPageNumber(b)){P.next=39;break}P.prev=27;P.next=30;return t.getPageIndex(b);case 30:P.t0=P.sent;g=P.t0+1;if(t===this._pdfDocument){P.next=34;break}return P.abrupt("return",null);case 34:this.linkService.cachePageRef(g,b);P.next=39;break;case 37:P.prev=37;P.t1=P.catch(27);case 39:P.next=42;break;case 41:Number.isInteger(b)&&(g=b+1);case 42:if(Number.isInteger(g)&&(!r.has(g)||c>i.get(g))){w=this.linkService.getDestinationHash(p);r.set(g,w);i.set(g,c)}case 43:v.length>0&&a.push({nesting:c+1,items:v});case 44:P.next=10;break;case 46:P.next=51;break;case 48:P.prev=48;P.t2=P.catch(8);u.e(P.t2);case 51:P.prev=51;u.f();return P.finish(51);case 54:P.next=5;break;case 56:this._pageNumberToDestHashCapability.resolve(r.size>0?r:null);return P.abrupt("return",this._pageNumberToDestHashCapability.promise);case 58:case"end":return P.stop()}}),_callee2,this,[[8,48,51,54],[27,37]])}))),function _getPageNumberToDestHash(t){return r.apply(this,arguments)})}]);return PDFOutlineViewer}(a.BaseTreeViewer);r.PDFOutlineViewer=c},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFPresentationMode=void 0;var a=i(3),o=i(4);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var l=3e3,c="pdfPresentationMode",u="pdfPresentationModeControls",d=50,h=.1,p=50,v=Math.PI/6,y=new WeakMap,g=new WeakMap,m=new WeakSet,b=new WeakSet,w=new WeakSet,P=new WeakSet,S=new WeakSet,k=new WeakSet,x=new WeakSet,A=new WeakSet,E=new WeakSet,T=new WeakSet,C=new WeakSet,I=new WeakSet,O=new WeakSet,M=new WeakSet,L=new WeakSet,R=function(){function PDFPresentationMode(t){var r=t.container,i=t.pdfViewer,o=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFPresentationMode);_classPrivateMethodInitSpec(this,L);_classPrivateMethodInitSpec(this,M);_classPrivateMethodInitSpec(this,O);_classPrivateMethodInitSpec(this,I);_classPrivateMethodInitSpec(this,C);_classPrivateMethodInitSpec(this,T);_classPrivateMethodInitSpec(this,E);_classPrivateMethodInitSpec(this,A);_classPrivateMethodInitSpec(this,x);_classPrivateMethodInitSpec(this,k);_classPrivateMethodInitSpec(this,S);_classPrivateMethodInitSpec(this,P);_classPrivateMethodInitSpec(this,w);_classPrivateMethodInitSpec(this,b);_classPrivateMethodInitSpec(this,m);_classPrivateFieldInitSpec(this,y,{writable:!0,value:a.PresentationModeState.UNKNOWN});_classPrivateFieldInitSpec(this,g,{writable:!0,value:null});this.container=r;this.pdfViewer=i;this.eventBus=o;this.contextMenuOpen=!1;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;this.touchSwipeState=null}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFPresentationMode,[{key:"request",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(){var t,r,i;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:t=this.container,r=this.pdfViewer;if(!this.active&&r.pagesCount&&t.requestFullscreen){l.next=3;break}return l.abrupt("return",!1);case 3:_classPrivateMethodGet(this,M,_addFullscreenChangeListeners2).call(this);_classPrivateMethodGet(this,b,_notifyStateChange2).call(this,a.PresentationModeState.CHANGING);i=t.requestFullscreen();_classPrivateFieldSet(this,g,{pageNumber:r.currentPageNumber,scaleValue:r.currentScaleValue,scrollMode:r.scrollMode,spreadMode:null,annotationEditorMode:null});if(!(r.spreadMode===a.SpreadMode.NONE||r.pageViewsReady&&r.hasEqualPageSizes)){console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes.");_classPrivateFieldGet(this,g).spreadMode=r.spreadMode}r.annotationEditorMode!==o.AnnotationEditorType.DISABLE&&(_classPrivateFieldGet(this,g).annotationEditorMode=r.annotationEditorMode);l.prev=9;l.next=12;return i;case 12:r.focus();return l.abrupt("return",!0);case 16:l.prev=16;l.t0=l.catch(9);_classPrivateMethodGet(this,L,_removeFullscreenChangeListeners2).call(this);_classPrivateMethodGet(this,b,_notifyStateChange2).call(this,a.PresentationModeState.NORMAL);case 20:return l.abrupt("return",!1);case 21:case"end":return l.stop()}}),_callee,this,[[9,16]])}))),function request(){return t.apply(this,arguments)})},{key:"active",get:function get(){return _classPrivateFieldGet(this,y)===a.PresentationModeState.CHANGING||_classPrivateFieldGet(this,y)===a.PresentationModeState.FULLSCREEN}},{key:"_prepareFullscreenMode",value:function _prepareFullscreenMode(){var t=document.getElementsByClassName("zoom")[0].parentElement,r=t.parentElement;this.ngxContainer=r;for(var i=0;i<r.childElementCount;i++)r.children.item(i)===t&&(this.ngxContainerIndex=i);r.removeChild(t);document.body.append(t);for(var a=document.body.children,o=0;o<a.length;o++){var l=a.item(o);l!==t&&l instanceof HTMLElement&&l.classList.add("hidden-by-fullscreen")}document.getElementById("sidebarContainer").classList.add("hidden-by-fullscreen");document.getElementsByClassName("toolbar")[0].classList.add("hidden-by-fullscreen")}},{key:"_tidyUpFullscreenMode",value:function _tidyUpFullscreenMode(){if(this.ngxContainer){var t=document.getElementsByClassName("zoom")[0].parentElement;document.body.removeChild(t);this.ngxContainerIndex>=this.ngxContainer.childElementCount?this.ngxContainer.append(t):this.ngxContainer.insertBefore(t,this.ngxContainer.children.item(this.ngxContainerIndex));this.ngxContainer=void 0;for(var r=document.body.children,i=0;i<r.length;i++){var a=r.item(i);a!==t&&a instanceof HTMLElement&&a.classList.contains("hidden-by-fullscreen")&&a.classList.remove("hidden-by-fullscreen")}document.getElementById("sidebarContainer").classList.remove("hidden-by-fullscreen");document.getElementsByClassName("toolbar")[0].classList.remove("hidden-by-fullscreen")}}}]);var t;return PDFPresentationMode}();r.PDFPresentationMode=R;function _mouseWheel2(t){if(this.active){t.preventDefault();var r=(0,a.normalizeWheelEventDelta)(t),i=Date.now(),o=this.mouseScrollTimeStamp;if(!(i>o&&i-o<d)){(this.mouseScrollDelta>0&&r<0||this.mouseScrollDelta<0&&r>0)&&_classPrivateMethodGet(this,E,_resetMouseScrollState2).call(this);this.mouseScrollDelta+=r;if(Math.abs(this.mouseScrollDelta)>=h){var l=this.mouseScrollDelta;_classPrivateMethodGet(this,E,_resetMouseScrollState2).call(this);(l>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=i)}}}}function _notifyStateChange2(t){_classPrivateFieldSet(this,y,t);this.eventBus.dispatch("presentationmodechanged",{source:this,state:t})}function _enter2(){var t=this;_classPrivateMethodGet(this,b,_notifyStateChange2).call(this,a.PresentationModeState.FULLSCREEN);this.container.classList.add(c);setTimeout((function(){t.pdfViewer.scrollMode=a.ScrollMode.PAGE;null!==_classPrivateFieldGet(t,g).spreadMode&&(t.pdfViewer.spreadMode=a.SpreadMode.NONE);t.pdfViewer.currentPageNumber=_classPrivateFieldGet(t,g).pageNumber;t.pdfViewer.currentScaleValue="page-fit";null!==_classPrivateFieldGet(t,g).annotationEditorMode&&(t.pdfViewer.annotationEditorMode=o.AnnotationEditorType.NONE)}),0);_classPrivateMethodGet(this,C,_addWindowListeners2).call(this);_classPrivateMethodGet(this,x,_showControls2).call(this);this.contextMenuOpen=!1;window.getSelection().removeAllRanges()}function _exit2(){var t=this,r=this.pdfViewer.currentPageNumber;this.container.classList.remove(c);setTimeout((function(){_classPrivateMethodGet(t,L,_removeFullscreenChangeListeners2).call(t);_classPrivateMethodGet(t,b,_notifyStateChange2).call(t,a.PresentationModeState.NORMAL);t.pdfViewer.scrollMode=_classPrivateFieldGet(t,g).scrollMode;null!==_classPrivateFieldGet(t,g).spreadMode&&(t.pdfViewer.spreadMode=_classPrivateFieldGet(t,g).spreadMode);t.pdfViewer.currentScaleValue=_classPrivateFieldGet(t,g).scaleValue;t.pdfViewer.currentPageNumber=r;null!==_classPrivateFieldGet(t,g).annotationEditorMode&&(t.pdfViewer.annotationEditorMode=_classPrivateFieldGet(t,g).annotationEditorMode);_classPrivateFieldSet(t,g,null)}),0);_classPrivateMethodGet(this,I,_removeWindowListeners2).call(this);_classPrivateMethodGet(this,A,_hideControls2).call(this);_classPrivateMethodGet(this,E,_resetMouseScrollState2).call(this);this.contextMenuOpen=!1}function _mouseDown2(t){var r;if(this.contextMenuOpen){this.contextMenuOpen=!1;t.preventDefault()}else if(!(0!==t.button||t.target.href&&null!==(r=t.target.parentNode)&&void 0!==r&&r.hasAttribute("data-internal-link"))){t.preventDefault();t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()}}function _contextMenu2(){this.contextMenuOpen=!0}function _showControls2(){var t=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(u);this.controlsTimeout=setTimeout((function(){t.container.classList.remove(u);delete t.controlsTimeout}),l)}function _hideControls2(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout);this.container.classList.remove(u);delete this.controlsTimeout}}function _resetMouseScrollState2(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}function _touchSwipe2(t){if(this.active)if(t.touches.length>1)this.touchSwipeState=null;else switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=t.touches[0].pageX;this.touchSwipeState.endY=t.touches[0].pageY;t.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;var r=0,i=this.touchSwipeState.endX-this.touchSwipeState.startX,a=this.touchSwipeState.endY-this.touchSwipeState.startY,o=Math.abs(Math.atan2(a,i));Math.abs(i)>p&&(o<=v||o>=Math.PI-v)?r=i:Math.abs(a)>p&&Math.abs(o-Math.PI/2)<=v&&(r=a);r>0?this.pdfViewer.previousPage():r<0&&this.pdfViewer.nextPage()}}function _addWindowListeners2(){this.showControlsBind=_classPrivateMethodGet(this,x,_showControls2).bind(this);this.mouseDownBind=_classPrivateMethodGet(this,S,_mouseDown2).bind(this);this.mouseWheelBind=_classPrivateMethodGet(this,m,_mouseWheel2).bind(this);this.resetMouseScrollStateBind=_classPrivateMethodGet(this,E,_resetMouseScrollState2).bind(this);this.contextMenuBind=_classPrivateMethodGet(this,k,_contextMenu2).bind(this);this.touchSwipeBind=_classPrivateMethodGet(this,T,_touchSwipe2).bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("wheel",this.mouseWheelBind,{passive:!1});window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind);window.addEventListener("touchstart",this.touchSwipeBind);window.addEventListener("touchmove",this.touchSwipeBind);window.addEventListener("touchend",this.touchSwipeBind)}function _removeWindowListeners2(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1});window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);window.removeEventListener("touchstart",this.touchSwipeBind);window.removeEventListener("touchmove",this.touchSwipeBind);window.removeEventListener("touchend",this.touchSwipeBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.mouseWheelBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind;delete this.touchSwipeBind}function _fullscreenChange2(){document.fullscreenElement?_classPrivateMethodGet(this,w,_enter2).call(this):_classPrivateMethodGet(this,P,_exit2).call(this)}function _addFullscreenChangeListeners2(){this.fullscreenChangeBind=_classPrivateMethodGet(this,O,_fullscreenChange2).bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind)}function _removeFullscreenChangeListeners2(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFRenderingQueue=void 0;var a=i(4),o=i(3);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var l=function(){function PDFRenderingQueue(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFRenderingQueue);this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=!1;this.isThumbnailViewEnabled=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFRenderingQueue,[{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function setThumbnailViewer(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function isHighestPriority(t){return this.highestPriorityPage===t.renderingId}},{key:"hasViewer",value:function hasViewer(){return!!this.pdfViewer}},{key:"renderHighestPriority",value:function renderHighestPriority(t){var r;if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&null!==(r=this.pdfThumbnailViewer)&&void 0!==r&&r.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function getHighestPriority(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.views,l=o.length;if(0===l)return null;for(var c=0;c<l;c++){var u=o[c].view;if(!this.isViewFinished(u))return u}var d=t.first.id,h=t.last.id;if(h-d+1>l)for(var p=t.ids,v=1,y=h-d;v<y;v++){var g=i?d+v:h-v;if(!p.has(g)){var m=r[g-1];if(!this.isViewFinished(m))return m}}var b=i?h:d-2,w=r[b];return w&&!this.isViewFinished(w)||a&&(w=r[b+=i?1:-1])&&!this.isViewFinished(w)?w:null}},{key:"isViewFinished",value:function isViewFinished(t){return t.renderingState===o.RenderingStates.FINISHED}},{key:"renderView",value:function renderView(t){var r=this;switch(t.renderingState){case o.RenderingStates.FINISHED:return!1;case o.RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId;t.resume();break;case o.RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case o.RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId;t.draw().finally((function(){r.renderHighestPriority()})).catch((function(t){t instanceof a.RenderingCancelledException||globalThis.ngxConsole.error('renderView: "'.concat(t,'"'))}))}return!0}}]);return PDFRenderingQueue}();r.PDFRenderingQueue=l},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFScriptingManager=void 0;var a=i(3),o=i(4);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}var l=function(){function PDFScriptingManager(t){var r=t.eventBus,i=t.sandboxBundleSrc,a=void 0===i?null:i,o=t.scriptingFactory,l=void 0===o?null:o,c=t.docPropertiesLookup,u=void 0===c?null:c;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFScriptingManager);this._pdfDocument=null;this._pdfViewer=null;this._closeCapability=null;this._destroyCapability=null;this._scripting=null;this._ready=!1;this._eventBus=r;this._sandboxBundleSrc=a;this._scriptingFactory=l;this._docPropertiesLookup=u}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFScriptingManager,[{key:"setViewer",value:function setViewer(t){this._pdfViewer=t}},{key:"setDocument",value:(v=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,i,a,o,l,c,u,d,h,p,v,y,g=this;return _regeneratorRuntime().wrap((function _callee2$(m){for(;;)switch(m.prev=m.next){case 0:if(!this._pdfDocument){m.next=3;break}m.next=3;return this._destroyScripting();case 3:this._pdfDocument=t;if(t){m.next=6;break}return m.abrupt("return");case 6:m.next=8;return Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);case 8:i=m.sent;a=_slicedToArray(i,3);o=a[0];l=a[1];c=a[2];if(o||c){m.next=17;break}m.next=16;return this._destroyScripting();case 16:return m.abrupt("return");case 17:if(t===this._pdfDocument){m.next=19;break}return m.abrupt("return");case 19:m.prev=19;this._scripting=this._createScripting();m.next=29;break;case 23:m.prev=23;m.t0=m.catch(19);globalThis.ngxConsole.error('PDFScriptingManager.setDocument: "'.concat(null===m.t0||void 0===m.t0?void 0:m.t0.message,'".'));m.next=28;return this._destroyScripting();case 28:return m.abrupt("return");case 29:this._internalEvents.set("updatefromsandbox",(function(t){(null==t?void 0:t.source)===window&&g._updateFromSandbox(t.detail)}));this._internalEvents.set("dispatcheventinsandbox",(function(t){var r;null===(r=g._scripting)||void 0===r||r.dispatchEventInSandbox(t.detail)}));this._internalEvents.set("pagechanging",(function(t){var r=t.pageNumber,i=t.previous;if(r!==i){g._dispatchPageClose(i);g._dispatchPageOpen(r)}}));this._internalEvents.set("pagerendered",(function(t){var r=t.pageNumber;g._pageOpenPending.has(r)&&r===g._pdfViewer.currentPageNumber&&g._dispatchPageOpen(r)}));this._internalEvents.set("pagesdestroy",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,i;return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return g._dispatchPageClose(g._pdfViewer.currentPageNumber);case 2:t.next=4;return null===(r=g._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillClose"});case 4:null===(i=g._closeCapability)||void 0===i||i.resolve();case 5:case"end":return t.stop()}}),_callee)})));return function(r){return t.apply(this,arguments)}}());u=_createForOfIteratorHelper(this._internalEvents);try{for(u.s();!(d=u.n()).done;){h=_slicedToArray(d.value,2),p=h[0],v=h[1];this._eventBus._on(p,v)}}catch(t){u.e(t)}finally{u.f()}m.prev=36;m.next=39;return this._getDocProperties();case 39:y=m.sent;if(t===this._pdfDocument){m.next=42;break}return m.abrupt("return");case 42:m.next=44;return this._scripting.createSandbox({objects:o,calculationOrder:l,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:_objectSpread(_objectSpread({},y),{},{actions:c})});case 44:this._eventBus.dispatch("sandboxcreated",{source:this});m.next=53;break;case 47:m.prev=47;m.t1=m.catch(36);globalThis.ngxConsole.error('PDFScriptingManager.setDocument: "'.concat(null===m.t1||void 0===m.t1?void 0:m.t1.message,'".'));m.next=52;return this._destroyScripting();case 52:return m.abrupt("return");case 53:m.next=55;return null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"Open"});case 55:m.next=57;return this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0);case 57:Promise.resolve().then((function(){t===g._pdfDocument&&(g._ready=!0)}));case 58:case"end":return m.stop()}}),_callee2,this,[[19,23],[36,47]])}))),function setDocument(t){return v.apply(this,arguments)})},{key:"dispatchWillSave",value:(p=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){var r;return _regeneratorRuntime().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillSave"}));case 1:case"end":return t.stop()}}),_callee3,this)}))),function dispatchWillSave(t){return p.apply(this,arguments)})},{key:"dispatchDidSave",value:(h=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r;return _regeneratorRuntime().wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidSave"}));case 1:case"end":return t.stop()}}),_callee4,this)}))),function dispatchDidSave(t){return h.apply(this,arguments)})},{key:"dispatchWillPrint",value:(d=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t){var r;return _regeneratorRuntime().wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillPrint"}));case 1:case"end":return t.stop()}}),_callee5,this)}))),function dispatchWillPrint(t){return d.apply(this,arguments)})},{key:"dispatchDidPrint",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(t){var r;return _regeneratorRuntime().wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidPrint"}));case 1:case"end":return t.stop()}}),_callee6,this)}))),function dispatchDidPrint(t){return u.apply(this,arguments)})},{key:"destroyPromise",get:function get(){var t;return(null===(t=this._destroyCapability)||void 0===t?void 0:t.promise)||null}},{key:"ready",get:function get(){return this._ready}},{key:"_internalEvents",get:function get(){return(0,o.shadow)(this,"_internalEvents",new Map)}},{key:"_pageOpenPending",get:function get(){return(0,o.shadow)(this,"_pageOpenPending",new Set)}},{key:"_visitedPages",get:function get(){return(0,o.shadow)(this,"_visitedPages",new Map)}},{key:"_updateFromSandbox",value:(c=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(t){var r,i,o,l,c,u,d,h,p,v,y,g;return _regeneratorRuntime().wrap((function _callee7$(m){for(;;)switch(m.prev=m.next){case 0:r=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode;i=t.id,o=t.siblings,l=t.command,c=t.value;if(i){m.next=46;break}m.t0=l;m.next="clear"===m.t0?6:"error"===m.t0?8:"layout"===m.t0?10:"page-num"===m.t0?15:"print"===m.t0?17:"println"===m.t0?21:"zoom"===m.t0?23:"SaveAs"===m.t0?27:"FirstPage"===m.t0?29:"LastPage"===m.t0?31:"NextPage"===m.t0?33:"PrevPage"===m.t0?35:"ZoomViewIn"===m.t0?37:"ZoomViewOut"===m.t0?41:45;break;case 6:globalThis.ngxConsole.clear();return m.abrupt("break",45);case 8:globalThis.ngxConsole.error(c);return m.abrupt("break",45);case 10:if(!r){m.next=12;break}return m.abrupt("return");case 12:u=(0,a.apiPageLayoutToViewerModes)(c);this._pdfViewer.spreadMode=u.spreadMode;return m.abrupt("break",45);case 15:this._pdfViewer.currentPageNumber=c+1;return m.abrupt("break",45);case 17:m.next=19;return this._pdfViewer.pagesPromise;case 19:this._eventBus.dispatch("print",{source:this});return m.abrupt("break",45);case 21:globalThis.ngxConsole.log(c);return m.abrupt("break",45);case 23:if(!r){m.next=25;break}return m.abrupt("return");case 25:this._pdfViewer.currentScaleValue=c;return m.abrupt("break",45);case 27:this._eventBus.dispatch("download",{source:this});return m.abrupt("break",45);case 29:this._pdfViewer.currentPageNumber=1;return m.abrupt("break",45);case 31:this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;return m.abrupt("break",45);case 33:this._pdfViewer.nextPage();return m.abrupt("break",45);case 35:this._pdfViewer.previousPage();return m.abrupt("break",45);case 37:if(!r){m.next=39;break}return m.abrupt("return");case 39:this._pdfViewer.increaseScale();return m.abrupt("break",45);case 41:if(!r){m.next=43;break}return m.abrupt("return");case 43:this._pdfViewer.decreaseScale();return m.abrupt("break",45);case 45:return m.abrupt("return");case 46:if(!r){m.next=49;break}if(!t.focus){m.next=49;break}return m.abrupt("return");case 49:delete t.id;delete t.siblings;d=o?[i].concat(_toConsumableArray(o)):[i];h=_createForOfIteratorHelper(d);try{for(h.s();!(p=h.n()).done;){v=p.value;(y=document.querySelector('[data-element-id="'.concat(v,'"]')))?y.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):null===(g=this._pdfDocument)||void 0===g||g.annotationStorage.setValue(v,t)}}catch(t){h.e(t)}finally{h.f()}case 54:case"end":return m.stop()}}),_callee7,this)}))),function _updateFromSandbox(t){return c.apply(this,arguments)})},{key:"_dispatchPageOpen",value:(l=_asyncToGenerator(_regeneratorRuntime().mark((function _callee9(t){var r,i,l,c,u,d=this,h=arguments;return _regeneratorRuntime().wrap((function _callee9$(p){for(;;)switch(p.prev=p.next){case 0:r=h.length>1&&void 0!==h[1]&&h[1];i=this._pdfDocument,l=this._visitedPages;r&&(this._closeCapability=(0,o.createPromiseCapability)());if(this._closeCapability){p.next=5;break}return p.abrupt("return");case 5:if((null==(c=this._pdfViewer.getPageView(t-1))?void 0:c.renderingState)===a.RenderingStates.FINISHED){p.next=9;break}this._pageOpenPending.add(t);return p.abrupt("return");case 9:this._pageOpenPending.delete(t);u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee8(){var r,a,o;return _regeneratorRuntime().wrap((function _callee8$(u){for(;;)switch(u.prev=u.next){case 0:u.next=2;return l.has(t)?null:null===(r=c.pdfPage)||void 0===r?void 0:r.getJSActions();case 2:o=u.sent;if(i===d._pdfDocument){u.next=5;break}return u.abrupt("return");case 5:u.next=7;return null===(a=d._scripting)||void 0===a?void 0:a.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:o});case 7:case"end":return u.stop()}}),_callee8)})))();l.set(t,u);case 12:case"end":return p.stop()}}),_callee9,this)}))),function _dispatchPageOpen(t){return l.apply(this,arguments)})},{key:"_dispatchPageClose",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee10(t){var r,i,a,o;return _regeneratorRuntime().wrap((function _callee10$(l){for(;;)switch(l.prev=l.next){case 0:i=this._pdfDocument,a=this._visitedPages;if(this._closeCapability){l.next=3;break}return l.abrupt("return");case 3:if(!this._pageOpenPending.has(t)){l.next=5;break}return l.abrupt("return");case 5:if(o=a.get(t)){l.next=8;break}return l.abrupt("return");case 8:a.set(t,null);l.next=11;return o;case 11:if(i===this._pdfDocument){l.next=13;break}return l.abrupt("return");case 13:l.next=15;return null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t});case 15:case"end":return l.stop()}}),_callee10,this)}))),function _dispatchPageClose(t){return i.apply(this,arguments)})},{key:"_getDocProperties",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee11(){return _regeneratorRuntime().wrap((function _callee11$(t){for(;;)switch(t.prev=t.next){case 0:if(!this._docPropertiesLookup){t.next=2;break}return t.abrupt("return",this._docPropertiesLookup(this._pdfDocument));case 2:throw new Error("_getDocProperties: Unable to lookup properties.");case 3:case"end":return t.stop()}}),_callee11,this)}))),function _getDocProperties(){return r.apply(this,arguments)})},{key:"_createScripting",value:function _createScripting(){this._destroyCapability=(0,o.createPromiseCapability)();if(this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});throw new Error("_createScripting: Cannot create scripting.")}},{key:"_destroyScripting",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee12(){var t,r,i,a,o,l,c;return _regeneratorRuntime().wrap((function _callee12$(u){for(;;)switch(u.prev=u.next){case 0:if(this._scripting){u.next=4;break}this._pdfDocument=null;null===(r=this._destroyCapability)||void 0===r||r.resolve();return u.abrupt("return");case 4:if(!this._closeCapability){u.next=8;break}u.next=7;return Promise.race([this._closeCapability.promise,new Promise((function(t){setTimeout(t,1e3)}))]).catch((function(t){}));case 7:this._closeCapability=null;case 8:this._pdfDocument=null;u.prev=9;u.next=12;return this._scripting.destroySandbox();case 12:u.next=16;break;case 14:u.prev=14;u.t0=u.catch(9);case 16:i=_createForOfIteratorHelper(this._internalEvents);try{for(i.s();!(a=i.n()).done;){o=_slicedToArray(a.value,2),l=o[0],c=o[1];this._eventBus._off(l,c)}}catch(t){i.e(t)}finally{i.f()}this._internalEvents.clear();this._pageOpenPending.clear();this._visitedPages.clear();this._scripting=null;this._ready=!1;null===(t=this._destroyCapability)||void 0===t||t.resolve();case 24:case"end":return u.stop()}}),_callee12,this,[[9,14]])}))),function _destroyScripting(){return t.apply(this,arguments)})}]);var t,r,i,l,c,u,d,h,p,v;return PDFScriptingManager}();r.PDFScriptingManager=l},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFSidebar=void 0;var a=i(3);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o="pdfSidebarNotification",l=new WeakSet,c=new WeakSet,u=new WeakSet,d=new WeakSet,h=new WeakSet,p=new WeakSet,v=function(){function PDFSidebar(t){var r=t.elements,i=t.pdfViewer,o=t.pdfThumbnailViewer,v=t.eventBus,y=t.l10n;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFSidebar);_classPrivateMethodInitSpec(this,p);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);this.isOpen=!1;this.active=a.SidebarView.THUMBS;this.isInitialViewSet=!1;this.isInitialEventDispatched=!1;this.onToggled=null;this.pdfViewer=i;this.pdfThumbnailViewer=o;this.outerContainer=r.outerContainer;this.sidebarContainer=r.sidebarContainer;this.toggleButton=r.toggleButton;this.thumbnailButton=r.thumbnailButton;this.outlineButton=r.outlineButton;this.attachmentsButton=r.attachmentsButton;this.layersButton=r.layersButton;this.thumbnailView=r.thumbnailView;this.outlineView=r.outlineView;this.attachmentsView=r.attachmentsView;this.layersView=r.layersView;this._outlineOptionsContainer=r.outlineOptionsContainer;this._currentOutlineItemButton=r.currentOutlineItemButton;this.eventBus=v;this.l10n=y;_classPrivateMethodGet(this,p,_addEventListeners2).call(this)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFSidebar,[{key:"reset",value:function reset(){this.isInitialViewSet=!1;this.isInitialEventDispatched=!1;_classPrivateMethodGet(this,h,_hideUINotification2).call(this,!0);this.switchView(a.SidebarView.THUMBS);this.outlineButton.disabled=!1;this.attachmentsButton.disabled=!1;this.layersButton.disabled=!1;this.outlineButton.hidden=!1;this.attachmentsButton.hidden=!1;this.layersButton.hidden=!1;this._currentOutlineItemButton.disabled=!0}},{key:"visibleView",get:function get(){return this.isOpen?this.active:a.SidebarView.NONE}},{key:"setInitialView",value:function setInitialView(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.SidebarView.NONE;if(!this.isInitialViewSet){this.isInitialViewSet=!0;if(t!==a.SidebarView.NONE&&t!==a.SidebarView.UNKNOWN){this.switchView(t,!0);this.isInitialEventDispatched||_classPrivateMethodGet(this,l,_dispatchEvent2).call(this)}else _classPrivateMethodGet(this,l,_dispatchEvent2).call(this)}}},{key:"switchView",value:function switchView(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t!==this.active,o=!1;switch(t){case a.SidebarView.NONE:this.isOpen&&this.close();return;case a.SidebarView.THUMBS:this.isOpen&&i&&(o=!0);break;case a.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case a.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case a.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:globalThis.ngxConsole.error('PDFSidebar.switchView: "'.concat(t,'" is not a valid view.'));return}this.active=t;var d=t===a.SidebarView.THUMBS,h=t===a.SidebarView.OUTLINE,p=t===a.SidebarView.ATTACHMENTS,v=t===a.SidebarView.LAYERS;this.thumbnailButton.classList.toggle("toggled",d);this.outlineButton.classList.toggle("toggled",h);this.attachmentsButton.classList.toggle("toggled",p);this.layersButton.classList.toggle("toggled",v);this.thumbnailButton.setAttribute("aria-checked",d);this.outlineButton.setAttribute("aria-checked",h);this.attachmentsButton.setAttribute("aria-checked",p);this.layersButton.setAttribute("aria-checked",v);this.thumbnailView.classList.toggle("hidden",!d);this.outlineView.classList.toggle("hidden",!h);this.attachmentsView.classList.toggle("hidden",!p);this.layersView.classList.toggle("hidden",!v);this._outlineOptionsContainer.classList.toggle("hidden",!h);if(!r||this.isOpen){if(o){_classPrivateMethodGet(this,u,_updateThumbnailViewer2).call(this);_classPrivateMethodGet(this,c,_forceRendering2).call(this)}i&&_classPrivateMethodGet(this,l,_dispatchEvent2).call(this)}else this.open()}},{key:"open",value:function open(){if(!this.isOpen){this.isOpen=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.outerContainer.classList.add("sidebarMoving","sidebarOpen");this.active===a.SidebarView.THUMBS&&_classPrivateMethodGet(this,u,_updateThumbnailViewer2).call(this);_classPrivateMethodGet(this,c,_forceRendering2).call(this);_classPrivateMethodGet(this,l,_dispatchEvent2).call(this);_classPrivateMethodGet(this,h,_hideUINotification2).call(this)}}},{key:"close",value:function close(){if(this.isOpen){this.isOpen=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.outerContainer.classList.add("sidebarMoving");this.outerContainer.classList.remove("sidebarOpen");_classPrivateMethodGet(this,c,_forceRendering2).call(this);_classPrivateMethodGet(this,l,_dispatchEvent2).call(this)}}},{key:"toggle",value:function toggle(){this.isOpen?this.close():this.open()}}]);return PDFSidebar}();r.PDFSidebar=v;function _dispatchEvent2(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0);this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}function _forceRendering2(){if(this.onToggled)this.onToggled();else{this.pdfViewer.forceRendering();this.pdfThumbnailViewer.forceRendering()}}function _updateThumbnailViewer2(){for(var t=this.pdfViewer,r=this.pdfThumbnailViewer,i=t.pagesCount,o=0;o<i;o++){var l=t.getPageView(o);if((null==l?void 0:l.renderingState)===a.RenderingStates.FINISHED){r.getThumbnail(o).setImage(l)}}r.scrollThumbnailIntoView(t.currentPageNumber)}function _showUINotification2(){this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar_notification2");this.l10n.translate(this.toggleButton);this.isOpen||this.toggleButton.classList.add(o)}function _hideUINotification2(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isOpen||t)&&this.toggleButton.classList.remove(o);if(t){this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar");this.l10n.translate(this.toggleButton)}}function _addEventListeners2(){var t=this;this.sidebarContainer.addEventListener("transitionend",(function(r){r.target===t.sidebarContainer&&t.outerContainer.classList.remove("sidebarMoving")}));this.toggleButton.addEventListener("click",(function(){t.toggle()}));this.thumbnailButton.addEventListener("click",(function(){t.switchView(a.SidebarView.THUMBS)}));this.outlineButton.addEventListener("click",(function(){t.switchView(a.SidebarView.OUTLINE)}));this.outlineButton.addEventListener("dblclick",(function(){t.eventBus.dispatch("toggleoutlinetree",{source:t})}));this.attachmentsButton.addEventListener("click",(function(){t.switchView(a.SidebarView.ATTACHMENTS)}));this.layersButton.addEventListener("click",(function(){t.switchView(a.SidebarView.LAYERS)}));this.layersButton.addEventListener("dblclick",(function(){t.eventBus.dispatch("resetlayers",{source:t})}));this._currentOutlineItemButton.addEventListener("click",(function(){t.eventBus.dispatch("currentoutlineitem",{source:t})}));var r=function onTreeLoaded(r,i,o){i.disabled=!r;i.hidden=!r;r?_classPrivateMethodGet(t,d,_showUINotification2).call(t):t.active===o&&t.switchView(a.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",(function(i){r(i.outlineCount,t.outlineButton,a.SidebarView.OUTLINE);i.enableCurrentOutlineItemButton&&i.currentOutlineItemPromise&&i.currentOutlineItemPromise.then((function(r){t.isInitialViewSet&&(t._currentOutlineItemButton.disabled=!r)}))}));this.eventBus._on("attachmentsloaded",(function(i){r(i.attachmentsCount,t.attachmentsButton,a.SidebarView.ATTACHMENTS)}));this.eventBus._on("layersloaded",(function(i){r(i.layersCount,t.layersButton,a.SidebarView.LAYERS)}));this.eventBus._on("presentationmodechanged",(function(r){r.state===a.PresentationModeState.NORMAL&&t.visibleView===a.SidebarView.THUMBS&&_classPrivateMethodGet(t,u,_updateThumbnailViewer2).call(t)}))}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFSidebarResizer=void 0;var a=i(3);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var o="sidebarResizing",l=function(){function PDFSidebarResizer(t,r,i){var a=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFSidebarResizer);this.isRTL=!1;this.sidebarOpen=!1;this._width=null;this._outerContainerWidth=null;this._boundEvents=Object.create(null);this.outerContainer=t.outerContainer;this.resizer=t.resizer;this.eventBus=r;i.getDirection().then((function(t){a.isRTL="rtl"===t}));this._addEventListeners()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFSidebarResizer,[{key:"outerContainerWidth",get:function get(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth)}},{key:"_updateWidth",value:function _updateWidth(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=Math.floor(this.outerContainerWidth/2);t>r&&(t=r);t<200&&(t=200);if(t===this._width)return!1;this._width=t;a.docStyle.setProperty("--sidebar-width","".concat(t,"px"));return!0}},{key:"_mouseMove",value:function _mouseMove(t){var r=t.clientX;this.isRTL&&(r=this.outerContainerWidth-r);this._updateWidth(r)}},{key:"_mouseUp",value:function _mouseUp(t){this.outerContainer.classList.remove(o);this.eventBus.dispatch("resize",{source:this});var r=this._boundEvents;window.removeEventListener("mousemove",r.mouseMove);window.removeEventListener("mouseup",r.mouseUp)}},{key:"_addEventListeners",value:function _addEventListeners(){var t=this,r=this._boundEvents;r.mouseMove=this._mouseMove.bind(this);r.mouseUp=this._mouseUp.bind(this);this.resizer.addEventListener("mousedown",(function(i){if(0===i.button){t.outerContainer.classList.add(o);window.addEventListener("mousemove",r.mouseMove);window.addEventListener("mouseup",r.mouseUp)}}));this.eventBus._on("sidebarviewchanged",(function(r){t.sidebarOpen=!(null==r||!r.view)}));this.eventBus._on("resize",(function(r){if((null==r?void 0:r.source)===window){t._outerContainerWidth=null;if(t._width)if(t.sidebarOpen){t.outerContainer.classList.add(o);var i=t._updateWidth(t._width);Promise.resolve().then((function(){t.outerContainer.classList.remove(o);i&&t.eventBus.dispatch("resize",{source:t})}))}else t._updateWidth(t._width)}}))}}]);return PDFSidebarResizer}();r.PDFSidebarResizer=l},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFThumbnailViewer=void 0;var a=i(3),o=i(31);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var l="selected",c=new WeakSet,u=new WeakSet,d=function(){function PDFThumbnailViewer(t){var r=t.container,i=t.linkService,o=t.renderingQueue,l=t.l10n,d=t.pageColors,h=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFThumbnailViewer);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,c);this.container=r;this.linkService=i;this.renderingQueue=o;this.l10n=l;this.pageColors=d||null;this.eventBus=h;if(this.pageColors&&(!CSS.supports("color",this.pageColors.background)||!CSS.supports("color",this.pageColors.foreground))){(this.pageColors.background||this.pageColors.foreground)&&globalThis.ngxConsole.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.");this.pageColors=null}this.scroll=(0,a.watchScroll)(this.container,this._scrollUpdated.bind(this));this._resetView()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFThumbnailViewer,[{key:"_scrollUpdated",value:function _scrollUpdated(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function getThumbnail(t){return this._thumbnails[t]}},{key:"_getVisibleThumbs",value:function _getVisibleThumbs(){return(0,a.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}},{key:"scrollThumbnailIntoView",value:function scrollThumbnailIntoView(t){if(this.pdfDocument){var r=this._thumbnails[t-1];if(r){if(t!==this._currentPageNumber){this._thumbnails[this._currentPageNumber-1].div.classList.remove(l);r.div.classList.add(l)}var i=this._getVisibleThumbs(),o=i.first,c=i.last,u=i.views;if(u.length>0){var d=!1;if(t<=o.id||t>=c.id)d=!0;else{var h,p=_createForOfIteratorHelper(u);try{for(p.s();!(h=p.n()).done;){var v=h.value,y=v.id,g=v.percent;if(y===t){d=g<100;break}}}catch(t){p.e(t)}finally{p.f()}}d&&(0,a.scrollIntoView)(r.div,{top:-19})}this._currentPageNumber=t}else globalThis.ngxConsole.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}},{key:"pagesRotation",get:function get(){return this._pagesRotation},set:function set(t){if(!(0,a.isValidRotation)(t))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==t){this._pagesRotation=t;var r,i={rotation:t},o=_createForOfIteratorHelper(this._thumbnails);try{for(o.s();!(r=o.n()).done;){r.value.update(i)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"cleanup",value:function cleanup(){var t,r=_createForOfIteratorHelper(this._thumbnails);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.renderingState!==a.RenderingStates.FINISHED&&i.reset()}}catch(t){r.e(t)}finally{r.f()}o.TempImageFactory.destroyCanvas()}},{key:"_resetView",value:function _resetView(){this._thumbnails=[];this._currentPageNumber=1;this._pageLabels=null;this._pagesRotation=0;this.container.textContent=""}},{key:"setDocument",value:function setDocument(t){var r=this;this.initialized=!1;if(this.pdfDocument){this._cancelRendering();this._resetView()}this.pdfDocument=t;if(t&&!this.initialized){this.initialized=!0;var i=t.getPage(1),a=t.getOptionalContentConfig();i.then((function(i){for(var c,u=t.numPages,d=i.getViewport({scale:1}),h=1;h<=u;++h){var p=new o.PDFThumbnailView({container:r.container,id:h,defaultViewport:d.clone(),optionalContentConfigPromise:a,linkService:r.linkService,renderingQueue:r.renderingQueue,l10n:r.l10n,pageColors:r.pageColors,eventBus:r.eventBus});r._thumbnails.push(p)}null===(c=r._thumbnails[0])||void 0===c||c.setPdfPage(i);r._thumbnails[r._currentPageNumber-1].div.classList.add(l)})).catch((function(t){globalThis.ngxConsole.error("Unable to initialize thumbnail viewer",t)}))}}},{key:"_cancelRendering",value:function _cancelRendering(){var t,r=_createForOfIteratorHelper(this._thumbnails);try{for(r.s();!(t=r.n()).done;){t.value.cancelRendering()}}catch(t){r.e(t)}finally{r.f()}}},{key:"setPageLabels",value:function setPageLabels(t){if(this.pdfDocument){if(t)if(Array.isArray(t)&&this.pdfDocument.numPages===t.length)this._pageLabels=t;else{this._pageLabels=null;globalThis.ngxConsole.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(var r=0,i=this._thumbnails.length;r<i;r++){var a,o;this._thumbnails[r].setPageLabel(null!==(a=null===(o=this._pageLabels)||void 0===o?void 0:o[r])&&void 0!==a?a:null)}}}},{key:"forceRendering",value:function forceRendering(){var t=this,r=this._getVisibleThumbs(),i=_classPrivateMethodGet(this,u,_getScrollAhead2).call(this,r),a=this.renderingQueue.getHighestPriority(r,this._thumbnails,i);if(a){_classPrivateMethodGet(this,c,_ensurePdfPageLoaded2).call(this,a).then((function(){t.renderingQueue.renderView(a)}));return!0}return!1}},{key:"stopRendering",value:function stopRendering(){this._cancelRendering()}}]);return PDFThumbnailViewer}();r.PDFThumbnailViewer=d;function _ensurePdfPageLoaded2(t){return _ensurePdfPageLoaded3.apply(this,arguments)}function _ensurePdfPageLoaded3(){_ensurePdfPageLoaded3=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r;return _regeneratorRuntime().wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!t.pdfPage){i.next=2;break}return i.abrupt("return",t.pdfPage);case 2:i.prev=2;i.next=5;return this.pdfDocument.getPage(t.id);case 5:r=i.sent;t.pdfPage||t.setPdfPage(r);return i.abrupt("return",r);case 10:i.prev=10;i.t0=i.catch(2);globalThis.ngxConsole.error("Unable to get page for thumb view",i.t0);return i.abrupt("return",null);case 14:case"end":return i.stop()}}),_callee,this,[[2,10]])})));return _ensurePdfPageLoaded3.apply(this,arguments)}function _getScrollAhead2(t){var r,i;return 1===(null===(r=t.first)||void 0===r?void 0:r.id)||(null===(i=t.last)||void 0===i?void 0:i.id)!==this._thumbnails.length&&this.scroll.down}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.TempImageFactory=r.PDFThumbnailView=void 0;var a=i(3),o=i(4);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classStaticPrivateFieldSpecSet(t,r,i,a){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"set");!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,i,a);return a}function _classStaticPrivateFieldSpecGet(t,r,i){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(i,"get");return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,i)}function _classCheckPrivateStaticFieldDescriptor(t,r){if(void 0===t)throw new TypeError("attempted to "+r+" private static field before its declaration")}function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}var l=function(){function TempImageFactory(){_classCallCheck(this,TempImageFactory)}_createClass(TempImageFactory,null,[{key:"getCanvas",value:function getCanvas(t,r){var i=_classStaticPrivateFieldSpecGet(this,TempImageFactory,c)||_classStaticPrivateFieldSpecSet(this,TempImageFactory,c,document.createElement("canvas"));i.width=t;i.height=r;var a=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0,alpha:!1}:{alpha:!1},o=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0,l=i.getContext("2d",a);l.save();l.fillStyle="rgb(255, 255, 255)";l.fillRect(0,0,t,r);l.restore();return[i,i.getContext("2d",o)]}},{key:"destroyCanvas",value:function destroyCanvas(){var t=_classStaticPrivateFieldSpecGet(this,TempImageFactory,c);if(t){t.width=0;t.height=0}_classStaticPrivateFieldSpecSet(this,TempImageFactory,c,null)}}]);return TempImageFactory}();r.TempImageFactory=l;var c={writable:!0,value:null},u=function(){function PDFThumbnailView(t){var r=t.container,i=t.id,o=t.defaultViewport,l=t.optionalContentConfigPromise,c=t.linkService,u=t.renderingQueue,d=t.l10n,h=t.pageColors,p=t.eventBus;_classCallCheck(this,PDFThumbnailView);this.id=i;this.renderingId="thumbnail"+i;this.pageLabel=null;this.pdfPage=null;this.rotation=0;this.viewport=o;this.pdfPageRotate=o.rotation;this._optionalContentConfigPromise=l||null;this.pageColors=h||null;this.linkService=c;this.renderingQueue=u;this.eventBus=p;this.renderTask=null;this.renderingState=a.RenderingStates.INITIAL;this.resume=null;var v=this.viewport.width,y=v/this.viewport.height;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/y|0;this.scale=this.canvasWidth/v;this.l10n=d;window.pdfThumbnailGenerator?window.pdfThumbnailGenerator(this,c,i,r,this._thumbPageTitle):this.createThumbnail(this,c,i,r,this._thumbPageTitle)}_createClass(PDFThumbnailView,[{key:"createThumbnail",value:function createThumbnail(t,r,i,a,o){var l=document.createElement("a");l.href=r.getAnchorUrl("#page="+i);o.then((function(t){l.title=t}));l.onclick=function(){r.goToPage(i);return!1};t.anchor=l;var c=document.createElement("div");c.className="thumbnail";c.setAttribute("data-page-number",this.id);t.div=c;var u=document.createElement("div");u.className="thumbnailSelectionRing";u.style.width=this.canvasWidth+2+"px";u.style.height=this.canvasHeight+2+"px";t.ring=u;c.append(u);l.append(c);a.append(l)}},{key:"setPdfPage",value:function setPdfPage(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:r});this.reset()}},{key:"reset",value:function reset(){this.cancelRendering();this.renderingState=a.RenderingStates.INITIAL;var t=this.viewport.width,r=t/this.viewport.height;this.canvasHeight=this.canvasWidth/r|0;this.scale=this.canvasWidth/t;this.div.removeAttribute("data-loaded");var i=this.ring;i.textContent="";i.style.width=this.canvasWidth+2+"px";i.style.height=this.canvasHeight+2+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}}},{key:"update",value:function update(t){var r=t.rotation,i=void 0===r?null:r;"number"==typeof i&&(this.rotation=i);var a=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:a});this.reset()}},{key:"cancelRendering",value:function cancelRendering(){if(this.renderTask){this.renderTask.cancel();this.renderTask=null}this.resume=null}},{key:"_getPageDrawContext",value:function _getPageDrawContext(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=document.createElement("canvas"),i=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0,alpha:!1}:{alpha:!1},o=r.getContext("2d",i),l=new a.OutputScale;r.width=t*this.canvasWidth*l.sx|0;r.height=t*this.canvasHeight*l.sy|0;return{ctx:o,canvas:r,transform:l.scaled?[l.sx,0,0,l.sy,0,0]:null}}},{key:"_convertCanvasToImage",value:function _convertCanvasToImage(t){if(this.renderingState!==a.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");var r=this._reduceImage(t),i=document.createElement("img");i.className="thumbnailImage";this._thumbPageCanvas.then((function(t){i.setAttribute("aria-label",t)}));i.style.width=this.canvasWidth+"px";i.style.height=this.canvasHeight+"px";i.src=r.toDataURL();this.image=i;this.div.setAttribute("data-loaded",!0);this.ring.append(i);r.width=0;r.height=0}},{key:"draw",value:function draw(){var t=this;if(this.renderingState!==a.RenderingStates.INITIAL){globalThis.ngxConsole.error("Must be in new state before drawing");return Promise.resolve()}var r=this.pdfPage;if(!r){this.renderingState=a.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=a.RenderingStates.RUNNING;var i=function(){var r=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(){var r,i=arguments;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r=i.length>0&&void 0!==i[0]?i[0]:null;h===t.renderTask&&(t.renderTask=null);if(!(r instanceof o.RenderingCancelledException)){l.next=4;break}return l.abrupt("return");case 4:t.renderingState=a.RenderingStates.FINISHED;t._convertCanvasToImage(u);if(!r){l.next=8;break}throw r;case 8:t.eventBus.dispatch("thumbnailRendered",t.id);case 9:case"end":return l.stop()}}),_callee)})));return function finishRenderTask(){return r.apply(this,arguments)}}(),l=this._getPageDrawContext(2),c=l.ctx,u=l.canvas,d={canvasContext:c,transform:l.transform,viewport:this.viewport.clone({scale:2*this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},h=this.renderTask=r.render(d);h.onContinue=function renderContinueCallback(r){if(t.renderingQueue.isHighestPriority(t))r();else{t.renderingState=a.RenderingStates.PAUSED;t.resume=function(){t.renderingState=a.RenderingStates.RUNNING;r()}}};var p=h.promise.then((function(){return i(null)}),(function(t){return i(t)}));p.finally((function(){u.width=0;u.height=0;if(!t.linkService.isPageCached(t.id)){var r;null===(r=t.pdfPage)||void 0===r||r.cleanup()}}));return p}},{key:"setImage",value:function setImage(t){if(this.renderingState===a.RenderingStates.INITIAL){var r=t.thumbnailCanvas,i=t.pdfPage,o=t.scale;if(r){this.pdfPage||this.setPdfPage(i);if(!(o<this.scale)){this.renderingState=a.RenderingStates.FINISHED;this._convertCanvasToImage(r)}}}}},{key:"_reduceImage",value:function _reduceImage(t){var r=this._getPageDrawContext(),i=r.ctx,a=r.canvas;if(t.width<=2*a.width){i.drawImage(t,0,0,t.width,t.height,0,0,a.width,a.height);return a}for(var o=a.width<<3,c=a.height<<3,u=_slicedToArray(l.getCanvas(o,c),2),d=u[0],h=u[1];o>t.width||c>t.height;){o>>=1;c>>=1}h.drawImage(t,0,0,t.width,t.height,0,0,o,c);for(;o>2*a.width;){h.drawImage(d,0,0,o,c,0,0,o>>1,c>>1);o>>=1;c>>=1}i.drawImage(d,0,0,o,c,0,0,a.width,a.height);return a}},{key:"_thumbPageTitle",get:function get(){var t;return this.l10n.get("thumb_page_title",{page:null!==(t=this.pageLabel)&&void 0!==t?t:this.id})}},{key:"_thumbPageCanvas",get:function get(){var t;return this.l10n.get("thumb_page_canvas",{page:null!==(t=this.pageLabel)&&void 0!==t?t:this.id})}},{key:"setPageLabel",value:function setPageLabel(t){var r=this;this.pageLabel="string"==typeof t?t:null;this._thumbPageTitle.then((function(t){r.anchor.title=t}));this.renderingState===a.RenderingStates.FINISHED&&this._thumbPageCanvas.then((function(t){var i;null===(i=r.image)||void 0===i||i.setAttribute("aria-label",t)}))}}]);return PDFThumbnailView}();r.PDFThumbnailView=u},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PagesCountLimit=r.PDFViewer=r.PDFPageViewBuffer=void 0;var a,o=i(4),l=i(3),c=i(33),u=i(34),d=i(35),h=i(26),p=i(7);function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var v="enablePermissions",y={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};r.PagesCountLimit=y;function isValidAnnotationEditorMode(t){return Object.values(o.AnnotationEditorType).includes(t)&&t!==o.AnnotationEditorType.DISABLE}var g=new WeakMap,m=new WeakMap,b=new WeakSet;a=Symbol.iterator;var w=function(){function PDFPageViewBuffer(t){_classCallCheck(this,PDFPageViewBuffer);_classPrivateMethodInitSpec(this,b);_classPrivateFieldInitSpec(this,g,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,m,{writable:!0,value:0});_classPrivateFieldSet(this,m,t)}_createClass(PDFPageViewBuffer,[{key:"push",value:function push(t){var r=_classPrivateFieldGet(this,g);r.has(t)&&r.delete(t);r.add(t);r.size>_classPrivateFieldGet(this,m)&&_classPrivateMethodGet(this,b,_destroyFirstView2).call(this)}},{key:"resize",value:function resize(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classPrivateFieldSet(this,m,t);var i=_classPrivateFieldGet(this,g);if(r){var a,o=i.size,l=1,c=_createForOfIteratorHelper(i);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(r.has(u.id)){i.delete(u);i.add(u)}if(++l>o)break}}catch(t){c.e(t)}finally{c.f()}}for(;i.size>_classPrivateFieldGet(this,m);)_classPrivateMethodGet(this,b,_destroyFirstView2).call(this)}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,g).has(t)}},{key:a,value:function value(){return _classPrivateFieldGet(this,g).keys()}}]);return PDFPageViewBuffer}();r.PDFPageViewBuffer=w;function _destroyFirstView2(){var t=_classPrivateFieldGet(this,g).keys().next().value;null==t||t.destroy();_classPrivateFieldGet(this,g).delete(t)}var P=new WeakMap,S=new WeakMap,k=new WeakMap,x=new WeakMap,A=new WeakMap,E=new WeakMap,T=new WeakMap,C=new WeakMap,I=new WeakMap,O=new WeakMap,M=new WeakMap,L=new WeakSet,R=new WeakSet,D=new WeakSet,G=new WeakSet,j=new WeakSet,N=new WeakSet,B=new WeakSet,V=new WeakMap,W=new WeakSet,H=new WeakSet,U=new WeakSet,z=new WeakSet,X=new WeakSet,K=new WeakSet,Y=function(){function PDFViewer(t){var r,i,a,u,d,v;_classCallCheck(this,PDFViewer);_classPrivateMethodInitSpec(this,K);_classPrivateMethodInitSpec(this,X);_classPrivateMethodInitSpec(this,z);_classPrivateMethodInitSpec(this,U);_classPrivateMethodInitSpec(this,H);_classPrivateMethodInitSpec(this,W);_classPrivateFieldInitSpec(this,V,{get:_get_pageWidthScaleFactor,set:void 0});_classPrivateMethodInitSpec(this,B);_classPrivateMethodInitSpec(this,N);_classPrivateMethodInitSpec(this,j);_classPrivateMethodInitSpec(this,G);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,R);_classPrivateMethodInitSpec(this,L);_classPrivateFieldInitSpec(this,P,{writable:!0,value:null});_classPrivateFieldInitSpec(this,S,{writable:!0,value:o.AnnotationEditorType.NONE});_classPrivateFieldInitSpec(this,k,{writable:!0,value:null});_classPrivateFieldInitSpec(this,x,{writable:!0,value:o.AnnotationMode.ENABLE_FORMS});_classPrivateFieldInitSpec(this,A,{writable:!0,value:null});_classPrivateFieldInitSpec(this,E,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,T,{writable:!0,value:0});_classPrivateFieldInitSpec(this,C,{writable:!0,value:new ResizeObserver(_classPrivateMethodGet(this,K,_resizeObserverCallback2).bind(this))});_classPrivateFieldInitSpec(this,I,{writable:!0,value:null});_classPrivateFieldInitSpec(this,O,{writable:!0,value:null});_classPrivateFieldInitSpec(this,M,{writable:!0,value:null});var y="3.5.553";if(o.version!==y)throw new Error('The API version "'.concat(o.version,'" does not match the Viewer version "').concat(y,'".'));this.container=t.container;this.viewer=t.viewer||t.container.firstElementChild;this.pageViewMode=t.pageViewMode||"multiple";if("DIV"!==(null===(r=this.container)||void 0===r?void 0:r.tagName)||"DIV"!==(null===(i=this.viewer)||void 0===i?void 0:i.tagName))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");_classPrivateFieldGet(this,C).observe(this.container);this.eventBus=t.eventBus;this.linkService=t.linkService||new p.SimpleLinkService;this.downloadManager=t.downloadManager||null;this.findController=t.findController||null;this._scriptingManager=t.scriptingManager||null;this.textLayerMode=null!==(a=t.textLayerMode)&&void 0!==a?a:l.TextLayerMode.ENABLE;_classPrivateFieldSet(this,x,null!==(u=t.annotationMode)&&void 0!==u?u:o.AnnotationMode.ENABLE_FORMS);_classPrivateFieldSet(this,S,null!==(d=t.annotationEditorMode)&&void 0!==d?d:o.AnnotationEditorType.NONE);this.imageResourcesPath=t.imageResourcesPath||"";this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1;this.removePageBorders=t.removePageBorders||!1;this.renderer=t.renderer||l.RendererType.CANVAS;this.useOnlyCssZoom=t.useOnlyCssZoom||!1;this.isOffscreenCanvasSupported=null===(v=t.isOffscreenCanvasSupported)||void 0===v||v;this.maxCanvasPixels=t.maxCanvasPixels;this.l10n=t.l10n||c.NullL10n;_classPrivateFieldSet(this,E,t.enablePermissions||!1);this.pageColors=t.pageColors||null;if(this.pageColors&&(!CSS.supports("color",this.pageColors.background)||!CSS.supports("color",this.pageColors.foreground))){(this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.");this.pageColors=null}this.defaultRenderingQueue=!t.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new h.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else this.renderingQueue=t.renderingQueue;this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=l.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();this.removePageBorders&&this.viewer.classList.add("removePageBorders");_classPrivateMethodGet(this,X,_updateContainerHeightCss2).call(this)}_createClass(PDFViewer,[{key:"pagesCount",get:function get(){return this._pages.length}},{key:"getPageView",value:function getPageView(t){return this._pages[t]}},{key:"pageViewsReady",get:function get(){return!!this._pagesCapability.settled&&this._pages.every((function(t){return null==t?void 0:t.pdfPage}))}},{key:"renderForms",get:function get(){return _classPrivateFieldGet(this,x)===o.AnnotationMode.ENABLE_FORMS}},{key:"enableScripting",get:function get(){return!!this._scriptingManager}},{key:"currentPageNumber",get:function get(){return this._currentPageNumber},set:function set(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");if(this.pdfDocument){var r=Math.abs(this._currentPageNumber-t)<=2;this._setCurrentPageNumber(t,!0)||globalThis.ngxConsole.error('currentPageNumber: "'.concat(t,'" is not a valid page.'));this.pageFlip&&(r?this.pageFlip.flip(t-1):this.pageFlip.turnToPage(t-1))}}},{key:"hidePagesDependingOnpageViewMode",value:function hidePagesDependingOnpageViewMode(){var t=this;"book"===this.pageViewMode&&(this.pageFlip||setTimeout((function(){if(!t.pageFlip){var r=t._pages[0].div,i=r.parentElement,a=i.parentElement;a.style.width=2*r.clientWidth+"px";a.style.overflow="hidden";a.style.marginLeft="auto";a.style.marginRight="auto";t.pageFlip=new u.PageFlip(i,{width:r.clientWidth,height:r.clientHeight,showCover:!0,size:"fixed"});t.pageFlip.loadFromHTML(document.querySelectorAll(".page"));t.ensureAdjecentPagesAreLoaded();t.pageFlip.on("flip",(function(r){t._currentPageNumber!==r.data+1&&t._setCurrentPageNumber(r.data+1,!1)}))}}),100))}},{key:"_setCurrentPageNumber",value:function _setCurrentPageNumber(t){var r,i,a=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===t){o&&_classPrivateMethodGet(this,H,_resetCurrentPageView2).call(this);return!0}if(!(0<t&&t<=this.pagesCount))return!1;var l=this._currentPageNumber;this._currentPageNumber=t;this.hidePagesDependingOnpageViewMode();if("book"===this.pageViewMode||"infinite-scroll"===this.pageViewMode){var c=this._pages[this.currentPageNumber-1];if(c.div.parentElement.classList.contains("spread"))c.div.parentElement.childNodes.forEach((function(t){var r=Number(t.getAttribute("data-page-number")),i=a._pages[r-1];_classPrivateMethodGet(a,U,_ensurePdfPageLoaded2).call(a,i).then((function(){a.renderingQueue.renderView(i)}));t.style.display="inline-block"}));else{_classPrivateMethodGet(this,U,_ensurePdfPageLoaded2).call(this,c).then((function(){a.renderingQueue.renderView(c)}));"book"===this.pageViewMode&&this.ensureAdjecentPagesAreLoaded()}}this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:null!==(r=null===(i=this._pageLabels)||void 0===i?void 0:i[t-1])&&void 0!==r?r:null,previous:l});o&&_classPrivateMethodGet(this,H,_resetCurrentPageView2).call(this);return!0}},{key:"addPageToRenderQueue",value:function addPageToRenderQueue(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(r>=0&&r<=this._pages.length-1){var i=this._pages[r];if(i.renderingState===l.RenderingStates.INITIAL){_classPrivateMethodGet(this,U,_ensurePdfPageLoaded2).call(this,i).then((function(){t.renderingQueue.renderView(i)}));return!0}}return!1}},{key:"ensureAdjecentPagesAreLoaded",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,i,a,o,l,c=this;return _regeneratorRuntime().wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:t=0,r=[0,1,-1,2,-2];case 2:if(!(t<r.length)){u.next=12;break}i=r[t];if(!((a=this.currentPageNumber+i)>=0&&a<this._pages.length)){u.next=9;break}o=this._pages[a];u.next=9;return _classPrivateMethodGet(this,U,_ensurePdfPageLoaded2).call(this,o);case 9:t++;u.next=2;break;case 12:l=function loader(){return c.adjacentPagesLoader(loader)};this.eventBus._on("pagerendered",l);this.eventBus._on("thumbnailRendered",l);case 15:case"end":return u.stop()}}),_callee,this)}))),function ensureAdjecentPagesAreLoaded(){return t.apply(this,arguments)})},{key:"adjacentPagesLoader",value:function adjacentPagesLoader(t){var r=this._pages.some((function(t){return t.renderingState===l.RenderingStates.RUNNING}));if(!r){var i=this._pages.find((function(t){return t.renderingState===l.RenderingStates.PAUSED}));if(i)this.renderingQueue.renderView(i);else{for(var a=0,o=[0,1,-1,2,-2];a<o.length;a++){var c=o[a],u=this.currentPageNumber+c;if(u>=0&&u<this._pages.length){var d=this._pages[u];if(d.renderingState===l.RenderingStates.INITIAL){this.renderingQueue.renderView(d);return}}}this.eventBus._off("pagerendered",t);this.eventBus._off("thumbnailRendered",t)}}}},{key:"currentPageLabel",get:function get(){var t,r;return null!==(t=null===(r=this._pageLabels)||void 0===r?void 0:r[this._currentPageNumber-1])&&void 0!==t?t:null},set:function set(t){if(this.pdfDocument){var r=0|t;if(this._pageLabels){var i=this._pageLabels.indexOf(t);i>=0&&(r=i+1)}this._setCurrentPageNumber(r,!0)||globalThis.ngxConsole.error('currentPageLabel: "'.concat(t,'" is not a valid page.'))}}},{key:"currentScale",get:function get(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE},set:function set(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&_classPrivateMethodGet(this,W,_setScale2).call(this,t,{noScroll:!1})}},{key:"currentScaleValue",get:function get(){return this._currentScaleValue},set:function set(t){this.pdfDocument&&_classPrivateMethodGet(this,W,_setScale2).call(this,t,{noScroll:!1})}},{key:"pagesRotation",get:function get(){return this._pagesRotation},set:function set(t){if(!(0,l.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument){(t%=360)<0&&(t+=360);if(this._pagesRotation!==t){this._pagesRotation=t;var r=this._currentPageNumber;this.refresh(!0,{rotation:t});this._currentScaleValue&&_classPrivateMethodGet(this,W,_setScale2).call(this,this._currentScaleValue,{noScroll:!0});this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:r});this.defaultRenderingQueue&&this.update()}}}},{key:"firstPagePromise",get:function get(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function get(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function get(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"setDocument",value:function setDocument(t){var r=this;if(this.pdfDocument){var i,a;this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();null===(i=this.findController)||void 0===i||i.setDocument(null);null===(a=this._scriptingManager)||void 0===a||a.setDocument(null);if(_classPrivateFieldGet(this,k)){_classPrivateFieldGet(this,k).destroy();_classPrivateFieldSet(this,k,null)}}this.pdfDocument=t;if(t){var c=t.numPages,u=t.getPage(1),h=t.getOptionalContentConfig(),p=_classPrivateFieldGet(this,E)?t.getPermissions():Promise.resolve();if(c>y.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var v=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:v})}this._pagesCapability.promise.then((function(){r.eventBus.dispatch("pagesloaded",{source:r,pagesCount:c})}),(function(){}));this._onBeforeDraw=function(t){var i=r._pages[t.pageNumber-1];i&&_classPrivateFieldGet(r,P).push(i)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=function(t){if(!t.cssTransform&&!r._onePageRenderedCapability.settled){r._onePageRenderedCapability.resolve({timestamp:t.timestamp});r.eventBus._off("pagerendered",r._onAfterDraw);r._onAfterDraw=null;if(_classPrivateFieldGet(r,O)){document.removeEventListener("visibilitychange",_classPrivateFieldGet(r,O));_classPrivateFieldSet(r,O,null)}}};this.eventBus._on("pagerendered",this._onAfterDraw);Promise.all([u,p]).then((function(i){var a=_slicedToArray(i,2),u=a[0],p=a[1];if(t===r.pdfDocument){r._firstPageCapability.resolve(u);r._optionalContentConfigPromise=h;var v=_classPrivateMethodGet(r,R,_initializePermissions2).call(r,p),g=v.annotationEditorMode,m=v.annotationMode,b=v.textLayerMode;if(g!==o.AnnotationEditorType.DISABLE){var w=g;if(t.isPureXfa)console.warn("Warning: XFA-editing is not implemented.");else if(isValidAnnotationEditorMode(w)){_classPrivateFieldSet(r,k,new o.AnnotationEditorUIManager(r.container,r.eventBus,null==t?void 0:t.annotationStorage));w!==o.AnnotationEditorType.NONE&&_classPrivateFieldGet(r,k).updateMode(w)}else console.error("Invalid AnnotationEditor mode: ".concat(w))}var P=_classPrivateMethodGet(r,L,_layerProperties2).bind(r),x=r._scrollMode===l.ScrollMode.PAGE?null:r.viewer,A=r.currentScale,E=u.getViewport({scale:A*o.PixelsPerInch.PDF_TO_CSS_UNITS});r.viewer.style.setProperty("--scale-factor",E.scale);for(var T=1;T<=c;++T){var C=new d.PDFPageView({container:x,eventBus:r.eventBus,id:T,scale:A,defaultViewport:E.clone(),optionalContentConfigPromise:h,renderingQueue:r.renderingQueue,textLayerMode:b,annotationMode:m,imageResourcesPath:r.imageResourcesPath,removePageBorders:r.removePageBorders,renderer:r.renderer,useOnlyCssZoom:r.useOnlyCssZoom,isOffscreenCanvasSupported:r.isOffscreenCanvasSupported,maxCanvasPixels:r.maxCanvasPixels,pageColors:r.pageColors,l10n:r.l10n,layerProperties:P});r._pages.push(C)}var I=r._pages[0];if(I){I.setPdfPage(u);r.linkService.cachePageRef(1,u.ref)}r._scrollMode===l.ScrollMode.PAGE?_classPrivateMethodGet(r,G,_ensurePageViewVisible2).call(r):r._spreadMode!==l.SpreadMode.NONE&&r._updateSpreadMode();_classPrivateMethodGet(r,D,_onePageRenderedOrForceFetch2).call(r).then(_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var i,a,o,l,u;return _regeneratorRuntime().wrap((function _callee2$(d){for(;;)switch(d.prev=d.next){case 0:null===(i=r.findController)||void 0===i||i.setDocument(t);null===(a=r._scriptingManager)||void 0===a||a.setDocument(t);_classPrivateFieldGet(r,k)&&r.eventBus.dispatch("annotationeditormodechanged",{source:r,mode:_classPrivateFieldGet(r,S)});if(!(t.loadingParams.disableAutoFetch||c>y.FORCE_LAZY_PAGE_INIT)){d.next=6;break}r._pagesCapability.resolve();return d.abrupt("return");case 6:if(!((o=c-1)<=0)){d.next=10;break}r._pagesCapability.resolve();return d.abrupt("return");case 10:l=_regeneratorRuntime().mark((function _loop(i){var a;return _regeneratorRuntime().wrap((function _loop$(l){for(;;)switch(l.prev=l.next){case 0:a=t.getPage(i).then((function(t){var a=r._pages[i-1];a.pdfPage||a.setPdfPage(t);r.linkService.cachePageRef(i,t.ref);0==--o&&r._pagesCapability.resolve()}),(function(t){console.error("Unable to get page ".concat(i," to initialize viewer"),t);0==--o&&r._pagesCapability.resolve()}));if(i%y.PAUSE_EAGER_PAGE_INIT!=0){l.next=4;break}l.next=4;return a;case 4:case"end":return l.stop()}}),_loop)}));u=2;case 12:if(!(u<=c)){d.next=17;break}return d.delegateYield(l(u),"t0",14);case 14:++u;d.next=12;break;case 17:case"end":return d.stop()}}),_callee2)}))));r.hidePagesDependingOnpageViewMode();r.eventBus.dispatch("pagesinit",{source:r});t.getMetadata().then((function(i){var a=i.info;t===r.pdfDocument&&a.Language&&(r.viewer.lang=a.Language)}));r.defaultRenderingQueue&&r.update()}})).catch((function(t){globalThis.ngxConsole.error("Unable to initialize viewer",t);r._pagesCapability.reject(t)}))}}},{key:"setPageLabels",value:function setPageLabels(t){if(this.pdfDocument){if(t)if(Array.isArray(t)&&this.pdfDocument.numPages===t.length)this._pageLabels=t;else{this._pageLabels=null;globalThis.ngxConsole.error("setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(var r=0,i=this._pages.length;r<i;r++){var a,o;this._pages[r].setPageLabel(null!==(a=null===(o=this._pageLabels)||void 0===o?void 0:o[r])&&void 0!==a?a:null)}}}},{key:"_resetView",value:function _resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=l.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;var t=Number(PDFViewerApplicationOptions.get("defaultCacheSize"))||10;_classPrivateFieldSet(this,P,new w(t));this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._firstPageCapability=(0,o.createPromiseCapability)();this._onePageRenderedCapability=(0,o.createPromiseCapability)();this._pagesCapability=(0,o.createPromiseCapability)();this._scrollMode=l.ScrollMode.VERTICAL;this._previousScrollMode=l.ScrollMode.UNKNOWN;this._spreadMode=l.SpreadMode.NONE;_classPrivateFieldSet(this,I,{previousPageNumber:1,scrollDown:!0,pages:[]});if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}if(_classPrivateFieldGet(this,O)){document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,O));_classPrivateFieldSet(this,O,null)}this.viewer.textContent="";this._updateScrollMode();this.viewer.removeAttribute("lang");this.viewer.classList.remove(v)}},{key:"_scrollUpdate",value:function _scrollUpdate(){0!==this.pagesCount&&this.update()}},{key:"scrollPagePosIntoView",value:function scrollPagePosIntoView(t,r){var i=this._pages[t-1].div;if(r){var a=function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}({},r);if("string"==typeof a.top&&a.top.endsWith("%")){var o,l=Number(a.top.replace("%","")),c=null===(o=this.viewer.querySelector(".page"))||void 0===o?void 0:o.clientHeight,u=i.clientHeight?i.clientHeight:c,d=this.viewer.parentElement.clientHeight;u=Math.max(0,u-d);a.top=l*u/100}if("string"==typeof a.left&&a.left.endsWith("%")){var h,p=Number(a.left.replace("%","")),v=null===(h=this.viewer.querySelector(".page"))||void 0===h?void 0:h.clientWidth,y=i.clientWidth?i.clientWidth:v;a.left=p*y/100}_classPrivateMethodGet(this,j,_scrollIntoView2).call(this,{div:i,id:t},a)}else _classPrivateMethodGet(this,j,_scrollIntoView2).call(this,{pageDiv:i,pageNumber:t})}},{key:"pageLabelToPageNumber",value:function pageLabelToPageNumber(t){if(!this._pageLabels)return null;var r=this._pageLabels.indexOf(t);return r<0?null:r+1}},{key:"scrollPageIntoView",value:function scrollPageIntoView(t){var r=this,i=t.pageNumber,a=t.destArray,c=void 0===a?null:a,u=t.allowNegativeOffset,d=void 0!==u&&u,h=t.ignoreDestinationZoom,p=void 0!==h&&h;if(this.pdfDocument){var v=Number.isInteger(i)&&this._pages[i-1];if(v)if(!this.isInPresentationMode&&c){var y,g,m=0,b=0,w=0,P=0,S=v.rotation%180!=0,k=(S?v.height:v.width)/v.scale/o.PixelsPerInch.PDF_TO_CSS_UNITS,x=(S?v.width:v.height)/v.scale/o.PixelsPerInch.PDF_TO_CSS_UNITS,A=0;switch(c[1].name){case"XYZ":m=c[2];b=c[3];A=c[4];m=null!==m?m:0;b=null!==b?b:x;break;case"Fit":case"FitB":A="page-fit";break;case"FitH":case"FitBH":A="page-width";if(null===(b=c[2])&&this._location){m=this._location.left;b=this._location.top}else("number"!=typeof b||b<0)&&(b=x);break;case"FitV":case"FitBV":m=c[2];w=k;P=x;A="page-height";break;case"FitR":m=c[2];b=c[3];w=c[4]-m;P=c[5]-b;var E=l.SCROLLBAR_PADDING,T=l.VERTICAL_PADDING;this.removePageBorders&&(E=T=0);y=(this.container.clientWidth-E)/w/o.PixelsPerInch.PDF_TO_CSS_UNITS;g=(this.container.clientHeight-T)/P/o.PixelsPerInch.PDF_TO_CSS_UNITS;A=Math.min(Math.abs(y),Math.abs(g));break;default:console.error('scrollPageIntoView: "'.concat(c[1].name,'" is not a valid destination type.'));return}p||(A&&A!==this._currentScale?this.currentScaleValue=A:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE));_classPrivateMethodGet(this,U,_ensurePdfPageLoaded2).call(this,v).then((function(){r.renderingQueue.renderView(v);"single"===r.pageViewMode&&r.currentPageNumber!==i&&(r.currentPageNumber=i)}));if("page-fit"!==A||c[4]){var C=[v.viewport.convertToViewportPoint(m,b),v.viewport.convertToViewportPoint(m+w,b+P)],I=Math.min(C[0][0],C[1][0]),O=Math.min(C[0][1],C[1][1]);if(!d){I=Math.max(I,0);O=Math.max(O,0)}_classPrivateMethodGet(this,j,_scrollIntoView2).call(this,v,{left:I,top:O})}else _classPrivateMethodGet(this,j,_scrollIntoView2).call(this,v)}else this._setCurrentPageNumber(i,!0);else console.error('scrollPageIntoView: "'.concat(i,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function _updateLocation(t){var r=this._currentScale,i=this._currentScaleValue,a=parseFloat(i)===r?Math.round(1e4*r)/100:i,o=t.id,l=this._pages[o-1],c=this.container,u=l.getPagePoint(c.scrollLeft-t.x,c.scrollTop-t.y),d=Math.round(u[0]),h=Math.round(u[1]),p="#page=".concat(o);this.isInPresentationMode||(p+="&zoom=".concat(a,",").concat(d,",").concat(h));this._location={pageNumber:o,scale:a,top:h,left:d,rotation:this._pagesRotation,pdfOpenParams:p}}},{key:"update",value:function update(){this.scrollMode===l.ScrollMode.PAGE?this.viewer.classList.add("singlePageView"):this.viewer.classList.remove("singlePageView");var t=this._getVisiblePages(),r=t.views,i=r.length;if(0!==i){var a=Number(PDFViewerApplicationOptions.get("defaultCacheSize"))||10,o=Math.max(a,2*i+1);_classPrivateFieldGet(this,P).resize(o,t.ids);this.renderingQueue.renderHighestPriority(t);var c,u=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL),d=this._currentPageNumber,h=!1,p=_createForOfIteratorHelper(r);try{for(p.s();!(c=p.n()).done;){var v=c.value;if(v.percent<100)break;if(v.id===d&&u){h=!0;break}}}catch(t){p.e(t)}finally{p.f()}if(this.scrollMode!==l.ScrollMode.PAGE){this._setCurrentPageNumber(h?d:r[0].id);this._updateLocation(t.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}this.hidePagesDependingOnpageViewMode()}}},{key:"containsElement",value:function containsElement(t){return this.container.contains(t)}},{key:"focus",value:function focus(){this.container.focus()}},{key:"_isContainerRtl",get:function get(){return"rtl"===getComputedStyle(this.container).direction}},{key:"isInPresentationMode",get:function get(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function get(){return this.presentationModeState===l.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getVisiblePages",value:function _getVisiblePages(){var t=this._scrollMode===l.ScrollMode.PAGE?_classPrivateFieldGet(this,I).pages:this._pages,r=this._scrollMode===l.ScrollMode.HORIZONTAL,i=r&&this._isContainerRtl;return(0,l.getVisibleElements)({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:r,rtl:i})}},{key:"isPageVisible",value:function isPageVisible(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error('isPageVisible: "'.concat(t,'" is not a valid page.'));return!1}return this._getVisiblePages().ids.has(t)}},{key:"isPageCached",value:function isPageCached(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error('isPageCached: "'.concat(t,'" is not a valid page.'));return!1}var r=this._pages[t-1];return _classPrivateFieldGet(this,P).has(r)}},{key:"cleanup",value:function cleanup(){var t,r=_createForOfIteratorHelper(this._pages);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.renderingState!==l.RenderingStates.FINISHED&&i.reset()}}catch(t){r.e(t)}finally{r.f()}}},{key:"_cancelRendering",value:function _cancelRendering(){var t,r=_createForOfIteratorHelper(this._pages);try{for(r.s();!(t=r.n()).done;){t.value.cancelRendering()}}catch(t){r.e(t)}finally{r.f()}}},{key:"forceRendering",value:function forceRendering(t){var r=this,i=t||this._getVisiblePages(),a=_classPrivateMethodGet(this,z,_getScrollAhead2).call(this,i),o=this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL,c=this.renderingQueue.getHighestPriority(i,this._pages,a,o);if(c){_classPrivateMethodGet(this,U,_ensurePdfPageLoaded2).call(this,c).then((function(){r.renderingQueue.renderView(c)}));return!0}return!1}},{key:"hasEqualPageSizes",get:function get(){for(var t=this._pages[0],r=1,i=this._pages.length;r<i;++r){var a=this._pages[r];if(a.width!==t.width||a.height!==t.height)return!1}return!0}},{key:"getPagesOverview",value:function getPagesOverview(){var t=this;return this._pages.map((function(r){var i=r.pdfPage.getViewport({scale:1});return!t.enablePrintAutoRotate||(0,l.isPortraitOrientation)(i)?{width:i.width,height:i.height,rotation:i.rotation}:{width:i.height,height:i.width,rotation:(i.rotation-90)%360}}))}},{key:"optionalContentConfigPromise",get:function get(){if(!this.pdfDocument)return Promise.resolve(null);if(!this._optionalContentConfigPromise){console.error("optionalContentConfigPromise: Not initialized yet.");return this.pdfDocument.getOptionalContentConfig()}return this._optionalContentConfigPromise},set:function set(t){if(!(t instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(t));if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=t;this.refresh(!1,{optionalContentConfigPromise:t});this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t})}}},{key:"scrollMode",get:function get(){return this._scrollMode},set:function set(t){if(this._scrollMode!==t){if(!(0,l.isValidScrollMode)(t))throw new Error("Invalid scroll mode: ".concat(t));if(!(this.pagesCount>y.FORCE_SCROLL_MODE_PAGE)){this._previousScrollMode=this._scrollMode;this._scrollMode=t;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t});this._updateScrollMode(this._currentPageNumber)}}}},{key:"_updateScrollMode",value:function _updateScrollMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",r===l.ScrollMode.HORIZONTAL);i.classList.toggle("scrollWrapped",r===l.ScrollMode.WRAPPED);if(this.pdfDocument&&t){r===l.ScrollMode.PAGE?_classPrivateMethodGet(this,G,_ensurePageViewVisible2).call(this):this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode();this._currentScaleValue&&isNaN(this._currentScaleValue)&&_classPrivateMethodGet(this,W,_setScale2).call(this,this._currentScaleValue,{noScroll:!0});this._setCurrentPageNumber(t,!0);this.update()}}},{key:"spreadMode",get:function get(){return this._spreadMode},set:function set(t){if(this._spreadMode!==t){if(!(0,l.isValidSpreadMode)(t))throw new Error("Invalid spread mode: ".concat(t));this._spreadMode=t;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t});this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function _updateSpreadMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var r=this.viewer,i=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)_classPrivateMethodGet(this,G,_ensurePageViewVisible2).call(this);else{r.textContent="";if(this._spreadMode===l.SpreadMode.NONE){var a,o=_createForOfIteratorHelper(this._pages);try{for(o.s();!(a=o.n()).done;){var c=a.value;r.append(c.div)}}catch(t){o.e(t)}finally{o.f()}}else for(var u=this._spreadMode-1,d=null,h=0,p=i.length;h<p;++h){if(null===d){(d=document.createElement("div")).className="spread";r.append(d)}else if(h%2===u){d=d.cloneNode(!1);r.append(d)}d.append(i[h].div)}}this.hidePagesDependingOnpageViewMode();if(t){this._currentScaleValue&&isNaN(this._currentScaleValue)&&_classPrivateMethodGet(this,W,_setScale2).call(this,this._currentScaleValue,{noScroll:!0});this._setCurrentPageNumber(t,!0);this.update()}}}},{key:"_getPageAdvance",value:function _getPageAdvance(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("book"===this.pageViewMode)return 2;switch(this._scrollMode){case l.ScrollMode.WRAPPED:var i,a=this._getVisiblePages().views,o=new Map,c=_createForOfIteratorHelper(a);try{for(c.s();!(i=c.n()).done;){var u=i.value,d=u.id,h=u.y,p=u.percent,v=u.widthPercent;if(!(0===p||v<100)){var y=o.get(h);y||o.set(h,y||(y=[]));y.push(d)}}}catch(t){c.e(t)}finally{c.f()}var g,m=_createForOfIteratorHelper(o.values());try{for(m.s();!(g=m.n()).done;){var b=g.value,w=b.indexOf(t);if(-1!==w){var P=b.length;if(1===P)break;if(r)for(var S=w-1;S>=0;S--){var k=b[S],x=b[S+1]-1;if(k<x)return t-x}else for(var A=w+1,E=P;A<E;A++){var T=b[A],C=b[A-1]+1;if(T>C)return C-t}if(r){var I=b[0];if(I<t)return t-I+1}else{var O=b[P-1];if(O>t)return O-t+1}break}}}catch(t){m.e(t)}finally{m.f()}break;case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:if(this._spreadMode===l.SpreadMode.NONE)break;var M=this._spreadMode-1;if(r&&t%2!==M)break;if(!r&&t%2===M)break;var L,R=r?t-1:t+1,D=_createForOfIteratorHelper(this._getVisiblePages().views);try{for(D.s();!(L=D.n()).done;){var G=L.value,j=G.id,N=G.percent,B=G.widthPercent;if(j===R){if(N>0&&100===B)return 2;break}}}catch(t){D.e(t)}finally{D.f()}}return 1}},{key:"nextPage",value:function nextPage(){var t=this._currentPageNumber,r=this.pagesCount;if(t>=r)return!1;var i=this._getPageAdvance(t,!1)||1;this.currentPageNumber=Math.min(t+i,r);return!0}},{key:"previousPage",value:function previousPage(){var t=this._currentPageNumber;if(t<=1)return!1;var r=this._getPageAdvance(t,!0)||1;this.currentPageNumber=Math.max(t-r,1);return!0}},{key:"increaseScale",value:function increaseScale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.drawingDelay,i=t.scaleFactor,a=t.steps;if(this.pdfDocument){var o=this._currentScale;if(i>1)o=Math.round(o*i*100)/100;else{var c;null!==(c=a)&&void 0!==c||(a=1);do{o=Math.ceil(10*(o*l.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--a>0&&o<l.MAX_SCALE)}var u=Number(PDFViewerApplicationOptions.get("maxZoom"));u||(u=l.MAX_SCALE);_classPrivateMethodGet(this,W,_setScale2).call(this,Math.min(u,o),{noScroll:!1,drawingDelay:r})}}},{key:"decreaseScale",value:function decreaseScale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.drawingDelay,i=t.scaleFactor,a=t.steps;if(this.pdfDocument){var o=this._currentScale;if(i>0&&i<1)o=Math.round(o*i*100)/100;else{var c;null!==(c=a)&&void 0!==c||(a=1);do{o=Math.floor(10*(o/l.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--a>0&&o>l.MIN_SCALE)}var u=Number(PDFViewerApplicationOptions.get("minZoom"));u||(u=l.MIN_SCALE);_classPrivateMethodGet(this,W,_setScale2).call(this,Math.max(u,o),{noScroll:!1,drawingDelay:r})}}},{key:"containerTopLeft",get:function get(){return _classPrivateFieldGet(this,A)||_classPrivateFieldSet(this,A,[this.container.offsetTop,this.container.offsetLeft])}},{key:"annotationEditorMode",get:function get(){return _classPrivateFieldGet(this,k)?_classPrivateFieldGet(this,S):o.AnnotationEditorType.DISABLE},set:function set(t){if(!_classPrivateFieldGet(this,k))throw new Error("The AnnotationEditor is not enabled.");if(_classPrivateFieldGet(this,S)!==t){if(!isValidAnnotationEditorMode(t))throw new Error("Invalid AnnotationEditor mode: ".concat(t));if(this.pdfDocument){_classPrivateFieldSet(this,S,t);this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:t});_classPrivateFieldGet(this,k).updateMode(t)}}}},{key:"annotationEditorParams",set:function set(t){var r=t.type,i=t.value;if(!_classPrivateFieldGet(this,k))throw new Error("The AnnotationEditor is not enabled.");_classPrivateFieldGet(this,k).updateParams(r,i)}},{key:"refresh",value:function refresh(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null);if(this.pdfDocument){var i,a=_createForOfIteratorHelper(this._pages);try{for(a.s();!(i=a.n()).done;){i.value.update(r)}}catch(t){a.e(t)}finally{a.f()}if(null!==_classPrivateFieldGet(this,M)){clearTimeout(_classPrivateFieldGet(this,M));_classPrivateFieldSet(this,M,null)}t||this.update()}}},{key:"getSerializedAnnotations",value:function getSerializedAnnotations(){var t=this.pdfDocument.annotationStorage.getAll();if(t){return Object.values(t).map((function(t){return t.serialize()}))}return null}},{key:"addEditorAnnotation",value:function addEditorAnnotation(t){Array.isArray(t)||(t=[t]);_classPrivateFieldGet(this,k).addSerializedEditor(t,!0)}},{key:"removeEditorAnnotations",value:function removeEditorAnnotations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};_classPrivateFieldGet(this,k).removeEditors(t)}},{key:"destroyBookMode",value:function destroyBookMode(){if(this.pageFlip){this.pageFlip.destroy();this.pageFlip=null}}},{key:"stopRendering",value:function stopRendering(){this._cancelRendering()}}]);var t;return PDFViewer}();r.PDFViewer=Y;function _layerProperties2(){var t=this;return{get annotationEditorUIManager(){return _classPrivateFieldGet(t,k)},get annotationStorage(){var r;return null===(r=t.pdfDocument)||void 0===r?void 0:r.annotationStorage},get downloadManager(){return t.downloadManager},get enableScripting(){return!!t._scriptingManager},get fieldObjectsPromise(){var r;return null===(r=t.pdfDocument)||void 0===r?void 0:r.getFieldObjects()},get findController(){return t.findController},get hasJSActionsPromise(){var r;return null===(r=t.pdfDocument)||void 0===r?void 0:r.hasJSActions()},get linkService(){return t.linkService}}}function _initializePermissions2(t){var r={annotationEditorMode:_classPrivateFieldGet(this,S),annotationMode:_classPrivateFieldGet(this,x),textLayerMode:this.textLayerMode};if(!t)return r;t.includes(o.PermissionFlag.COPY)||this.viewer.classList.add(v);t.includes(o.PermissionFlag.MODIFY_CONTENTS)||(r.annotationEditorMode=o.AnnotationEditorType.DISABLE);t.includes(o.PermissionFlag.MODIFY_ANNOTATIONS)||t.includes(o.PermissionFlag.FILL_INTERACTIVE_FORMS)||_classPrivateFieldGet(this,x)!==o.AnnotationMode.ENABLE_FORMS||(r.annotationMode=o.AnnotationMode.ENABLE);return r}function _onePageRenderedOrForceFetch2(){var t=this;if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();var r=new Promise((function(r){_classPrivateFieldSet(t,O,(function(){if("hidden"===document.visibilityState){r();document.removeEventListener("visibilitychange",_classPrivateFieldGet(t,O));_classPrivateFieldSet(t,O,null)}}));document.addEventListener("visibilitychange",_classPrivateFieldGet(t,O))}));return Promise.race([this._onePageRenderedCapability.promise,r])}function _ensurePageViewVisible2(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var t=this._currentPageNumber,r=_classPrivateFieldGet(this,I),i=this.viewer;i.textContent="";r.pages.length=0;if(this._spreadMode!==l.SpreadMode.NONE||this.isInPresentationMode){var a=new Set,o=this._spreadMode-1;if(-1===o)a.add(t-1);else if(t%2!==o){a.add(t-1);a.add(t)}else{a.add(t-2);a.add(t-1)}var c=document.createElement("div");c.className="spread";if(this.isInPresentationMode){var u=document.createElement("div");u.className="dummyPage";c.append(u)}var d,h=_createForOfIteratorHelper(a);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=this._pages[p];if(v){c.append(v.div);r.pages.push(v)}}}catch(t){h.e(t)}finally{h.f()}i.append(c)}else{var y=this._pages[t-1];i.append(y.div);r.pages.push(y)}r.scrollDown=t>=r.previousPageNumber;r.previousPageNumber=t}function _scrollIntoView2(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var i=t.div,a=t.id;this._currentPageNumber!==a&&this._setCurrentPageNumber(a);if(this._scrollMode===l.ScrollMode.PAGE){_classPrivateMethodGet(this,G,_ensurePageViewVisible2).call(this);this.update()}if(!r&&!this.isInPresentationMode){var o=i.offsetLeft+i.clientLeft,c=o+i.clientWidth,u=this.container,d=u.scrollLeft,h=u.clientWidth;(this._scrollMode===l.ScrollMode.HORIZONTAL||o<d||c>d+h)&&(r={left:0,top:0})}(0,l.scrollIntoView)(i,r,!1,"infinite-scroll"===this.pageViewMode);!this._currentScaleValue&&this._location&&(this._location=null)}}function _isSameScale2(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}function _setScaleUpdatePages2(t,r,i){var a=this,l=i.noScroll,c=void 0!==l&&l,u=i.preset,d=void 0!==u&&u,h=i.drawingDelay,p=void 0===h?-1:h,v=isNaN(Number(this.currentScale))?void 0:Number(this.currentScale),y=this.currentScaleValue;this._currentScaleValue=r.toString();if(_classPrivateMethodGet(this,N,_isSameScale2).call(this,t))d&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:r,previousScale:v,previousPresetValue:y});else{this.viewer.style.setProperty("--scale-factor",t*o.PixelsPerInch.PDF_TO_CSS_UNITS);var g=p>=0&&p<1e3;this.refresh(!0,{scale:t,drawingDelay:g?p:-1});g&&_classPrivateFieldSet(this,M,setTimeout((function(){_classPrivateFieldSet(a,M,null);a.refresh()}),p));this._currentScale=t;if(!c){var m,b=this._currentPageNumber;if(this._location&&!this.isInPresentationMode&&!this.isChangingPresentationMode){b=this._location.pageNumber;m=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:b,destArray:m,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:d?r:void 0,previousScale:v,previousPresetValue:y});this.defaultRenderingQueue&&this.update()}}function _get_pageWidthScaleFactor(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1}function _setScale2(t,r){t||(t="auto");var i=parseFloat(t);if(this._currentScale!==i)if(i>0){r.preset=!1;_classPrivateMethodGet(this,B,_setScaleUpdatePages2).call(this,i,t,r)}else{var a=this._pages[this._currentPageNumber-1];if(!a)return;var o=l.SCROLLBAR_PADDING,c=l.VERTICAL_PADDING;if(this.isInPresentationMode){o=c=4;this._spreadMode!==l.SpreadMode.NONE&&(o*=2)}else if(this.removePageBorders)o=c=0;else if(this._scrollMode===l.ScrollMode.HORIZONTAL){var u=[c,o];o=u[0];c=u[1]}var d=(this.container.clientWidth-o)/a.width*a.scale/_classPrivateFieldGet(this,V),h=(this.container.clientHeight-c)/a.height*a.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=d;break;case"page-height":i=h;break;case"page-fit":i=Math.min(d,h);break;case"auto":var p=(0,l.isPortraitOrientation)(a)?d:Math.min(h,d);i=Math.min(l.MAX_AUTO_SCALE,p);break;default:globalThis.ngxConsole.error('#setScale: "'.concat(t,'" is an unknown zoom value.'));return}r.preset=!0;_classPrivateMethodGet(this,B,_setScaleUpdatePages2).call(this,i,t,r)}}function _resetCurrentPageView2(){var t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&_classPrivateMethodGet(this,W,_setScale2).call(this,this._currentScaleValue,{noScroll:!0});_classPrivateMethodGet(this,j,_scrollIntoView2).call(this,t)}function _ensurePdfPageLoaded2(t){return _ensurePdfPageLoaded3.apply(this,arguments)}function _ensurePdfPageLoaded3(){return(_ensurePdfPageLoaded3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){var r,i,a;return _regeneratorRuntime().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:if(!t.pdfPage){o.next=2;break}return o.abrupt("return",t.pdfPage);case 2:o.prev=2;o.next=5;return this.pdfDocument.getPage(t.id);case 5:a=o.sent;t.pdfPage||t.setPdfPage(a);null!==(r=(i=this.linkService)._cachedPageNumber)&&void 0!==r&&r.call(i,a.ref)||this.linkService.cachePageRef(t.id,a.ref);return o.abrupt("return",a);case 11:o.prev=11;o.t0=o.catch(2);console.error("Unable to get page for page view",o.t0);return o.abrupt("return",null);case 15:case"end":return o.stop()}}),_callee3,this,[[2,11]])})))).apply(this,arguments)}function _getScrollAhead2(t){var r,i;if(1===(null===(r=t.first)||void 0===r?void 0:r.id))return!0;if((null===(i=t.last)||void 0===i?void 0:i.id)===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return _classPrivateFieldGet(this,I).scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _updateContainerHeightCss2(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container.clientHeight;if(t!==_classPrivateFieldGet(this,T)){_classPrivateFieldSet(this,T,t);l.docStyle.setProperty("--viewer-container-height","".concat(t,"px"))}}function _resizeObserverCallback2(t){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.target===this.container){_classPrivateMethodGet(this,X,_updateContainerHeightCss2).call(this,Math.floor(a.borderBoxSize[0].blockSize));_classPrivateFieldSet(this,A,null);break}}}catch(t){i.e(t)}finally{i.f()}}},(t,r)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.NullL10n=void 0;r.fixupLangCode=function fixupLangCode(t){return a[null==t?void 0:t.toLowerCase()]||t};r.getL10nFallback=getL10nFallback;function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}var i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",print_progress_percent:"{{progress}}%"};function getL10nFallback(t,r){switch(t){case"find_match_count":t="find_match_count[".concat(1===r.total?"one":"other","]");break;case"find_match_count_limit":t="find_match_count_limit[".concat(1===r.limit?"one":"other","]")}return i[t]||""}var a={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function formatL10nValue(t,r){return r?t.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(function(t,i){return i in r?r[i]:"{{"+i+"}}"})):t}var o={getLanguage:function getLanguage(){return _asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","en-us");case 1:case"end":return t.stop()}}),_callee)})))()},getDirection:function getDirection(){return _asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","ltr");case 1:case"end":return t.stop()}}),_callee2)})))()},get:function get(t){var r=arguments;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var i,a;return _regeneratorRuntime().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:i=r.length>1&&void 0!==r[1]?r[1]:null;a=r.length>2&&void 0!==r[2]?r[2]:getL10nFallback(t,i);return o.abrupt("return",formatL10nValue(a,i));case 3:case"end":return o.stop()}}),_callee3)})))()},translate:function translate(t){return _asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){return _regeneratorRuntime().wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee4)})))()}};r.NullL10n=o},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PageFlip=void 0;function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,i){var a=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:i):o.value}};return _get.apply(this,arguments)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}var i=function(){function Page(t,r){_classCallCheck(this,Page);this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0};this.createdDensity=r;this.nowDrawingDensity=this.createdDensity;this.render=t}_createClass(Page,[{key:"setDensity",value:function setDensity(t){this.createdDensity=t;this.nowDrawingDensity=t}},{key:"setDrawingDensity",value:function setDrawingDensity(t){this.nowDrawingDensity=t}},{key:"setPosition",value:function setPosition(t){this.state.position=t}},{key:"setAngle",value:function setAngle(t){this.state.angle=t}},{key:"setArea",value:function setArea(t){this.state.area=t}},{key:"setHardDrawingAngle",value:function setHardDrawingAngle(t){this.state.hardDrawingAngle=t}},{key:"setHardAngle",value:function setHardAngle(t){this.state.hardAngle=t;this.state.hardDrawingAngle=t}},{key:"setOrientation",value:function setOrientation(t){this.orientation=t}},{key:"getDrawingDensity",value:function getDrawingDensity(){return this.nowDrawingDensity}},{key:"getDensity",value:function getDensity(){return this.createdDensity}},{key:"getHardAngle",value:function getHardAngle(){return this.state.hardAngle}}]);return Page}(),a=function(t){_inherits(ImagePage,t);var r=_createSuper(ImagePage);function ImagePage(t,i,a){var o;_classCallCheck(this,ImagePage);(o=r.call(this,t,a)).image=null;o.isLoad=!1;o.loadingAngle=0;o.image=new Image;o.image.src=i;return o}_createClass(ImagePage,[{key:"draw",value:function draw(t){var r=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0,i=canvas.getContext("2d",r),a=this.render.convertToGlobal(this.state.position),o=this.render.getRect().pageWidth,l=this.render.getRect().height;i.save();i.translate(a.x,a.y);i.beginPath();var c,u=_createForOfIteratorHelper(this.state.area);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(null!==d){d=this.render.convertToGlobal(d);i.lineTo(d.x-a.x,d.y-a.y)}}}catch(t){u.e(t)}finally{u.f()}i.rotate(this.state.angle);i.clip();this.isLoad?i.drawImage(this.image,0,0,o,l):this.drawLoader(i,{x:0,y:0},o,l);i.restore()}},{key:"simpleDraw",value:function simpleDraw(t){var r=this.render.getRect(),i=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0,a=canvas.getContext("2d",i),o=r.pageWidth,l=r.height,c=1===t?r.left+r.pageWidth:r.left,u=r.top;this.isLoad?a.drawImage(this.image,c,u,o,l):this.drawLoader(a,{x:c,y:u},o,l)}},{key:"drawLoader",value:function drawLoader(t,r,i,a){t.beginPath();t.strokeStyle="rgb(200, 200, 200)";t.fillStyle="rgb(255, 255, 255)";t.lineWidth=1;t.rect(r.x+1,r.y+1,i-1,a-1);t.stroke();t.fill();var o={x:r.x+i/2,y:r.y+a/2};t.beginPath();t.lineWidth=10;t.arc(o.x,o.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle);t.stroke();t.closePath();this.loadingAngle+=.07;this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}},{key:"load",value:function load(){var t=this;this.isLoad||(this.image.onload=function(){t.isLoad=!0})}},{key:"newTemporaryCopy",value:function newTemporaryCopy(){return this}},{key:"getTemporaryCopy",value:function getTemporaryCopy(){return this}},{key:"hideTemporaryCopy",value:function hideTemporaryCopy(){}}]);return ImagePage}(i),o=function(){function PageCollection(t,r){_classCallCheck(this,PageCollection);this.pages=[];this.currentPageIndex=0;this.currentSpreadIndex=0;this.landscapeSpread=[];this.portraitSpread=[];this.render=r;this.app=t;this.currentPageIndex=0;this.isShowCover=this.app.getSettings().showCover}_createClass(PageCollection,[{key:"destroy",value:function destroy(){this.pages=[]}},{key:"createSpread",value:function createSpread(){this.landscapeSpread=[];this.portraitSpread=[];for(var t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);var r=0;if(this.isShowCover){this.pages[0].setDensity("hard");this.landscapeSpread.push([r]);r++}for(var i=r;i<this.pages.length;i+=2)if(i<this.pages.length-1)this.landscapeSpread.push([i,i+1]);else{this.landscapeSpread.push([i]);this.pages[i].setDensity("hard")}}},{key:"getSpread",value:function getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}},{key:"getSpreadIndexByPage",value:function getSpreadIndexByPage(t){for(var r=this.getSpread(),i=0;i<r.length;i++)if(t===r[i][0]||t===r[i][1])return i;return null}},{key:"getPageCount",value:function getPageCount(){return this.pages.length}},{key:"getPages",value:function getPages(){return this.pages}},{key:"getPage",value:function getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error("Invalid page number")}},{key:"nextBy",value:function nextBy(t){var r=this.pages.indexOf(t);return r<this.pages.length-1?this.pages[r+1]:null}},{key:"prevBy",value:function prevBy(t){var r=this.pages.indexOf(t);return r>0?this.pages[r-1]:null}},{key:"getFlippingPage",value:function getFlippingPage(t){var r=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[r].newTemporaryCopy():this.pages[r-1];var i=0===t?this.getSpread()[r+1]:this.getSpread()[r-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}},{key:"getBottomPage",value:function getBottomPage(t){var r=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[r+1]:this.pages[r-1];var i=0===t?this.getSpread()[r+1]:this.getSpread()[r-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}},{key:"showNext",value:function showNext(){if(this.currentSpreadIndex<this.getSpread().length){this.currentSpreadIndex++;this.showSpread()}}},{key:"showPrev",value:function showPrev(){if(this.currentSpreadIndex>0){this.currentSpreadIndex--;this.showSpread()}}},{key:"getCurrentPageIndex",value:function getCurrentPageIndex(){return this.currentPageIndex}},{key:"show",value:function show(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t&&(t=this.currentPageIndex);if(!(t<0||t>=this.pages.length)){var r=this.getSpreadIndexByPage(t);if(null!==r){this.currentSpreadIndex=r;this.showSpread()}}}},{key:"getCurrentSpreadIndex",value:function getCurrentSpreadIndex(){return this.currentSpreadIndex}},{key:"setCurrentSpreadIndex",value:function setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=t}},{key:"showSpread",value:function showSpread(){var t=this.getSpread()[this.currentSpreadIndex];if(2===t.length){this.render.setLeftPage(this.pages[t[0]]);this.render.setRightPage(this.pages[t[1]])}else if("landscape"===this.render.getOrientation())if(t[0]===this.pages.length-1){this.render.setLeftPage(this.pages[t[0]]);this.render.setRightPage(null)}else{this.render.setLeftPage(null);this.render.setRightPage(this.pages[t[0]])}else{this.render.setLeftPage(null);this.render.setRightPage(this.pages[t[0]])}this.currentPageIndex=t[0];this.app.updatePageIndex(this.currentPageIndex)}}]);return PageCollection}(),l=function(t){_inherits(ImagePageCollection,t);var r=_createSuper(ImagePageCollection);function ImagePageCollection(t,i,a){var o;_classCallCheck(this,ImagePageCollection);(o=r.call(this,t,i)).imagesHref=a;return o}_createClass(ImagePageCollection,[{key:"load",value:function load(){var t,r=_createForOfIteratorHelper(this.imagesHref);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=new a(this.render,i,"soft");o.load();this.pages.push(o)}}catch(t){r.e(t)}finally{r.f()}this.createSpread()}}]);return ImagePageCollection}(o),c=function(){function Helper(){_classCallCheck(this,Helper)}_createClass(Helper,null,[{key:"GetDistanceBetweenTwoPoint",value:function GetDistanceBetweenTwoPoint(t,r){return null===t||null===r?1/0:Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}},{key:"GetSegmentLength",value:function GetSegmentLength(t){return Helper.GetDistanceBetweenTwoPoint(t[0],t[1])}},{key:"GetAngleBetweenTwoLine",value:function GetAngleBetweenTwoLine(t,r){var i=t[0].y-t[1].y,a=r[0].y-r[1].y,o=t[1].x-t[0].x,l=r[1].x-r[0].x;return Math.acos((i*a+o*l)/(Math.sqrt(i*i+o*o)*Math.sqrt(a*a+l*l)))}},{key:"PointInRect",value:function PointInRect(t,r){return null===r?null:r.x>=t.left&&r.x<=t.width+t.left&&r.y>=t.top&&r.y<=t.top+t.height?r:null}},{key:"GetRotatedPoint",value:function GetRotatedPoint(t,r,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+r.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+r.y}}},{key:"LimitPointToCircle",value:function LimitPointToCircle(t,r,i){if(Helper.GetDistanceBetweenTwoPoint(t,i)<=r)return i;var a=t.x,o=t.y,l=i.x,c=i.y,u=Math.sqrt(Math.pow(r,2)*Math.pow(a-l,2)/(Math.pow(a-l,2)+Math.pow(o-c,2)))+a;i.x<0&&(u*=-1);var d=(u-a)*(o-c)/(a-l)+o;a-l+o===0&&(d=r);return{x:u,y:d}}},{key:"GetIntersectBetweenTwoSegment",value:function GetIntersectBetweenTwoSegment(t,r,i){return Helper.PointInRect(t,Helper.GetIntersectBeetwenTwoLine(r,i))}},{key:"GetIntersectBeetwenTwoLine",value:function GetIntersectBeetwenTwoLine(t,r){var i=t[0].y-t[1].y,a=r[0].y-r[1].y,o=t[1].x-t[0].x,l=r[1].x-r[0].x,c=t[0].x*t[1].y-t[1].x*t[0].y,u=r[0].x*r[1].y-r[1].x*r[0].y,d=i*u-a*c,h=o*u-l*c,p=-(c*l-u*o)/(i*l-a*o),v=-(i*u-a*c)/(i*l-a*o);if(isFinite(p)&&isFinite(v))return{x:p,y:v};if(Math.abs(d-h)<.1)throw new Error("Segment included");return null}},{key:"GetCordsFromTwoPoint",value:function GetCordsFromTwoPoint(t,r){var i=Math.abs(t.x-r.x),a=Math.abs(t.y-r.y),o=Math.max(i,a),l=[t];function getCord(t,r,i,a,o){return r>t?t+o*(i/a):r<t?t-o*(i/a):t}for(var c=1;c<=o;c+=1)l.push({x:getCord(t.x,r.x,i,o,c),y:getCord(t.y,r.y,a,o,c)});return l}}]);return Helper}(),u=function(t){_inherits(HTMLPage,t);var r=_createSuper(HTMLPage);function HTMLPage(t,i,a){var o;_classCallCheck(this,HTMLPage);(o=r.call(this,t,a)).copiedElement=null;o.temporaryCopy=null;o.isLoad=!1;o.element=i;o.element.classList.add("stf__item");o.element.classList.add("--"+a);return o}_createClass(HTMLPage,[{key:"newTemporaryCopy",value:function newTemporaryCopy(){if("hard"===this.nowDrawingDensity)return this;if(null===this.temporaryCopy){this.copiedElement=this.element.cloneNode(!0);this.element.parentElement.appendChild(this.copiedElement);this.temporaryCopy=new HTMLPage(this.render,this.copiedElement,this.nowDrawingDensity)}return this.getTemporaryCopy()}},{key:"getTemporaryCopy",value:function getTemporaryCopy(){return this.temporaryCopy}},{key:"hideTemporaryCopy",value:function hideTemporaryCopy(){if(null!==this.temporaryCopy){this.copiedElement.remove();this.copiedElement=null;this.temporaryCopy=null}}},{key:"draw",value:function draw(t){var r=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),a=this.render.getRect().pageWidth,o=this.render.getRect().height;this.element.classList.remove("--simple");var l="\n            position: absolute;\n            display: block;\n            z-index: ".concat(this.element.style.zIndex,";\n            left: 0;\n            top: 0;\n            width: ").concat(a,"px;\n            height: ").concat(o,"px;\n        ");"hard"===r?this.drawHard(l):this.drawSoft(i,l)}},{key:"drawHard",value:function drawHard(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,a=t+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?"transform-origin: ".concat(this.render.getRect().pageWidth,"px 0;\n                   transform: translate3d(0, 0, 0) rotateY(").concat(i,"deg);"):"transform-origin: 0 0;\n                   transform: translate3d(".concat(r,"px, 0, 0) rotateY(").concat(i,"deg);"));this.element.style.cssText=a}},{key:"drawSoft",value:function drawSoft(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="polygon( ",o=_createForOfIteratorHelper(this.state.area);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(null!==l){var u=1===this.render.getDirection()?{x:-l.x+this.state.position.x,y:l.y-this.state.position.y}:{x:l.x-this.state.position.x,y:l.y-this.state.position.y};a+=(u=c.GetRotatedPoint(u,{x:0,y:0},this.state.angle)).x+"px "+u.y+"px, "}}}catch(t){o.e(t)}finally{o.f()}a=a.slice(0,-2);var d=i+"transform-origin: 0 0; clip-path: ".concat(a+=")","; -webkit-clip-path: ").concat(a,";")+(this.render.isSafari()&&0===this.state.angle?"transform: translate(".concat(t.x,"px, ").concat(t.y,"px);"):"transform: translate3d(".concat(t.x,"px, ").concat(t.y,"px, 0) rotate(").concat(this.state.angle,"rad);"));this.element.style.cssText=d}},{key:"simpleDraw",value:function simpleDraw(t){var r=this.render.getRect(),i=r.pageWidth,a=r.height,o=1===t?r.left+r.pageWidth:r.left,l=r.top;this.element.classList.add("--simple");this.element.style.cssText="\n            position: absolute;\n            display: block;\n            height: ".concat(a,"px;\n            left: ").concat(o,"px;\n            top: ").concat(l,"px;\n            width: ").concat(i,"px;\n            z-index: ").concat(this.render.getSettings().startZIndex+1,";")}},{key:"getElement",value:function getElement(){return this.element}},{key:"load",value:function load(){this.isLoad=!0}},{key:"setOrientation",value:function setOrientation(t){_get(_getPrototypeOf(HTMLPage.prototype),"setOrientation",this).call(this,t);this.element.classList.remove("--left","--right");this.element.classList.add(1===t?"--right":"--left")}},{key:"setDrawingDensity",value:function setDrawingDensity(t){this.element.classList.remove("--soft","--hard");this.element.classList.add("--"+t);_get(_getPrototypeOf(HTMLPage.prototype),"setDrawingDensity",this).call(this,t)}}]);return HTMLPage}(i),d=function(t){_inherits(HTMLPageCollection,t);var r=_createSuper(HTMLPageCollection);function HTMLPageCollection(t,i,a,o){var l;_classCallCheck(this,HTMLPageCollection);(l=r.call(this,t,i)).element=a;l.pagesElement=o;return l}_createClass(HTMLPageCollection,[{key:"load",value:function load(){var t,r=_createForOfIteratorHelper(this.pagesElement);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=new u(this.render,i,"hard"===i.dataset.density?"hard":"soft");a.load();this.pages.push(a)}}catch(t){r.e(t)}finally{r.f()}this.createSpread()}}]);return HTMLPageCollection}(o),h=function(){function FlipCalculation(t,r,i,a){_classCallCheck(this,FlipCalculation);this.direction=t;this.corner=r;this.topIntersectPoint=null;this.sideIntersectPoint=null;this.bottomIntersectPoint=null;this.pageWidth=parseInt(i,10);this.pageHeight=parseInt(a,10)}_createClass(FlipCalculation,[{key:"calc",value:function calc(t){try{this.position=this.calcAngleAndPosition(t);this.calculateIntersectPoint(this.position);return!0}catch(t){return!1}}},{key:"getFlippingClipArea",value:function getFlippingClipArea(){var t=[],r=!1;t.push(this.rect.topLeft);t.push(this.topIntersectPoint);if(null===this.sideIntersectPoint)r=!0;else{t.push(this.sideIntersectPoint);null===this.bottomIntersectPoint&&(r=!1)}t.push(this.bottomIntersectPoint);(r||"bottom"===this.corner)&&t.push(this.rect.bottomLeft);return t}},{key:"getBottomClipArea",value:function getBottomClipArea(){var t=[];t.push(this.topIntersectPoint);if("top"===this.corner)t.push({x:this.pageWidth,y:0});else{null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0});t.push({x:this.pageWidth,y:this.pageHeight})}null!==this.sideIntersectPoint?c.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):"top"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight});t.push(this.bottomIntersectPoint);t.push(this.topIntersectPoint);return t}},{key:"getAngle",value:function getAngle(){return 0===this.direction?-this.angle:this.angle}},{key:"getRect",value:function getRect(){return this.rect}},{key:"getPosition",value:function getPosition(){return this.position}},{key:"getActiveCorner",value:function getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}},{key:"getDirection",value:function getDirection(){return this.direction}},{key:"getFlippingProgress",value:function getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}},{key:"getCorner",value:function getCorner(){return this.corner}},{key:"getBottomPagePosition",value:function getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}},{key:"getShadowStartPoint",value:function getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}},{key:"getShadowAngle",value:function getShadowAngle(){var t=c.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}},{key:"calcAngleAndPosition",value:function calcAngleAndPosition(t){var r=t;this.updateAngleAndGeometry(r);r="top"===this.corner?this.checkPositionAtCenterLine(r,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(r,{x:0,y:this.pageHeight},{x:0,y:0});if(Math.abs(r.x-this.pageWidth)<1&&Math.abs(r.y)<1)throw new Error("Point is too small");return r}},{key:"updateAngleAndGeometry",value:function updateAngleAndGeometry(t){this.angle=this.calculateAngle(t);this.rect=this.getPageRect(t)}},{key:"calculateAngle",value:function calculateAngle(t){var r=this.pageWidth-t.x+1,i="bottom"===this.corner?this.pageHeight-t.y:t.y,a=2*Math.acos(r/Math.sqrt(i*i+r*r));i<0&&(a=-a);var o=Math.PI-a;if(!isFinite(a)||o>=0&&o<.003)throw new Error("The G point is too small");"bottom"===this.corner&&(a=-a);return a}},{key:"getPageRect",value:function getPageRect(t){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}},{key:"getRectFromBasePoint",value:function getRectFromBasePoint(t,r){return{topLeft:this.getRotatedPoint(t[0],r),topRight:this.getRotatedPoint(t[1],r),bottomLeft:this.getRotatedPoint(t[2],r),bottomRight:this.getRotatedPoint(t[3],r)}}},{key:"getRotatedPoint",value:function getRotatedPoint(t,r){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+r.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+r.y}}},{key:"calculateIntersectPoint",value:function calculateIntersectPoint(t){var r={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};if("top"===this.corner){this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(r,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]);this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(r,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]);this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(r,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])}else{this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(r,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]);this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(r,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]);this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(r,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])}}},{key:"checkPositionAtCenterLine",value:function checkPositionAtCenterLine(t,r,i){var a=t,o=c.LimitPointToCircle(r,this.pageWidth,a);if(a!==o){a=o;this.updateAngleAndGeometry(a)}var l=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2)),u=this.rect.bottomRight,d=this.rect.topLeft;if("bottom"===this.corner){u=this.rect.topRight;d=this.rect.bottomLeft}if(u.x<=0){var h=c.LimitPointToCircle(i,l,d);if(h!==a){a=h;this.updateAngleAndGeometry(a)}}return a}},{key:"getSegmentToShadowLine",value:function getSegmentToShadowLine(){var t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}]);return FlipCalculation}(),p=function(){function Flip(t,r){_classCallCheck(this,Flip);this.flippingPage=null;this.bottomPage=null;this.calc=null;this.state="read";this.render=t;this.app=r}_createClass(Flip,[{key:"fold",value:function fold(t){this.setState("user_fold");null===this.calc&&this.start(t);this.do(this.render.convertToPage(t))}},{key:"flip",value:function flip(t){if(!this.app.getSettings().disableFlipByClick||this.isPointOnCorners(t)){null!==this.calc&&this.render.finishAnimation();if(this.start(t)){var r=this.getBoundsRect();this.setState("flipping");var i=r.height/10,a="bottom"===this.calc.getCorner()?r.height-i:i,o="bottom"===this.calc.getCorner()?r.height:0;this.calc.calc({x:r.pageWidth-i,y:a});this.animateFlippingTo({x:r.pageWidth-i,y:a},{x:-r.pageWidth,y:o},!0)}}}},{key:"start",value:function start(t){this.reset();var r=this.render.convertToBook(t),i=this.getBoundsRect(),a=this.getDirectionByPoint(r),o=r.y>=i.height/2?"bottom":"top";if(!this.checkDirection(a))return!1;try{this.flippingPage=this.app.getPageCollection().getFlippingPage(a);this.bottomPage=this.app.getPageCollection().getBottomPage(a);if("landscape"===this.render.getOrientation())if(1===a){var l=this.app.getPageCollection().nextBy(this.flippingPage);if(null!==l&&this.flippingPage.getDensity()!==l.getDensity()){this.flippingPage.setDrawingDensity("hard");l.setDrawingDensity("hard")}}else{var c=this.app.getPageCollection().prevBy(this.flippingPage);if(null!==c&&this.flippingPage.getDensity()!==c.getDensity()){this.flippingPage.setDrawingDensity("hard");c.setDrawingDensity("hard")}}this.render.setDirection(a);this.calc=new h(a,o,i.pageWidth.toString(10),i.height.toString(10));return!0}catch(t){return!1}}},{key:"do",value:function _do(t){if(null!==this.calc&&this.calc.calc(t)){var r=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea());this.bottomPage.setPosition(this.calc.getBottomPagePosition());this.bottomPage.setAngle(0);this.bottomPage.setHardAngle(0);this.flippingPage.setArea(this.calc.getFlippingClipArea());this.flippingPage.setPosition(this.calc.getActiveCorner());this.flippingPage.setAngle(this.calc.getAngle());0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*r)/100):this.flippingPage.setHardAngle(-90*(200-2*r)/100);this.render.setPageRect(this.calc.getRect());this.render.setBottomPage(this.bottomPage);this.render.setFlippingPage(this.flippingPage);this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),r,this.calc.getDirection())}}},{key:"flipToPage",value:function flipToPage(t,r){var i=this.app.getPageCollection().getCurrentSpreadIndex(),a=this.app.getPageCollection().getSpreadIndexByPage(t);try{if(a>i){this.app.getPageCollection().setCurrentSpreadIndex(a-1);this.flipNext(r)}if(a<i){this.app.getPageCollection().setCurrentSpreadIndex(a+1);this.flipPrev(r)}}catch(t){}}},{key:"flipNext",value:function flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===t?1:this.render.getRect().height-2})}},{key:"flipPrev",value:function flipPrev(t){this.flip({x:10,y:"top"===t?1:this.render.getRect().height-2})}},{key:"stopMove",value:function stopMove(){if(null!==this.calc){var t=this.calc.getPosition(),r=this.getBoundsRect(),i="bottom"===this.calc.getCorner()?r.height:0;t.x<=0?this.animateFlippingTo(t,{x:-r.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:r.pageWidth,y:i},!1)}}},{key:"showCorner",value:function showCorner(t){if(this.checkState("read","fold_corner")){var r=this.getBoundsRect(),i=r.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState("fold_corner");this.calc.calc({x:i-1,y:1});var a="bottom"===this.calc.getCorner()?r.height-1:1,o="bottom"===this.calc.getCorner()?r.height-50:50;this.animateFlippingTo({x:i-1,y:a},{x:i-50,y:o},!1,!1)}else this.do(this.render.convertToPage(t));else{this.setState("read");this.render.finishAnimation();this.stopMove()}}}},{key:"animateFlippingTo",value:function animateFlippingTo(t,r,i){var a,o=this,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=c.GetCordsFromTwoPoint(t,r),d=[],h=_createForOfIteratorHelper(u);try{var p=function _loop(){var t=a.value;d.push((function(){return o.do(t)}))};for(h.s();!(a=h.n()).done;)p()}catch(t){h.e(t)}finally{h.f()}var v=this.getAnimationDuration(u.length);this.render.startAnimation(d,v,(function(){if(o.calc){i&&(1===o.calc.getDirection()?o.app.turnToPrevPage():o.app.turnToNextPage());if(l){o.render.setBottomPage(null);o.render.setFlippingPage(null);o.render.clearShadow();o.setState("read");o.reset()}}}))}},{key:"getCalculation",value:function getCalculation(){return this.calc}},{key:"getState",value:function getState(){return this.state}},{key:"setState",value:function setState(t){if(this.state!==t){this.app.updateState(t);this.state=t}}},{key:"getDirectionByPoint",value:function getDirectionByPoint(t){var r=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(t.x-r.pageWidth<=r.width/5)return 1}else if(t.x<r.width/2)return 1;return 0}},{key:"getAnimationDuration",value:function getAnimationDuration(t){var r=this.app.getSettings().flippingTime;return t>=1e3?r:t/1e3*r}},{key:"checkDirection",value:function checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}},{key:"reset",value:function reset(){this.calc=null;this.flippingPage=null;this.bottomPage=null}},{key:"getBoundsRect",value:function getBoundsRect(){return this.render.getRect()}},{key:"checkState",value:function checkState(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var l=o[a];if(this.state===l)return!0}return!1}},{key:"isPointOnCorners",value:function isPointOnCorners(t){var r=this.getBoundsRect(),i=r.pageWidth,a=Math.sqrt(Math.pow(i,2)+Math.pow(r.height,2))/5,o=this.render.convertToBook(t);return o.x>0&&o.y>0&&o.x<r.width&&o.y<r.height&&(o.x<a||o.x>r.width-a)&&(o.y<a||o.y>r.height-a)}}]);return Flip}(),v=function(){function Render(t,r){_classCallCheck(this,Render);this.leftPage=null;this.rightPage=null;this.flippingPage=null;this.bottomPage=null;this.direction=null;this.orientation=null;this.shadow=null;this.animation=null;this.pageRect=null;this.boundsRect=null;this.timer=0;this.safari=!1;this.setting=r;this.app=t;var i=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==i.exec(window.navigator.userAgent)}_createClass(Render,[{key:"render",value:function render(t){if(null!==this.animation){var r=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);if(r<this.animation.frames.length)this.animation.frames[r]();else{this.animation.onAnimateEnd();this.animation=null}}this.timer=t;this.drawFrame()}},{key:"start",value:function start(){var t=this;this.update();var r=function loop(r){window.ngxZone.runOutsideAngular((function(){t.render(r);requestAnimationFrame(loop)}))};window.ngxZone.runOutsideAngular((function(){requestAnimationFrame(r)}))}},{key:"startAnimation",value:function startAnimation(t,r,i){this.finishAnimation();this.animation={frames:t,duration:r,durationFrame:r/t.length,onAnimateEnd:i,startedAt:this.timer}}},{key:"finishAnimation",value:function finishAnimation(){if(null!==this.animation){this.animation.frames[this.animation.frames.length-1]();null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()}this.animation=null}},{key:"update",value:function update(){this.boundsRect=null;var t=this.calculateBoundsRect();if(this.orientation!==t){this.orientation=t;this.app.updateOrientation(t)}}},{key:"calculateBoundsRect",value:function calculateBoundsRect(){var t="landscape",r=this.getBlockWidth(),i=r/2,a=this.getBlockHeight()/2,o=this.setting.width/this.setting.height,l=this.setting.width,c=this.setting.height,u=i-l;if("stretch"===this.setting.size){r<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t="portrait");(l="portrait"===t?this.getBlockWidth():this.getBlockWidth()/2)>this.setting.maxWidth&&(l=this.setting.maxWidth);(c=l/o)>this.getBlockHeight()&&(l=(c=this.getBlockHeight())*o);u="portrait"===t?i-l/2-l:i-l}else if(r<2*l&&this.app.getSettings().usePortrait){t="portrait";u=i-l/2-l}this.boundsRect={left:u,top:a-c/2,width:2*l,height:c,pageWidth:l};return t}},{key:"setShadowData",value:function setShadowData(t,r,i,a){if(this.app.getSettings().drawShadow){var o=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:r,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*o/100/100,direction:a,progress:2*i}}}},{key:"clearShadow",value:function clearShadow(){this.shadow=null}},{key:"getBlockWidth",value:function getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}},{key:"getBlockHeight",value:function getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}},{key:"getDirection",value:function getDirection(){return this.direction}},{key:"getRect",value:function getRect(){null===this.boundsRect&&this.calculateBoundsRect();return this.boundsRect}},{key:"getSettings",value:function getSettings(){return this.app.getSettings()}},{key:"getOrientation",value:function getOrientation(){return this.orientation}},{key:"setPageRect",value:function setPageRect(t){this.pageRect=t}},{key:"setDirection",value:function setDirection(t){this.direction=t}},{key:"setRightPage",value:function setRightPage(t){null!==t&&t.setOrientation(1);this.rightPage=t}},{key:"setLeftPage",value:function setLeftPage(t){null!==t&&t.setOrientation(0);this.leftPage=t}},{key:"setBottomPage",value:function setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1);this.bottomPage=t}},{key:"setFlippingPage",value:function setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1);this.flippingPage=t}},{key:"convertToBook",value:function convertToBook(t){var r=this.getRect();return{x:t.x-r.left,y:t.y-r.top}}},{key:"isSafari",value:function isSafari(){return this.safari}},{key:"convertToPage",value:function convertToPage(t,r){r||(r=this.direction);var i=this.getRect();return{x:0===r?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}},{key:"convertToGlobal",value:function convertToGlobal(t,r){r||(r=this.direction);if(null==t)return null;var i=this.getRect();return{x:0===r?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}},{key:"convertRectToGlobal",value:function convertRectToGlobal(t,r){r||(r=this.direction);return{topLeft:this.convertToGlobal(t.topLeft,r),topRight:this.convertToGlobal(t.topRight,r),bottomLeft:this.convertToGlobal(t.bottomLeft,r),bottomRight:this.convertToGlobal(t.bottomRight,r)}}}]);return Render}(),y=function(t){_inherits(CanvasRender,t);var r=_createSuper(CanvasRender);function CanvasRender(t,i,a){var o;_classCallCheck(this,CanvasRender);(o=r.call(this,t,i)).canvas=a;var l=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0;canvas.getContext("2d",l);return o}_createClass(CanvasRender,[{key:"getContext",value:function getContext(){return this.ctx}},{key:"reload",value:function reload(){}},{key:"drawFrame",value:function drawFrame(){this.clear();"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0);null!=this.rightPage&&this.rightPage.simpleDraw(1);null!=this.bottomPage&&this.bottomPage.draw();this.drawBookShadow();null!=this.flippingPage&&this.flippingPage.draw();if(null!=this.shadow){this.drawOuterShadow();this.drawInnerShadow()}var t=this.getRect();if("portrait"===this.orientation){this.ctx.beginPath();this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height);this.ctx.clip()}}},{key:"drawBookShadow",value:function drawBookShadow(){var t=this.getRect();this.ctx.save();this.ctx.beginPath();var r=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);var i={x:t.left+t.width/2-r/2,y:0};this.ctx.translate(i.x,i.y);var a=this.ctx.createLinearGradient(0,0,r,0);a.addColorStop(0,"rgba(0, 0, 0, 0)");a.addColorStop(.4,"rgba(0, 0, 0, 0.2)");a.addColorStop(.49,"rgba(0, 0, 0, 0.1)");a.addColorStop(.5,"rgba(0, 0, 0, 0.5)");a.addColorStop(.51,"rgba(0, 0, 0, 0.4)");a.addColorStop(1,"rgba(0, 0, 0, 0)");this.ctx.clip();this.ctx.fillStyle=a;this.ctx.fillRect(0,0,r,2*t.height);this.ctx.restore()}},{key:"drawOuterShadow",value:function drawOuterShadow(){var t=this.getRect();this.ctx.save();this.ctx.beginPath();this.ctx.rect(t.left,t.top,t.width,t.height);var r=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(r.x,r.y);this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);if(0===this.shadow.direction){this.ctx.translate(0,-100);i.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")");i.addColorStop(1,"rgba(0, 0, 0, 0)")}else{this.ctx.translate(-this.shadow.width,-100);i.addColorStop(0,"rgba(0, 0, 0, 0)");i.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")}this.ctx.clip();this.ctx.fillStyle=i;this.ctx.fillRect(0,0,this.shadow.width,2*t.height);this.ctx.restore()}},{key:"drawInnerShadow",value:function drawInnerShadow(){var t=this.getRect();this.ctx.save();this.ctx.beginPath();var r=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y);this.ctx.lineTo(i.topRight.x,i.topRight.y);this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y);this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y);this.ctx.translate(r.x,r.y);this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var a=3*this.shadow.width/4,o=this.ctx.createLinearGradient(0,0,a,0);if(0===this.shadow.direction){this.ctx.translate(-a,-100);o.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")");o.addColorStop(.9,"rgba(0, 0, 0, 0.05)");o.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")");o.addColorStop(0,"rgba(0, 0, 0, 0)")}else{this.ctx.translate(0,-100);o.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")");o.addColorStop(.1,"rgba(0, 0, 0, 0.05)");o.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")");o.addColorStop(1,"rgba(0, 0, 0, 0)")}this.ctx.clip();this.ctx.fillStyle=o;this.ctx.fillRect(0,0,a,2*t.height);this.ctx.restore()}},{key:"clear",value:function clear(){this.ctx.fillStyle="white";this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}]);return CanvasRender}(v),g=function(){function UI(t,r,i){var a=this;_classCallCheck(this,UI);this.touchPoint=null;this.swipeTimeout=250;this.onResize=function(){a.update()};this.onMouseDown=function(t){if(a.checkTarget(t.target)){var r=a.getMousePos(t.clientX,t.clientY);a.app.startUserTouch(r);t.preventDefault()}};this.onTouchStart=function(t){if(a.checkTarget(t.target)&&t.changedTouches.length>0){var r=t.changedTouches[0],i=a.getMousePos(r.clientX,r.clientY);a.touchPoint={point:i,time:Date.now()};setTimeout((function(){null!==a.touchPoint&&a.app.startUserTouch(i)}),a.swipeTimeout);a.app.getSettings().mobileScrollSupport||t.preventDefault()}};this.onMouseUp=function(t){var r=a.getMousePos(t.clientX,t.clientY);a.app.userStop(r)};this.onMouseMove=function(t){var r=a.getMousePos(t.clientX,t.clientY);a.app.userMove(r,!1)};this.onTouchMove=function(t){if(t.changedTouches.length>0){var r=t.changedTouches[0],i=a.getMousePos(r.clientX,r.clientY);if(a.app.getSettings().mobileScrollSupport){null!==a.touchPoint&&(Math.abs(a.touchPoint.point.x-i.x)>10||"read"!==a.app.getState())&&t.cancelable&&a.app.userMove(i,!0);"read"!==a.app.getState()&&t.preventDefault()}else a.app.userMove(i,!0)}};this.onTouchEnd=function(t){if(t.changedTouches.length>0){var r=t.changedTouches[0],i=a.getMousePos(r.clientX,r.clientY),o=!1;if(null!==a.touchPoint){var l=i.x-a.touchPoint.point.x,c=Math.abs(i.y-a.touchPoint.point.y);if(Math.abs(l)>a.swipeDistance&&c<2*a.swipeDistance&&Date.now()-a.touchPoint.time<a.swipeTimeout){l>0?a.app.flipPrev(a.touchPoint.point.y<a.app.getRender().getRect().height/2?"top":"bottom"):a.app.flipNext(a.touchPoint.point.y<a.app.getRender().getRect().height/2?"top":"bottom");o=!0}a.touchPoint=null}a.app.userStop(i,o)}};this.parentElement=t;t.classList.add("stf__parent");t.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>');this.wrapper=t.querySelector(".stf__wrapper");this.app=r;var o=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*o+"px";t.style.minHeight=i.minHeight+"px";if("fixed"===i.size){t.style.minWidth=i.width*o+"px";t.style.minHeight=i.height+"px"}if(i.autoSize){t.style.width="100%";t.style.maxWidth=2*i.maxWidth+"px"}t.style.display="block";window.addEventListener("resize",this.onResize,!1);this.swipeDistance=i.swipeDistance}_createClass(UI,[{key:"destroy",value:function destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers();this.distElement.remove();this.wrapper.remove()}},{key:"getDistElement",value:function getDistElement(){return this.distElement}},{key:"getWrapper",value:function getWrapper(){return this.wrapper}},{key:"setOrientationStyle",value:function setOrientationStyle(t){this.wrapper.classList.remove("--portrait","--landscape");if("portrait"===t){this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%");this.wrapper.classList.add("--portrait")}else{this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%");this.wrapper.classList.add("--landscape")}this.update()}},{key:"removeHandlers",value:function removeHandlers(){window.removeEventListener("resize",this.onResize);this.distElement.removeEventListener("mousedown",this.onMouseDown);this.distElement.removeEventListener("touchstart",this.onTouchStart);window.removeEventListener("mousemove",this.onMouseMove);window.removeEventListener("touchmove",this.onTouchMove);window.removeEventListener("mouseup",this.onMouseUp);window.removeEventListener("touchend",this.onTouchEnd)}},{key:"setHandlers",value:function setHandlers(){window.addEventListener("resize",this.onResize,!1);if(this.app.getSettings().useMouseEvents){this.distElement.addEventListener("mousedown",this.onMouseDown);this.distElement.addEventListener("touchstart",this.onTouchStart);window.addEventListener("mousemove",this.onMouseMove);window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport});window.addEventListener("mouseup",this.onMouseUp);window.addEventListener("touchend",this.onTouchEnd)}}},{key:"getMousePos",value:function getMousePos(t,r){var i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:r-i.top}}},{key:"checkTarget",value:function checkTarget(t){return!this.app.getSettings().clickEventForward||!["a","button"].includes(t.tagName.toLowerCase())}}]);return UI}(),m=function(t){_inherits(HTMLUI,t);var r=_createSuper(HTMLUI);function HTMLUI(t,i,a,o){var l;_classCallCheck(this,HTMLUI);(l=r.call(this,t,i,a)).wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>');l.distElement=t.querySelector(".stf__block");l.items=o;var c,u=_createForOfIteratorHelper(o);try{for(u.s();!(c=u.n()).done;){var d=c.value;l.distElement.appendChild(d)}}catch(t){u.e(t)}finally{u.f()}l.setHandlers();return l}_createClass(HTMLUI,[{key:"clear",value:function clear(){var t,r=_createForOfIteratorHelper(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.parentElement.appendChild(i)}}catch(t){r.e(t)}finally{r.f()}}},{key:"updateItems",value:function updateItems(t){this.removeHandlers();this.distElement.innerHTML="";var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.distElement.appendChild(a)}}catch(t){i.e(t)}finally{i.f()}this.items=t;this.setHandlers()}},{key:"update",value:function update(){this.app.getRender().update()}}]);return HTMLUI}(g),b=function(t){_inherits(CanvasUI,t);var r=_createSuper(CanvasUI);function CanvasUI(t,i,a){var o;_classCallCheck(this,CanvasUI);(o=r.call(this,t,i,a)).wrapper.innerHTML='<canvas class="stf__canvas"></canvas>';o.canvas=t.querySelectorAll("canvas")[0];o.distElement=o.canvas;o.resizeCanvas();o.setHandlers();return o}_createClass(CanvasUI,[{key:"resizeCanvas",value:function resizeCanvas(){var t=getComputedStyle(this.canvas),r=parseInt(t.getPropertyValue("width"),10),i=parseInt(t.getPropertyValue("height"),10);this.canvas.width=r;this.canvas.height=i}},{key:"getCanvas",value:function getCanvas(){return this.canvas}},{key:"update",value:function update(){this.resizeCanvas();this.app.getRender().update()}}]);return CanvasUI}(g),w=function(){function EventObject(){_classCallCheck(this,EventObject);this.events=new Map}_createClass(EventObject,[{key:"on",value:function on(t,r){this.events.has(t)?this.events.get(t).push(r):this.events.set(t,[r]);return this}},{key:"off",value:function off(t){this.events.delete(t)}},{key:"trigger",value:function trigger(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.events.has(t)){var a,o=_createForOfIteratorHelper(this.events.get(t));try{for(o.s();!(a=o.n()).done;){(0,a.value)({data:i,object:r})}}catch(t){o.e(t)}finally{o.f()}}}}]);return EventObject}(),P=function(t){_inherits(HTMLRender,t);var r=_createSuper(HTMLRender);function HTMLRender(t,i,a){var o;_classCallCheck(this,HTMLRender);(o=r.call(this,t,i)).outerShadow=null;o.innerShadow=null;o.hardShadow=null;o.hardInnerShadow=null;o.element=a;o.createShadows();return o}_createClass(HTMLRender,[{key:"createShadows",value:function createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>');this.outerShadow=this.element.querySelector(".stf__outerShadow");this.innerShadow=this.element.querySelector(".stf__innerShadow");this.hardShadow=this.element.querySelector(".stf__hardShadow");this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}},{key:"clearShadow",value:function clearShadow(){_get(_getPrototypeOf(HTMLRender.prototype),"clearShadow",this).call(this);this.outerShadow.style.cssText="display: none";this.innerShadow.style.cssText="display: none";this.hardShadow.style.cssText="display: none";this.hardInnerShadow.style.cssText="display: none"}},{key:"reload",value:function reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}},{key:"drawHardInnerShadow",value:function drawHardInnerShadow(){var t=this.getRect(),r=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress,i=(100-r)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);var a="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+5).toString(10),";\n            width: ").concat(i,"px;\n            height: ").concat(t.height,"px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity*r/100,") 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ").concat(t.left+t.width/2,"px;\n            transform-origin: 0 0;\n        ");a+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);";this.hardInnerShadow.style.cssText=a}},{key:"drawHardOuterShadow",value:function drawHardOuterShadow(){var t=this.getRect(),r=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;r>t.pageWidth&&(r=t.pageWidth);var i="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+4).toString(10),";\n            width: ").concat(r,"px;\n            height: ").concat(t.height,"px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%, rgba(0, 0, 0, 0) 100%);\n            left: ").concat(t.left+t.width/2,"px;\n            transform-origin: 0 0;\n        ");i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);";this.hardShadow.style.cssText=i}},{key:"drawInnerShadow",value:function drawInnerShadow(){for(var t=this.getRect(),r=3*this.shadow.width/4,i=0===this.getDirection()?r:0,a=0===this.getDirection()?"to left":"to right",o=this.convertToGlobal(this.shadow.pos),l=this.shadow.angle+3*Math.PI/2,u="polygon( ",d=0,h=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];d<h.length;d++){var p=h[d],v=1===this.getDirection()?{x:-p.x+this.shadow.pos.x,y:p.y-this.shadow.pos.y}:{x:p.x-this.shadow.pos.x,y:p.y-this.shadow.pos.y};u+=(v=c.GetRotatedPoint(v,{x:i,y:100},l)).x+"px "+v.y+"px, "}u=u.slice(0,-2);u+=")";var y="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(r,"px;\n            height: ").concat(2*t.height,"px;\n            background: linear-gradient(").concat(a,",\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ").concat(i,"px 100px;\n            transform: translate3d(").concat(o.x-i,"px, ").concat(o.y-100,"px, 0) rotate(").concat(l,"rad);\n            clip-path: ").concat(u,";\n            -webkit-clip-path: ").concat(u,";\n        ");this.innerShadow.style.cssText=y}},{key:"drawOuterShadow",value:function drawOuterShadow(){for(var t=this.getRect(),r=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,a=1===this.getDirection()?this.shadow.width:0,o=0===this.getDirection()?"to right":"to left",l="polygon( ",u=0,d=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];u<d.length;u++){var h=d[u];if(null!==h){var p=1===this.getDirection()?{x:-h.x+this.shadow.pos.x,y:h.y-this.shadow.pos.y}:{x:h.x-this.shadow.pos.x,y:h.y-this.shadow.pos.y};l+=(p=c.GetRotatedPoint(p,{x:a,y:100},i)).x+"px "+p.y+"px, "}}l=l.slice(0,-2);l+=")";var v="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(this.shadow.width,"px;\n            height: ").concat(2*t.height,"px;\n            background: linear-gradient(").concat(o,", rgba(0, 0, 0, ").concat(this.shadow.opacity,"), rgba(0, 0, 0, 0));\n            transform-origin: ").concat(a,"px 100px;\n            transform: translate3d(").concat(r.x-a,"px, ").concat(r.y-100,"px, 0) rotate(").concat(i,"rad);\n            clip-path: ").concat(l,";\n            -webkit-clip-path: ").concat(l,";\n        ");this.outerShadow.style.cssText=v}},{key:"drawLeftPage",value:function drawLeftPage(){if("portrait"!==this.orientation&&null!==this.leftPage)if(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()){if(this.flippingPage.getHardAngle()<-90){this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle());this.leftPage.draw(this.flippingPage.getDrawingDensity())}else this.leftPage.getElement().style.display="none"}else this.leftPage.simpleDraw(0)}},{key:"drawRightPage",value:function drawRightPage(){if(null!==this.rightPage)if(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()){if(this.flippingPage.getHardAngle()>90){this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle());this.rightPage.draw(this.flippingPage.getDrawingDensity())}else this.rightPage.getElement().style.display="none"}else this.rightPage.simpleDraw(1)}},{key:"drawBottomPage",value:function drawBottomPage(){if(null!==this.bottomPage){var t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;if("portrait"!==this.orientation||1!==this.direction){this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10);this.bottomPage.draw(t)}}}},{key:"drawFrame",value:function drawFrame(){if(null!==this.flippingPage){if(this.flippingPage.getHardAngle()===this.lastAngle)return;this.lastAngle=this.flippingPage.getHardAngle()}else this.lastAngle=-1234;this.clear();this.drawLeftPage();this.drawRightPage();this.drawBottomPage();if(null!=this.flippingPage){if(this.flippingPage.state.hardDrawingAngle<=90){this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.flippingPage.draw()}else this.flippingPage.getElement().style.display="none"}if(null!=this.shadow&&null!==this.flippingPage)if("soft"===this.flippingPage.getDrawingDensity()){this.drawOuterShadow();this.drawInnerShadow()}else{this.drawHardOuterShadow();this.drawHardInnerShadow()}}},{key:"clear",value:function clear(){var t,r=_createForOfIteratorHelper(this.app.getPageCollection().getPages());try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i!==this.leftPage&&i!==this.rightPage&&i!==this.flippingPage&&i!==this.bottomPage){var a=i.getElement().style;"none"!==a.display&&(a.cssText="display: none")}i.getTemporaryCopy()!==this.flippingPage&&i.hideTemporaryCopy()}}catch(t){r.e(t)}finally{r.f()}}},{key:"update",value:function update(){_get(_getPrototypeOf(HTMLRender.prototype),"update",this).call(this);null!==this.rightPage&&this.rightPage.setOrientation(1);null!==this.leftPage&&this.leftPage.setOrientation(0)}}]);return HTMLRender}(v),S=function(){function Settings(){_classCallCheck(this,Settings);this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}_createClass(Settings,[{key:"getSettings",value:function getSettings(t){var r=this._default;Object.assign(r,t);if("stretch"!==r.size&&"fixed"!==r.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(r.width<=0||r.height<=0)throw new Error("Invalid width or height");if(r.flippingTime<=0)throw new Error("Invalid flipping time");if("stretch"===r.size){r.minWidth<=0&&(r.minWidth=100);r.maxWidth<r.minWidth&&(r.maxWidth=2e3);r.minHeight<=0&&(r.minHeight=100);r.maxHeight<r.minHeight&&(r.maxHeight=2e3)}else{r.minWidth=r.width;r.maxWidth=r.width;r.minHeight=r.height;r.maxHeight=r.height}return r}}]);return Settings}();!function styleInject(t,r){void 0===r&&(r={});var i=r.insertAt;if(t&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css";"top"===i&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o);o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}");var k=function(t){_inherits(PageFlip,t);var r=_createSuper(PageFlip);function PageFlip(t,i){var a;_classCallCheck(this,PageFlip);(a=r.call(this)).isUserTouch=!1;a.isUserMove=!1;a.setting=null;a.pages=null;a.setting=(new S).getSettings(i);a.block=t;return a}_createClass(PageFlip,[{key:"destroy",value:function destroy(){this.ui.destroy()}},{key:"update",value:function update(){this.render.update();this.pages.show()}},{key:"loadFromImages",value:function loadFromImages(t){var r=this;this.ui=new b(this.block,this,this.setting);var i=this.ui.getCanvas();this.render=new y(this,this.setting,i);this.flipController=new p(this.render,this);this.pages=new l(this,this.render,t);this.pages.load();this.render.start();this.pages.show(this.setting.startPage);setTimeout((function(){r.ui.update();r.trigger("init",r,{page:r.setting.startPage,mode:r.render.getOrientation()})}),1)}},{key:"loadFromHTML",value:function loadFromHTML(t){var r=this;this.ui=new m(this.block,this,this.setting,t);this.render=new P(this,this.setting,this.ui.getDistElement());this.flipController=new p(this.render,this);this.pages=new d(this,this.render,this.ui.getDistElement(),t);this.pages.load();this.render.start();this.pages.show(this.setting.startPage);setTimeout((function(){r.ui.update();r.trigger("init",r,{page:r.setting.startPage,mode:r.render.getOrientation()})}),1)}},{key:"updateFromImages",value:function updateFromImages(t){var r=this.pages.getCurrentPageIndex();this.pages.destroy();this.pages=new l(this,this.render,t);this.pages.load();this.pages.show(r);this.trigger("update",this,{page:r,mode:this.render.getOrientation()})}},{key:"updateFromHtml",value:function updateFromHtml(t){var r=this.pages.getCurrentPageIndex();this.pages.destroy();this.pages=new d(this,this.render,this.ui.getDistElement(),t);this.pages.load();this.ui.updateItems(t);this.render.reload();this.pages.show(r);this.trigger("update",this,{page:r,mode:this.render.getOrientation()})}},{key:"clear",value:function clear(){this.pages.destroy();this.ui.clear()}},{key:"turnToPrevPage",value:function turnToPrevPage(){this.pages.showPrev()}},{key:"turnToNextPage",value:function turnToNextPage(){this.pages.showNext()}},{key:"turnToPage",value:function turnToPage(t){this.pages.show(t)}},{key:"flipNext",value:function flipNext(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipNext(t)}},{key:"flipPrev",value:function flipPrev(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipPrev(t)}},{key:"flip",value:function flip(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";this.flipController.flipToPage(t,r)}},{key:"updateState",value:function updateState(t){this.trigger("changeState",this,t)}},{key:"updatePageIndex",value:function updatePageIndex(t){this.trigger("flip",this,t)}},{key:"updateOrientation",value:function updateOrientation(t){this.ui.setOrientationStyle(t);this.update();this.trigger("changeOrientation",this,t)}},{key:"getPageCount",value:function getPageCount(){return this.pages.getPageCount()}},{key:"getCurrentPageIndex",value:function getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}},{key:"getPage",value:function getPage(t){return this.pages.getPage(t)}},{key:"getRender",value:function getRender(){return this.render}},{key:"getFlipController",value:function getFlipController(){return this.flipController}},{key:"getOrientation",value:function getOrientation(){return this.render.getOrientation()}},{key:"getBoundsRect",value:function getBoundsRect(){return this.render.getRect()}},{key:"getSettings",value:function getSettings(){return this.setting}},{key:"getUI",value:function getUI(){return this.ui}},{key:"getState",value:function getState(){return this.flipController.getState()}},{key:"getPageCollection",value:function getPageCollection(){return this.pages}},{key:"startUserTouch",value:function startUserTouch(t){this.mousePosition=t;this.isUserTouch=!0;this.isUserMove=!1}},{key:"userMove",value:function userMove(t,r){if(this.isUserTouch||r||!this.setting.showPageCorners){if(this.isUserTouch&&c.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5){this.isUserMove=!0;this.flipController.fold(t)}}else this.flipController.showCorner(t)}},{key:"userStop",value:function userStop(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isUserTouch){this.isUserTouch=!1;r||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t))}}}]);return PageFlip}(w);r.PageFlip=k},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFPageView=void 0;var a=i(4),o=i(3),l=i(36),c=i(37),u=i(5),d=i(33),h=(i(7),i(38)),p=i(39),v=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(i(40)),y=i(41),g=i(177),m=i(178),b=i(179);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var w=u.compatibilityParams.maxCanvasPixels||16777216,P=function DEFAULT_LAYER_PROPERTIES(){return null},S=new WeakMap,k=new WeakMap,x=new WeakMap,A=new WeakMap,E=new WeakMap,T=new WeakMap,C=new WeakSet,I=new WeakSet,O=new WeakSet,M=new WeakSet,L=new WeakSet,R=new WeakSet,D=new WeakSet,G=function(){function PDFPageView(t){var r,i,l,c,u=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFPageView);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,R);_classPrivateMethodInitSpec(this,L);_classPrivateMethodInitSpec(this,M);_classPrivateMethodInitSpec(this,O);_classPrivateMethodInitSpec(this,I);_classPrivateMethodInitSpec(this,C);_classPrivateFieldInitSpec(this,S,{writable:!0,value:a.AnnotationMode.ENABLE_FORMS});_classPrivateFieldInitSpec(this,k,{writable:!0,value:null});_classPrivateFieldInitSpec(this,x,{writable:!0,value:null});_classPrivateFieldInitSpec(this,A,{writable:!0,value:null});_classPrivateFieldInitSpec(this,E,{writable:!0,value:o.RenderingStates.INITIAL});_classPrivateFieldInitSpec(this,T,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});var h=t.container,p=t.defaultViewport;this.id=t.id;this.renderingId="page"+this.id;_classPrivateFieldSet(this,k,t.layerProperties||P);this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=t.scale||o.DEFAULT_SCALE;this.viewport=p;this.pdfPageRotate=p.rotation;this._optionalContentConfigPromise=t.optionalContentConfigPromise||null;this.hasRestrictedScaling=!1;this.textLayerMode=null!==(r=t.textLayerMode)&&void 0!==r?r:o.TextLayerMode.ENABLE;_classPrivateFieldSet(this,S,null!==(i=t.annotationMode)&&void 0!==i?i:a.AnnotationMode.ENABLE_FORMS);this.imageResourcesPath=t.imageResourcesPath||"";this.useOnlyCssZoom=t.useOnlyCssZoom||!1;this.isOffscreenCanvasSupported=null===(l=t.isOffscreenCanvasSupported)||void 0===l||l;this.maxCanvasPixels=t.maxCanvasPixels||w;this.pageColors=t.pageColors||null;this.eventBus=t.eventBus;this.renderingQueue=t.renderingQueue;this.renderer=t.renderer||o.RendererType.CANVAS;this.l10n=t.l10n||d.NullL10n;this.paintTask=null;this.paintedViewportMap=new WeakMap;this.resume=null;this._renderError=null;this._isStandalone=!(null!==(c=this.renderingQueue)&&void 0!==c&&c.hasViewer());this._annotationCanvasMap=null;this.annotationLayer=null;this.annotationEditorLayer=null;this.textLayer=null;this.zoomLayer=null;this.xfaLayer=null;this.structTreeLayer=null;var v=document.createElement("div");v.className="page";v.setAttribute("data-page-number",this.id);v.setAttribute("role","region");this.l10n.get("page_landmark",{page:this.id}).then((function(t){v.setAttribute("aria-label",t)}));this.div=v;_classPrivateMethodGet(this,C,_setDimensions2).call(this);null==h||h.append(v);if(this._isStandalone){null==h||h.style.setProperty("--scale-factor",this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS);var y=t.optionalContentConfigPromise;y&&y.then((function(t){y===u._optionalContentConfigPromise&&(_classPrivateFieldGet(u,T).initialOptionalContent=t.hasInitialVisibility)}))}}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(PDFPageView,[{key:"renderingState",get:function get(){return _classPrivateFieldGet(this,E)},set:function set(t){var r=this;if(t!==_classPrivateFieldGet(this,E)){_classPrivateFieldSet(this,E,t);if(_classPrivateFieldGet(this,x)){clearTimeout(_classPrivateFieldGet(this,x));_classPrivateFieldSet(this,x,null)}switch(t){case o.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case o.RenderingStates.RUNNING:this.div.classList.add("loadingIcon");_classPrivateFieldSet(this,x,setTimeout((function(){r.div.classList.add("loading");_classPrivateFieldSet(r,x,null)}),0));break;case o.RenderingStates.INITIAL:case o.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading")}}}},{key:"setPdfPage",value:function setPdfPage(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:r});_classPrivateMethodGet(this,C,_setDimensions2).call(this);this.reset()}},{key:"destroy",value:function destroy(){var t;this.reset();null===(t=this.pdfPage)||void 0===t||t.cleanup()}},{key:"_textHighlighter",get:function get(){return(0,a.shadow)(this,"_textHighlighter",new g.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:_classPrivateFieldGet(this,k).call(this).findController}))}},{key:"_resetZoomLayer",value:function _resetZoomLayer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var r=this.zoomLayer.firstChild;this.paintedViewportMap.delete(r);r.width=0;r.height=0;t&&this.zoomLayer.remove();this.zoomLayer=null}}},{key:"reset",value:function reset(){var t,r,i,a,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=c.keepZoomLayer,d=void 0!==u&&u,h=c.keepAnnotationLayer,p=void 0!==h&&h,v=c.keepAnnotationEditorLayer,y=void 0!==v&&v,g=c.keepXfaLayer,m=void 0!==g&&g,b=c.keepTextLayer,w=void 0!==b&&b;this.cancelRendering({keepAnnotationLayer:p,keepAnnotationEditorLayer:y,keepXfaLayer:m,keepTextLayer:w});this.renderingState=o.RenderingStates.INITIAL;for(var P=this.div,S=P.childNodes,k=d&&this.zoomLayer||null,x=p&&(null===(t=this.annotationLayer)||void 0===t?void 0:t.div)||null,A=y&&(null===(r=this.annotationEditorLayer)||void 0===r?void 0:r.div)||null,E=m&&(null===(i=this.xfaLayer)||void 0===i?void 0:i.div)||null,T=w&&(null===(a=this.textLayer)||void 0===a?void 0:a.div)||null,C=S.length-1;C>=0;C--){var I=S[C];switch(I){case k:case x:case A:case E:case T:continue}I.remove()}P.removeAttribute("data-loaded");x&&this.annotationLayer.hide();A&&this.annotationEditorLayer.hide();E&&this.xfaLayer.hide();T&&this.textLayer.hide();null===(l=this.structTreeLayer)||void 0===l||l.hide();if(!k){if(this.canvas){this.paintedViewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}if(this.svg){this.paintedViewportMap.delete(this.svg);delete this.svg}}},{key:"update",value:function update(t){var r=this,i=t.scale,l=void 0===i?0:i,c=t.rotation,u=void 0===c?null:c,d=t.optionalContentConfigPromise,h=void 0===d?null:d,p=t.drawingDelay,v=void 0===p?-1:p;this.scale=l||this.scale;"number"==typeof u&&(this.rotation=u);if(h instanceof Promise){this._optionalContentConfigPromise=h;h.then((function(t){h===r._optionalContentConfigPromise&&(_classPrivateFieldGet(r,T).initialOptionalContent=t.hasInitialVisibility)}))}var y=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:y});_classPrivateMethodGet(this,C,_setDimensions2).call(this);if(this._isStandalone){var g;null===(g=this.div.parentNode)||void 0===g||g.style.setProperty("--scale-factor",this.viewport.scale)}if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!0});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError})}else{var m=!1;if(this.canvas&&this.maxCanvasPixels>0){var b=this.outputScale;(Math.floor(this.viewport.width)*b.sx|0)*(Math.floor(this.viewport.height)*b.sy|0)>this.maxCanvasPixels&&(m=!0)}var w=this.useOnlyCssZoom||this.hasRestrictedScaling&&m,P=!w&&v>=0&&v<1e3;if(this.canvas){if(P||w){if(P&&this.renderingState!==o.RenderingStates.FINISHED){this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:v});this.renderingState=o.RenderingStates.FINISHED}this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!P,hideTextLayer:P});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild});this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}}},{key:"cancelRendering",value:function cancelRendering(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.keepAnnotationLayer,i=void 0!==r&&r,a=t.keepAnnotationEditorLayer,o=void 0!==a&&a,l=t.keepXfaLayer,c=void 0!==l&&l,u=t.keepTextLayer,d=void 0!==u&&u,h=t.cancelExtraDelay,p=void 0===h?0:h;if(this.paintTask){this.paintTask.cancel(p);this.paintTask=null}this.resume=null;if(this.textLayer&&(!d||!this.textLayer.div)){this.textLayer.cancel();this.textLayer=null}this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null);if(this.annotationLayer&&(!i||!this.annotationLayer.div)){this.annotationLayer.cancel();this.annotationLayer=null;this._annotationCanvasMap=null}if(this.annotationEditorLayer&&(!o||!this.annotationEditorLayer.div)){this.annotationEditorLayer.cancel();this.annotationEditorLayer=null}if(this.xfaLayer&&(!c||!this.xfaLayer.div)){var v;this.xfaLayer.cancel();this.xfaLayer=null;null===(v=this._textHighlighter)||void 0===v||v.disable()}}},{key:"cssTransform",value:function cssTransform(t){var r=t.target,i=t.redrawAnnotationLayer,a=void 0!==i&&i,o=t.redrawAnnotationEditorLayer,l=void 0!==o&&o,c=t.redrawXfaLayer,u=void 0!==c&&c,d=t.redrawTextLayer,h=void 0!==d&&d,p=t.hideTextLayer,v=void 0!==p&&p;if(r instanceof HTMLCanvasElement){if(!r.hasAttribute("zooming")){r.setAttribute("zooming",!0);var y=r.style;y.width=y.height=""}}else{var g=this.div,m=this.viewport,b=m.width,w=m.height;r.style.width=r.parentNode.style.width=g.style.width=Math.floor(b)+"px";r.style.height=r.parentNode.style.height=g.style.height=Math.floor(w)+"px"}var P=this.paintedViewportMap.get(r);if(this.viewport!==P){var S=this.viewport.rotation-P.rotation,k=Math.abs(S),x=1,A=1;if(90===k||270===k){var E=this.viewport,T=E.width,C=E.height;x=C/T;A=T/C}r.style.transform="rotate(".concat(S,"deg) scale(").concat(x,", ").concat(A,")")}a&&this.annotationLayer&&_classPrivateMethodGet(this,I,_renderAnnotationLayer2).call(this);l&&this.annotationEditorLayer&&_classPrivateMethodGet(this,O,_renderAnnotationEditorLayer2).call(this);u&&this.xfaLayer&&_classPrivateMethodGet(this,M,_renderXfaLayer2).call(this);if(this.textLayer)if(v){var R;this.textLayer.hide();null===(R=this.structTreeLayer)||void 0===R||R.hide()}else h&&_classPrivateMethodGet(this,L,_renderTextLayer2).call(this)}},{key:"width",get:function get(){return this.viewport.width}},{key:"height",get:function get(){return this.viewport.height}},{key:"getPagePoint",value:function getPagePoint(t,r){return this.viewport.convertToPdfPoint(t,r)}},{key:"draw",value:function draw(){var t=this;if(this.renderingState!==o.RenderingStates.INITIAL){globalThis.ngxConsole.error("Must be in new state before drawing");this.reset()}var r=this.div,i=this.pdfPage;if(!i){this.renderingState=o.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=o.RenderingStates.RUNNING;var u=document.createElement("div");u.classList.add("canvasWrapper");r.append(u);if(!this.textLayer&&this.textLayerMode!==o.TextLayerMode.DISABLE&&!i.isPureXfa){this._accessibilityManager||(this._accessibilityManager=new p.TextAccessibilityManager);this.textLayer=new m.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported});r.append(this.textLayer.div)}if(!this.annotationLayer&&_classPrivateFieldGet(this,S)!==a.AnnotationMode.DISABLE){var d=_classPrivateFieldGet(this,k).call(this),h=d.annotationStorage,v=d.downloadManager,y=d.enableScripting,g=d.fieldObjectsPromise,w=d.hasJSActionsPromise,P=d.linkService;this._annotationCanvasMap||(this._annotationCanvasMap=new Map);this.annotationLayer=new c.AnnotationLayerBuilder({pageDiv:r,pdfPage:i,annotationStorage:h,imageResourcesPath:this.imageResourcesPath,renderForms:_classPrivateFieldGet(this,S)===a.AnnotationMode.ENABLE_FORMS,linkService:P,downloadManager:v,l10n:this.l10n,enableScripting:y,hasJSActionsPromise:w,fieldObjectsPromise:g,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}var x=null;this.renderingQueue&&(x=function renderContinueCallback(r){if(t.renderingQueue.isHighestPriority(t))r();else{t.renderingState=o.RenderingStates.PAUSED;t.resume=function(){t.renderingState=o.RenderingStates.RUNNING;r()}}});var A=function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var r,i=arguments;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r=i.length>0&&void 0!==i[0]?i[0]:null;E===t.paintTask&&(t.paintTask=null);if(!(r instanceof a.RenderingCancelledException)){l.next=5;break}t._renderError=null;return l.abrupt("return");case 5:t._renderError=r;t.renderingState=o.RenderingStates.FINISHED;t._resetZoomLayer(!0);_classPrivateFieldGet(t,T).regularAnnotations=!E.separateAnnots;t.eventBus.dispatch("pagerendered",{source:t,pageNumber:t.id,cssTransform:!1,timestamp:performance.now(),error:t._renderError});if(!r){l.next=12;break}throw r;case 12:case"end":return l.stop()}}),_callee)})));return function finishPaintTask(){return r.apply(this,arguments)}}(),E=this.renderer===o.RendererType.SVG?this.paintOnSvg(u):this.paintOnCanvas(u);E.onRenderContinue=x;this.paintTask=E;var C=E.promise.then((function(){return A(null).then(_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var a,o;return _regeneratorRuntime().wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:_classPrivateMethodGet(t,L,_renderTextLayer2).call(t);if(!t.annotationLayer){c.next=4;break}c.next=4;return _classPrivateMethodGet(t,I,_renderAnnotationLayer2).call(t);case 4:if(t.annotationEditorLayer){c.next=9;break}a=_classPrivateFieldGet(t,k).call(t);if(o=a.annotationEditorUIManager){c.next=8;break}return c.abrupt("return");case 8:t.annotationEditorLayer=new l.AnnotationEditorLayerBuilder({uiManager:o,pageDiv:r,pdfPage:i,l10n:t.l10n,accessibilityManager:t._accessibilityManager});case 9:_classPrivateMethodGet(t,O,_renderAnnotationEditorLayer2).call(t);case 10:case"end":return c.stop()}}),_callee2)}))))}),(function(t){return A(t)}));if(i.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&r.append(this.xfaLayer.div);else{var R=_classPrivateFieldGet(this,k).call(this),D=R.annotationStorage,G=R.linkService;this.xfaLayer=new b.XfaLayerBuilder({pageDiv:r,pdfPage:i,annotationStorage:D,linkService:G})}_classPrivateMethodGet(this,M,_renderXfaLayer2).call(this)}r.setAttribute("data-loaded",!0);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return C}},{key:"paintOnCanvas",value:function paintOnCanvas(t){var r,i,l=(0,a.createPromiseCapability)(),c={promise:l.promise,onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;D.cancel(t)},get separateAnnots(){return D.separateAnnots}},u=this.viewport,d=u.width,h=u.height,p=document.createElement("canvas");p.setAttribute("role","presentation");p.hidden=!0;var g=!0,m=!(null===(r=this.pageColors)||void 0===r||!r.background||null===(i=this.pageColors)||void 0===i||!i.foreground),b=function showCanvas(t){if(g&&(!m||t)){p.hidden=!1;g=!1}};t.append(p);this.canvas=p;var w=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0,alpha:!1}:{alpha:!1},P=p.getContext("2d",w),k=this.outputScale=new o.OutputScale;if(this.useOnlyCssZoom){var x=u.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});k.sx*=x.width/d;k.sy*=x.height/h}if(this.maxCanvasPixels>0){var A=d*h,E=Math.sqrt(this.maxCanvasPixels/A);if(k.sx>E||k.sy>E){k.sx=E;k.sy=E;this.hasRestrictedScaling=!0}else this.hasRestrictedScaling=!1}var T=(0,o.approximateFraction)(k.sx),C=(0,o.approximateFraction)(k.sy);d=(0,o.roundToDivide)(d*k.sx,T[0]);h=(0,o.roundToDivide)(h*k.sy,C[0]);var I=1;if((d>=4096||h>=4096)&&(this.maxWidth||!v.default.test({width:d,height:h}))){var O=this.determineMaxDimensions();if((I=Math.max(d/O,h/O))>1){var M=Math.floor(100*this.scale/I)/100;I=this.scale/M;u.width/=I;u.height/=I;(0,y.warn)("Page ".concat(this.id,": Reduced the maximum zoom to ").concat(M," because the browser can't render larger canvases."))}else I=1}p.width=(0,o.roundToDivide)(u.width*k.sx,T[0]);p.height=(0,o.roundToDivide)(u.height*k.sy,C[0]);var L=p.style;L.width=(0,o.roundToDivide)(u.width*I,T[1])+"px";L.height=(0,o.roundToDivide)(u.height*I,C[1])+"px";this.paintedViewportMap.set(p,u);var R={canvasContext:P,transform:k.scaled?[k.sx,0,0,k.sy,0,0]:null,viewport:u,annotationMode:_classPrivateFieldGet(this,S),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},D=this.pdfPage.render(R);D.onContinue=function(t){b(!1);c.onRenderContinue?c.onRenderContinue(t):t()};D.promise.then((function(){b(!0);l.resolve()}),(function(t){t instanceof a.RenderingCancelledException||b(!0);l.reject(t)}));return c}},{key:"paintOnSvg",value:function paintOnSvg(t){var r=this,i=!1,l=function ensureNotCancelled(){if(i)throw new a.RenderingCancelledException("Rendering cancelled, page ".concat(r.id),"svg")},c=this.pdfPage,u=this.viewport.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:c.getOperatorList({annotationMode:_classPrivateFieldGet(this,S)}).then((function(i){l();return new a.SVGGraphics(c.commonObjs,c.objs).getSVG(i,u).then((function(i){l();r.svg=i;r.paintedViewportMap.set(i,u);i.style.width=t.style.width;i.style.height=t.style.height;r.renderingState=o.RenderingStates.FINISHED;t.append(i)}))})),onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){i=!0},get separateAnnots(){return!1}}}},{key:"setPageLabel",value:function setPageLabel(t){this.pageLabel="string"==typeof t?t:null;null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"determineMaxDimensions",value:function determineMaxDimensions(){if(this.maxWidth)return this.maxWidth;for(var t=0,r=[4096,8192,10836,11180,11402,14188,16384];t<r.length;t++){var i=r[t];if(!v.default.test({width:i+1,height:i+1})){this.maxWidth=i;return this.maxWidth}}return 16384}},{key:"thumbnailCanvas",get:function get(){var t=_classPrivateFieldGet(this,T),r=t.initialOptionalContent,i=t.regularAnnotations;return r&&i?this.canvas:null}}]);return PDFPageView}();r.PDFPageView=G;function _setDimensions2(){var t=this.viewport;if(this.pdfPage){if(_classPrivateFieldGet(this,A)===t.rotation)return;_classPrivateFieldSet(this,A,t.rotation)}(0,a.setLayerDimensions)(this.div,t,!0,!1)}function _renderAnnotationLayer2(){return _renderAnnotationLayer3.apply(this,arguments)}function _renderAnnotationLayer3(){return(_renderAnnotationLayer3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t;return _regeneratorRuntime().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:t=null;r.prev=1;r.next=4;return this.annotationLayer.render(this.viewport,"display");case 4:r.next=10;break;case 6:r.prev=6;r.t0=r.catch(1);console.error('#renderAnnotationLayer: "'.concat(r.t0,'".'));t=r.t0;case 10:r.prev=10;this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t});return r.finish(10);case 13:case"end":return r.stop()}}),_callee3,this,[[1,6,10,13]])})))).apply(this,arguments)}function _renderAnnotationEditorLayer2(){return _renderAnnotationEditorLayer3.apply(this,arguments)}function _renderAnnotationEditorLayer3(){return(_renderAnnotationEditorLayer3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var t;return _regeneratorRuntime().wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:t=null;r.prev=1;r.next=4;return this.annotationEditorLayer.render(this.viewport,"display");case 4:r.next=10;break;case 6:r.prev=6;r.t0=r.catch(1);console.error('#renderAnnotationEditorLayer: "'.concat(r.t0,'".'));t=r.t0;case 10:r.prev=10;this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:t});return r.finish(10);case 13:case"end":return r.stop()}}),_callee4,this,[[1,6,10,13]])})))).apply(this,arguments)}function _renderXfaLayer2(){return _renderXfaLayer3.apply(this,arguments)}function _renderXfaLayer3(){return(_renderXfaLayer3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var t,r;return _regeneratorRuntime().wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:t=null;i.prev=1;i.next=4;return this.xfaLayer.render(this.viewport,"display");case 4:null!=(r=i.sent)&&r.textDivs&&this._textHighlighter&&_classPrivateMethodGet(this,D,_buildXfaTextContentItems2).call(this,r.textDivs);i.next=12;break;case 8:i.prev=8;i.t0=i.catch(1);console.error('#renderXfaLayer: "'.concat(i.t0,'".'));t=i.t0;case 12:i.prev=12;this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:t});return i.finish(12);case 15:case"end":return i.stop()}}),_callee5,this,[[1,8,12,15]])})))).apply(this,arguments)}function _renderTextLayer2(){return _renderTextLayer3.apply(this,arguments)}function _renderTextLayer3(){return(_renderTextLayer3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){var t,r,i,o,l;return _regeneratorRuntime().wrap((function _callee6$(c){for(;;)switch(c.prev=c.next){case 0:t=this.pdfPage,r=this.textLayer,i=this.viewport;if(r){c.next=3;break}return c.abrupt("return");case 3:o=null;c.prev=4;if(!r.renderingDone){l=t.streamTextContent({includeMarkedContent:!0});r.setTextContentSource(l)}c.next=8;return r.render(i);case 8:c.next=16;break;case 10:c.prev=10;c.t0=c.catch(4);if(!(c.t0 instanceof a.AbortException)){c.next=14;break}return c.abrupt("return");case 14:console.error('#renderTextLayer: "'.concat(c.t0,'".'));o=c.t0;case 16:this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:r.numTextDivs,error:o});_classPrivateMethodGet(this,R,_renderStructTreeLayer2).call(this);case 18:case"end":return c.stop()}}),_callee6,this,[[4,10]])})))).apply(this,arguments)}function _renderStructTreeLayer2(){return _renderStructTreeLayer3.apply(this,arguments)}function _renderStructTreeLayer3(){return(_renderStructTreeLayer3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(){var t,r,i,a,o;return _regeneratorRuntime().wrap((function _callee7$(l){for(;;)switch(l.prev=l.next){case 0:if(this.textLayer){l.next=2;break}return l.abrupt("return");case 2:this.structTreeLayer||(this.structTreeLayer=new h.StructTreeLayerBuilder);l.next=5;return this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree();case 5:i=l.sent;(a=null===(t=this.structTreeLayer)||void 0===t?void 0:t.render(i))&&(null===(o=this.canvas)||void 0===o||o.append(a));null===(r=this.structTreeLayer)||void 0===r||r.show();case 9:case"end":return l.stop()}}),_callee7,this)})))).apply(this,arguments)}function _buildXfaTextContentItems2(t){return _buildXfaTextContentItems3.apply(this,arguments)}function _buildXfaTextContentItems3(){return(_buildXfaTextContentItems3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee8(t){var r,i,a,o,l;return _regeneratorRuntime().wrap((function _callee8$(c){for(;;)switch(c.prev=c.next){case 0:c.next=2;return this.pdfPage.getTextContent();case 2:r=c.sent;i=[];a=_createForOfIteratorHelper(r.items);try{for(a.s();!(o=a.n()).done;){l=o.value;i.push(l.str)}}catch(t){a.e(t)}finally{a.f()}this._textHighlighter.setTextMapping(t,i);this._textHighlighter.enable();case 8:case"end":return c.stop()}}),_callee8,this)})))).apply(this,arguments)}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditorLayerBuilder=void 0;var a=i(4),o=i(33);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var l=new WeakMap,c=function(){function AnnotationEditorLayerBuilder(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditorLayerBuilder);_classPrivateFieldInitSpec(this,l,{writable:!0,value:void 0});this.pageDiv=t.pageDiv;this.pdfPage=t.pdfPage;this.accessibilityManager=t.accessibilityManager;this.l10n=t.l10n||o.NullL10n;this.annotationEditorLayer=null;this.div=null;this._cancelled=!1;_classPrivateFieldSet(this,l,t.uiManager)}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditorLayerBuilder,[{key:"render",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,o,c,u=arguments;return _regeneratorRuntime().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:if("display"===(r=u.length>1&&void 0!==u[1]?u[1]:"display")){d.next=3;break}return d.abrupt("return");case 3:if(!this._cancelled){d.next=5;break}return d.abrupt("return");case 5:i=t.clone({dontFlip:!0});if(!this.div){d.next=10;break}this.annotationEditorLayer.update({viewport:i});this.show();return d.abrupt("return");case 10:(o=this.div=document.createElement("div")).className="annotationEditorLayer";o.tabIndex=0;o.hidden=!0;this.pageDiv.append(o);this.annotationEditorLayer=new a.AnnotationEditorLayer({uiManager:(h=this,p=l,function _classApplyDescriptorGet(t,r){return r.get?r.get.call(t):r.value}(h,_classExtractFieldDescriptor(h,p,"get"))),div:o,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:i});c={viewport:i,div:o,annotations:null,intent:r};this.annotationEditorLayer.render(c);this.show();case 19:case"end":return d.stop()}var h,p}),_callee,this)}))),function render(r){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(){this._cancelled=!0;if(this.div){this.pageDiv=null;this.annotationEditorLayer.destroy();this.div.remove()}}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}},{key:"show",value:function show(){this.div&&!this.annotationEditorLayer.isEmpty&&(this.div.hidden=!1)}}]);var t;return AnnotationEditorLayerBuilder}();r.AnnotationEditorLayerBuilder=c},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationLayerBuilder=void 0;var a=i(4),o=i(33),l=i(3);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var c=new WeakMap,u=new WeakMap,d=new WeakSet,h=function(){function AnnotationLayerBuilder(t){var r=t.pageDiv,i=t.pdfPage,a=t.linkService,l=t.downloadManager,h=t.annotationStorage,p=void 0===h?null:h,v=t.imageResourcesPath,y=void 0===v?"":v,g=t.renderForms,m=void 0===g||g,b=t.l10n,w=void 0===b?o.NullL10n:b,P=t.enableScripting,S=void 0!==P&&P,k=t.hasJSActionsPromise,x=void 0===k?null:k,A=t.fieldObjectsPromise,E=void 0===A?null:A,T=t.annotationCanvasMap,C=void 0===T?null:T,I=t.accessibilityManager,O=void 0===I?null:I;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationLayerBuilder);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,d);_classPrivateFieldInitSpec(this,c,{writable:!0,value:0});_classPrivateFieldInitSpec(this,u,{writable:!0,value:null});this.pageDiv=r;this.pdfPage=i;this.linkService=a;this.downloadManager=l;this.imageResourcesPath=y;this.renderForms=m;this.l10n=w;this.annotationStorage=p;this.enableScripting=S;this._hasJSActionsPromise=x||Promise.resolve(!1);this._fieldObjectsPromise=E||Promise.resolve(null);this._annotationCanvasMap=C;this._accessibilityManager=O;this.div=null;this._cancelled=!1;this._eventBus=a.eventBus}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationLayerBuilder,[{key:"render",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,o,h,p,v,y,g=this,m=arguments;return _regeneratorRuntime().wrap((function _callee$(b){for(;;)switch(b.prev=b.next){case 0:r=m.length>1&&void 0!==m[1]?m[1]:"display";if(!this.div){b.next=6;break}if(!this._cancelled&&0!==_classPrivateFieldGet(this,c)){b.next=4;break}return b.abrupt("return");case 4:a.AnnotationLayer.update({viewport:t.clone({dontFlip:!0}),div:this.div,annotationCanvasMap:this._annotationCanvasMap});return b.abrupt("return");case 6:b.next=8;return Promise.all([this.pdfPage.getAnnotations({intent:r}),this._hasJSActionsPromise,this._fieldObjectsPromise]);case 8:i=b.sent;o=_slicedToArray(i,3);h=o[0];p=o[1];v=o[2];if(!this._cancelled){b.next=15;break}return b.abrupt("return");case 15:_classPrivateFieldSet(this,c,h.length);this.div=document.createElement("div");this.div.className="annotationLayer";this.pageDiv.append(this.div);if(0!==_classPrivateFieldGet(this,c)){b.next=22;break}this.hide();return b.abrupt("return");case 22:a.AnnotationLayer.render({viewport:t.clone({dontFlip:!0}),div:this.div,annotations:h,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:p,fieldObjects:v,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager});this.l10n.translate(this.div);this.linkService.isInPresentationMode&&_classPrivateMethodGet(this,d,_updatePresentationModeState2).call(this,l.PresentationModeState.FULLSCREEN);if(!_classPrivateFieldGet(this,u)){_classPrivateFieldSet(this,u,(function(t){_classPrivateMethodGet(g,d,_updatePresentationModeState2).call(g,t.state)}));null===(y=this._eventBus)||void 0===y||y._on("presentationmodechanged",_classPrivateFieldGet(this,u))}case 26:case"end":return b.stop()}}),_callee,this)}))),function render(r){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(){this._cancelled=!0;if(_classPrivateFieldGet(this,u)){var t;null===(t=this._eventBus)||void 0===t||t._off("presentationmodechanged",_classPrivateFieldGet(this,u));_classPrivateFieldSet(this,u,null)}}},{key:"hide",value:function hide(){this.div&&(document.querySelector("[data-pdfjsprinting=true]")||(this.div.hidden=!0))}}]);var t;return AnnotationLayerBuilder}();r.AnnotationLayerBuilder=h;function _updatePresentationModeState2(t){if(this.div){var r=!1;switch(t){case l.PresentationModeState.FULLSCREEN:r=!0;break;case l.PresentationModeState.NORMAL:break;default:return}var i,a=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}(this.div.childNodes);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.hasAttribute("data-internal-link")||(o.inert=r)}}catch(t){a.e(t)}finally{a.f()}}}},(t,r)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.StructTreeLayerBuilder=void 0;function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var i={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},a=/^H(\d+)$/,o=new WeakMap,l=new WeakSet,c=new WeakSet,u=function(){function StructTreeLayerBuilder(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,StructTreeLayerBuilder);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);!function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}(this,o,{writable:!0,value:void 0})}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(StructTreeLayerBuilder,[{key:"renderingDone",get:function get(){return void 0!==_classPrivateFieldGet(this,o)}},{key:"render",value:function render(t){if(void 0!==_classPrivateFieldGet(this,o))return _classPrivateFieldGet(this,o);var r=_classPrivateMethodGet(this,c,_walk2).call(this,t);null==r||r.classList.add("structTree");return _classPrivateFieldSet(this,o,r)}},{key:"hide",value:function hide(){_classPrivateFieldGet(this,o)&&!_classPrivateFieldGet(this,o).hidden&&(_classPrivateFieldGet(this,o).hidden=!0)}},{key:"show",value:function show(){var t;null!==(t=_classPrivateFieldGet(this,o))&&void 0!==t&&t.hidden&&(_classPrivateFieldGet(this,o).hidden=!1)}}]);return StructTreeLayerBuilder}();r.StructTreeLayerBuilder=u;function _setAttributes2(t,r){void 0!==t.alt&&r.setAttribute("aria-label",t.alt);void 0!==t.id&&r.setAttribute("aria-owns",t.id);void 0!==t.lang&&r.setAttribute("lang",t.lang)}function _walk2(t){if(!t)return null;var r=document.createElement("span");if("role"in t){var o=t.role,u=o.match(a);if(u){r.setAttribute("role","heading");r.setAttribute("aria-level",u[1])}else i[o]&&r.setAttribute("role",i[o])}_classPrivateMethodGet(this,l,_setAttributes2).call(this,t,r);if(t.children)if(1===t.children.length&&"id"in t.children[0])_classPrivateMethodGet(this,l,_setAttributes2).call(this,t.children[0],r);else{var d,h=_createForOfIteratorHelper(t.children);try{for(h.s();!(d=h.n()).done;){var p=d.value;r.append(_classPrivateMethodGet(this,c,_walk2).call(this,p))}}catch(t){h.e(t)}finally{h.f()}}return r}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.TextAccessibilityManager=void 0;var a=i(3);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function _classStaticPrivateMethodGet(t,r,i){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakSet,h=function(){function TextAccessibilityManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextAccessibilityManager);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,d);_classPrivateFieldInitSpec(this,o,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,l,{writable:!0,value:null});_classPrivateFieldInitSpec(this,c,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,u,{writable:!0,value:new Map})}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextAccessibilityManager,[{key:"setTextMapping",value:function setTextMapping(t){_classPrivateFieldSet(this,l,t)}},{key:"enable",value:function enable(){if(_classPrivateFieldGet(this,o))throw new Error("TextAccessibilityManager is already enabled.");if(!_classPrivateFieldGet(this,l))throw new Error("Text divs and strings have not been set.");_classPrivateFieldSet(this,o,!0);_classPrivateFieldSet(this,l,_classPrivateFieldGet(this,l).slice());_classPrivateFieldGet(this,l).sort(_classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions));if(_classPrivateFieldGet(this,c).size>0){var t,r=_classPrivateFieldGet(this,l),i=_createForOfIteratorHelper(_classPrivateFieldGet(this,c));try{for(i.s();!(t=i.n()).done;){var a=_slicedToArray(t.value,2),h=a[0],p=a[1];document.getElementById(h)?_classPrivateMethodGet(this,d,_addIdToAriaOwns2).call(this,h,r[p]):_classPrivateFieldGet(this,c).delete(h)}}catch(t){i.e(t)}finally{i.f()}}var v,y=_createForOfIteratorHelper(_classPrivateFieldGet(this,u));try{for(y.s();!(v=y.n()).done;){var g=_slicedToArray(v.value,2),m=g[0],b=g[1];this.addPointerInTextLayer(m,b)}}catch(t){y.e(t)}finally{y.f()}_classPrivateFieldGet(this,u).clear()}},{key:"disable",value:function disable(){if(_classPrivateFieldGet(this,o)){_classPrivateFieldGet(this,u).clear();_classPrivateFieldSet(this,l,null);_classPrivateFieldSet(this,o,!1)}}},{key:"removePointerInTextLayer",value:function removePointerInTextLayer(t){var r;if(_classPrivateFieldGet(this,o)){var i=_classPrivateFieldGet(this,l);if(i&&0!==i.length){var a=t.id,d=_classPrivateFieldGet(this,c).get(a);if(void 0!==d){var h=i[d];_classPrivateFieldGet(this,c).delete(a);var p=h.getAttribute("aria-owns");if(null!==(r=p)&&void 0!==r&&r.includes(a))if(p=p.split(" ").filter((function(t){return t!==a})).join(" "))h.setAttribute("aria-owns",p);else{h.removeAttribute("aria-owns");h.setAttribute("role","presentation")}}}}else _classPrivateFieldGet(this,u).delete(t)}},{key:"addPointerInTextLayer",value:function addPointerInTextLayer(t,r){var i=t.id;if(i)if(_classPrivateFieldGet(this,o)){r&&this.removePointerInTextLayer(t);var h=_classPrivateFieldGet(this,l);if(h&&0!==h.length){var p=(0,a.binarySearchFirstItem)(h,(function(r){return _classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions).call(TextAccessibilityManager,t,r)<0})),v=Math.max(0,p-1);_classPrivateMethodGet(this,d,_addIdToAriaOwns2).call(this,i,h[v]);_classPrivateFieldGet(this,c).set(i,v)}}else _classPrivateFieldGet(this,u).set(t,r)}},{key:"moveElementInDOM",value:function moveElementInDOM(t,r,i,o){this.addPointerInTextLayer(i,o);if(t.hasChildNodes()){var l=Array.from(t.childNodes).filter((function(t){return t!==r}));if(0!==l.length){var c=i||r,u=(0,a.binarySearchFirstItem)(l,(function(t){return _classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions).call(TextAccessibilityManager,c,t)<0}));0===u?l[0].before(r):l[u-1].after(r)}}else t.append(r)}}]);return TextAccessibilityManager}();r.TextAccessibilityManager=h;function _compareElementPositions(t,r){var i=t.getBoundingClientRect(),a=r.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===a.width&&0===a.height)return-1;var o=i.y,l=i.y+i.height,c=i.y+i.height/2,u=a.y,d=a.y+a.height,h=a.y+a.height/2;return c<=u&&h>=l?-1:h<=o&&c>=d?1:i.x+i.width/2-(a.x+a.width/2)}function _addIdToAriaOwns2(t,r){var i=r.getAttribute("aria-owns");null!=i&&i.includes(t)||r.setAttribute("aria-owns",i?"".concat(i," ").concat(t):t);r.removeAttribute("role")}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread2(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){(r=function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _objectWithoutProperties(t,r){if(null==t)return{};var i,a,o=function _objectWithoutPropertiesLoose(t,r){if(null==t)return{};var i,a,o={},l=Object.keys(t);for(a=0;a<l.length;a++){i=l[a];r.indexOf(i)>=0||(o[i]=t[i])}return o}(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++){i=l[a];r.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}}return o}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function canvasTest(t){var r,i,a=t.sizes.shift(),o=Math.max(Math.ceil(a[0]),1),l=Math.max(Math.ceil(a[1]),1),c=[o-1,l-1,1,1],u=Date.now(),d="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;if(d){r=new OffscreenCanvas(1,1);i=new OffscreenCanvas(o,l)}else{(r=document.createElement("canvas")).width=1;r.height=1;(i=document.createElement("canvas")).width=o;i.height=l}var h=r.getContext("2d"),p=i.getContext("2d");if(p){p.fillRect.apply(p,c);h.drawImage(i,o-1,l-1,1,1,0,0,1,1)}var v=h&&0!==h.getImageData(0,0,1,1).data[3],y=Date.now()-u;[r,i].forEach((function(t){t.height=0;t.width=0}));if(d){postMessage({width:o,height:l,benchmark:y,isTestPass:v});!v&&t.sizes.length&&canvasTest(t)}else if(v)t.onSuccess(o,l,y);else{t.onError(o,l,y);t.sizes.length&&canvasTest(t)}return v}var i=[16384,14188,11402,11180,10836,8192,4096,1],a=[8388607,65535,32767,16384,8192,4096,1],o=[4194303,65535,32767,16384,8192,4096,1],l=["onError","onSuccess"],c={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},u={};function createSizesArray(t){var r=t.width===t.height,i=1===t.height,a=1===t.width,o=[];if(t.width&&t.height)for(var l=t.min||c.min,u=t.step||c.step,d=Math.max(t.width,t.height);d>=l;){var h=r||i?d:1,p=r||a?d:1;o.push([h,p]);d-=u}else t.sizes.forEach((function(t){var l=r||i?t:1,c=r||a?t:1;o.push([l,c])}));return o}function handleMethod(t){var r=window&&"HTMLCanvasElement"in window,i=window&&"OffscreenCanvas"in window,a=Date.now(),o=t.onError,c=t.onSuccess,d=_objectWithoutProperties(t,l),h=null;if(!r)return!1;if(t.useWorker&&i){var p="\n            var canvasTest = ".concat(canvasTest.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),v=new Blob([p],{type:"application/javascript"}),y=URL.createObjectURL(v);h=new Worker(y);URL.revokeObjectURL(y);h.onmessage=function(t){var r=t.data,i=r.width,o=r.height,l=r.benchmark;if(r.isTestPass){u[a].onSuccess(i,o,l);delete u[a]}else u[a].onError(i,o,l)}}if(t.usePromise)return new Promise((function(r,i){var l=_objectSpread2(_objectSpread2({},t),{},{onError:function onError(r,a,l){var c;if(0===t.sizes.length)c=!0;else{var u=_slicedToArray(t.sizes.slice(-1),1),d=_slicedToArray(u[0],2),h=d[0],p=d[1];c=r===h&&a===p}o(r,a,l);c&&i({width:r,height:a,benchmark:l})},onSuccess:function onSuccess(t,i,a){c(t,i,a);r({width:t,height:i,benchmark:a})}});if(h){var p=l.onError,v=l.onSuccess;u[a]={onError:p,onSuccess:v};h.postMessage(d)}else canvasTest(l)}));if(!h)return canvasTest(t);u[a]={onError:o,onSuccess:c};h.postMessage(d)}var d={maxArea:function maxArea(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=createSizesArray({width:t.max,height:t.max,min:t.min,step:t.step,sizes:_toConsumableArray(i)});return handleMethod(_objectSpread2(_objectSpread2(_objectSpread2({},c),t),{},{sizes:r}))},maxHeight:function maxHeight(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=createSizesArray({width:1,height:t.max,min:t.min,step:t.step,sizes:_toConsumableArray(a)});return handleMethod(_objectSpread2(_objectSpread2(_objectSpread2({},c),t),{},{sizes:r}))},maxWidth:function maxWidth(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=createSizesArray({width:t.max,height:1,min:t.min,step:t.step,sizes:_toConsumableArray(o)});return handleMethod(_objectSpread2(_objectSpread2(_objectSpread2({},c),t),{},{sizes:r}))},test:function test(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=_objectSpread2(_objectSpread2({},c),t);r.sizes=_toConsumableArray(r.sizes);r.width&&r.height&&(r.sizes=[[r.width,r.height]]);return handleMethod(r)}};r.default=d},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.RenderingIntentFlag=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.MAX_IMAGE_SIZE_TO_CACHE=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.BASELINE_FACTOR=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0;r.assert=function assert(t,r){t||unreachable(r)};r.bytesToString=function bytesToString(t){"object"===_typeof(t)&&null!==t&&void 0!==t.length||unreachable("Invalid argument for bytesToString");var r=t.length,i=8192;if(r<i)return String.fromCharCode.apply(null,t);for(var a=[],o=0;o<r;o+=i){var l=Math.min(o+i,r),c=t.subarray(o,l);a.push(String.fromCharCode.apply(null,c))}return a.join("")};r.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),r=!1;Object.defineProperty(t,"settled",{get:function get(){return r}});t.promise=new Promise((function(i,a){t.resolve=function(t){r=!0;i(t)};t.reject=function(t){r=!0;a(t)}}));return t};r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){var a=t.match(/\./g);a&&a.length>=2&&(t="http://".concat(t))}if(i.tryConvertEncoding)try{t=stringToUTF8String(t)}catch(t){}}var o=r?new URL(t,r):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return!0;default:return!1}}(o))return o}catch(t){}return null};r.getModificationDate=function getModificationDate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")};r.getVerbosityLevel=function getVerbosityLevel(){return o};r.info=function info(t){o>=a.INFOS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log("Info: ".concat(t)):Window&&globalThis.ngxConsole?globalThis.ngxConsole.log("Info: ".concat(t)):console.log("Info: ".concat(t)))};r.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength};r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;for(var i=0,a=t.length;i<a;i++)if(t[i]!==r[i])return!1;return!0};r.objectFromMap=function objectFromMap(t){var r,i=Object.create(null),a=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}(t);try{for(a.s();!(r=a.n()).done;){var o=(u=r.value,d=2,function _arrayWithHoles(t){if(Array.isArray(t))return t}(u)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(u,d)||_unsupportedIterableToArray(u,d)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],c=o[1];i[l]=c}}catch(t){a.e(t)}finally{a.f()}var u,d;return i};r.objectSize=function objectSize(t){return Object.keys(t).length};r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(o=t)};r.shadow=shadow;r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};r.stringToBytes=stringToBytes;r.stringToPDFString=function stringToPDFString(t){if(t[0]>="ï"){var r;"þ"===t[0]&&"ÿ"===t[1]?r="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?r="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(r="utf-8");if(r)try{var i=new TextDecoder(r,{fatal:!0}),a=stringToBytes(t);return i.decode(a)}catch(t){warn('stringToPDFString: "'.concat(t,'".'))}}for(var o=[],l=0,c=t.length;l<c;l++){var u=w[t.charCodeAt(l)];o.push(u?String.fromCharCode(u):t.charAt(l))}return o.join("")};r.stringToUTF8String=stringToUTF8String;r.unreachable=unreachable;r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))};r.warn=warn;function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=!0;i(42)}r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.MAX_IMAGE_SIZE_TO_CACHE=1e7;r.LINE_FACTOR=1.35;r.LINE_DESCENT_FACTOR=.35;r.BASELINE_FACTOR=.25925925925925924;r.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationEditorPrefix="pdfjs_internal_editor_";r.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};r.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.PageActionEventType={O:"PageOpen",C:"PageClose"};var a={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=a;r.CMapCompressionType={NONE:0,BINARY:1};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var o=a.WARNINGS;function warn(t){o>=a.WARNINGS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log("Warning: ".concat(t)):Window&&globalThis.ngxConsole?globalThis.ngxConsole.log("Warning: ".concat(t)):console.log("Warning: ".concat(t)))}function unreachable(t){throw new Error(t)}function shadow(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.defineProperty(t,r,{value:i,enumerable:!a,configurable:!0,writable:!1});return i}var l=function BaseExceptionClosure(){function BaseException(t,r){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=t;this.name=r}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();r.BaseException=l;var c=function(t){_inherits(PasswordException,t);var r=_createSuper(PasswordException);function PasswordException(t,i){var a;_classCallCheck(this,PasswordException);(a=r.call(this,t,"PasswordException")).code=i;return a}return _createClass(PasswordException)}(l);r.PasswordException=c;var u=function(t){_inherits(UnknownErrorException,t);var r=_createSuper(UnknownErrorException);function UnknownErrorException(t,i){var a;_classCallCheck(this,UnknownErrorException);(a=r.call(this,t,"UnknownErrorException")).details=i;return a}return _createClass(UnknownErrorException)}(l);r.UnknownErrorException=u;var d=function(t){_inherits(InvalidPDFException,t);var r=_createSuper(InvalidPDFException);function InvalidPDFException(t){_classCallCheck(this,InvalidPDFException);return r.call(this,t,"InvalidPDFException")}return _createClass(InvalidPDFException)}(l);r.InvalidPDFException=d;var h=function(t){_inherits(MissingPDFException,t);var r=_createSuper(MissingPDFException);function MissingPDFException(t){_classCallCheck(this,MissingPDFException);return r.call(this,t,"MissingPDFException")}return _createClass(MissingPDFException)}(l);r.MissingPDFException=h;var p=function(t){_inherits(UnexpectedResponseException,t);var r=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,i){var a;_classCallCheck(this,UnexpectedResponseException);(a=r.call(this,t,"UnexpectedResponseException")).status=i;return a}return _createClass(UnexpectedResponseException)}(l);r.UnexpectedResponseException=p;var v=function(t){_inherits(FormatError,t);var r=_createSuper(FormatError);function FormatError(t){_classCallCheck(this,FormatError);return r.call(this,t,"FormatError")}return _createClass(FormatError)}(l);r.FormatError=v;var y=function(t){_inherits(AbortException,t);var r=_createSuper(AbortException);function AbortException(t){_classCallCheck(this,AbortException);return r.call(this,t,"AbortException")}return _createClass(AbortException)}(l);r.AbortException=y;function stringToBytes(t){"string"!=typeof t&&unreachable("Invalid argument for stringToBytes");for(var r=t.length,i=new Uint8Array(r),a=0;a<r;++a)i[a]=255&t.charCodeAt(a);return i}var g=function(){function FeatureTest(){_classCallCheck(this,FeatureTest)}_createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",function isLittleEndian(){var t=new Uint8Array(4);t[0]=1;return 1===new Uint32Array(t.buffer,0,1)[0]}())}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}},{key:"platform",get:function get(){return"undefined"==typeof navigator?shadow(this,"platform",{isWin:!1,isMac:!1}):shadow(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}]);return FeatureTest}();r.FeatureTest=g;var m=_toConsumableArray(Array(256).keys()).map((function(t){return t.toString(16).padStart(2,"0")})),b=function(){function Util(){_classCallCheck(this,Util)}_createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(t,r,i){return"#".concat(m[t]).concat(m[r]).concat(m[i])}},{key:"scaleMinMax",value:function scaleMinMax(t,r){var i;if(t[0]){if(t[0]<0){i=r[0];r[0]=r[1];r[1]=i}r[0]*=t[0];r[1]*=t[0];if(t[3]<0){i=r[2];r[2]=r[3];r[3]=i}r[2]*=t[3];r[3]*=t[3]}else{i=r[0];r[0]=r[2];r[2]=i;i=r[1];r[1]=r[3];r[3]=i;if(t[1]<0){i=r[2];r[2]=r[3];r[3]=i}r[2]*=t[1];r[3]*=t[1];if(t[2]<0){i=r[0];r[0]=r[1];r[1]=i}r[0]*=t[2];r[1]*=t[2]}r[0]+=t[4];r[1]+=t[4];r[2]+=t[5];r[3]+=t[5]}},{key:"transform",value:function transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,r){var i=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/i,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/i]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,r){var i=Util.applyTransform(t,r),a=Util.applyTransform(t.slice(2,4),r),o=Util.applyTransform([t[0],t[3]],r),l=Util.applyTransform([t[2],t[1]],r);return[Math.min(i[0],a[0],o[0],l[0]),Math.min(i[1],a[1],o[1],l[1]),Math.max(i[0],a[0],o[0],l[0]),Math.max(i[1],a[1],o[1],l[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var r=[t[0],t[2],t[1],t[3]],i=t[0]*r[0]+t[1]*r[2],a=t[0]*r[1]+t[1]*r[3],o=t[2]*r[0]+t[3]*r[2],l=t[2]*r[1]+t[3]*r[3],c=(i+l)/2,u=Math.sqrt(Math.pow(i+l,2)-4*(i*l-o*a))/2,d=c+u||1,h=c-u||1;return[Math.sqrt(d),Math.sqrt(h)]}},{key:"normalizeRect",value:function normalizeRect(t){var r=t.slice(0);if(t[0]>t[2]){r[0]=t[2];r[2]=t[0]}if(t[1]>t[3]){r[1]=t[3];r[3]=t[1]}return r}},{key:"intersect",value:function intersect(t,r){var i=Math.max(Math.min(t[0],t[2]),Math.min(r[0],r[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(r[0],r[2]));if(i>a)return null;var o=Math.max(Math.min(t[1],t[3]),Math.min(r[1],r[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(r[1],r[3]));return o>l?null:[i,o,a,l]}},{key:"bezierBoundingBox",value:function bezierBoundingBox(t,r,i,a,o,l,c,u){for(var d,h,p,v,y,g,m,b,w=[],P=[[],[]],S=0;S<2;++S){if(0===S){h=6*t-12*i+6*o;d=-3*t+9*i-9*o+3*c;p=3*i-3*t}else{h=6*r-12*a+6*l;d=-3*r+9*a-9*l+3*u;p=3*a-3*r}if(Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;0<(v=-p/h)&&v<1&&w.push(v)}else{m=h*h-4*p*d;b=Math.sqrt(m);if(!(m<0)){0<(y=(-h+b)/(2*d))&&y<1&&w.push(y);0<(g=(-h-b)/(2*d))&&g<1&&w.push(g)}}}for(var k,x=w.length,A=x;x--;){k=1-(v=w[x]);P[0][x]=k*k*k*t+3*k*k*v*i+3*k*v*v*o+v*v*v*c;P[1][x]=k*k*k*r+3*k*k*v*a+3*k*v*v*l+v*v*v*u}P[0][A]=t;P[1][A]=r;P[0][A+1]=c;P[1][A+1]=u;P[0].length=P[1].length=A+2;return[Math.min.apply(Math,_toConsumableArray(P[0])),Math.min.apply(Math,_toConsumableArray(P[1])),Math.max.apply(Math,_toConsumableArray(P[0])),Math.max.apply(Math,_toConsumableArray(P[1]))]}}]);return Util}();r.Util=b;var w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(t){return decodeURIComponent(escape(t))}},(t,r,i)=>{"use strict";!function checkDOMMatrix(){globalThis.DOMMatrix}();!function checkPath2D(){globalThis.Path2D}();!function checkReadableStream(){globalThis.ReadableStream}();!function checkArrayAt(){Array.prototype.at||i(43)}();!function checkTypedArrayAt(){Uint8Array.prototype.at||i(117)}();!function checkStructuredClone(){globalThis.structuredClone||i(129)}()},(t,r,i)=>{i(44);var a=i(116);t.exports=a("Array","at")},(t,r,i)=>{"use strict";var a=i(45),o=i(82),l=i(106),c=i(104),u=i(111);a({target:"Array",proto:!0},{at:function at(t){var r=o(this),i=l(r),a=c(t),u=a>=0?a:i+a;return u<0||u>=i?void 0:r[u]}});u("at")},(t,r,i)=>{var a=i(46),o=i(47).f,l=i(86),c=i(90),u=i(80),d=i(98),h=i(110);t.exports=function(t,r){var i,p,v,y,g,m=t.target,b=t.global,w=t.stat;if(i=b?a:w?a[m]||u(m,{}):(a[m]||{}).prototype)for(p in r){y=r[p];v=t.dontCallGetSet?(g=o(i,p))&&g.value:i[p];if(!h(b?p:m+(w?".":"#")+p,t.forced)&&void 0!==v){if(typeof y==typeof v)continue;d(y,v)}(t.sham||v&&v.sham)&&l(y,"sham",!0);c(i,p,y,t)}}},t=>{var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(t,r,i)=>{var a=i(48),o=i(50),l=i(52),c=i(53),u=i(54),d=i(60),h=i(81),p=i(84),v=Object.getOwnPropertyDescriptor;r.f=a?v:function getOwnPropertyDescriptor(t,r){t=u(t);r=d(r);if(p)try{return v(t,r)}catch(t){}if(h(t,r))return c(!o(l.f,t,r),t[r])}},(t,r,i)=>{var a=i(49);t.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},(t,r,i)=>{var a=i(51),o=Function.prototype.call;t.exports=a?o.bind(o):function(){return o.apply(o,arguments)}},(t,r,i)=>{var a=i(49);t.exports=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},(t,r)=>{"use strict";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!i.call({1:2},1);r.f=o?function propertyIsEnumerable(t){var r=a(this,t);return!!r&&r.enumerable}:i},t=>{t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},(t,r,i)=>{var a=i(55),o=i(58);t.exports=function(t){return a(o(t))}},(t,r,i)=>{var a=i(56),o=i(49),l=i(57),c=Object,u=a("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==l(t)?u(t,""):c(t)}:c},(t,r,i)=>{var a=i(51),o=Function.prototype,l=o.call,c=a&&o.bind.bind(l,l);t.exports=a?c:function(t){return function(){return l.apply(t,arguments)}}},(t,r,i)=>{var a=i(56),o=a({}.toString),l=a("".slice);t.exports=function(t){return l(o(t),8,-1)}},(t,r,i)=>{var a=i(59),o=TypeError;t.exports=function(t){if(a(t))throw o("Can't call method on "+t);return t}},t=>{t.exports=function(t){return null==t}},(t,r,i)=>{var a=i(61),o=i(65);t.exports=function(t){var r=a(t,"string");return o(r)?r:r+""}},(t,r,i)=>{var a=i(50),o=i(62),l=i(65),c=i(72),u=i(75),d=i(76),h=TypeError,p=d("toPrimitive");t.exports=function(t,r){if(!o(t)||l(t))return t;var i,d=c(t,p);if(d){void 0===r&&(r="default");i=a(d,t,r);if(!o(i)||l(i))return i;throw h("Can't convert object to primitive value")}void 0===r&&(r="number");return u(t,r)}},(t,r,i)=>{var a=i(63),o=i(64),l=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:a(t)||t===l}:function(t){return"object"==typeof t?null!==t:a(t)}},(t,r,i)=>{var a=i(64),o=a.all;t.exports=a.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},t=>{var r="object"==typeof document&&document.all,i=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:i}},(t,r,i)=>{var a=i(66),o=i(63),l=i(67),c=i(68),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var r=a("Symbol");return o(r)&&l(r.prototype,u(t))}},(t,r,i)=>{var a=i(46),o=i(63);t.exports=function(t,r){return arguments.length<2?(i=a[t],o(i)?i:void 0):a[t]&&a[t][r];var i}},(t,r,i)=>{var a=i(56);t.exports=a({}.isPrototypeOf)},(t,r,i)=>{var a=i(69);t.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,r,i)=>{var a=i(70),o=i(49);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&a&&a<41}))},(t,r,i)=>{var a,o,l=i(46),c=i(71),u=l.process,d=l.Deno,h=u&&u.versions||d&&d.version,p=h&&h.v8;p&&(o=(a=p.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1]));!o&&c&&(!(a=c.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=c.match(/Chrome\/(\d+)/))&&(o=+a[1]);t.exports=o},t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},(t,r,i)=>{var a=i(73),o=i(59);t.exports=function(t,r){var i=t[r];return o(i)?void 0:a(i)}},(t,r,i)=>{var a=i(63),o=i(74),l=TypeError;t.exports=function(t){if(a(t))return t;throw l(o(t)+" is not a function")}},t=>{var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},(t,r,i)=>{var a=i(50),o=i(63),l=i(62),c=TypeError;t.exports=function(t,r){var i,u;if("string"===r&&o(i=t.toString)&&!l(u=a(i,t)))return u;if(o(i=t.valueOf)&&!l(u=a(i,t)))return u;if("string"!==r&&o(i=t.toString)&&!l(u=a(i,t)))return u;throw c("Can't convert object to primitive value")}},(t,r,i)=>{var a=i(46),o=i(77),l=i(81),c=i(83),u=i(69),d=i(68),h=a.Symbol,p=o("wks"),v=d?h.for||h:h&&h.withoutSetter||c;t.exports=function(t){l(p,t)||(p[t]=u&&l(h,t)?h[t]:v("Symbol."+t));return p[t]}},(t,r,i)=>{var a=i(78),o=i(79);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.30.0",mode:a?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.0/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=!1},(t,r,i)=>{var a=i(46),o=i(80),l="__core-js_shared__",c=a[l]||o(l,{});t.exports=c},(t,r,i)=>{var a=i(46),o=Object.defineProperty;t.exports=function(t,r){try{o(a,t,{value:r,configurable:!0,writable:!0})}catch(i){a[t]=r}return r}},(t,r,i)=>{var a=i(56),o=i(82),l=a({}.hasOwnProperty);t.exports=Object.hasOwn||function hasOwn(t,r){return l(o(t),r)}},(t,r,i)=>{var a=i(58),o=Object;t.exports=function(t){return o(a(t))}},(t,r,i)=>{var a=i(56),o=0,l=Math.random(),c=a(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+l,36)}},(t,r,i)=>{var a=i(48),o=i(49),l=i(85);t.exports=!a&&!o((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},(t,r,i)=>{var a=i(46),o=i(62),l=a.document,c=o(l)&&o(l.createElement);t.exports=function(t){return c?l.createElement(t):{}}},(t,r,i)=>{var a=i(48),o=i(87),l=i(53);t.exports=a?function(t,r,i){return o.f(t,r,l(1,i))}:function(t,r,i){t[r]=i;return t}},(t,r,i)=>{var a=i(48),o=i(84),l=i(88),c=i(89),u=i(60),d=TypeError,h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,v="enumerable",y="configurable",g="writable";r.f=a?l?function defineProperty(t,r,i){c(t);r=u(r);c(i);if("function"==typeof t&&"prototype"===r&&"value"in i&&g in i&&!i[g]){var a=p(t,r);if(a&&a[g]){t[r]=i.value;i={configurable:y in i?i[y]:a[y],enumerable:v in i?i[v]:a[v],writable:!1}}}return h(t,r,i)}:h:function defineProperty(t,r,i){c(t);r=u(r);c(i);if(o)try{return h(t,r,i)}catch(t){}if("get"in i||"set"in i)throw d("Accessors not supported");"value"in i&&(t[r]=i.value);return t}},(t,r,i)=>{var a=i(48),o=i(49);t.exports=a&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(t,r,i)=>{var a=i(62),o=String,l=TypeError;t.exports=function(t){if(a(t))return t;throw l(o(t)+" is not an object")}},(t,r,i)=>{var a=i(63),o=i(87),l=i(91),c=i(80);t.exports=function(t,r,i,u){u||(u={});var d=u.enumerable,h=void 0!==u.name?u.name:r;a(i)&&l(i,h,u);if(u.global)d?t[r]=i:c(r,i);else{try{u.unsafe?t[r]&&(d=!0):delete t[r]}catch(t){}d?t[r]=i:o.f(t,r,{value:i,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return t}},(t,r,i)=>{var a=i(56),o=i(49),l=i(63),c=i(81),u=i(48),d=i(92).CONFIGURABLE,h=i(93),p=i(94),v=p.enforce,y=p.get,g=String,m=Object.defineProperty,b=a("".slice),w=a("".replace),P=a([].join),S=u&&!o((function(){return 8!==m((function(){}),"length",{value:8}).length})),k=String(String).split("String"),x=t.exports=function(t,r,i){"Symbol("===b(g(r),0,7)&&(r="["+w(g(r),/^Symbol\(([^)]*)\)/,"$1")+"]");i&&i.getter&&(r="get "+r);i&&i.setter&&(r="set "+r);(!c(t,"name")||d&&t.name!==r)&&(u?m(t,"name",{value:r,configurable:!0}):t.name=r);S&&i&&c(i,"arity")&&t.length!==i.arity&&m(t,"length",{value:i.arity});try{i&&c(i,"constructor")&&i.constructor?u&&m(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=v(t);c(a,"source")||(a.source=P(k,"string"==typeof r?r:""));return t};Function.prototype.toString=x((function toString(){return l(this)&&y(this).source||h(this)}),"toString")},(t,r,i)=>{var a=i(48),o=i(81),l=Function.prototype,c=a&&Object.getOwnPropertyDescriptor,u=o(l,"name"),d=u&&"something"===function something(){}.name,h=u&&(!a||a&&c(l,"name").configurable);t.exports={EXISTS:u,PROPER:d,CONFIGURABLE:h}},(t,r,i)=>{var a=i(56),o=i(63),l=i(79),c=a(Function.toString);o(l.inspectSource)||(l.inspectSource=function(t){return c(t)});t.exports=l.inspectSource},(t,r,i)=>{var a,o,l,c=i(95),u=i(46),d=i(62),h=i(86),p=i(81),v=i(79),y=i(96),g=i(97),m="Object already initialized",b=u.TypeError,w=u.WeakMap;if(c||v.state){var P=v.state||(v.state=new w);P.get=P.get;P.has=P.has;P.set=P.set;a=function(t,r){if(P.has(t))throw b(m);r.facade=t;P.set(t,r);return r};o=function(t){return P.get(t)||{}};l=function(t){return P.has(t)}}else{var S=y("state");g[S]=!0;a=function(t,r){if(p(t,S))throw b(m);r.facade=t;h(t,S,r);return r};o=function(t){return p(t,S)?t[S]:{}};l=function(t){return p(t,S)}}t.exports={set:a,get:o,has:l,enforce:function(t){return l(t)?o(t):a(t,{})},getterFor:function(t){return function(r){var i;if(!d(r)||(i=o(r)).type!==t)throw b("Incompatible receiver, "+t+" required");return i}}}},(t,r,i)=>{var a=i(46),o=i(63),l=a.WeakMap;t.exports=o(l)&&/native code/.test(String(l))},(t,r,i)=>{var a=i(77),o=i(83),l=a("keys");t.exports=function(t){return l[t]||(l[t]=o(t))}},t=>{t.exports={}},(t,r,i)=>{var a=i(81),o=i(99),l=i(47),c=i(87);t.exports=function(t,r,i){for(var u=o(r),d=c.f,h=l.f,p=0;p<u.length;p++){var v=u[p];a(t,v)||i&&a(i,v)||d(t,v,h(r,v))}}},(t,r,i)=>{var a=i(66),o=i(56),l=i(100),c=i(109),u=i(89),d=o([].concat);t.exports=a("Reflect","ownKeys")||function ownKeys(t){var r=l.f(u(t)),i=c.f;return i?d(r,i(t)):r}},(t,r,i)=>{var a=i(101),o=i(108).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return a(t,o)}},(t,r,i)=>{var a=i(56),o=i(81),l=i(54),c=i(102).indexOf,u=i(97),d=a([].push);t.exports=function(t,r){var i,a=l(t),h=0,p=[];for(i in a)!o(u,i)&&o(a,i)&&d(p,i);for(;r.length>h;)o(a,i=r[h++])&&(~c(p,i)||d(p,i));return p}},(t,r,i)=>{var a=i(54),o=i(103),l=i(106),createMethod=function(t){return function(r,i,c){var u,d=a(r),h=l(d),p=o(c,h);if(t&&i!=i){for(;h>p;)if((u=d[p++])!=u)return!0}else for(;h>p;p++)if((t||p in d)&&d[p]===i)return t||p||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(t,r,i)=>{var a=i(104),o=Math.max,l=Math.min;t.exports=function(t,r){var i=a(t);return i<0?o(i+r,0):l(i,r)}},(t,r,i)=>{var a=i(105);t.exports=function(t){var r=+t;return r!=r||0===r?0:a(r)}},t=>{var r=Math.ceil,i=Math.floor;t.exports=Math.trunc||function trunc(t){var a=+t;return(a>0?i:r)(a)}},(t,r,i)=>{var a=i(107);t.exports=function(t){return a(t.length)}},(t,r,i)=>{var a=i(104),o=Math.min;t.exports=function(t){return t>0?o(a(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,r)=>{r.f=Object.getOwnPropertySymbols},(t,r,i)=>{var a=i(49),o=i(63),l=/#|\.prototype\./,isForced=function(t,r){var i=u[c(t)];return i==h||i!=d&&(o(r)?a(r):!!r)},c=isForced.normalize=function(t){return String(t).replace(l,".").toLowerCase()},u=isForced.data={},d=isForced.NATIVE="N",h=isForced.POLYFILL="P";t.exports=isForced},(t,r,i)=>{var a=i(76),o=i(112),l=i(87).f,c=a("unscopables"),u=Array.prototype;null==u[c]&&l(u,c,{configurable:!0,value:o(null)});t.exports=function(t){u[c][t]=!0}},(t,r,i)=>{var a,o=i(89),l=i(113),c=i(108),u=i(97),d=i(115),h=i(85),p=i(96),v="prototype",y="script",g=p("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<"+y+">"+t+"</"+y+">"},NullProtoObjectViaActiveX=function(t){t.write(scriptTag(""));t.close();var r=t.parentWindow.Object;t=null;return r},NullProtoObject=function(){try{a=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject="undefined"!=typeof document?document.domain&&a?NullProtoObjectViaActiveX(a):function(){var t,r=h("iframe"),i="java"+y+":";r.style.display="none";d.appendChild(r);r.src=String(i);(t=r.contentWindow.document).open();t.write(scriptTag("document.F=Object"));t.close();return t.F}():NullProtoObjectViaActiveX(a);for(var t=c.length;t--;)delete NullProtoObject[v][c[t]];return NullProtoObject()};u[g]=!0;t.exports=Object.create||function create(t,r){var i;if(null!==t){EmptyConstructor[v]=o(t);i=new EmptyConstructor;EmptyConstructor[v]=null;i[g]=t}else i=NullProtoObject();return void 0===r?i:l.f(i,r)}},(t,r,i)=>{var a=i(48),o=i(88),l=i(87),c=i(89),u=i(54),d=i(114);r.f=a&&!o?Object.defineProperties:function defineProperties(t,r){c(t);for(var i,a=u(r),o=d(r),h=o.length,p=0;h>p;)l.f(t,i=o[p++],a[i]);return t}},(t,r,i)=>{var a=i(101),o=i(108);t.exports=Object.keys||function keys(t){return a(t,o)}},(t,r,i)=>{var a=i(66);t.exports=a("document","documentElement")},(t,r,i)=>{var a=i(46),o=i(56);t.exports=function(t,r){return o(a[t].prototype[r])}},(t,r,i)=>{i(118)},(t,r,i)=>{"use strict";var a=i(119),o=i(106),l=i(104),c=a.aTypedArray;(0,a.exportTypedArrayMethod)("at",(function at(t){var r=c(this),i=o(r),a=l(t),u=a>=0?a:i+a;return u<0||u>=i?void 0:r[u]}))},(t,r,i)=>{"use strict";var a,o,l,c=i(120),u=i(48),d=i(46),h=i(63),p=i(62),v=i(81),y=i(121),g=i(74),m=i(86),b=i(90),w=i(123),P=i(67),S=i(124),k=i(126),x=i(76),A=i(83),E=i(94),T=E.enforce,C=E.get,I=d.Int8Array,O=I&&I.prototype,M=d.Uint8ClampedArray,L=M&&M.prototype,R=I&&S(I),D=O&&S(O),G=Object.prototype,j=d.TypeError,N=x("toStringTag"),B=A("TYPED_ARRAY_TAG"),V="TypedArrayConstructor",W=c&&!!k&&"Opera"!==y(d.opera),H=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},z={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor=function(t){var r=S(t);if(p(r)){var i=C(r);return i&&v(i,V)?i[V]:getTypedArrayConstructor(r)}},isTypedArray=function(t){if(!p(t))return!1;var r=y(t);return v(U,r)||v(z,r)};for(a in U)(l=(o=d[a])&&o.prototype)?T(l)[V]=o:W=!1;for(a in z)(l=(o=d[a])&&o.prototype)&&(T(l)[V]=o);if(!W||!h(R)||R===Function.prototype){R=function TypedArray(){throw j("Incorrect invocation")};if(W)for(a in U)d[a]&&k(d[a],R)}if(!W||!D||D===G){D=R.prototype;if(W)for(a in U)d[a]&&k(d[a].prototype,D)}W&&S(L)!==D&&k(L,D);if(u&&!v(D,N)){H=!0;w(D,N,{configurable:!0,get:function(){return p(this)?this[B]:void 0}});for(a in U)d[a]&&m(d[a],B,a)}t.exports={NATIVE_ARRAY_BUFFER_VIEWS:W,TYPED_ARRAY_TAG:H&&B,aTypedArray:function(t){if(isTypedArray(t))return t;throw j("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h(t)&&(!k||P(R,t)))return t;throw j(g(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,i,a){if(u){if(i)for(var o in U){var l=d[o];if(l&&v(l.prototype,t))try{delete l.prototype[t]}catch(i){try{l.prototype[t]=r}catch(t){}}}D[t]&&!i||b(D,t,i?r:W&&O[t]||r,a)}},exportTypedArrayStaticMethod:function(t,r,i){var a,o;if(u){if(k){if(i)for(a in U)if((o=d[a])&&v(o,t))try{delete o[t]}catch(t){}if(R[t]&&!i)return;try{return b(R,t,i?r:W&&R[t]||r)}catch(t){}}for(a in U)!(o=d[a])||o[t]&&!i||b(o,t,r)}},getTypedArrayConstructor:getTypedArrayConstructor,isView:function isView(t){if(!p(t))return!1;var r=y(t);return"DataView"===r||v(U,r)||v(z,r)},isTypedArray:isTypedArray,TypedArray:R,TypedArrayPrototype:D}},t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(t,r,i)=>{var a=i(122),o=i(63),l=i(57),c=i(76)("toStringTag"),u=Object,d="Arguments"==l(function(){return arguments}());t.exports=a?l:function(t){var r,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,r){try{return t[r]}catch(t){}}(r=u(t),c))?i:d?l(r):"Object"==(a=l(r))&&o(r.callee)?"Arguments":a}},(t,r,i)=>{var a={};a[i(76)("toStringTag")]="z";t.exports="[object z]"===String(a)},(t,r,i)=>{var a=i(91),o=i(87);t.exports=function(t,r,i){i.get&&a(i.get,r,{getter:!0});i.set&&a(i.set,r,{setter:!0});return o.f(t,r,i)}},(t,r,i)=>{var a=i(81),o=i(63),l=i(82),c=i(96),u=i(125),d=c("IE_PROTO"),h=Object,p=h.prototype;t.exports=u?h.getPrototypeOf:function(t){var r=l(t);if(a(r,d))return r[d];var i=r.constructor;return o(i)&&r instanceof i?i.prototype:r instanceof h?p:null}},(t,r,i)=>{var a=i(49);t.exports=!a((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(t,r,i)=>{var a=i(127),o=i(89),l=i(128);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,i={};try{(t=a(Object.prototype,"__proto__","set"))(i,[]);r=i instanceof Array}catch(t){}return function setPrototypeOf(i,a){o(i);l(a);r?t(i,a):i.__proto__=a;return i}}():void 0)},(t,r,i)=>{var a=i(56),o=i(73);t.exports=function(t,r,i){try{return a(o(Object.getOwnPropertyDescriptor(t,r)[i]))}catch(t){}}},(t,r,i)=>{var a=i(63),o=String,l=TypeError;t.exports=function(t){if("object"==typeof t||a(t))return t;throw l("Can't set "+o(t)+" as a prototype")}},(t,r,i)=>{i(130);i(137);i(139);i(162);i(164);var a=i(176);t.exports=a.structuredClone},(t,r,i)=>{"use strict";var a=i(54),o=i(111),l=i(131),c=i(94),u=i(87).f,d=i(132),h=i(136),p=i(78),v=i(48),y="Array Iterator",g=c.set,m=c.getterFor(y);t.exports=d(Array,"Array",(function(t,r){g(this,{type:y,target:a(t),index:0,kind:r})}),(function(){var t=m(this),r=t.target,i=t.kind,a=t.index++;if(!r||a>=r.length){t.target=void 0;return h(void 0,!0)}return h("keys"==i?a:"values"==i?r[a]:[a,r[a]],!1)}),"values");var b=l.Arguments=l.Array;o("keys");o("values");o("entries");if(!p&&v&&"values"!==b.name)try{u(b,"name",{value:"values"})}catch(t){}},t=>{t.exports={}},(t,r,i)=>{"use strict";var a=i(45),o=i(50),l=i(78),c=i(92),u=i(63),d=i(133),h=i(124),p=i(126),v=i(135),y=i(86),g=i(90),m=i(76),b=i(131),w=i(134),P=c.PROPER,S=c.CONFIGURABLE,k=w.IteratorPrototype,x=w.BUGGY_SAFARI_ITERATORS,A=m("iterator"),E="keys",T="values",C="entries",returnThis=function(){return this};t.exports=function(t,r,i,c,m,w,I){d(i,r,c);var O,M,L,getIterationMethod=function(t){if(t===m&&N)return N;if(!x&&t in G)return G[t];switch(t){case E:return function keys(){return new i(this,t)};case T:return function values(){return new i(this,t)};case C:return function entries(){return new i(this,t)}}return function(){return new i(this)}},R=r+" Iterator",D=!1,G=t.prototype,j=G[A]||G["@@iterator"]||m&&G[m],N=!x&&j||getIterationMethod(m),B="Array"==r&&G.entries||j;if(B&&(O=h(B.call(new t)))!==Object.prototype&&O.next){l||h(O)===k||(p?p(O,k):u(O[A])||g(O,A,returnThis));v(O,R,!0,!0);l&&(b[R]=returnThis)}if(P&&m==T&&j&&j.name!==T)if(!l&&S)y(G,"name",T);else{D=!0;N=function values(){return o(j,this)}}if(m){M={values:getIterationMethod(T),keys:w?N:getIterationMethod(E),entries:getIterationMethod(C)};if(I)for(L in M)(x||D||!(L in G))&&g(G,L,M[L]);else a({target:r,proto:!0,forced:x||D},M)}l&&!I||G[A]===N||g(G,A,N,{name:m});b[r]=N;return M}},(t,r,i)=>{"use strict";var a=i(134).IteratorPrototype,o=i(112),l=i(53),c=i(135),u=i(131),returnThis=function(){return this};t.exports=function(t,r,i,d){var h=r+" Iterator";t.prototype=o(a,{next:l(+!d,i)});c(t,h,!1,!0);u[h]=returnThis;return t}},(t,r,i)=>{"use strict";var a,o,l,c=i(49),u=i(63),d=i(62),h=i(112),p=i(124),v=i(90),y=i(76),g=i(78),m=y("iterator"),b=!1;[].keys&&("next"in(l=[].keys())?(o=p(p(l)))!==Object.prototype&&(a=o):b=!0);!d(a)||c((function(){var t={};return a[m].call(t)!==t}))?a={}:g&&(a=h(a));u(a[m])||v(a,m,(function(){return this}));t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:b}},(t,r,i)=>{var a=i(87).f,o=i(81),l=i(76)("toStringTag");t.exports=function(t,r,i){t&&!i&&(t=t.prototype);t&&!o(t,l)&&a(t,l,{configurable:!0,value:r})}},t=>{t.exports=function(t,r){return{value:t,done:r}}},(t,r,i)=>{var a=i(122),o=i(90),l=i(138);a||o(Object.prototype,"toString",l,{unsafe:!0})},(t,r,i)=>{"use strict";var a=i(122),o=i(121);t.exports=a?{}.toString:function toString(){return"[object "+o(this)+"]"}},(t,r,i)=>{i(140)},(t,r,i)=>{"use strict";i(141)("Map",(function(t){return function Map(){return t(this,arguments.length?arguments[0]:void 0)}}),i(159))},(t,r,i)=>{"use strict";var a=i(45),o=i(46),l=i(56),c=i(110),u=i(90),d=i(142),h=i(149),p=i(156),v=i(63),y=i(59),g=i(62),m=i(49),b=i(157),w=i(135),P=i(158);t.exports=function(t,r,i){var S=-1!==t.indexOf("Map"),k=-1!==t.indexOf("Weak"),x=S?"set":"add",A=o[t],E=A&&A.prototype,T=A,C={},fixMethod=function(t){var r=l(E[t]);u(E,t,"add"==t?function add(t){r(this,0===t?0:t);return this}:"delete"==t?function(t){return!(k&&!g(t))&&r(this,0===t?0:t)}:"get"==t?function get(t){return k&&!g(t)?void 0:r(this,0===t?0:t)}:"has"==t?function has(t){return!(k&&!g(t))&&r(this,0===t?0:t)}:function set(t,i){r(this,0===t?0:t,i);return this})};if(c(t,!v(A)||!(k||E.forEach&&!m((function(){(new A).entries().next()}))))){T=i.getConstructor(r,t,S,x);d.enable()}else if(c(t,!0)){var I=new T,O=I[x](k?{}:-0,1)!=I,M=m((function(){I.has(1)})),L=b((function(t){new A(t)})),R=!k&&m((function(){for(var t=new A,r=5;r--;)t[x](r,r);return!t.has(-0)}));if(!L){(T=r((function(t,r){p(t,E);var i=P(new A,t,T);y(r)||h(r,i[x],{that:i,AS_ENTRIES:S});return i}))).prototype=E;E.constructor=T}if(M||R){fixMethod("delete");fixMethod("has");S&&fixMethod("get")}(R||O)&&fixMethod(x);k&&E.clear&&delete E.clear}C[t]=T;a({global:!0,constructor:!0,forced:T!=A},C);w(T,t);k||i.setStrong(T,t,S);return T}},(t,r,i)=>{var a=i(45),o=i(56),l=i(97),c=i(62),u=i(81),d=i(87).f,h=i(100),p=i(143),v=i(146),y=i(83),g=i(148),m=!1,b=y("meta"),w=0,setMetadata=function(t){d(t,b,{value:{objectID:"O"+w++,weakData:{}}})},P=t.exports={enable:function(){P.enable=function(){};m=!0;var t=h.f,r=o([].splice),i={};i[b]=1;if(t(i).length){h.f=function(i){for(var a=t(i),o=0,l=a.length;o<l;o++)if(a[o]===b){r(a,o,1);break}return a};a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f})}},fastKey:function(t,r){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,b)){if(!v(t))return"F";if(!r)return"E";setMetadata(t)}return t[b].objectID},getWeakData:function(t,r){if(!u(t,b)){if(!v(t))return!0;if(!r)return!1;setMetadata(t)}return t[b].weakData},onFreeze:function(t){g&&m&&v(t)&&!u(t,b)&&setMetadata(t);return t}};l[b]=!0},(t,r,i)=>{var a=i(57),o=i(54),l=i(100).f,c=i(144),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function getOwnPropertyNames(t){return u&&"Window"==a(t)?function(t){try{return l(t)}catch(t){return c(u)}}(t):l(o(t))}},(t,r,i)=>{var a=i(103),o=i(106),l=i(145),c=Array,u=Math.max;t.exports=function(t,r,i){for(var d=o(t),h=a(r,d),p=a(void 0===i?d:i,d),v=c(u(p-h,0)),y=0;h<p;h++,y++)l(v,y,t[h]);v.length=y;return v}},(t,r,i)=>{"use strict";var a=i(60),o=i(87),l=i(53);t.exports=function(t,r,i){var c=a(r);c in t?o.f(t,c,l(0,i)):t[c]=i}},(t,r,i)=>{var a=i(49),o=i(62),l=i(57),c=i(147),u=Object.isExtensible,d=a((function(){u(1)}));t.exports=d||c?function isExtensible(t){return!!o(t)&&((!c||"ArrayBuffer"!=l(t))&&(!u||u(t)))}:u},(t,r,i)=>{var a=i(49);t.exports=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},(t,r,i)=>{var a=i(49);t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},(t,r,i)=>{var a=i(150),o=i(50),l=i(89),c=i(74),u=i(152),d=i(106),h=i(67),p=i(153),v=i(154),y=i(155),g=TypeError,Result=function(t,r){this.stopped=t;this.result=r},m=Result.prototype;t.exports=function(t,r,i){var b,w,P,S,k,x,A,E=i&&i.that,T=!(!i||!i.AS_ENTRIES),C=!(!i||!i.IS_RECORD),I=!(!i||!i.IS_ITERATOR),O=!(!i||!i.INTERRUPTED),M=a(r,E),stop=function(t){b&&y(b,"normal",t);return new Result(!0,t)},callFn=function(t){if(T){l(t);return O?M(t[0],t[1],stop):M(t[0],t[1])}return O?M(t,stop):M(t)};if(C)b=t.iterator;else if(I)b=t;else{if(!(w=v(t)))throw g(c(t)+" is not iterable");if(u(w)){for(P=0,S=d(t);S>P;P++)if((k=callFn(t[P]))&&h(m,k))return k;return new Result(!1)}b=p(t,w)}x=C?t.next:b.next;for(;!(A=o(x,b)).done;){try{k=callFn(A.value)}catch(t){y(b,"throw",t)}if("object"==typeof k&&k&&h(m,k))return k}return new Result(!1)}},(t,r,i)=>{var a=i(151),o=i(73),l=i(51),c=a(a.bind);t.exports=function(t,r){o(t);return void 0===r?t:l?c(t,r):function(){return t.apply(r,arguments)}}},(t,r,i)=>{var a=i(57),o=i(56);t.exports=function(t){if("Function"===a(t))return o(t)}},(t,r,i)=>{var a=i(76),o=i(131),l=a("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[l]===t)}},(t,r,i)=>{var a=i(50),o=i(73),l=i(89),c=i(74),u=i(154),d=TypeError;t.exports=function(t,r){var i=arguments.length<2?u(t):r;if(o(i))return l(a(i,t));throw d(c(t)+" is not iterable")}},(t,r,i)=>{var a=i(121),o=i(72),l=i(59),c=i(131),u=i(76)("iterator");t.exports=function(t){if(!l(t))return o(t,u)||o(t,"@@iterator")||c[a(t)]}},(t,r,i)=>{var a=i(50),o=i(89),l=i(72);t.exports=function(t,r,i){var c,u;o(t);try{if(!(c=l(t,"return"))){if("throw"===r)throw i;return i}c=a(c,t)}catch(t){u=!0;c=t}if("throw"===r)throw i;if(u)throw c;o(c);return i}},(t,r,i)=>{var a=i(67),o=TypeError;t.exports=function(t,r){if(a(r,t))return t;throw o("Incorrect invocation")}},(t,r,i)=>{var a=i(76)("iterator"),o=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){o=!0}};c[a]=function(){return this};Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!o)return!1;var i=!1;try{var l={};l[a]=function(){return{next:function(){return{done:i=!0}}}};t(l)}catch(t){}return i}},(t,r,i)=>{var a=i(63),o=i(62),l=i(126);t.exports=function(t,r,i){var c,u;l&&a(c=r.constructor)&&c!==i&&o(u=c.prototype)&&u!==i.prototype&&l(t,u);return t}},(t,r,i)=>{"use strict";var a=i(112),o=i(123),l=i(160),c=i(150),u=i(156),d=i(59),h=i(149),p=i(132),v=i(136),y=i(161),g=i(48),m=i(142).fastKey,b=i(94),w=b.set,P=b.getterFor;t.exports={getConstructor:function(t,r,i,p){var v=t((function(t,o){u(t,y);w(t,{type:r,index:a(null),first:void 0,last:void 0,size:0});g||(t.size=0);d(o)||h(o,t[p],{that:t,AS_ENTRIES:i})})),y=v.prototype,b=P(r),define=function(t,r,i){var a,o,l=b(t),c=getEntry(t,r);if(c)c.value=i;else{l.last=c={index:o=m(r,!0),key:r,value:i,previous:a=l.last,next:void 0,removed:!1};l.first||(l.first=c);a&&(a.next=c);g?l.size++:t.size++;"F"!==o&&(l.index[o]=c)}return t},getEntry=function(t,r){var i,a=b(t),o=m(r);if("F"!==o)return a.index[o];for(i=a.first;i;i=i.next)if(i.key==r)return i};l(y,{clear:function clear(){for(var t=b(this),r=t.index,i=t.first;i;){i.removed=!0;i.previous&&(i.previous=i.previous.next=void 0);delete r[i.index];i=i.next}t.first=t.last=void 0;g?t.size=0:this.size=0},delete:function(t){var r=this,i=b(r),a=getEntry(r,t);if(a){var o=a.next,l=a.previous;delete i.index[a.index];a.removed=!0;l&&(l.next=o);o&&(o.previous=l);i.first==a&&(i.first=o);i.last==a&&(i.last=l);g?i.size--:r.size--}return!!a},forEach:function forEach(t){for(var r,i=b(this),a=c(t,arguments.length>1?arguments[1]:void 0);r=r?r.next:i.first;){a(r.value,r.key,this);for(;r&&r.removed;)r=r.previous}},has:function has(t){return!!getEntry(this,t)}});l(y,i?{get:function get(t){var r=getEntry(this,t);return r&&r.value},set:function set(t,r){return define(this,0===t?0:t,r)}}:{add:function add(t){return define(this,t=0===t?0:t,t)}});g&&o(y,"size",{configurable:!0,get:function(){return b(this).size}});return v},setStrong:function(t,r,i){var a=r+" Iterator",o=P(r),l=P(a);p(t,r,(function(t,r){w(this,{type:a,target:t,state:o(t),kind:r,last:void 0})}),(function(){for(var t=l(this),r=t.kind,i=t.last;i&&i.removed;)i=i.previous;if(!t.target||!(t.last=i=i?i.next:t.state.first)){t.target=void 0;return v(void 0,!0)}return v("keys"==r?i.key:"values"==r?i.value:[i.key,i.value],!1)}),i?"entries":"values",!i,!0);y(r)}}},(t,r,i)=>{var a=i(90);t.exports=function(t,r,i){for(var o in r)a(t,o,r[o],i);return t}},(t,r,i)=>{"use strict";var a=i(66),o=i(123),l=i(76),c=i(48),u=l("species");t.exports=function(t){var r=a(t);c&&r&&!r[u]&&o(r,u,{configurable:!0,get:function(){return this}})}},(t,r,i)=>{i(163)},(t,r,i)=>{"use strict";i(141)("Set",(function(t){return function Set(){return t(this,arguments.length?arguments[0]:void 0)}}),i(159))},(t,r,i)=>{var a,o=i(78),l=i(45),c=i(46),u=i(66),d=i(56),h=i(49),p=i(83),v=i(63),y=i(165),g=i(59),m=i(62),b=i(65),w=i(149),P=i(89),S=i(121),k=i(81),x=i(145),A=i(86),E=i(106),T=i(166),C=i(167),I=i(169),O=i(170),M=i(171),L=i(172),R=c.Object,D=c.Array,G=c.Date,j=c.Error,N=c.EvalError,B=c.RangeError,V=c.ReferenceError,W=c.SyntaxError,H=c.TypeError,U=c.URIError,z=c.PerformanceMark,X=c.WebAssembly,K=X&&X.CompileError||j,Y=X&&X.LinkError||j,$=X&&X.RuntimeError||j,Q=u("DOMException"),Z=I.Map,J=I.has,ee=I.get,te=I.set,re=O.Set,ne=O.add,ie=u("Object","keys"),ae=d([].push),oe=d((!0).valueOf),se=d(1..valueOf),le=d("".valueOf),ce=d(G.prototype.getTime),ue=p("structuredClone"),de="DataCloneError",he="Transferring",checkBasicSemantic=function(t){return!h((function(){var r=new c.Set([7]),i=t(r),a=t(R(7));return i==r||!i.has(7)||"object"!=typeof a||7!=a}))&&t},checkErrorsCloning=function(t,r){return!h((function(){var i=new r,a=t({a:i,b:i});return!(a&&a.a===a.b&&a.a instanceof r&&a.a.stack===i.stack)}))},fe=c.structuredClone,pe=o||!checkErrorsCloning(fe,j)||!checkErrorsCloning(fe,Q)||!(a=fe,!h((function(){var t=a(new c.AggregateError([1],ue,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=ue||3!=t.cause}))),ve=!fe&&checkBasicSemantic((function(t){return new z(ue,{detail:t}).detail})),ye=checkBasicSemantic(fe)||ve,throwUncloneable=function(t){throw new Q("Uncloneable type: "+t,de)},throwUnpolyfillable=function(t,r){throw new Q((r||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",de)},structuredCloneInternal=function(t,r){b(t)&&throwUncloneable("Symbol");if(!m(t))return t;if(r){if(J(r,t))return ee(r,t)}else r=new Z;var i,a,o,l,d,h,p,y,g,w,P,T=S(t),I=!1;switch(T){case"Array":o=D(E(t));I=!0;break;case"Object":o={};I=!0;break;case"Map":o=new Z;I=!0;break;case"Set":o=new re;I=!0;break;case"RegExp":o=new RegExp(t.source,C(t));break;case"Error":switch(a=t.name){case"AggregateError":o=u("AggregateError")([]);break;case"EvalError":o=N();break;case"RangeError":o=B();break;case"ReferenceError":o=V();break;case"SyntaxError":o=W();break;case"TypeError":o=H();break;case"URIError":o=U();break;case"CompileError":o=K();break;case"LinkError":o=Y();break;case"RuntimeError":o=$();break;default:o=j()}I=!0;break;case"DOMException":o=new Q(t.message,t.name);I=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=c[T];m(i)||throwUnpolyfillable(T);o=new i(structuredCloneInternal(t.buffer,r),t.byteOffset,"DataView"===T?t.byteLength:t.length);break;case"DOMQuad":try{o=new DOMQuad(structuredCloneInternal(t.p1,r),structuredCloneInternal(t.p2,r),structuredCloneInternal(t.p3,r),structuredCloneInternal(t.p4,r))}catch(r){ye?o=ye(t):throwUnpolyfillable(T)}break;case"FileList":if(l=function(){var t;try{t=new c.DataTransfer}catch(r){try{t=new c.ClipboardEvent("").clipboardData}catch(t){}}return t&&t.items&&t.files?t:null}()){for(d=0,h=E(t);d<h;d++)l.items.add(structuredCloneInternal(t[d],r));o=l.files}else ye?o=ye(t):throwUnpolyfillable(T);break;case"ImageData":try{o=new ImageData(structuredCloneInternal(t.data,r),t.width,t.height,{colorSpace:t.colorSpace})}catch(r){ye?o=ye(t):throwUnpolyfillable(T)}break;default:if(ye)o=ye(t);else switch(T){case"BigInt":o=R(t.valueOf());break;case"Boolean":o=R(oe(t));break;case"Number":o=R(se(t));break;case"String":o=R(le(t));break;case"Date":o=new G(ce(t));break;case"ArrayBuffer":(i=c.DataView)||"function"==typeof t.slice||throwUnpolyfillable(T);try{if("function"!=typeof t.slice||t.resizable){h=t.byteLength;P="maxByteLength"in t?{maxByteLength:t.maxByteLength}:void 0;o=new ArrayBuffer(h,P);g=new i(t);w=new i(o);for(d=0;d<h;d++)w.setUint8(d,g.getUint8(d))}else o=t.slice(0)}catch(t){throw new Q("ArrayBuffer is detached",de)}break;case"SharedArrayBuffer":o=t;break;case"Blob":try{o=t.slice(0,t.size,t.type)}catch(t){throwUnpolyfillable(T)}break;case"DOMPoint":case"DOMPointReadOnly":i=c[T];try{o=i.fromPoint?i.fromPoint(t):new i(t.x,t.y,t.z,t.w)}catch(t){throwUnpolyfillable(T)}break;case"DOMRect":case"DOMRectReadOnly":i=c[T];try{o=i.fromRect?i.fromRect(t):new i(t.x,t.y,t.width,t.height)}catch(t){throwUnpolyfillable(T)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=c[T];try{o=i.fromMatrix?i.fromMatrix(t):new i(t)}catch(t){throwUnpolyfillable(T)}break;case"AudioData":case"VideoFrame":v(t.clone)||throwUnpolyfillable(T);try{o=t.clone()}catch(t){throwUncloneable(T)}break;case"File":try{o=new File([t],t.name,t)}catch(t){throwUnpolyfillable(T)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(T);default:throwUncloneable(T)}}te(r,t,o);if(I)switch(T){case"Array":case"Object":p=ie(t);for(d=0,h=E(p);d<h;d++){y=p[d];x(o,y,structuredCloneInternal(t[y],r))}break;case"Map":t.forEach((function(t,i){te(o,structuredCloneInternal(i,r),structuredCloneInternal(t,r))}));break;case"Set":t.forEach((function(t){ne(o,structuredCloneInternal(t,r))}));break;case"Error":A(o,"message",structuredCloneInternal(t.message,r));k(t,"cause")&&A(o,"cause",structuredCloneInternal(t.cause,r));"AggregateError"==a&&(o.errors=structuredCloneInternal(t.errors,r));case"DOMException":M&&A(o,"stack",structuredCloneInternal(t.stack,r))}return o};l({global:!0,enumerable:!0,sham:!L,forced:pe},{structuredClone:function structuredClone(t){var r,i=T(arguments.length,1)>1&&!g(arguments[1])?P(arguments[1]):void 0,a=i?i.transfer:void 0;void 0!==a&&function(t,r){if(!m(t))throw H("Transfer option cannot be converted to a sequence");var i=[];w(t,(function(t){ae(i,P(t))}));var a,o,l,u,d,h,p=0,g=E(i);if(L){u=fe(i,{transfer:i});for(;p<g;)te(r,i[p],u[p++])}else for(;p<g;){a=i[p++];if(J(r,a))throw new Q("Duplicate transferable",de);switch(o=S(a)){case"ImageBitmap":l=c.OffscreenCanvas;y(l)||throwUnpolyfillable(o,he);try{(h=new l(a.width,a.height)).getContext("bitmaprenderer").transferFromImageBitmap(a);d=h.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":v(a.clone)&&v(a.close)||throwUnpolyfillable(o,he);try{d=a.clone();a.close()}catch(t){}break;case"ArrayBuffer":v(a.transfer)||throwUnpolyfillable(o,he);d=a.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(o,he)}if(void 0===d)throw new Q("This object cannot be transferred: "+o,de);te(r,a,d)}}(a,r=new Z);return structuredCloneInternal(t,r)}})},(t,r,i)=>{var a=i(56),o=i(49),l=i(63),c=i(121),u=i(66),d=i(93),noop=function(){},h=[],p=u("Reflect","construct"),v=/^\s*(?:class|function)\b/,y=a(v.exec),g=!v.exec(noop),m=function isConstructor(t){if(!l(t))return!1;try{p(noop,h,t);return!0}catch(t){return!1}},b=function isConstructor(t){if(!l(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!y(v,d(t))}catch(t){return!0}};b.sham=!0;t.exports=!p||o((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?b:m},t=>{var r=TypeError;t.exports=function(t,i){if(t<i)throw r("Not enough arguments");return t}},(t,r,i)=>{var a=i(50),o=i(81),l=i(67),c=i(168),u=RegExp.prototype;t.exports=function(t){var r=t.flags;return void 0!==r||"flags"in u||o(t,"flags")||!l(u,t)?r:a(c,t)}},(t,r,i)=>{"use strict";var a=i(89);t.exports=function(){var t=a(this),r="";t.hasIndices&&(r+="d");t.global&&(r+="g");t.ignoreCase&&(r+="i");t.multiline&&(r+="m");t.dotAll&&(r+="s");t.unicode&&(r+="u");t.unicodeSets&&(r+="v");t.sticky&&(r+="y");return r}},(t,r,i)=>{var a=i(56),o=Map.prototype;t.exports={Map:Map,set:a(o.set),get:a(o.get),has:a(o.has),remove:a(o.delete),proto:o}},(t,r,i)=>{var a=i(56),o=Set.prototype;t.exports={Set:Set,add:a(o.add),has:a(o.has),remove:a(o.delete),proto:o}},(t,r,i)=>{var a=i(49),o=i(53);t.exports=!a((function(){var t=Error("a");if(!("stack"in t))return!0;Object.defineProperty(t,"stack",o(1,7));return 7!==t.stack}))},(t,r,i)=>{var a=i(46),o=i(49),l=i(70),c=i(173),u=i(174),d=i(175),h=a.structuredClone;t.exports=!!h&&!o((function(){if(u&&l>92||d&&l>94||c&&l>97)return!1;var t=new ArrayBuffer(8),r=h(t,{transfer:[t]});return 0!=t.byteLength||8!=r.byteLength}))},(t,r,i)=>{var a=i(174),o=i(175);t.exports=!a&&!o&&"object"==typeof window&&"object"==typeof document},t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(t,r,i)=>{var a=i(57);t.exports="undefined"!=typeof process&&"process"==a(process)},(t,r,i)=>{var a=i(46);t.exports=a},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TextHighlighter=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var i=function(){function TextHighlighter(t){var r=t.findController,i=t.eventBus,a=t.pageIndex;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextHighlighter);this.findController=r;this.matches=[];this.eventBus=i;this.pageIdx=a;this._onUpdateTextLayerMatches=null;this.textDivs=null;this.textContentItemsStr=null;this.enabled=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextHighlighter,[{key:"setTextMapping",value:function setTextMapping(t,r){this.textDivs=t;this.textContentItemsStr=r}},{key:"enable",value:function enable(){var t=this;if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(!this.enabled){this.enabled=!0;if(!this._onUpdateTextLayerMatches){this._onUpdateTextLayerMatches=function(r){r.pageIndex!==t.pageIdx&&-1!==r.pageIndex||t._updateMatches()};this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)}this._updateMatches()}}},{key:"disable",value:function disable(){if(this.enabled){this.enabled=!1;if(this._onUpdateTextLayerMatches){this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches);this._onUpdateTextLayerMatches=null}this._updateMatches(!0)}}},{key:"_convertMatches",value:function _convertMatches(t,r,i){if(!t)return[];for(var a=this.textContentItemsStr,o=0,l=0,c=a.length-1,u=[],d=0,h=t.length;d<h;d++){for(var p=t[d];o!==c&&p>=l+a[o].length;){l+=a[o].length;o++}o===a.length&&globalThis.ngxConsole.error("Could not find a matching mapping");var v={color:i?i[d]:0,begin:{divIdx:o,offset:p-l}};p+=r[d];for(;o!==c&&p>l+a[o].length;){l+=a[o].length;o++}v.end={divIdx:o,offset:p-l};u.push(v)}return u}},{key:"_renderMatches",value:function _renderMatches(t){if(0!==t.length){var r=this.findController,i=this.pageIdx,a=this.textContentItemsStr,o=this.textDivs,l=i===r.selected.pageIdx,c=r.selected.matchIdx,u=null,d={divIdx:-1,offset:void 0},h=c,p=h+1;if(r.state.highlightAll){h=0;p=t.length}else if(!l)return;for(var v=h;v<p;v++){var y=t[v],g=y.begin,m=y.end,b=l&&v===c,w=(b?" selected":"")+" color"+y.color%5,P=0;if(u&&g.divIdx===u.divIdx)appendTextToDiv(u.divIdx,u.offset,g.offset);else{null!==u&&appendTextToDiv(u.divIdx,u.offset,d.offset);beginText(g)}if(g.divIdx===m.divIdx)P=appendTextToDiv(g.divIdx,g.offset,m.offset,"highlight"+w);else{P=appendTextToDiv(g.divIdx,g.offset,d.offset,"highlight begin"+w);for(var S=g.divIdx+1,k=m.divIdx;S<k;S++)o[S].className="highlight middle"+w;beginText(m,"highlight end"+w)}u=m;b&&r.scrollMatchIntoView({element:o[g.divIdx],selectedLeft:P,pageIndex:i,matchIndex:c})}u&&appendTextToDiv(u.divIdx,u.offset,d.offset)}function beginText(t,r){var i=t.divIdx;o[i].textContent="";return appendTextToDiv(i,0,t.offset,r)}function appendTextToDiv(t,r,i,l){var c=o[t];if(c.nodeType===Node.TEXT_NODE){var u=document.createElement("span");c.before(u);u.append(c);o[t]=u;c=u}var d=a[t].substring(r,i),h=document.createTextNode(d);if(l){var p=document.createElement("span");p.className="".concat(l," appended");p.append(h);c.append(p);return l.includes("selected")?p.offsetLeft:0}c.append(h);return 0}}},{key:"_updateMatches",value:function _updateMatches(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.enabled||t){var r,i=this.findController,a=this.matches,o=this.pageIdx,l=this.textContentItemsStr,c=this.textDivs,u=-1,d=_createForOfIteratorHelper(a);try{for(d.s();!(r=d.n()).done;){for(var h=r.value,p=Math.max(u,h.begin.divIdx),v=h.end.divIdx;p<=v;p++){var y=c[p];y.textContent=l[p];y.className=""}u=h.end.divIdx+1}}catch(t){d.e(t)}finally{d.f()}if(null!=i&&i.highlightMatches&&!t){var g=i.pageMatches[o]||null,m=i.pageMatchesLength[o]||null,b=i.pageMatchesColor[o]||null;this.matches=this._convertMatches(g,m,b);this._renderMatches(this.matches)}}}}]);return TextHighlighter}();r.TextHighlighter=i},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.TextLayerBuilder=void 0;var a=i(4);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakSet,d=new WeakSet,h=function(){function TextLayerBuilder(t){var r=t.highlighter,i=void 0===r?null:r,a=t.accessibilityManager,h=void 0===a?null:a,p=t.isOffscreenCanvasSupported,v=void 0===p||p;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextLayerBuilder);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,u);_classPrivateFieldInitSpec(this,o,{writable:!0,value:0});_classPrivateFieldInitSpec(this,l,{writable:!0,value:0});_classPrivateFieldInitSpec(this,c,{writable:!0,value:null});this.textContentItemsStr=[];this.renderingDone=!1;this.textDivs=[];this.textDivProperties=new WeakMap;this.textLayerRenderTask=null;this.highlighter=i;this.accessibilityManager=h;this.isOffscreenCanvasSupported=v;this.div=document.createElement("div");this.div.className="textLayer";this.hide()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextLayerBuilder,[{key:"numTextDivs",get:function get(){return this.textDivs.length}},{key:"render",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,d,h,p,v,y;return _regeneratorRuntime().wrap((function _callee$(g){for(;;)switch(g.prev=g.next){case 0:if(_classPrivateFieldGet(this,c)){g.next=2;break}throw new Error('No "textContentSource" parameter specified.');case 2:h=t.scale*(globalThis.devicePixelRatio||1);p=t.rotation;if(!this.renderingDone){g.next=10;break}v=p!==_classPrivateFieldGet(this,o);y=h!==_classPrivateFieldGet(this,l);if(v||y){this.hide();(0,a.updateTextLayer)({container:this.div,viewport:t,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:y,mustRotate:v});_classPrivateFieldSet(this,l,h);_classPrivateFieldSet(this,o,p)}this.show();return g.abrupt("return");case 10:this.cancel();null===(r=this.highlighter)||void 0===r||r.setTextMapping(this.textDivs,this.textContentItemsStr);null===(i=this.accessibilityManager)||void 0===i||i.setTextMapping(this.textDivs);this.textLayerRenderTask=(0,a.renderTextLayer)({textContentSource:_classPrivateFieldGet(this,c),container:this.div,viewport:t,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported});g.next=16;return this.textLayerRenderTask.promise;case 16:_classPrivateMethodGet(this,u,_finishRendering2).call(this);_classPrivateFieldSet(this,l,h);_classPrivateFieldSet(this,o,p);this.show();null===(d=this.accessibilityManager)||void 0===d||d.enable();case 21:case"end":return g.stop()}}),_callee,this)}))),function render(r){return t.apply(this,arguments)})},{key:"hide",value:function hide(){if(!this.div.hidden){var t;null===(t=this.highlighter)||void 0===t||t.disable();this.div.hidden=!0}}},{key:"show",value:function show(){if(this.div.hidden&&this.renderingDone){var t;this.div.hidden=!1;null===(t=this.highlighter)||void 0===t||t.enable()}}},{key:"cancel",value:function cancel(){var t,r;if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}null===(t=this.highlighter)||void 0===t||t.disable();null===(r=this.accessibilityManager)||void 0===r||r.disable();this.textContentItemsStr.length=0;this.textDivs.length=0;this.textDivProperties=new WeakMap}},{key:"setTextContentSource",value:function setTextContentSource(t){this.cancel();_classPrivateFieldSet(this,c,t)}}]);var t;return TextLayerBuilder}();r.TextLayerBuilder=h;function _finishRendering2(){this.renderingDone=!0;var t=document.createElement("div");t.className="endOfContent";this.div.append(t);_classPrivateMethodGet(this,d,_bindMouse2).call(this)}function _bindMouse2(){var t=this.div;t.addEventListener("mousedown",(function(r){var i=t.querySelector(".endOfContent");if(i){var a=r.target!==t;a&&(a="none"!==getComputedStyle(i).getPropertyValue("-moz-user-select"));if(a){var o=t.getBoundingClientRect(),l=Math.max(0,(r.pageY-o.top)/o.height);i.style.top=(100*l).toFixed(2)+"%"}i.classList.add("active")}}));t.addEventListener("mouseup",(function(){var r=t.querySelector(".endOfContent");if(r){r.style.top="";r.classList.remove("active")}}))}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.XfaLayerBuilder=void 0;var a=i(4);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var o=function(){function XfaLayerBuilder(t){var r=t.pageDiv,i=t.pdfPage,a=t.annotationStorage,o=void 0===a?null:a,l=t.linkService,c=t.xfaHtml,u=void 0===c?null:c;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaLayerBuilder);this.pageDiv=r;this.pdfPage=i;this.annotationStorage=o;this.linkService=l;this.xfaHtml=u;this.div=null;this._cancelled=!1}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaLayerBuilder,[{key:"render",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,i,o,l,c,u=arguments;return _regeneratorRuntime().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:if("print"!==(r=u.length>1&&void 0!==u[1]?u[1]:"display")){d.next=7;break}i={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:r};o=document.createElement("div");this.pageDiv.append(o);i.div=o;return d.abrupt("return",a.XfaLayer.render(i));case 7:d.next=9;return this.pdfPage.getXfa();case 9:l=d.sent;if(!this._cancelled&&l){d.next=12;break}return d.abrupt("return",{textDivs:[]});case 12:c={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:l,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:r};if(!this.div){d.next=15;break}return d.abrupt("return",a.XfaLayer.update(c));case 15:this.div=document.createElement("div");this.pageDiv.append(this.div);c.div=this.div;return d.abrupt("return",a.XfaLayer.render(c));case 19:case"end":return d.stop()}}),_callee,this)}))),function render(r){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(){this._cancelled=!0}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}}]);var t;return XfaLayerBuilder}();r.XfaLayerBuilder=o},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.SecondaryToolbar=void 0;var a=i(3),o=i(32);function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var l=new WeakSet,c=new WeakSet,u=new WeakSet,d=new WeakSet,h=new WeakSet,p=function(){function SecondaryToolbar(t,r,i){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SecondaryToolbar);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);this.toolbar=t.toolbar;this.toggleButton=t.toggleButton;this.buttons=[{element:t.presentationModeButton,eventName:"presentationmode",close:!0},{element:t.printButton,eventName:"print",close:!0},{element:t.downloadButton,eventName:"download",close:!0},{element:t.viewBookmarkButton,eventName:null,close:!0},{element:t.firstPageButton,eventName:"firstpage",close:!0},{element:t.lastPageButton,eventName:"lastpage",close:!0},{element:t.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:t.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:t.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.SELECT},close:!0},{element:t.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.HAND},close:!0},{element:t.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.PAGE},close:!0},{element:t.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.VERTICAL},close:!0},{element:t.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.HORIZONTAL},close:!0},{element:t.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.WRAPPED},close:!0},{element:t.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.NONE},close:!0},{element:t.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.ODD},close:!0},{element:t.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.EVEN},close:!0},{element:t.documentPropertiesButton,eventName:"documentproperties",close:!0}];this.buttons.push({element:t.openFileButton,eventName:"openfile",close:!0});this.items={firstPage:t.firstPageButton,lastPage:t.lastPageButton,pageRotateCw:t.pageRotateCwButton,pageRotateCcw:t.pageRotateCcwButton};this.eventBus=r;this.externalServices=i;this.opened=!1;_classPrivateMethodGet(this,c,_bindClickListeners2).call(this);_classPrivateMethodGet(this,u,_bindCursorToolsListener2).call(this,t);_classPrivateMethodGet(this,d,_bindScrollModeListener2).call(this,t);_classPrivateMethodGet(this,h,_bindSpreadModeListener2).call(this,t);this.reset()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(SecondaryToolbar,[{key:"isOpen",get:function get(){return this.opened}},{key:"setPageNumber",value:function setPageNumber(t){this.pageNumber=t;_classPrivateMethodGet(this,l,_updateUIState2).call(this)}},{key:"setPagesCount",value:function setPagesCount(t){this.pagesCount=t;_classPrivateMethodGet(this,l,_updateUIState2).call(this)}},{key:"reset",value:function reset(){this.pageNumber=0;this.pagesCount=0;_classPrivateMethodGet(this,l,_updateUIState2).call(this);this.eventBus.dispatch("secondarytoolbarreset",{source:this})}},{key:"open",value:function open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.toolbar.classList.remove("hidden")}}},{key:"close",value:function close(){if(this.opened){this.opened=!1;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false")}}},{key:"toggle",value:function toggle(){this.opened?this.close():this.open()}}]);return SecondaryToolbar}();r.SecondaryToolbar=p;function _updateUIState2(){this.items.firstPage.disabled=this.pageNumber<=1;document.getElementById("previousPage")&&(document.getElementById("previousPage").disabled=this.pageNumber<=1);this.items.lastPage.disabled=this.pageNumber>=this.pagesCount;document.getElementById("nextPage")&&(document.getElementById("nextPage").disabled=this.pageNumber>=this.pagesCount);this.items.pageRotateCw.disabled=0===this.pagesCount;this.items.pageRotateCcw.disabled=0===this.pagesCount;this.eventBus.dispatch("updateuistate",{source:this,widget:"SecondaryToolbar",pageNumber:this.pageNumber,pagesCount:this.pagesCount})}function _bindClickListeners2(){var t=this;this.toggleButton.addEventListener("click",this.toggle.bind(this));var r,i=_createForOfIteratorHelper(this.buttons);try{var a=function _loop(){var i=r.value,a=i.element,o=i.eventName,l=i.close,c=i.eventDetails;null==a||a.addEventListener("click",(function(r){null!==o&&t.eventBus.dispatch(o,function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}({source:t},c));l&&t.close();t.externalServices.reportTelemetry({type:"buttons",data:{id:a.id}})}))};for(i.s();!(r=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}function _bindCursorToolsListener2(t){var r=t.cursorSelectToolButton,i=t.cursorHandToolButton;this.eventBus._on("cursortoolchanged",(function(t){var o=t.tool,l=o===a.CursorTool.SELECT,c=o===a.CursorTool.HAND;r.classList.toggle("toggled",l);i.classList.toggle("toggled",c);r.setAttribute("aria-checked",l);i.setAttribute("aria-checked",c)}))}function _bindScrollModeListener2(t){var r=this,i=t.scrollPageButton,l=t.scrollVerticalButton,c=t.scrollHorizontalButton,u=t.scrollWrappedButton,d=t.spreadNoneButton,h=t.spreadOddButton,p=t.spreadEvenButton,v=function scrollModeChanged(t){var v=t.mode,y=v===a.ScrollMode.PAGE,g=v===a.ScrollMode.VERTICAL,m=v===a.ScrollMode.HORIZONTAL,b=v===a.ScrollMode.WRAPPED;i.classList.toggle("toggled",y);l.classList.toggle("toggled",g);c.classList.toggle("toggled",m);u.classList.toggle("toggled",b);i.setAttribute("aria-checked",y);l.setAttribute("aria-checked",g);c.setAttribute("aria-checked",m);u.setAttribute("aria-checked",b);var w=r.pagesCount>o.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;i.disabled=w;l.disabled=w;c.disabled=w;u.disabled=w;d.disabled=m;h.disabled=m;p.disabled=m};this.eventBus._on("scrollmodechanged",v);this.eventBus._on("secondarytoolbarreset",(function(t){t.source===r&&v({mode:a.ScrollMode.VERTICAL})}))}function _bindSpreadModeListener2(t){var r=this,i=t.spreadNoneButton,o=t.spreadOddButton,l=t.spreadEvenButton;function spreadModeChanged(t){var r=t.mode,c=r===a.SpreadMode.NONE,u=r===a.SpreadMode.ODD,d=r===a.SpreadMode.EVEN;i.classList.toggle("toggled",c);o.classList.toggle("toggled",u);l.classList.toggle("toggled",d);i.setAttribute("aria-checked",c);o.setAttribute("aria-checked",u);l.setAttribute("aria-checked",d)}this.eventBus._on("spreadmodechanged",spreadModeChanged);this.eventBus._on("secondarytoolbarreset",(function(t){t.source===r&&spreadModeChanged({mode:a.SpreadMode.NONE})}))}},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.Toolbar=void 0;var a=i(3),o=i(4);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,i){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var l=new WeakMap,c=new WeakSet,u=new WeakSet,d=new WeakSet,h=new WeakSet,p=function(){function Toolbar(t,r,i){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Toolbar);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,c);!function _classPrivateFieldInitSpec(t,r,i){_checkPrivateRedeclaration(t,r);r.set(t,i)}(this,l,{writable:!0,value:!1});this.toolbar=t.container;this.eventBus=r;this.l10n=i;this.buttons=[{element:t.previous,eventName:"previouspage"},{element:t.next,eventName:"nextpage"},{element:t.zoomIn,eventName:"zoomin"},{element:t.zoomOut,eventName:"zoomout"},{element:t.print,eventName:"print"},{element:t.presentationModeButton,eventName:"presentationmode"},{element:t.download,eventName:"download"},{element:t.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){return t.editorFreeTextButton.classList.contains("toggled")?o.AnnotationEditorType.NONE:o.AnnotationEditorType.FREETEXT}}},{element:t.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){return t.editorInkButton.classList.contains("toggled")?o.AnnotationEditorType.NONE:o.AnnotationEditorType.INK}}}];this.buttons.push({element:t.openFile,eventName:"openfile"});this.items={numPages:t.numPages,pageNumber:t.pageNumber,scaleSelect:t.scaleSelect,customScaleOption:t.customScaleOption,previous:t.previous,next:t.next,zoomIn:t.zoomIn,zoomOut:t.zoomOut};_classPrivateMethodGet(this,c,_bindListeners2).call(this,t);this.reset()}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(Toolbar,[{key:"setPageNumber",value:function setPageNumber(t,r){this.pageNumber=t;this.pageLabel=r;_classPrivateMethodGet(this,d,_updateUIState2).call(this,!1)}},{key:"setPagesCount",value:function setPagesCount(t,r){this.pagesCount=t;this.hasPageLabels=r;_classPrivateMethodGet(this,d,_updateUIState2).call(this,!0)}},{key:"setPageScale",value:function setPageScale(t,r){this.pageScaleValue=(t||r).toString();this.pageScale=r;_classPrivateMethodGet(this,d,_updateUIState2).call(this,!1)}},{key:"reset",value:function reset(){this.pageNumber=0;this.pageLabel=null;this.hasPageLabels=!1;this.pagesCount=0;var t=PDFViewerApplicationOptions.get("defaultZoomValue");if(t){this.pageScaleValue=t;Number(t)&&(this.pageScale=Number(t))}else{this.pageScaleValue=a.DEFAULT_SCALE_VALUE;this.pageScale=a.DEFAULT_SCALE}_classPrivateMethodGet(this,d,_updateUIState2).call(this,!0);this.updateLoadingIndicatorState();this.eventBus.dispatch("toolbarreset",{source:this})}},{key:"updateLoadingIndicatorState",value:function updateLoadingIndicatorState(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.items.pageNumber.classList.toggle("visiblePageIsLoading",t)}}]);return Toolbar}();r.Toolbar=p;function _bindListeners2(t){var r,i=this,o=this.items,c=o.pageNumber,p=o.scaleSelect,v=this,y=_createForOfIteratorHelper(this.buttons);try{var g=function _loop(){var t=r.value,a=t.element,o=t.eventName,l=t.eventDetails;null==a||a.addEventListener("click",(function(t){null!==o&&i.eventBus.dispatch(o,function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}({source:i},l))}))};for(y.s();!(r=y.n()).done;)g()}catch(t){y.e(t)}finally{y.f()}c.addEventListener("click",(function(){this.select()}));c.addEventListener("change",(function(){v.eventBus.dispatch("pagenumberchanged",{source:v,value:this.value})}));p.addEventListener("change",(function(){"custom"!==this.value&&v.eventBus.dispatch("scalechanged",{source:v,value:this.value})}));p.addEventListener("click",(function(t){var r=t.target;this.value===v.pageScaleValue&&"OPTION"===r.tagName.toUpperCase()&&this.blur()}));p.oncontextmenu=a.noContextMenuHandler;this.eventBus._on("localized",(function(){_classPrivateFieldSet(i,l,!0);_classPrivateMethodGet(i,h,_adjustScaleWidth2).call(i);_classPrivateMethodGet(i,d,_updateUIState2).call(i,!0)}));_classPrivateMethodGet(this,u,_bindEditorToolsListener2).call(this,t)}function _bindEditorToolsListener2(t){var r=this,i=t.editorFreeTextButton,a=t.editorFreeTextParamsToolbar,l=t.editorInkButton,c=t.editorInkParamsToolbar,u=function editorModeChanged(t){for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=0,d=[{mode:o.AnnotationEditorType.FREETEXT,button:i,toolbar:a},{mode:o.AnnotationEditorType.INK,button:l,toolbar:c}];u<d.length;u++){var h=d[u],p=h.mode,v=h.button,y=h.toolbar,g=p===t.mode;v.classList.toggle("toggled",g);v.setAttribute("aria-checked",g);v.disabled=r;null==y||y.classList.toggle("hidden",!g)}};this.eventBus._on("annotationeditormodechanged",u);this.eventBus._on("toolbarreset",(function(t){t.source===r&&u({mode:o.AnnotationEditorType.NONE},!0)}))}function _updateUIState2(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){return r.get?r.get.call(t):r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}(this,l)){var r=this.pageNumber,i=this.pagesCount,o=this.pageScaleValue,c=this.pageScale,u=this.items;if(t){if(this.hasPageLabels)u.pageNumber.type="text";else{u.pageNumber.type="number";this.l10n.get("of_pages",{pagesCount:i}).then((function(t){u.numPages.textContent=t}))}u.pageNumber.max=i}if(this.hasPageLabels){u.pageNumber.value=this.pageLabel;this.l10n.get("page_of_pages",{pageNumber:r,pagesCount:i}).then((function(t){u.numPages.textContent=t}))}else u.pageNumber.value=r;u.previous.disabled=r<=1;u.next.disabled=r>=i;u.zoomOut.disabled=c<=a.MIN_SCALE;u.zoomIn.disabled=c>=a.MAX_SCALE;this.l10n.get("page_scale_percent",{scale:Math.round(1e4*c)/100}).then((function(t){var r=!1;if(u.scaleSelect.options){var i,a=_createForOfIteratorHelper(u.scaleSelect.options);try{for(a.s();!(i=a.n()).done;){var l=i.value;if(l.value===o){l.selected=!0;r=!0}else l.selected=!1}}catch(t){a.e(t)}finally{a.f()}}if(!r){u.customScaleOption.textContent=t;u.customScaleOption.selected=!0}}));this.eventBus.dispatch("updateuistate",{source:this,widget:"Toolbar",pageNumber:r,pagesCount:i,pageScaleValue:o,pageScale:c})}}function _adjustScaleWidth2(){return _adjustScaleWidth3.apply(this,arguments)}function _adjustScaleWidth3(){_adjustScaleWidth3=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(){var t,r,i,o,l,c,u,d,h,p,v,y,g,m;return _regeneratorRuntime().wrap((function _callee$(b){for(;;)switch(b.prev=b.next){case 0:t=this.items,r=this.l10n;i=Promise.all([r.get("page_scale_auto"),r.get("page_scale_actual"),r.get("page_scale_fit"),r.get("page_scale_width")]);b.next=4;return a.animationStarted;case 4:o=getComputedStyle(t.scaleSelect);l=parseFloat(o.getPropertyValue("--scale-select-width"));c=document.createElement("canvas");u=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0,alpha:!1}:{alpha:!1};(d=c.getContext("2d",u)).font="".concat(o.fontSize," ").concat(o.fontFamily);h=0;b.t0=_createForOfIteratorHelper;b.next=14;return i;case 14:b.t1=b.sent;p=(0,b.t0)(b.t1);try{for(p.s();!(v=p.n()).done;){y=v.value;try{g=d.measureText(y);(m=g.width)>h&&(h=m)}catch(t){}}}catch(t){p.e(t)}finally{p.f()}(h+=.3*l)>l&&t.scaleSelect.parentNode.style.setProperty("--scale-select-width","".concat(h,"px"));c.width=0;c.height=0;case 21:case"end":return b.stop()}}),_callee,this)})));return _adjustScaleWidth3.apply(this,arguments)}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ViewHistory=void 0;var a=i(5);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var o=function(){function ViewHistory(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ViewHistory);this.fingerprint=t;this.cacheSize=i;this._initializedPromise=this._readFromStorage().then((function(t){var i=JSON.parse(t||"{}"),a=-1;if(Array.isArray(i.files)){for(;i.files.length>=r.cacheSize;)i.files.shift();for(var o=0,l=i.files.length;o<l;o++){if(i.files[o].fingerprint===r.fingerprint){a=o;break}}}else i.files=[];-1===a&&(a=i.files.push({fingerprint:r.fingerprint})-1);r.file=i.files[a];r.database=i}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(ViewHistory,[{key:"_writeToStorage",value:(c=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(!a.AppOptions.get("disableHistory")){r.next=2;break}return r.abrupt("return");case 2:t=JSON.stringify(this.database);try{localStorage.setItem("pdfjs.history",t)}catch(t){}case 4:case"end":return r.stop()}}),_callee,this)}))),function _writeToStorage(){return c.apply(this,arguments)})},{key:"_readFromStorage",value:(l=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!a.AppOptions.get("disableHistory")){t.next=2;break}return t.abrupt("return",void 0);case 2:t.prev=2;return t.abrupt("return",localStorage.getItem("pdfjs.history"));case 6:t.prev=6;t.t0=t.catch(2);return t.abrupt("return",void 0);case 9:case"end":return t.stop()}}),_callee2,null,[[2,6]])}))),function _readFromStorage(){return l.apply(this,arguments)})},{key:"set",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t,r){return _regeneratorRuntime().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:this.file[t]=r;return i.abrupt("return",this._writeToStorage());case 4:case"end":return i.stop()}}),_callee3,this)}))),function set(t,r){return o.apply(this,arguments)})},{key:"setMultiple",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:for(r in t)this.file[r]=t[r];return i.abrupt("return",this._writeToStorage());case 4:case"end":return i.stop()}}),_callee4,this)}))),function setMultiple(t){return i.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t,r){var i;return _regeneratorRuntime().wrap((function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._initializedPromise;case 2:i=this.file[t];return a.abrupt("return",void 0!==i?i:r);case 4:case"end":return a.stop()}}),_callee5,this)}))),function get(t,i){return r.apply(this,arguments)})},{key:"getMultiple",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(t){var r,i,a;return _regeneratorRuntime().wrap((function _callee6$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._initializedPromise;case 2:r=Object.create(null);for(i in t){a=this.file[i];r[i]=void 0!==a?a:t[i]}return o.abrupt("return",r);case 5:case"end":return o.stop()}}),_callee6,this)}))),function getMultiple(r){return t.apply(this,arguments)})}]);var t,r,i,o,l,c;return ViewHistory}();r.ViewHistory=o},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BasePreferences=void 0;i(5);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,i){!function _classApplyDescriptorSet(t,r,i){if(r.set)r.set.call(t,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}(t,_classExtractFieldDescriptor(t,r,"set"),i);return i}function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}var a=new WeakMap,o=new WeakMap,l=new WeakMap,c=function(){function BasePreferences(){var t=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BasePreferences);_classPrivateFieldInitSpec(this,a,{writable:!0,value:Object.freeze({annotationEditorMode:0,annotationMode:2,cursorToolOnLoad:0,defaultZoomDelay:400,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,removePageBorders:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0,renderer:"canvas"})});_classPrivateFieldInitSpec(this,o,{writable:!0,value:Object.create(null)});_classPrivateFieldInitSpec(this,l,{writable:!0,value:null});if(this.constructor===BasePreferences)throw new Error("Cannot initialize BasePreferences.");_classPrivateFieldSet(this,l,this._readFromStorage(_classPrivateFieldGet(this,a)).then((function(r){for(var i in _classPrivateFieldGet(t,a)){var l=null==r?void 0:r[i];_typeof(l)===_typeof(_classPrivateFieldGet(t,a)[i])&&(_classPrivateFieldGet(t,o)[i]=l)}})))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(BasePreferences,[{key:"_writeToStorage",value:(d=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented: _writeToStorage");case 1:case"end":return t.stop()}}),_callee)}))),function _writeToStorage(t){return d.apply(this,arguments)})},{key:"_readFromStorage",value:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented: _readFromStorage");case 1:case"end":return t.stop()}}),_callee2)}))),function _readFromStorage(t){return u.apply(this,arguments)})},{key:"reset",value:(c=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t,r=this;return _regeneratorRuntime().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return _classPrivateFieldGet(this,l);case 2:t=_classPrivateFieldGet(this,o);_classPrivateFieldSet(this,o,Object.create(null));return i.abrupt("return",this._writeToStorage(_classPrivateFieldGet(this,a)).catch((function(i){_classPrivateFieldSet(r,o,t);throw i})));case 5:case"end":return i.stop()}}),_callee3,this)}))),function reset(){return c.apply(this,arguments)})},{key:"set",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t,r){var i,c,u,d,h=this;return _regeneratorRuntime().wrap((function _callee4$(p){for(;;)switch(p.prev=p.next){case 0:p.next=2;return _classPrivateFieldGet(this,l);case 2:i=_classPrivateFieldGet(this,a)[t],c=_classPrivateFieldGet(this,o);if(void 0!==i){p.next=7;break}throw new Error('Set preference: "'.concat(t,'" is undefined.'));case 7:if(void 0!==r){p.next=9;break}throw new Error("Set preference: no value is specified.");case 9:u=_typeof(r),d=_typeof(i);if(u===d){p.next=18;break}if("number"!==u||"string"!==d){p.next=15;break}r=r.toString();p.next=16;break;case 15:throw new Error('Set preference: "'.concat(r,'" is a ').concat(u,", expected a ").concat(d,"."));case 16:p.next=20;break;case 18:if("number"!==u||Number.isInteger(r)){p.next=20;break}throw new Error('Set preference: "'.concat(r,'" must be an integer.'));case 20:_classPrivateFieldGet(this,o)[t]=r;return p.abrupt("return",this._writeToStorage(_classPrivateFieldGet(this,o)).catch((function(t){_classPrivateFieldSet(h,o,c);throw t})));case 22:case"end":return p.stop()}}),_callee4,this)}))),function set(t,r){return i.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t){var r,i;return _regeneratorRuntime().wrap((function _callee5$(c){for(;;)switch(c.prev=c.next){case 0:c.next=2;return _classPrivateFieldGet(this,l);case 2:if(void 0!==(i=_classPrivateFieldGet(this,a)[t])){c.next=5;break}throw new Error('Get preference: "'.concat(t,'" is undefined.'));case 5:return c.abrupt("return",null!==(r=_classPrivateFieldGet(this,o)[t])&&void 0!==r?r:i);case 6:case"end":return c.stop()}}),_callee5,this)}))),function get(t){return r.apply(this,arguments)})},{key:"getAll",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){var t,r,i;return _regeneratorRuntime().wrap((function _callee6$(c){for(;;)switch(c.prev=c.next){case 0:c.next=2;return _classPrivateFieldGet(this,l);case 2:t=Object.create(null);for(r in _classPrivateFieldGet(this,a))t[r]=null!==(i=_classPrivateFieldGet(this,o)[r])&&void 0!==i?i:_classPrivateFieldGet(this,a)[r];return c.abrupt("return",t);case 5:case"end":return c.stop()}}),_callee6,this)}))),function getAll(){return t.apply(this,arguments)})}]);var t,r,i,c,u,d;return BasePreferences}();r.BasePreferences=c},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.DownloadManager=void 0;var a=i(4);function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}function _classPrivateFieldInitSpec(t,r,i){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,i)}function _classPrivateFieldGet(t,r){var i=function _classExtractFieldDescriptor(t,r,i){if(!r.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(t)}(t,r,"get");return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,i)}function _download(t,r){var i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=t;i.target="_parent";"download"in i&&(i.download=r);(document.body||document.documentElement).append(i);i.click();i.remove()}var o=new WeakMap,l=function(){function DownloadManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DownloadManager);_classPrivateFieldInitSpec(this,o,{writable:!0,value:new WeakMap})}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(DownloadManager,[{key:"downloadUrl",value:function downloadUrl(t,r){(0,a.createValidAbsoluteUrl)(t,"http://example.com")?_download(t+"#pdfjs.action=download",r):globalThis.ngxConsole.error("downloadUrl - not a valid URL: ".concat(t))}},{key:"downloadData",value:function downloadData(t,r,i){_download(URL.createObjectURL(new Blob([t],{type:i})),r)}},{key:"openOrDownloadData",value:function openOrDownloadData(t,r,i){var l=(0,a.isPdfFile)(i),c=l?"application/pdf":"";if(l){var u=_classPrivateFieldGet(this,o).get(t);if(!u){u=URL.createObjectURL(new Blob([r],{type:c}));_classPrivateFieldGet(this,o).set(t,u)}try{window.open(u);return!0}catch(r){globalThis.ngxConsole.error("openOrDownloadData: ".concat(r));URL.revokeObjectURL(u);_classPrivateFieldGet(this,o).delete(t)}}this.downloadData(r,i,c);return!1}},{key:"download",value:function download(t,r,i){_download(URL.createObjectURL(t),i)}}]);return DownloadManager}();r.DownloadManager=l},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.GenericL10n=void 0;i(186);var a=i(33);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,(o=a.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===_typeof(l)?l:String(l)),a)}var o,l}var o=document.webL10n,l=function(){function GenericL10n(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GenericL10n);this._lang=t;this._ready=new Promise((function(r,i){o.setLanguage((0,a.fixupLangCode)(t),(function(){r(o)}))}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(GenericL10n,[{key:"getLanguage",value:(l=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:t=r.sent;return r.abrupt("return",t.getLanguage());case 4:case"end":return r.stop()}}),_callee,this)}))),function getLanguage(){return l.apply(this,arguments)})},{key:"getDirection",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t;return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:t=r.sent;return r.abrupt("return",t.getDirection());case 4:case"end":return r.stop()}}),_callee2,this)}))),function getDirection(){return i.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){var r,i,o,l=arguments;return _regeneratorRuntime().wrap((function _callee3$(c){for(;;)switch(c.prev=c.next){case 0:r=l.length>1&&void 0!==l[1]?l[1]:null;i=l.length>2&&void 0!==l[2]?l[2]:(0,a.getL10nFallback)(t,r);c.next=4;return this._ready;case 4:o=c.sent;return c.abrupt("return",o.get(t,r,i));case 6:case"end":return c.stop()}}),_callee3,this)}))),function get(t){return r.apply(this,arguments)})},{key:"translate",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r;return _regeneratorRuntime().wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._ready;case 2:r=i.sent;return i.abrupt("return",r.translate(t));case 4:case"end":return i.stop()}}),_callee4,this)}))),function translate(r){return t.apply(this,arguments)})}]);var t,r,i,l;return GenericL10n}();r.GenericL10n=l},()=>{"use strict";document.webL10n=function(t,r,i){var a={},o="",l="textContent",c="",u={},d="loading",h=!0;function fireL10nReadyEvent(t){var i=r.createEvent("Event");i.initEvent("localized",!0,!1);i.language=t;r.dispatchEvent(i)}function xhrLoadText(t,r,i){r=r||function _onSuccess(t){};i=i||function _onFailure(){};var a=new XMLHttpRequest;a.open("GET",t,h);a.overrideMimeType&&a.overrideMimeType("text/plain; charset=utf-8");a.onreadystatechange=function(){4==a.readyState&&(200==a.status||0===a.status?r(a.responseText):i())};a.onerror=i;a.ontimeout=i;try{a.send(null)}catch(t){i()}}function parseResource(r,c,u,d){var h=r.replace(/[^\/]*$/,"")||"./";function evalString(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(r,(function(r){o+=r;!function parseProperties(r,a){var o={},l=/^\s*|\s*$/,u=/^\s*#|^\s*$/,d=/^\s*\[(.*)\]\s*$/,p=/^\s*@import\s+url\((.*)\)\s*$/i,v=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(t,r,a){var y=t.replace(l,"").split(/[\r\n]+/),g="*",m=c.split("-",1)[0],b=!1,w="",P=!1;!function nextEntry(){for(var t=i;;){if(!y.length&&t){P?nextEntry():loadImport(t,nextEntry);return}if(!y.length){a();return}var l=y.shift();if(!u.test(l)){if(r){if(w=d.exec(l)){g=w[1].toLowerCase();b="*"!==g&&g!==c&&g!==m;continue}if(b)continue;if(w=p.exec(l)){if("*"===g||g===c){loadImport(h+w[1],nextEntry);P=!0;return}t=h+w[1]}}var S=l.match(v);S&&3==S.length&&(o[S[1]]=evalString(S[2]))}}}()}function loadImport(r,i){xhrLoadText(r,(function(t){parseRawLines(t,!1,i)}),(function(){var a=t.PDFViewerApplicationOptions;(!a||a.get("verbosity")>0)&&globalThis.ngxConsole.warn(r+" not found.");i()}))}parseRawLines(r,!0,(function(){a(o)}))}(r,(function(t){for(var r in t){var i,o,c=r.lastIndexOf(".");if(c>0){i=r.substring(0,c);o=r.substring(c+1)}else{i=r;o=l}a[i]||(a[i]={});a[i][o]=t[r]}u&&u()}))}),d)}function loadLocale(i,l){var u=i;i&&(i=i.toLowerCase());l=l||function _callback(){};!function clear(){a={};o="";c=""}();c=i;var h=function getL10nResourceLinks(){return r.querySelectorAll('link[type="application/l10n"]')}(),p=h.length;if(0!==p){var v,y=0;v=function onResourceLoaded(){if(++y>=p){l();fireL10nReadyEvent(i);d="complete"}};for(var g=0;g<p;g++){new L10nResourceLink(h[g]).load(i,v)}}else{var m=function getL10nDictionary(){var t=r.querySelector('script[type="application/l10n"]');return t?JSON.parse(t.innerHTML):null}();if(m&&m.locales&&m.default_locale){globalThis.ngxConsole.log("The PDF viewer uses the pre-compiled language bundle stored in the HTML page.");if(!(a=m.locales[u])){var b=m.default_locale.toLowerCase();for(var w in m.locales){u=w;if((w=w.toLowerCase())===i){a=m.locales[u];break}w===b&&(a=m.locales[u])}}l()}else globalThis.ngxConsole.log("Could not load the translation files for the PDF viewer. Check the flag useBrowserLocale, check the locales subfolder of the assets folder, or add the locale definition to the index.html");fireL10nReadyEvent(i);d="complete"}function L10nResourceLink(r){var i=r.href;this.load=function(r,a){parseResource(i,r,a,(function(){var o=t.PDFViewerApplicationOptions;if(!o||o.get("verbosity")>0){globalThis.ngxConsole.warn(i+" not found.");globalThis.ngxConsole.warn('"'+r+'" resource not found')}c="";a()}))}}}u.plural=function(r,i,o,d){var h=parseFloat(i);if(isNaN(h))return r;if(d!=l)return r;u._pluralRules||(u._pluralRules=function getPluralRules(r){function isIn(t,r){return-1!==r.indexOf(t)}function isBetween(t,r,i){return r<=t&&t<=i}var i={0:function _(t){return"other"},1:function _(t){return isBetween(t%100,3,10)?"few":0===t?"zero":isBetween(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function _(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function _(t){return 1==t?"one":"other"},4:function _(t){return isBetween(t,0,1)?"one":"other"},5:function _(t){return isBetween(t,0,2)&&2!=t?"one":"other"},6:function _(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function _(t){return 2==t?"two":1==t?"one":"other"},8:function _(t){return isBetween(t,3,6)?"few":isBetween(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function _(t){return 0===t||1!=t&&isBetween(t%100,1,19)?"few":1==t?"one":"other"},10:function _(t){return isBetween(t%10,2,9)&&!isBetween(t%100,11,19)?"few":t%10!=1||isBetween(t%100,11,19)?"other":"one"},11:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":t%10==0||isBetween(t%10,5,9)||isBetween(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function _(t){return isBetween(t,2,4)?"few":1==t?"one":"other"},13:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":1!=t&&isBetween(t%10,0,1)||isBetween(t%10,5,9)||isBetween(t%100,12,14)?"many":1==t?"one":"other"},14:function _(t){return isBetween(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function _(t){return 0===t||isBetween(t%100,2,10)?"few":isBetween(t%100,11,19)?"many":1==t?"one":"other"},16:function _(t){return t%10==1&&11!=t?"one":"other"},17:function _(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function _(t){return 0===t?"zero":isBetween(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function _(t){return isBetween(t,2,10)?"few":isBetween(t,0,1)?"one":"other"},20:function _(t){return!isBetween(t%10,3,4)&&t%10!=9||isBetween(t%100,10,19)||isBetween(t%100,70,79)||isBetween(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||isIn(t%100,[12,72,92])?t%10!=1||isIn(t%100,[11,71,91])?"other":"one":"two":"few"},21:function _(t){return 0===t?"zero":1==t?"one":"other"},22:function _(t){return isBetween(t,0,1)||isBetween(t,11,99)?"one":"other"},23:function _(t){return isBetween(t%10,1,2)||t%20==0?"one":"other"},24:function _(t){return isBetween(t,3,10)||isBetween(t,13,19)?"few":isIn(t,[2,12])?"two":isIn(t,[1,11])?"one":"other"}},a={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[r.replace(/-.*$/,"")];if(!(a in i)){var o=t.PDFViewerApplicationOptions;(!o||o.get("verbosity")>0)&&globalThis.ngxConsole.warn("plural form unknown for ["+r+"]");return function(){return"other"}}return i[a]}(c));var p="["+u._pluralRules(h)+"]";0===h&&o+"[zero]"in a?r=a[o+"[zero]"][d]:1==h&&o+"[one]"in a?r=a[o+"[one]"][d]:2==h&&o+"[two]"in a?r=a[o+"[two]"][d]:o+p in a?r=a[o+p][d]:o+"[other]"in a&&(r=a[o+"[other]"][d]);return r};function getL10nData(r,i,o){var l=a[r];if(!l){var c=t.PDFViewerApplicationOptions;(!c||c.get("verbosity")>0)&&globalThis.ngxConsole.warn("Translation for the key #"+r+" is missing.");if(!o)return null;l=o}var u={};for(var d in l){var h=l[d];h=substArguments(h=substIndexes(h,i,r,d),i,r);u[d]=h}return u}function substIndexes(t,r,i,o){var l=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!l||!l.length)return t;var c,d=l[1],h=l[2];r&&h in r?c=r[h]:h in a&&(c=a[h]);if(d in u){t=(0,u[d])(t,c,i,o)}return t}function substArguments(t,r,i){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,o){if(r&&o in r)return r[o];if(o in a)return a[o];globalThis.ngxConsole.log("argument {{"+o+"}} for #"+i+" is undefined.");return t}))}function translateElement(i){var a=function getL10nAttributes(r){if(!r)return{};var i=r.getAttribute("data-l10n-id"),a=r.getAttribute("data-l10n-args"),o={};if(a)try{o=JSON.parse(a)}catch(r){var l=t.PDFViewerApplicationOptions;(!l||l.get("verbosity")>0)&&globalThis.ngxConsole.warn("could not parse arguments for #"+i)}return{id:i,args:o}}(i);if(a.id){var o=getL10nData(a.id,a.args);if(o){if(o[l]){if(0===function getChildElementCount(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var r=0,i=0;i<t.childNodes.length;i++)r+=1===t.nodeType?1:0;return r}(i))i[l]=o[l];else{for(var c=i.childNodes,u=!1,d=0,h=c.length;d<h;d++)if(3===c[d].nodeType&&/\S/.test(c[d].nodeValue))if(u)c[d].nodeValue="";else{c[d].nodeValue=o[l];u=!0}if(!u){var p=r.createTextNode(o[l]);i.prepend(p)}}delete o[l]}for(var v in o)i[v]=o[v]}else{var y=t.PDFViewerApplicationOptions;(!y||y.get("verbosity")>0)&&globalThis.ngxConsole.warn("#"+a.id+" is undefined.")}}}return{get:function get(t,r,i){var a,o=t.lastIndexOf("."),c=l;if(o>0){c=t.substring(o+1);t=t.substring(0,o)}i&&((a={})[c]=i);var u=getL10nData(t,r,a);return u&&c in u?u[c]:"{{"+t+"}}"},getData:function getData(){return a},getText:function getText(){return o},getLanguage:function getLanguage(){return c},setLanguage:function setLanguage(t,r){loadLocale(t,(function(){r&&r()}))},getDirection:function getDirection(){var t=c.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function translateFragment(t){for(var i=function getTranslatableChildren(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||r.documentElement),a=i.length,o=0;o<a;o++)translateElement(i[o]);translateElement(t)},getReadyState:function getReadyState(){return d},ready:function ready(i){i&&("complete"==d||"interactive"==d?t.setTimeout((function(){i()})):r.addEventListener&&r.addEventListener("localized",(function once(){r.removeEventListener("localized",once);i()})))}}}(window,document)},(t,r,i)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.GenericScripting=void 0;r.docPropertiesLookup=function docPropertiesLookup(t){return _docPropertiesLookup.apply(this,arguments)};var a=i(4);function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i;return t}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var l=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(l.prototype),u=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,u)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,l,(function(){return this}));var p=Object.getPrototypeOf,v=p&&p(p(values([])));v&&v!==r&&i.call(v,l)&&(h=v);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,i){var a="suspendedStart";return function(o,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw l;return doneResult()}for(i.method=o,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var h=tryCatch(t,r,i);if("normal"===h.type){if(a=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(a="completed",i.method="throw",i.arg=h.arg)}}}function maybeInvokeDelegate(t,r){var i=r.method,a=t.iterator[i];if(void 0===a)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=tryCatch(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var l=o.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,i,a,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,a,o),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(y),define(y,u,"Generator"),define(y,l,(function(){return this})),define(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),i=[];for(var a in r)i.push(a);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(i,a){return l.type="throw",l.arg=t,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var o=a.arg;resetTryEntry(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function asyncGeneratorStep(t,r,i,a,o,l,c){try{var u=t[l](c),d=u.value}catch(t){i(t);return}u.done?r(d):Promise.resolve(d).then(a,o)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,o){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _docPropertiesLookup(){return(_docPropertiesLookup=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r,i,o,l,c,u,d,h,p;return _regeneratorRuntime().wrap((function _callee4$(v){for(;;)switch(v.prev=v.next){case 0:i=(r="").split("#")[0];v.next=3;return t.getMetadata();case 3:o=v.sent;l=o.info;c=o.metadata;u=o.contentDispositionFilename;if(d=o.contentLength){v.next=14;break}v.next=11;return t.getDownloadInfo();case 11:h=v.sent;p=h.length;d=p;case 14:return v.abrupt("return",_objectSpread(_objectSpread({},l),{},{baseURL:i,filesize:d,filename:u||(0,a.getPdfFilenameFromUrl)(r),metadata:null==c?void 0:c.getRaw(),authors:null==c?void 0:c.get("dc:creator"),numPages:t.numPages,URL:r}));case 15:case"end":return v.stop()}}),_callee4)})))).apply(this,arguments)}var o=function(){function GenericScripting(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GenericScripting);this._ready=(0,a.loadScript)(t,!0).then((function(){return window.pdfjsSandbox.QuickJSSandbox()}))}!function _createClass(t,r,i){r&&_defineProperties(t.prototype,r);i&&_defineProperties(t,i);Object.defineProperty(t,"prototype",{writable:!1});return t}(GenericScripting,[{key:"createSandbox",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:r.sent.create(t);case 4:case"end":return r.stop()}}),_callee,this)}))),function createSandbox(t){return i.apply(this,arguments)})},{key:"dispatchEventInSandbox",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._ready;case 2:r=i.sent;setTimeout((function(){return r.dispatchEvent(t)}),0);case 4:case"end":return i.stop()}}),_callee2,this)}))),function dispatchEventInSandbox(t){return r.apply(this,arguments)})},{key:"destroySandbox",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){return _regeneratorRuntime().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return this._ready;case 2:t.sent.nukeSandbox();case 4:case"end":return t.stop()}}),_callee3,this)}))),function destroySandbox(){return t.apply(this,arguments)})}]);var t,r,i;return GenericScripting}();r.GenericScripting=o},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFPrintService=PDFPrintService;var a=i(4),o=i(2),l=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(i(40)),c=i(189),u=i(41);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,o,l,c,u=[],d=!0,h=!1;try{if(l=(i=i.call(t)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=l.call(i)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(t){h=!0,o=t}finally{try{if(!d&&null!=i.return&&(c=i.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var d=null,h=null,p=null;function renderPage(t,r,i,o,c,h,p){var v=d.scratchCanvas,y=c/a.PixelsPerInch.PDF,g=1,m=Math.floor(o.width*y),b=Math.floor(o.height*y);if(m>=4096||b>=4096){if(!l.default.test({width:m,height:b})){var w=function determineMaxDimensions(){for(var t=0,r=[4096,8192,10836,11180,11402,14188,16384];t<r.length;t++){var i=r[t];if(!l.default.test({width:i+1,height:i+1}))return i}return 16384}();g=.95*Math.min(w/m,w/b)}(0,u.warn)("Page "+i+": Reduced the [printResolution] to "+Math.floor(c*g)+" because the browser can't render larger canvases. If you see blank page in the print preview, reduce [printResolution] manually to a lower value.")}y*=g;v.width=Math.floor(o.width*y);v.height=Math.floor(o.height*y);var P=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:!0}:void 0,S=v.getContext("2d",P);S.save();S.fillStyle="rgb(255, 255, 255)";S.fillRect(0,0,v.width,v.height);S.restore();return Promise.all([r.getPage(i),p]).then((function(t){var r=_slicedToArray(t,2),i=r[0],l=r[1],c={canvasContext:S,transform:[y,0,0,y,0,0],viewport:i.getViewport({scale:1,rotation:o.rotation}),intent:"print",annotationMode:a.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:h,printAnnotationStorage:l};return i.render(c).promise}))}function PDFPrintService(t,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0;this.pdfDocument=t;this.pagesOverview=r;this.printContainer=i;this._printResolution=a||150;this._optionalContentConfigPromise=o||t.getOptionalContentConfig();this._printAnnotationStoragePromise=l||Promise.resolve();this.l10n=c;this.currentPage=-1;this.scratchCanvas=document.createElement("canvas");this.eventBus=u}PDFPrintService.prototype={layout:function layout(){this.throwIfInactive();var t=document.querySelector("body");t.setAttribute("data-pdfjsprinting",!0);document.querySelector("html").setAttribute("data-pdfjsprinting",!0);this.pagesOverview.every((function(t){return t.width===this.pagesOverview[0].width&&t.height===this.pagesOverview[0].height}),this)||globalThis.ngxConsole.warn("Not all pages have the same size. The printed result may be incorrect!");this.pageStyleSheet=document.createElement("style");var r=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+r.width+"pt "+r.height+"pt;}";t.append(this.pageStyleSheet)},destroy:function destroy(){if(d===this){this.printContainer.textContent="";document.querySelector("body").removeAttribute("data-pdfjsprinting");document.querySelector("html").removeAttribute("data-pdfjsprinting");if(this.pageStyleSheet){this.pageStyleSheet.remove();this.pageStyleSheet=null}this.scratchCanvas.width=this.scratchCanvas.height=0;this.scratchCanvas=null;d=null;ensureOverlay().then((function(){if(p.active===h){p.close(h);p.unregister(h)}}));v=void 0}},renderPages:function renderPages(){var t=this;if(this.pdfDocument.isPureXfa){(0,c.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument);return Promise.resolve()}var r=this.pagesOverview.length;return new Promise((function renderNextPage(i,a){t.throwIfInactive();for(;;){++t.currentPage;if(t.currentPage>=r)break;if(!window.isInPDFPrintRange||window.isInPDFPrintRange(t.currentPage))break}if(t.currentPage>=r){renderProgress(window.filteredPageCount|r,window.filteredPageCount|r,t.l10n,t.eventBus);i()}else{var o=t.currentPage;renderProgress(o,window.filteredPageCount|r,t.l10n,t.eventBus);renderPage(0,t.pdfDocument,o+1,t.pagesOverview[o],t._printResolution,t._optionalContentConfigPromise,t._printAnnotationStoragePromise).then(t.useRenderedPage.bind(t)).then((function(){renderNextPage(i,a)}),a)}}))},useRenderedPage:function useRenderedPage(){this.throwIfInactive();var t=document.createElement("img"),r=this.scratchCanvas;"toBlob"in r?r.toBlob((function(r){t.src=URL.createObjectURL(r)})):t.src=r.toDataURL();var i=document.createElement("div");i.className="printedPage";i.append(t);this.printContainer.append(i);return new Promise((function(r,i){t.onload=r;t.onerror=i}))},performPrint:function performPrint(){var t=this;this.throwIfInactive();return new Promise((function(r){setTimeout((function(){if(t.active){y.call(window);var i=navigator.platform&&["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;setTimeout(r,i?1500:20)}else r()}),0)}))},get active(){return this===d},throwIfInactive:function throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};var v,y=window.print;window.printPDF=function printPdf(){if(o.PDFViewerApplication.enablePrint)if(d)globalThis.ngxConsole.warn("Ignored window.printPDF() because of a pending print job.");else{ensureOverlay().then((function(){d&&p.open(h)}));try{dispatchEvent("beforeprint")}finally{if(!d){globalThis.ngxConsole.error("Expected print service to be initialized.");ensureOverlay().then((function(){p.active===h&&p.close(h)}));return}var t=d;d.renderPages().then((function(){var r=document.getElementById("printServiceDialog");r&&r.classList.add("hidden");return t.performPrint()})).catch((function(){})).then((function(){t.active&&abort()}))}}};function dispatchEvent(t){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!1,!1,"custom");window.dispatchEvent(r)}function abort(){if(d){d.destroy();dispatchEvent("afterprint")}}function renderProgress(t,r,i,a){h=document.getElementById("printServiceDialog");var o=Math.round(100*t/r),l=h.querySelector("progress"),c=h.querySelector(".relative-progress");l.value=o;i.get("print_progress_percent",{progress:o}).then((function(t){c.textContent=t}));a.dispatch("progress",{source:this,type:"print",total:r,page:t,percent:100*t/r})}window.addEventListener("keydown",(function(t){if(80===t.keyCode&&(t.ctrlKey||t.metaKey)&&!t.altKey&&(!t.shiftKey||window.chrome||window.opera)){window.print();t.preventDefault();t.stopImmediatePropagation()}}),!0);if("onbeforeprint"in window){var g=function stopPropagationIfNeeded(t){"custom"!==t.detail&&t.stopImmediatePropagation()};window.addEventListener("beforeprint",g);window.addEventListener("afterprint",g)}function ensureOverlay(){if(!v){if(!(p=o.PDFViewerApplication.overlayManager))throw new Error("The overlay manager has not yet been initialized.");h=document.getElementById("printServiceDialog");v=p.register(h,!0);document.getElementById("printCancel").onclick=abort;h.addEventListener("close",abort)}return v}o.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService:function createPrintService(t,r,i,a,o,l,c,u){if(d)throw new Error("The print service is created and active.");return d=new PDFPrintService(t,r,i,a,o,l,c,u)}}},(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getXfaHtmlForPrinting=function getXfaHtmlForPrinting(t,r){var i,c=r.allXfaHtml,u=new o.SimpleLinkService,d=Math.round(100*a.PixelsPerInch.PDF_TO_CSS_UNITS)/100,h=function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}(c.children);try{for(h.s();!(i=h.n()).done;){var p=i.value,v=document.createElement("div");v.className="xfaPrintedPage";t.append(v);var y=new l.XfaLayerBuilder({pageDiv:v,pdfPage:null,annotationStorage:r.annotationStorage,linkService:u,xfaHtml:p}),g=(0,a.getXfaPageViewport)(p,{scale:d});y.render(g,"print")}}catch(t){h.e(t)}finally{h.f()}};var a=i(4),o=i(7),l=i(179);function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}}],r={};function __webpack_require__(i){var a=r[i];if(void 0!==a)return a.exports;var o=r[i]={exports:{}};t[i](o,o.exports,__webpack_require__);return o.exports}var i={};(()=>{"use strict";var t=i;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"PDFViewerApplication",{enumerable:!0,get:function get(){return u.PDFViewerApplication}});t.PDFViewerApplicationConstants=void 0;Object.defineProperty(t,"PDFViewerApplicationOptions",{enumerable:!0,get:function get(){return l.AppOptions}});__webpack_require__(1);__webpack_require__(188);var r,a,o=__webpack_require__(3),l=__webpack_require__(5),c=__webpack_require__(7),u=__webpack_require__(2),d={LinkTarget:c.LinkTarget,RenderingStates:o.RenderingStates,ScrollMode:o.ScrollMode,SpreadMode:o.SpreadMode};t.PDFViewerApplicationConstants=d;window.PDFViewerApplication=u.PDFViewerApplication;window.PDFViewerApplicationConstants=d;window.PDFViewerApplicationOptions=l.AppOptions;HTMLCollection.prototype[Symbol.iterator]||(HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]);"function"!=typeof window.CustomEvent&&(window.CustomEvent=function CustomEvent(t,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");i.initCustomEvent(t,r.bubbles,r.cancelable,r.detail);return i});null===(r=(a=document).blockUnblockOnload)||void 0===r||r.call(a,!0);window.webViewerLoad=function webViewerLoad(){var t=function getViewerConfiguration(){return{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),editorFreeTextButton:document.getElementById("editorFreeText"),editorFreeTextParamsToolbar:document.getElementById("editorFreeTextParamsToolbar"),editorInkButton:document.getElementById("editorInk"),editorInkParamsToolbar:document.getElementById("editorInkParamsToolbar"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("viewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),sidebarContainer:document.getElementById("sidebarContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),findFieldMultiline:document.getElementById("findInputMultiline"),highlightAllCheckbox:document.getElementById("findHighlightAll"),findCurrentPageCheckbox:document.getElementById("findCurrentPage"),findPageRangeField:document.getElementById("findRange"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),matchDiacriticsCheckbox:document.getElementById("findMatchDiacritics"),entireWordCheckbox:document.getElementById("findEntireWord"),findMultipleSearchTextsCheckbox:document.getElementById("findMultipleSearchTexts"),ignoreAccentsCheckbox:document.getElementById("findIgnoreAccents"),fuzzyCheckbox:document.getElementById("findFuzzy"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{dialog:document.getElementById("documentPropertiesDialog"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},annotationEditorParams:{editorFreeTextFontSize:document.getElementById("editorFreeTextFontSize"),editorFreeTextColor:document.getElementById("editorFreeTextColor"),editorInkColor:document.getElementById("editorInkColor"),editorInkThickness:document.getElementById("editorInkThickness"),editorInkOpacity:document.getElementById("editorInkOpacity")},printContainer:document.getElementById("printContainer"),openFileInput:document.getElementById("fileInput"),debuggerScriptPath:"./debugger.js"}}(),r=document.createEvent("CustomEvent");r.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.dispatchEvent(r)}catch(t){console.error("webviewerloaded: ".concat(t));document.dispatchEvent(r)}u.PDFViewerApplication.run(t)}})()})();
});
